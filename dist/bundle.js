(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.tschess = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
/*! @license Firebase v2.3.2
    License: https://www.firebase.com/terms/terms-of-service.html */
(function() {var g,aa=this;function n(a){return void 0!==a}function ba(){}function ca(a){a.ub=function(){return a.uf?a.uf:a.uf=new a}}
function da(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ea(a){return"array"==da(a)}function fa(a){var b=da(a);return"array"==b||"object"==b&&"number"==typeof a.length}function p(a){return"string"==typeof a}function ga(a){return"number"==typeof a}function ha(a){return"function"==da(a)}function ia(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function ja(a,b,c){return a.call.apply(a.bind,arguments)}
function ka(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function q(a,b,c){q=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ja:ka;return q.apply(null,arguments)}var la=Date.now||function(){return+new Date};
function ma(a,b){function c(){}c.prototype=b.prototype;a.bh=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Yg=function(a,c,f){for(var h=Array(arguments.length-2),k=2;k<arguments.length;k++)h[k-2]=arguments[k];return b.prototype[c].apply(a,h)}};function r(a,b){for(var c in a)b.call(void 0,a[c],c,a)}function na(a,b){var c={},d;for(d in a)c[d]=b.call(void 0,a[d],d,a);return c}function oa(a,b){for(var c in a)if(!b.call(void 0,a[c],c,a))return!1;return!0}function pa(a){var b=0,c;for(c in a)b++;return b}function qa(a){for(var b in a)return b}function ra(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function sa(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function ta(a,b){for(var c in a)if(a[c]==b)return!0;return!1}
function ua(a,b,c){for(var d in a)if(b.call(c,a[d],d,a))return d}function va(a,b){var c=ua(a,b,void 0);return c&&a[c]}function wa(a){for(var b in a)return!1;return!0}function xa(a){var b={},c;for(c in a)b[c]=a[c];return b}var ya="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
function za(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<ya.length;f++)c=ya[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};function Aa(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}throw Error("Invalid JSON string: "+a);}function Ba(){this.Sd=void 0}
function Ca(a,b,c){switch(typeof b){case "string":Da(b,c);break;case "number":c.push(isFinite(b)&&!isNaN(b)?b:"null");break;case "boolean":c.push(b);break;case "undefined":c.push("null");break;case "object":if(null==b){c.push("null");break}if(ea(b)){var d=b.length;c.push("[");for(var e="",f=0;f<d;f++)c.push(e),e=b[f],Ca(a,a.Sd?a.Sd.call(b,String(f),e):e,c),e=",";c.push("]");break}c.push("{");d="";for(f in b)Object.prototype.hasOwnProperty.call(b,f)&&(e=b[f],"function"!=typeof e&&(c.push(d),Da(f,c),
c.push(":"),Ca(a,a.Sd?a.Sd.call(b,f,e):e,c),d=","));c.push("}");break;case "function":break;default:throw Error("Unknown type: "+typeof b);}}var Ea={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\u000b"},Fa=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;
function Da(a,b){b.push('"',a.replace(Fa,function(a){if(a in Ea)return Ea[a];var b=a.charCodeAt(0),e="\\u";16>b?e+="000":256>b?e+="00":4096>b&&(e+="0");return Ea[a]=e+b.toString(16)}),'"')};function Ga(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^la()).toString(36)};var Ha;a:{var Ia=aa.navigator;if(Ia){var Ja=Ia.userAgent;if(Ja){Ha=Ja;break a}}Ha=""};function Ka(){this.Va=-1};function La(){this.Va=-1;this.Va=64;this.N=[];this.me=[];this.Wf=[];this.Ld=[];this.Ld[0]=128;for(var a=1;a<this.Va;++a)this.Ld[a]=0;this.de=this.ac=0;this.reset()}ma(La,Ka);La.prototype.reset=function(){this.N[0]=1732584193;this.N[1]=4023233417;this.N[2]=2562383102;this.N[3]=271733878;this.N[4]=3285377520;this.de=this.ac=0};
function Ma(a,b,c){c||(c=0);var d=a.Wf;if(p(b))for(var e=0;16>e;e++)d[e]=b.charCodeAt(c)<<24|b.charCodeAt(c+1)<<16|b.charCodeAt(c+2)<<8|b.charCodeAt(c+3),c+=4;else for(e=0;16>e;e++)d[e]=b[c]<<24|b[c+1]<<16|b[c+2]<<8|b[c+3],c+=4;for(e=16;80>e;e++){var f=d[e-3]^d[e-8]^d[e-14]^d[e-16];d[e]=(f<<1|f>>>31)&4294967295}b=a.N[0];c=a.N[1];for(var h=a.N[2],k=a.N[3],l=a.N[4],m,e=0;80>e;e++)40>e?20>e?(f=k^c&(h^k),m=1518500249):(f=c^h^k,m=1859775393):60>e?(f=c&h|k&(c|h),m=2400959708):(f=c^h^k,m=3395469782),f=(b<<
5|b>>>27)+f+l+m+d[e]&4294967295,l=k,k=h,h=(c<<30|c>>>2)&4294967295,c=b,b=f;a.N[0]=a.N[0]+b&4294967295;a.N[1]=a.N[1]+c&4294967295;a.N[2]=a.N[2]+h&4294967295;a.N[3]=a.N[3]+k&4294967295;a.N[4]=a.N[4]+l&4294967295}
La.prototype.update=function(a,b){if(null!=a){n(b)||(b=a.length);for(var c=b-this.Va,d=0,e=this.me,f=this.ac;d<b;){if(0==f)for(;d<=c;)Ma(this,a,d),d+=this.Va;if(p(a))for(;d<b;){if(e[f]=a.charCodeAt(d),++f,++d,f==this.Va){Ma(this,e);f=0;break}}else for(;d<b;)if(e[f]=a[d],++f,++d,f==this.Va){Ma(this,e);f=0;break}}this.ac=f;this.de+=b}};var u=Array.prototype,Na=u.indexOf?function(a,b,c){return u.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(p(a))return p(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Oa=u.forEach?function(a,b,c){u.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=p(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Pa=u.filter?function(a,b,c){return u.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],f=0,h=p(a)?
a.split(""):a,k=0;k<d;k++)if(k in h){var l=h[k];b.call(c,l,k,a)&&(e[f++]=l)}return e},Qa=u.map?function(a,b,c){return u.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=p(a)?a.split(""):a,h=0;h<d;h++)h in f&&(e[h]=b.call(c,f[h],h,a));return e},Ra=u.reduce?function(a,b,c,d){for(var e=[],f=1,h=arguments.length;f<h;f++)e.push(arguments[f]);d&&(e[0]=q(b,d));return u.reduce.apply(a,e)}:function(a,b,c,d){var e=c;Oa(a,function(c,h){e=b.call(d,e,c,h,a)});return e},Sa=u.every?function(a,b,
c){return u.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=p(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&!b.call(c,e[f],f,a))return!1;return!0};function Ta(a,b){var c=Ua(a,b,void 0);return 0>c?null:p(a)?a.charAt(c):a[c]}function Ua(a,b,c){for(var d=a.length,e=p(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return f;return-1}function Va(a,b){var c=Na(a,b);0<=c&&u.splice.call(a,c,1)}function Wa(a,b,c){return 2>=arguments.length?u.slice.call(a,b):u.slice.call(a,b,c)}
function Xa(a,b){a.sort(b||Ya)}function Ya(a,b){return a>b?1:a<b?-1:0};var Za=-1!=Ha.indexOf("Opera")||-1!=Ha.indexOf("OPR"),$a=-1!=Ha.indexOf("Trident")||-1!=Ha.indexOf("MSIE"),ab=-1!=Ha.indexOf("Gecko")&&-1==Ha.toLowerCase().indexOf("webkit")&&!(-1!=Ha.indexOf("Trident")||-1!=Ha.indexOf("MSIE")),bb=-1!=Ha.toLowerCase().indexOf("webkit");
(function(){var a="",b;if(Za&&aa.opera)return a=aa.opera.version,ha(a)?a():a;ab?b=/rv\:([^\);]+)(\)|;)/:$a?b=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:bb&&(b=/WebKit\/(\S+)/);b&&(a=(a=b.exec(Ha))?a[1]:"");return $a&&(b=(b=aa.document)?b.documentMode:void 0,b>parseFloat(a))?String(b):a})();var cb=null,db=null,eb=null;function fb(a,b){if(!fa(a))throw Error("encodeByteArray takes an array as a parameter");gb();for(var c=b?db:cb,d=[],e=0;e<a.length;e+=3){var f=a[e],h=e+1<a.length,k=h?a[e+1]:0,l=e+2<a.length,m=l?a[e+2]:0,t=f>>2,f=(f&3)<<4|k>>4,k=(k&15)<<2|m>>6,m=m&63;l||(m=64,h||(k=64));d.push(c[t],c[f],c[k],c[m])}return d.join("")}
function gb(){if(!cb){cb={};db={};eb={};for(var a=0;65>a;a++)cb[a]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(a),db[a]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(a),eb[db[a]]=a,62<=a&&(eb["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(a)]=a)}};var hb=hb||"2.3.2";function v(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function w(a,b){if(Object.prototype.hasOwnProperty.call(a,b))return a[b]}function ib(a,b){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b(c,a[c])}function jb(a){var b={};ib(a,function(a,d){b[a]=d});return b};function kb(a){var b=[];ib(a,function(a,d){ea(d)?Oa(d,function(d){b.push(encodeURIComponent(a)+"="+encodeURIComponent(d))}):b.push(encodeURIComponent(a)+"="+encodeURIComponent(d))});return b.length?"&"+b.join("&"):""}function lb(a){var b={};a=a.replace(/^\?/,"").split("&");Oa(a,function(a){a&&(a=a.split("="),b[a[0]]=a[1])});return b};function x(a,b,c,d){var e;d<b?e="at least "+b:d>c&&(e=0===c?"none":"no more than "+c);if(e)throw Error(a+" failed: Was called with "+d+(1===d?" argument.":" arguments.")+" Expects "+e+".");}function y(a,b,c){var d="";switch(b){case 1:d=c?"first":"First";break;case 2:d=c?"second":"Second";break;case 3:d=c?"third":"Third";break;case 4:d=c?"fourth":"Fourth";break;default:throw Error("errorPrefix called with argumentNumber > 4.  Need to update it?");}return a=a+" failed: "+(d+" argument ")}
function A(a,b,c,d){if((!d||n(c))&&!ha(c))throw Error(y(a,b,d)+"must be a valid function.");}function mb(a,b,c){if(n(c)&&(!ia(c)||null===c))throw Error(y(a,b,!0)+"must be a valid context object.");};function nb(a){return"undefined"!==typeof JSON&&n(JSON.parse)?JSON.parse(a):Aa(a)}function B(a){if("undefined"!==typeof JSON&&n(JSON.stringify))a=JSON.stringify(a);else{var b=[];Ca(new Ba,a,b);a=b.join("")}return a};function ob(){this.Wd=C}ob.prototype.j=function(a){return this.Wd.Q(a)};ob.prototype.toString=function(){return this.Wd.toString()};function pb(){}pb.prototype.qf=function(){return null};pb.prototype.ye=function(){return null};var qb=new pb;function rb(a,b,c){this.Tf=a;this.Ka=b;this.Kd=c}rb.prototype.qf=function(a){var b=this.Ka.O;if(sb(b,a))return b.j().R(a);b=null!=this.Kd?new tb(this.Kd,!0,!1):this.Ka.w();return this.Tf.xc(a,b)};rb.prototype.ye=function(a,b,c){var d=null!=this.Kd?this.Kd:ub(this.Ka);a=this.Tf.ne(d,b,1,c,a);return 0===a.length?null:a[0]};function vb(){this.tb=[]}function wb(a,b){for(var c=null,d=0;d<b.length;d++){var e=b[d],f=e.Zb();null===c||f.ca(c.Zb())||(a.tb.push(c),c=null);null===c&&(c=new xb(f));c.add(e)}c&&a.tb.push(c)}function yb(a,b,c){wb(a,c);zb(a,function(a){return a.ca(b)})}function Ab(a,b,c){wb(a,c);zb(a,function(a){return a.contains(b)||b.contains(a)})}
function zb(a,b){for(var c=!0,d=0;d<a.tb.length;d++){var e=a.tb[d];if(e)if(e=e.Zb(),b(e)){for(var e=a.tb[d],f=0;f<e.vd.length;f++){var h=e.vd[f];if(null!==h){e.vd[f]=null;var k=h.Vb();Bb&&Cb("event: "+h.toString());Db(k)}}a.tb[d]=null}else c=!1}c&&(a.tb=[])}function xb(a){this.ra=a;this.vd=[]}xb.prototype.add=function(a){this.vd.push(a)};xb.prototype.Zb=function(){return this.ra};function D(a,b,c,d){this.type=a;this.Ja=b;this.Wa=c;this.Ke=d;this.Qd=void 0}function Eb(a){return new D(Fb,a)}var Fb="value";function Gb(a,b,c,d){this.ue=b;this.Zd=c;this.Qd=d;this.ud=a}Gb.prototype.Zb=function(){var a=this.Zd.Ib();return"value"===this.ud?a.path:a.parent().path};Gb.prototype.ze=function(){return this.ud};Gb.prototype.Vb=function(){return this.ue.Vb(this)};Gb.prototype.toString=function(){return this.Zb().toString()+":"+this.ud+":"+B(this.Zd.mf())};function Hb(a,b,c){this.ue=a;this.error=b;this.path=c}Hb.prototype.Zb=function(){return this.path};Hb.prototype.ze=function(){return"cancel"};
Hb.prototype.Vb=function(){return this.ue.Vb(this)};Hb.prototype.toString=function(){return this.path.toString()+":cancel"};function tb(a,b,c){this.A=a;this.ea=b;this.Ub=c}function Ib(a){return a.ea}function Jb(a){return a.Ub}function Kb(a,b){return b.e()?a.ea&&!a.Ub:sb(a,E(b))}function sb(a,b){return a.ea&&!a.Ub||a.A.Da(b)}tb.prototype.j=function(){return this.A};function Lb(a){this.gg=a;this.Dd=null}Lb.prototype.get=function(){var a=this.gg.get(),b=xa(a);if(this.Dd)for(var c in this.Dd)b[c]-=this.Dd[c];this.Dd=a;return b};function Mb(a,b){this.Of={};this.fd=new Lb(a);this.ba=b;var c=1E4+2E4*Math.random();setTimeout(q(this.If,this),Math.floor(c))}Mb.prototype.If=function(){var a=this.fd.get(),b={},c=!1,d;for(d in a)0<a[d]&&v(this.Of,d)&&(b[d]=a[d],c=!0);c&&this.ba.Ue(b);setTimeout(q(this.If,this),Math.floor(6E5*Math.random()))};function Nb(){this.Ec={}}function Ob(a,b,c){n(c)||(c=1);v(a.Ec,b)||(a.Ec[b]=0);a.Ec[b]+=c}Nb.prototype.get=function(){return xa(this.Ec)};var Pb={},Qb={};function Rb(a){a=a.toString();Pb[a]||(Pb[a]=new Nb);return Pb[a]}function Sb(a,b){var c=a.toString();Qb[c]||(Qb[c]=b());return Qb[c]};function F(a,b){this.name=a;this.S=b}function Tb(a,b){return new F(a,b)};function Ub(a,b){return Vb(a.name,b.name)}function Wb(a,b){return Vb(a,b)};function Xb(a,b,c){this.type=Yb;this.source=a;this.path=b;this.Ga=c}Xb.prototype.Xc=function(a){return this.path.e()?new Xb(this.source,G,this.Ga.R(a)):new Xb(this.source,H(this.path),this.Ga)};Xb.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" overwrite: "+this.Ga.toString()+")"};function Zb(a,b){this.type=$b;this.source=a;this.path=b}Zb.prototype.Xc=function(){return this.path.e()?new Zb(this.source,G):new Zb(this.source,H(this.path))};Zb.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" listen_complete)"};function ac(a,b){this.La=a;this.wa=b?b:bc}g=ac.prototype;g.Oa=function(a,b){return new ac(this.La,this.wa.Oa(a,b,this.La).Y(null,null,!1,null,null))};g.remove=function(a){return new ac(this.La,this.wa.remove(a,this.La).Y(null,null,!1,null,null))};g.get=function(a){for(var b,c=this.wa;!c.e();){b=this.La(a,c.key);if(0===b)return c.value;0>b?c=c.left:0<b&&(c=c.right)}return null};
function cc(a,b){for(var c,d=a.wa,e=null;!d.e();){c=a.La(b,d.key);if(0===c){if(d.left.e())return e?e.key:null;for(d=d.left;!d.right.e();)d=d.right;return d.key}0>c?d=d.left:0<c&&(e=d,d=d.right)}throw Error("Attempted to find predecessor key for a nonexistent key.  What gives?");}g.e=function(){return this.wa.e()};g.count=function(){return this.wa.count()};g.Sc=function(){return this.wa.Sc()};g.fc=function(){return this.wa.fc()};g.ia=function(a){return this.wa.ia(a)};
g.Xb=function(a){return new dc(this.wa,null,this.La,!1,a)};g.Yb=function(a,b){return new dc(this.wa,a,this.La,!1,b)};g.$b=function(a,b){return new dc(this.wa,a,this.La,!0,b)};g.sf=function(a){return new dc(this.wa,null,this.La,!0,a)};function dc(a,b,c,d,e){this.Ud=e||null;this.Fe=d;this.Pa=[];for(e=1;!a.e();)if(e=b?c(a.key,b):1,d&&(e*=-1),0>e)a=this.Fe?a.left:a.right;else if(0===e){this.Pa.push(a);break}else this.Pa.push(a),a=this.Fe?a.right:a.left}
function J(a){if(0===a.Pa.length)return null;var b=a.Pa.pop(),c;c=a.Ud?a.Ud(b.key,b.value):{key:b.key,value:b.value};if(a.Fe)for(b=b.left;!b.e();)a.Pa.push(b),b=b.right;else for(b=b.right;!b.e();)a.Pa.push(b),b=b.left;return c}function ec(a){if(0===a.Pa.length)return null;var b;b=a.Pa;b=b[b.length-1];return a.Ud?a.Ud(b.key,b.value):{key:b.key,value:b.value}}function fc(a,b,c,d,e){this.key=a;this.value=b;this.color=null!=c?c:!0;this.left=null!=d?d:bc;this.right=null!=e?e:bc}g=fc.prototype;
g.Y=function(a,b,c,d,e){return new fc(null!=a?a:this.key,null!=b?b:this.value,null!=c?c:this.color,null!=d?d:this.left,null!=e?e:this.right)};g.count=function(){return this.left.count()+1+this.right.count()};g.e=function(){return!1};g.ia=function(a){return this.left.ia(a)||a(this.key,this.value)||this.right.ia(a)};function gc(a){return a.left.e()?a:gc(a.left)}g.Sc=function(){return gc(this).key};g.fc=function(){return this.right.e()?this.key:this.right.fc()};
g.Oa=function(a,b,c){var d,e;e=this;d=c(a,e.key);e=0>d?e.Y(null,null,null,e.left.Oa(a,b,c),null):0===d?e.Y(null,b,null,null,null):e.Y(null,null,null,null,e.right.Oa(a,b,c));return hc(e)};function ic(a){if(a.left.e())return bc;a.left.fa()||a.left.left.fa()||(a=jc(a));a=a.Y(null,null,null,ic(a.left),null);return hc(a)}
g.remove=function(a,b){var c,d;c=this;if(0>b(a,c.key))c.left.e()||c.left.fa()||c.left.left.fa()||(c=jc(c)),c=c.Y(null,null,null,c.left.remove(a,b),null);else{c.left.fa()&&(c=kc(c));c.right.e()||c.right.fa()||c.right.left.fa()||(c=lc(c),c.left.left.fa()&&(c=kc(c),c=lc(c)));if(0===b(a,c.key)){if(c.right.e())return bc;d=gc(c.right);c=c.Y(d.key,d.value,null,null,ic(c.right))}c=c.Y(null,null,null,null,c.right.remove(a,b))}return hc(c)};g.fa=function(){return this.color};
function hc(a){a.right.fa()&&!a.left.fa()&&(a=mc(a));a.left.fa()&&a.left.left.fa()&&(a=kc(a));a.left.fa()&&a.right.fa()&&(a=lc(a));return a}function jc(a){a=lc(a);a.right.left.fa()&&(a=a.Y(null,null,null,null,kc(a.right)),a=mc(a),a=lc(a));return a}function mc(a){return a.right.Y(null,null,a.color,a.Y(null,null,!0,null,a.right.left),null)}function kc(a){return a.left.Y(null,null,a.color,null,a.Y(null,null,!0,a.left.right,null))}
function lc(a){return a.Y(null,null,!a.color,a.left.Y(null,null,!a.left.color,null,null),a.right.Y(null,null,!a.right.color,null,null))}function nc(){}g=nc.prototype;g.Y=function(){return this};g.Oa=function(a,b){return new fc(a,b,null)};g.remove=function(){return this};g.count=function(){return 0};g.e=function(){return!0};g.ia=function(){return!1};g.Sc=function(){return null};g.fc=function(){return null};g.fa=function(){return!1};var bc=new nc;function oc(a,b){return a&&"object"===typeof a?(K(".sv"in a,"Unexpected leaf node or priority contents"),b[a[".sv"]]):a}function pc(a,b){var c=new qc;rc(a,new L(""),function(a,e){c.nc(a,sc(e,b))});return c}function sc(a,b){var c=a.C().I(),c=oc(c,b),d;if(a.K()){var e=oc(a.Ca(),b);return e!==a.Ca()||c!==a.C().I()?new tc(e,M(c)):a}d=a;c!==a.C().I()&&(d=d.ga(new tc(c)));a.P(N,function(a,c){var e=sc(c,b);e!==c&&(d=d.U(a,e))});return d};function uc(){this.wc={}}uc.prototype.set=function(a,b){null==b?delete this.wc[a]:this.wc[a]=b};uc.prototype.get=function(a){return v(this.wc,a)?this.wc[a]:null};uc.prototype.remove=function(a){delete this.wc[a]};uc.prototype.wf=!0;function vc(a){this.Fc=a;this.Pd="firebase:"}g=vc.prototype;g.set=function(a,b){null==b?this.Fc.removeItem(this.Pd+a):this.Fc.setItem(this.Pd+a,B(b))};g.get=function(a){a=this.Fc.getItem(this.Pd+a);return null==a?null:nb(a)};g.remove=function(a){this.Fc.removeItem(this.Pd+a)};g.wf=!1;g.toString=function(){return this.Fc.toString()};function wc(a){try{if("undefined"!==typeof window&&"undefined"!==typeof window[a]){var b=window[a];b.setItem("firebase:sentinel","cache");b.removeItem("firebase:sentinel");return new vc(b)}}catch(c){}return new uc}var xc=wc("localStorage"),yc=wc("sessionStorage");function zc(a,b,c,d,e){this.host=a.toLowerCase();this.domain=this.host.substr(this.host.indexOf(".")+1);this.kb=b;this.hc=c;this.Wg=d;this.Od=e||"";this.Ya=xc.get("host:"+a)||this.host}function Ac(a,b){b!==a.Ya&&(a.Ya=b,"s-"===a.Ya.substr(0,2)&&xc.set("host:"+a.host,a.Ya))}
function Bc(a,b,c){K("string"===typeof b,"typeof type must == string");K("object"===typeof c,"typeof params must == object");if(b===Cc)b=(a.kb?"wss://":"ws://")+a.Ya+"/.ws?";else if(b===Dc)b=(a.kb?"https://":"http://")+a.Ya+"/.lp?";else throw Error("Unknown connection type: "+b);a.host!==a.Ya&&(c.ns=a.hc);var d=[];r(c,function(a,b){d.push(b+"="+a)});return b+d.join("&")}zc.prototype.toString=function(){var a=(this.kb?"https://":"http://")+this.host;this.Od&&(a+="<"+this.Od+">");return a};var Ec=function(){var a=1;return function(){return a++}}();function K(a,b){if(!a)throw Fc(b);}function Fc(a){return Error("Firebase ("+hb+") INTERNAL ASSERT FAILED: "+a)}
function Gc(a){try{var b;if("undefined"!==typeof atob)b=atob(a);else{gb();for(var c=eb,d=[],e=0;e<a.length;){var f=c[a.charAt(e++)],h=e<a.length?c[a.charAt(e)]:0;++e;var k=e<a.length?c[a.charAt(e)]:64;++e;var l=e<a.length?c[a.charAt(e)]:64;++e;if(null==f||null==h||null==k||null==l)throw Error();d.push(f<<2|h>>4);64!=k&&(d.push(h<<4&240|k>>2),64!=l&&d.push(k<<6&192|l))}if(8192>d.length)b=String.fromCharCode.apply(null,d);else{a="";for(c=0;c<d.length;c+=8192)a+=String.fromCharCode.apply(null,Wa(d,c,
c+8192));b=a}}return b}catch(m){Cb("base64Decode failed: ",m)}return null}function Hc(a){var b=Ic(a);a=new La;a.update(b);var b=[],c=8*a.de;56>a.ac?a.update(a.Ld,56-a.ac):a.update(a.Ld,a.Va-(a.ac-56));for(var d=a.Va-1;56<=d;d--)a.me[d]=c&255,c/=256;Ma(a,a.me);for(d=c=0;5>d;d++)for(var e=24;0<=e;e-=8)b[c]=a.N[d]>>e&255,++c;return fb(b)}
function Jc(a){for(var b="",c=0;c<arguments.length;c++)b=fa(arguments[c])?b+Jc.apply(null,arguments[c]):"object"===typeof arguments[c]?b+B(arguments[c]):b+arguments[c],b+=" ";return b}var Bb=null,Kc=!0;function Cb(a){!0===Kc&&(Kc=!1,null===Bb&&!0===yc.get("logging_enabled")&&Lc(!0));if(Bb){var b=Jc.apply(null,arguments);Bb(b)}}function Mc(a){return function(){Cb(a,arguments)}}
function Nc(a){if("undefined"!==typeof console){var b="FIREBASE INTERNAL ERROR: "+Jc.apply(null,arguments);"undefined"!==typeof console.error?console.error(b):console.log(b)}}function Oc(a){var b=Jc.apply(null,arguments);throw Error("FIREBASE FATAL ERROR: "+b);}function O(a){if("undefined"!==typeof console){var b="FIREBASE WARNING: "+Jc.apply(null,arguments);"undefined"!==typeof console.warn?console.warn(b):console.log(b)}}
function Pc(a){var b="",c="",d="",e="",f=!0,h="https",k=443;if(p(a)){var l=a.indexOf("//");0<=l&&(h=a.substring(0,l-1),a=a.substring(l+2));l=a.indexOf("/");-1===l&&(l=a.length);b=a.substring(0,l);e="";a=a.substring(l).split("/");for(l=0;l<a.length;l++)if(0<a[l].length){var m=a[l];try{m=decodeURIComponent(m.replace(/\+/g," "))}catch(t){}e+="/"+m}a=b.split(".");3===a.length?(c=a[1],d=a[0].toLowerCase()):2===a.length&&(c=a[0]);l=b.indexOf(":");0<=l&&(f="https"===h||"wss"===h,k=b.substring(l+1),isFinite(k)&&
(k=String(k)),k=p(k)?/^\s*-?0x/i.test(k)?parseInt(k,16):parseInt(k,10):NaN)}return{host:b,port:k,domain:c,Tg:d,kb:f,scheme:h,$c:e}}function Qc(a){return ga(a)&&(a!=a||a==Number.POSITIVE_INFINITY||a==Number.NEGATIVE_INFINITY)}
function Rc(a){if("complete"===document.readyState)a();else{var b=!1,c=function(){document.body?b||(b=!0,a()):setTimeout(c,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",c,!1),window.addEventListener("load",c,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&c()}),window.attachEvent("onload",c))}}
function Vb(a,b){if(a===b)return 0;if("[MIN_NAME]"===a||"[MAX_NAME]"===b)return-1;if("[MIN_NAME]"===b||"[MAX_NAME]"===a)return 1;var c=Sc(a),d=Sc(b);return null!==c?null!==d?0==c-d?a.length-b.length:c-d:-1:null!==d?1:a<b?-1:1}function Tc(a,b){if(b&&a in b)return b[a];throw Error("Missing required key ("+a+") in object: "+B(b));}
function Uc(a){if("object"!==typeof a||null===a)return B(a);var b=[],c;for(c in a)b.push(c);b.sort();c="{";for(var d=0;d<b.length;d++)0!==d&&(c+=","),c+=B(b[d]),c+=":",c+=Uc(a[b[d]]);return c+"}"}function Vc(a,b){if(a.length<=b)return[a];for(var c=[],d=0;d<a.length;d+=b)d+b>a?c.push(a.substring(d,a.length)):c.push(a.substring(d,d+b));return c}function Wc(a,b){if(ea(a))for(var c=0;c<a.length;++c)b(c,a[c]);else r(a,b)}
function Xc(a){K(!Qc(a),"Invalid JSON number");var b,c,d,e;0===a?(d=c=0,b=-Infinity===1/a?1:0):(b=0>a,a=Math.abs(a),a>=Math.pow(2,-1022)?(d=Math.min(Math.floor(Math.log(a)/Math.LN2),1023),c=d+1023,d=Math.round(a*Math.pow(2,52-d)-Math.pow(2,52))):(c=0,d=Math.round(a/Math.pow(2,-1074))));e=[];for(a=52;a;--a)e.push(d%2?1:0),d=Math.floor(d/2);for(a=11;a;--a)e.push(c%2?1:0),c=Math.floor(c/2);e.push(b?1:0);e.reverse();b=e.join("");c="";for(a=0;64>a;a+=8)d=parseInt(b.substr(a,8),2).toString(16),1===d.length&&
(d="0"+d),c+=d;return c.toLowerCase()}var Yc=/^-?\d{1,10}$/;function Sc(a){return Yc.test(a)&&(a=Number(a),-2147483648<=a&&2147483647>=a)?a:null}function Db(a){try{a()}catch(b){setTimeout(function(){O("Exception was thrown by user callback.",b.stack||"");throw b;},Math.floor(0))}}function P(a,b){if(ha(a)){var c=Array.prototype.slice.call(arguments,1).slice();Db(function(){a.apply(null,c)})}};function Ic(a){for(var b=[],c=0,d=0;d<a.length;d++){var e=a.charCodeAt(d);55296<=e&&56319>=e&&(e-=55296,d++,K(d<a.length,"Surrogate pair missing trail surrogate."),e=65536+(e<<10)+(a.charCodeAt(d)-56320));128>e?b[c++]=e:(2048>e?b[c++]=e>>6|192:(65536>e?b[c++]=e>>12|224:(b[c++]=e>>18|240,b[c++]=e>>12&63|128),b[c++]=e>>6&63|128),b[c++]=e&63|128)}return b}function Zc(a){for(var b=0,c=0;c<a.length;c++){var d=a.charCodeAt(c);128>d?b++:2048>d?b+=2:55296<=d&&56319>=d?(b+=4,c++):b+=3}return b};function $c(a){var b={},c={},d={},e="";try{var f=a.split("."),b=nb(Gc(f[0])||""),c=nb(Gc(f[1])||""),e=f[2],d=c.d||{};delete c.d}catch(h){}return{Zg:b,Bc:c,data:d,Qg:e}}function ad(a){a=$c(a).Bc;return"object"===typeof a&&a.hasOwnProperty("iat")?w(a,"iat"):null}function bd(a){a=$c(a);var b=a.Bc;return!!a.Qg&&!!b&&"object"===typeof b&&b.hasOwnProperty("iat")};function cd(a){this.W=a;this.g=a.n.g}function dd(a,b,c,d){var e=[],f=[];Oa(b,function(b){"child_changed"===b.type&&a.g.Ad(b.Ke,b.Ja)&&f.push(new D("child_moved",b.Ja,b.Wa))});ed(a,e,"child_removed",b,d,c);ed(a,e,"child_added",b,d,c);ed(a,e,"child_moved",f,d,c);ed(a,e,"child_changed",b,d,c);ed(a,e,Fb,b,d,c);return e}function ed(a,b,c,d,e,f){d=Pa(d,function(a){return a.type===c});Xa(d,q(a.hg,a));Oa(d,function(c){var d=fd(a,c,f);Oa(e,function(e){e.Kf(c.type)&&b.push(e.createEvent(d,a.W))})})}
function fd(a,b,c){"value"!==b.type&&"child_removed"!==b.type&&(b.Qd=c.rf(b.Wa,b.Ja,a.g));return b}cd.prototype.hg=function(a,b){if(null==a.Wa||null==b.Wa)throw Fc("Should only compare child_ events.");return this.g.compare(new F(a.Wa,a.Ja),new F(b.Wa,b.Ja))};function gd(){this.bb={}}
function hd(a,b){var c=b.type,d=b.Wa;K("child_added"==c||"child_changed"==c||"child_removed"==c,"Only child changes supported for tracking");K(".priority"!==d,"Only non-priority child changes can be tracked.");var e=w(a.bb,d);if(e){var f=e.type;if("child_added"==c&&"child_removed"==f)a.bb[d]=new D("child_changed",b.Ja,d,e.Ja);else if("child_removed"==c&&"child_added"==f)delete a.bb[d];else if("child_removed"==c&&"child_changed"==f)a.bb[d]=new D("child_removed",e.Ke,d);else if("child_changed"==c&&
"child_added"==f)a.bb[d]=new D("child_added",b.Ja,d);else if("child_changed"==c&&"child_changed"==f)a.bb[d]=new D("child_changed",b.Ja,d,e.Ke);else throw Fc("Illegal combination of changes: "+b+" occurred after "+e);}else a.bb[d]=b};function id(a,b,c){this.Rb=a;this.pb=b;this.rb=c||null}g=id.prototype;g.Kf=function(a){return"value"===a};g.createEvent=function(a,b){var c=b.n.g;return new Gb("value",this,new Q(a.Ja,b.Ib(),c))};g.Vb=function(a){var b=this.rb;if("cancel"===a.ze()){K(this.pb,"Raising a cancel event on a listener with no cancel callback");var c=this.pb;return function(){c.call(b,a.error)}}var d=this.Rb;return function(){d.call(b,a.Zd)}};g.gf=function(a,b){return this.pb?new Hb(this,a,b):null};
g.matches=function(a){return a instanceof id?a.Rb&&this.Rb?a.Rb===this.Rb&&a.rb===this.rb:!0:!1};g.tf=function(){return null!==this.Rb};function jd(a,b,c){this.ha=a;this.pb=b;this.rb=c}g=jd.prototype;g.Kf=function(a){a="children_added"===a?"child_added":a;return("children_removed"===a?"child_removed":a)in this.ha};g.gf=function(a,b){return this.pb?new Hb(this,a,b):null};
g.createEvent=function(a,b){K(null!=a.Wa,"Child events should have a childName.");var c=b.Ib().u(a.Wa);return new Gb(a.type,this,new Q(a.Ja,c,b.n.g),a.Qd)};g.Vb=function(a){var b=this.rb;if("cancel"===a.ze()){K(this.pb,"Raising a cancel event on a listener with no cancel callback");var c=this.pb;return function(){c.call(b,a.error)}}var d=this.ha[a.ud];return function(){d.call(b,a.Zd,a.Qd)}};
g.matches=function(a){if(a instanceof jd){if(!this.ha||!a.ha)return!0;if(this.rb===a.rb){var b=pa(a.ha);if(b===pa(this.ha)){if(1===b){var b=qa(a.ha),c=qa(this.ha);return c===b&&(!a.ha[b]||!this.ha[c]||a.ha[b]===this.ha[c])}return oa(this.ha,function(b,c){return a.ha[c]===b})}}}return!1};g.tf=function(){return null!==this.ha};function kd(a){this.g=a}g=kd.prototype;g.G=function(a,b,c,d,e,f){K(a.Jc(this.g),"A node must be indexed if only a child is updated");e=a.R(b);if(e.Q(d).ca(c.Q(d))&&e.e()==c.e())return a;null!=f&&(c.e()?a.Da(b)?hd(f,new D("child_removed",e,b)):K(a.K(),"A child remove without an old child only makes sense on a leaf node"):e.e()?hd(f,new D("child_added",c,b)):hd(f,new D("child_changed",c,b,e)));return a.K()&&c.e()?a:a.U(b,c).lb(this.g)};
g.xa=function(a,b,c){null!=c&&(a.K()||a.P(N,function(a,e){b.Da(a)||hd(c,new D("child_removed",e,a))}),b.K()||b.P(N,function(b,e){if(a.Da(b)){var f=a.R(b);f.ca(e)||hd(c,new D("child_changed",e,b,f))}else hd(c,new D("child_added",e,b))}));return b.lb(this.g)};g.ga=function(a,b){return a.e()?C:a.ga(b)};g.Na=function(){return!1};g.Wb=function(){return this};function ld(a){this.Be=new kd(a.g);this.g=a.g;var b;a.ma?(b=md(a),b=a.g.Pc(nd(a),b)):b=a.g.Tc();this.ed=b;a.pa?(b=od(a),a=a.g.Pc(pd(a),b)):a=a.g.Qc();this.Gc=a}g=ld.prototype;g.matches=function(a){return 0>=this.g.compare(this.ed,a)&&0>=this.g.compare(a,this.Gc)};g.G=function(a,b,c,d,e,f){this.matches(new F(b,c))||(c=C);return this.Be.G(a,b,c,d,e,f)};
g.xa=function(a,b,c){b.K()&&(b=C);var d=b.lb(this.g),d=d.ga(C),e=this;b.P(N,function(a,b){e.matches(new F(a,b))||(d=d.U(a,C))});return this.Be.xa(a,d,c)};g.ga=function(a){return a};g.Na=function(){return!0};g.Wb=function(){return this.Be};function qd(a){this.sa=new ld(a);this.g=a.g;K(a.ja,"Only valid if limit has been set");this.ka=a.ka;this.Jb=!rd(a)}g=qd.prototype;g.G=function(a,b,c,d,e,f){this.sa.matches(new F(b,c))||(c=C);return a.R(b).ca(c)?a:a.Db()<this.ka?this.sa.Wb().G(a,b,c,d,e,f):sd(this,a,b,c,e,f)};
g.xa=function(a,b,c){var d;if(b.K()||b.e())d=C.lb(this.g);else if(2*this.ka<b.Db()&&b.Jc(this.g)){d=C.lb(this.g);b=this.Jb?b.$b(this.sa.Gc,this.g):b.Yb(this.sa.ed,this.g);for(var e=0;0<b.Pa.length&&e<this.ka;){var f=J(b),h;if(h=this.Jb?0>=this.g.compare(this.sa.ed,f):0>=this.g.compare(f,this.sa.Gc))d=d.U(f.name,f.S),e++;else break}}else{d=b.lb(this.g);d=d.ga(C);var k,l,m;if(this.Jb){b=d.sf(this.g);k=this.sa.Gc;l=this.sa.ed;var t=td(this.g);m=function(a,b){return t(b,a)}}else b=d.Xb(this.g),k=this.sa.ed,
l=this.sa.Gc,m=td(this.g);for(var e=0,z=!1;0<b.Pa.length;)f=J(b),!z&&0>=m(k,f)&&(z=!0),(h=z&&e<this.ka&&0>=m(f,l))?e++:d=d.U(f.name,C)}return this.sa.Wb().xa(a,d,c)};g.ga=function(a){return a};g.Na=function(){return!0};g.Wb=function(){return this.sa.Wb()};
function sd(a,b,c,d,e,f){var h;if(a.Jb){var k=td(a.g);h=function(a,b){return k(b,a)}}else h=td(a.g);K(b.Db()==a.ka,"");var l=new F(c,d),m=a.Jb?ud(b,a.g):vd(b,a.g),t=a.sa.matches(l);if(b.Da(c)){for(var z=b.R(c),m=e.ye(a.g,m,a.Jb);null!=m&&(m.name==c||b.Da(m.name));)m=e.ye(a.g,m,a.Jb);e=null==m?1:h(m,l);if(t&&!d.e()&&0<=e)return null!=f&&hd(f,new D("child_changed",d,c,z)),b.U(c,d);null!=f&&hd(f,new D("child_removed",z,c));b=b.U(c,C);return null!=m&&a.sa.matches(m)?(null!=f&&hd(f,new D("child_added",
m.S,m.name)),b.U(m.name,m.S)):b}return d.e()?b:t&&0<=h(m,l)?(null!=f&&(hd(f,new D("child_removed",m.S,m.name)),hd(f,new D("child_added",d,c))),b.U(c,d).U(m.name,C)):b};function wd(a,b){this.je=a;this.fg=b}function xd(a){this.V=a}
xd.prototype.ab=function(a,b,c,d){var e=new gd,f;if(b.type===Yb)b.source.we?c=yd(this,a,b.path,b.Ga,c,d,e):(K(b.source.pf,"Unknown source."),f=b.source.af||Jb(a.w())&&!b.path.e(),c=Ad(this,a,b.path,b.Ga,c,d,f,e));else if(b.type===Bd)b.source.we?c=Cd(this,a,b.path,b.children,c,d,e):(K(b.source.pf,"Unknown source."),f=b.source.af||Jb(a.w()),c=Dd(this,a,b.path,b.children,c,d,f,e));else if(b.type===Ed)if(b.Vd)if(b=b.path,null!=c.tc(b))c=a;else{f=new rb(c,a,d);d=a.O.j();if(b.e()||".priority"===E(b))Ib(a.w())?
b=c.za(ub(a)):(b=a.w().j(),K(b instanceof R,"serverChildren would be complete if leaf node"),b=c.yc(b)),b=this.V.xa(d,b,e);else{var h=E(b),k=c.xc(h,a.w());null==k&&sb(a.w(),h)&&(k=d.R(h));b=null!=k?this.V.G(d,h,k,H(b),f,e):a.O.j().Da(h)?this.V.G(d,h,C,H(b),f,e):d;b.e()&&Ib(a.w())&&(d=c.za(ub(a)),d.K()&&(b=this.V.xa(b,d,e)))}d=Ib(a.w())||null!=c.tc(G);c=Fd(a,b,d,this.V.Na())}else c=Gd(this,a,b.path,b.Qb,c,d,e);else if(b.type===$b)d=b.path,b=a.w(),f=b.j(),h=b.ea||d.e(),c=Hd(this,new Id(a.O,new tb(f,
h,b.Ub)),d,c,qb,e);else throw Fc("Unknown operation type: "+b.type);e=ra(e.bb);d=c;b=d.O;b.ea&&(f=b.j().K()||b.j().e(),h=Jd(a),(0<e.length||!a.O.ea||f&&!b.j().ca(h)||!b.j().C().ca(h.C()))&&e.push(Eb(Jd(d))));return new wd(c,e)};
function Hd(a,b,c,d,e,f){var h=b.O;if(null!=d.tc(c))return b;var k;if(c.e())K(Ib(b.w()),"If change path is empty, we must have complete server data"),Jb(b.w())?(e=ub(b),d=d.yc(e instanceof R?e:C)):d=d.za(ub(b)),f=a.V.xa(b.O.j(),d,f);else{var l=E(c);if(".priority"==l)K(1==Kd(c),"Can't have a priority with additional path components"),f=h.j(),k=b.w().j(),d=d.ld(c,f,k),f=null!=d?a.V.ga(f,d):h.j();else{var m=H(c);sb(h,l)?(k=b.w().j(),d=d.ld(c,h.j(),k),d=null!=d?h.j().R(l).G(m,d):h.j().R(l)):d=d.xc(l,
b.w());f=null!=d?a.V.G(h.j(),l,d,m,e,f):h.j()}}return Fd(b,f,h.ea||c.e(),a.V.Na())}function Ad(a,b,c,d,e,f,h,k){var l=b.w();h=h?a.V:a.V.Wb();if(c.e())d=h.xa(l.j(),d,null);else if(h.Na()&&!l.Ub)d=l.j().G(c,d),d=h.xa(l.j(),d,null);else{var m=E(c);if(!Kb(l,c)&&1<Kd(c))return b;var t=H(c);d=l.j().R(m).G(t,d);d=".priority"==m?h.ga(l.j(),d):h.G(l.j(),m,d,t,qb,null)}l=l.ea||c.e();b=new Id(b.O,new tb(d,l,h.Na()));return Hd(a,b,c,e,new rb(e,b,f),k)}
function yd(a,b,c,d,e,f,h){var k=b.O;e=new rb(e,b,f);if(c.e())h=a.V.xa(b.O.j(),d,h),a=Fd(b,h,!0,a.V.Na());else if(f=E(c),".priority"===f)h=a.V.ga(b.O.j(),d),a=Fd(b,h,k.ea,k.Ub);else{c=H(c);var l=k.j().R(f);if(!c.e()){var m=e.qf(f);d=null!=m?".priority"===Ld(c)&&m.Q(c.parent()).e()?m:m.G(c,d):C}l.ca(d)?a=b:(h=a.V.G(k.j(),f,d,c,e,h),a=Fd(b,h,k.ea,a.V.Na()))}return a}
function Cd(a,b,c,d,e,f,h){var k=b;Md(d,function(d,m){var t=c.u(d);sb(b.O,E(t))&&(k=yd(a,k,t,m,e,f,h))});Md(d,function(d,m){var t=c.u(d);sb(b.O,E(t))||(k=yd(a,k,t,m,e,f,h))});return k}function Nd(a,b){Md(b,function(b,d){a=a.G(b,d)});return a}
function Dd(a,b,c,d,e,f,h,k){if(b.w().j().e()&&!Ib(b.w()))return b;var l=b;c=c.e()?d:Od(Pd,c,d);var m=b.w().j();c.children.ia(function(c,d){if(m.Da(c)){var I=b.w().j().R(c),I=Nd(I,d);l=Ad(a,l,new L(c),I,e,f,h,k)}});c.children.ia(function(c,d){var I=!sb(b.w(),c)&&null==d.value;m.Da(c)||I||(I=b.w().j().R(c),I=Nd(I,d),l=Ad(a,l,new L(c),I,e,f,h,k))});return l}
function Gd(a,b,c,d,e,f,h){if(null!=e.tc(c))return b;var k=Jb(b.w()),l=b.w();if(null!=d.value){if(c.e()&&l.ea||Kb(l,c))return Ad(a,b,c,l.j().Q(c),e,f,k,h);if(c.e()){var m=Pd;l.j().P(Qd,function(a,b){m=m.set(new L(a),b)});return Dd(a,b,c,m,e,f,k,h)}return b}m=Pd;Md(d,function(a){var b=c.u(a);Kb(l,b)&&(m=m.set(a,l.j().Q(b)))});return Dd(a,b,c,m,e,f,k,h)};function Rd(){}var Sd={};function td(a){return q(a.compare,a)}Rd.prototype.Ad=function(a,b){return 0!==this.compare(new F("[MIN_NAME]",a),new F("[MIN_NAME]",b))};Rd.prototype.Tc=function(){return Td};function Ud(a){K(!a.e()&&".priority"!==E(a),"Can't create PathIndex with empty path or .priority key");this.cc=a}ma(Ud,Rd);g=Ud.prototype;g.Ic=function(a){return!a.Q(this.cc).e()};g.compare=function(a,b){var c=a.S.Q(this.cc),d=b.S.Q(this.cc),c=c.Dc(d);return 0===c?Vb(a.name,b.name):c};
g.Pc=function(a,b){var c=M(a),c=C.G(this.cc,c);return new F(b,c)};g.Qc=function(){var a=C.G(this.cc,Vd);return new F("[MAX_NAME]",a)};g.toString=function(){return this.cc.slice().join("/")};function Wd(){}ma(Wd,Rd);g=Wd.prototype;g.compare=function(a,b){var c=a.S.C(),d=b.S.C(),c=c.Dc(d);return 0===c?Vb(a.name,b.name):c};g.Ic=function(a){return!a.C().e()};g.Ad=function(a,b){return!a.C().ca(b.C())};g.Tc=function(){return Td};g.Qc=function(){return new F("[MAX_NAME]",new tc("[PRIORITY-POST]",Vd))};
g.Pc=function(a,b){var c=M(a);return new F(b,new tc("[PRIORITY-POST]",c))};g.toString=function(){return".priority"};var N=new Wd;function Xd(){}ma(Xd,Rd);g=Xd.prototype;g.compare=function(a,b){return Vb(a.name,b.name)};g.Ic=function(){throw Fc("KeyIndex.isDefinedOn not expected to be called.");};g.Ad=function(){return!1};g.Tc=function(){return Td};g.Qc=function(){return new F("[MAX_NAME]",C)};g.Pc=function(a){K(p(a),"KeyIndex indexValue must always be a string.");return new F(a,C)};g.toString=function(){return".key"};
var Qd=new Xd;function Yd(){}ma(Yd,Rd);g=Yd.prototype;g.compare=function(a,b){var c=a.S.Dc(b.S);return 0===c?Vb(a.name,b.name):c};g.Ic=function(){return!0};g.Ad=function(a,b){return!a.ca(b)};g.Tc=function(){return Td};g.Qc=function(){return Zd};g.Pc=function(a,b){var c=M(a);return new F(b,c)};g.toString=function(){return".value"};var $d=new Yd;function ae(){this.Tb=this.pa=this.Lb=this.ma=this.ja=!1;this.ka=0;this.Nb="";this.ec=null;this.xb="";this.bc=null;this.vb="";this.g=N}var be=new ae;function rd(a){return""===a.Nb?a.ma:"l"===a.Nb}function nd(a){K(a.ma,"Only valid if start has been set");return a.ec}function md(a){K(a.ma,"Only valid if start has been set");return a.Lb?a.xb:"[MIN_NAME]"}function pd(a){K(a.pa,"Only valid if end has been set");return a.bc}
function od(a){K(a.pa,"Only valid if end has been set");return a.Tb?a.vb:"[MAX_NAME]"}function ce(a){var b=new ae;b.ja=a.ja;b.ka=a.ka;b.ma=a.ma;b.ec=a.ec;b.Lb=a.Lb;b.xb=a.xb;b.pa=a.pa;b.bc=a.bc;b.Tb=a.Tb;b.vb=a.vb;b.g=a.g;return b}g=ae.prototype;g.He=function(a){var b=ce(this);b.ja=!0;b.ka=a;b.Nb="";return b};g.Ie=function(a){var b=ce(this);b.ja=!0;b.ka=a;b.Nb="l";return b};g.Je=function(a){var b=ce(this);b.ja=!0;b.ka=a;b.Nb="r";return b};
g.$d=function(a,b){var c=ce(this);c.ma=!0;n(a)||(a=null);c.ec=a;null!=b?(c.Lb=!0,c.xb=b):(c.Lb=!1,c.xb="");return c};g.td=function(a,b){var c=ce(this);c.pa=!0;n(a)||(a=null);c.bc=a;n(b)?(c.Tb=!0,c.vb=b):(c.ah=!1,c.vb="");return c};function de(a,b){var c=ce(a);c.g=b;return c}function ee(a){var b={};a.ma&&(b.sp=a.ec,a.Lb&&(b.sn=a.xb));a.pa&&(b.ep=a.bc,a.Tb&&(b.en=a.vb));if(a.ja){b.l=a.ka;var c=a.Nb;""===c&&(c=rd(a)?"l":"r");b.vf=c}a.g!==N&&(b.i=a.g.toString());return b}
function S(a){return!(a.ma||a.pa||a.ja)}function fe(a){return S(a)&&a.g==N}function ge(a){var b={};if(fe(a))return b;var c;a.g===N?c="$priority":a.g===$d?c="$value":a.g===Qd?c="$key":(K(a.g instanceof Ud,"Unrecognized index type!"),c=a.g.toString());b.orderBy=B(c);a.ma&&(b.startAt=B(a.ec),a.Lb&&(b.startAt+=","+B(a.xb)));a.pa&&(b.endAt=B(a.bc),a.Tb&&(b.endAt+=","+B(a.vb)));a.ja&&(rd(a)?b.limitToFirst=a.ka:b.limitToLast=a.ka);return b}g.toString=function(){return B(ee(this))};function he(a,b){this.Bd=a;this.dc=b}he.prototype.get=function(a){var b=w(this.Bd,a);if(!b)throw Error("No index defined for "+a);return b===Sd?null:b};function ie(a,b,c){var d=na(a.Bd,function(d,f){var h=w(a.dc,f);K(h,"Missing index implementation for "+f);if(d===Sd){if(h.Ic(b.S)){for(var k=[],l=c.Xb(Tb),m=J(l);m;)m.name!=b.name&&k.push(m),m=J(l);k.push(b);return je(k,td(h))}return Sd}h=c.get(b.name);k=d;h&&(k=k.remove(new F(b.name,h)));return k.Oa(b,b.S)});return new he(d,a.dc)}
function ke(a,b,c){var d=na(a.Bd,function(a){if(a===Sd)return a;var d=c.get(b.name);return d?a.remove(new F(b.name,d)):a});return new he(d,a.dc)}var le=new he({".priority":Sd},{".priority":N});function tc(a,b){this.B=a;K(n(this.B)&&null!==this.B,"LeafNode shouldn't be created with null/undefined value.");this.aa=b||C;me(this.aa);this.Cb=null}var ne=["object","boolean","number","string"];g=tc.prototype;g.K=function(){return!0};g.C=function(){return this.aa};g.ga=function(a){return new tc(this.B,a)};g.R=function(a){return".priority"===a?this.aa:C};g.Q=function(a){return a.e()?this:".priority"===E(a)?this.aa:C};g.Da=function(){return!1};g.rf=function(){return null};
g.U=function(a,b){return".priority"===a?this.ga(b):b.e()&&".priority"!==a?this:C.U(a,b).ga(this.aa)};g.G=function(a,b){var c=E(a);if(null===c)return b;if(b.e()&&".priority"!==c)return this;K(".priority"!==c||1===Kd(a),".priority must be the last token in a path");return this.U(c,C.G(H(a),b))};g.e=function(){return!1};g.Db=function(){return 0};g.P=function(){return!1};g.I=function(a){return a&&!this.C().e()?{".value":this.Ca(),".priority":this.C().I()}:this.Ca()};
g.hash=function(){if(null===this.Cb){var a="";this.aa.e()||(a+="priority:"+oe(this.aa.I())+":");var b=typeof this.B,a=a+(b+":"),a="number"===b?a+Xc(this.B):a+this.B;this.Cb=Hc(a)}return this.Cb};g.Ca=function(){return this.B};g.Dc=function(a){if(a===C)return 1;if(a instanceof R)return-1;K(a.K(),"Unknown node type");var b=typeof a.B,c=typeof this.B,d=Na(ne,b),e=Na(ne,c);K(0<=d,"Unknown leaf type: "+b);K(0<=e,"Unknown leaf type: "+c);return d===e?"object"===c?0:this.B<a.B?-1:this.B===a.B?0:1:e-d};
g.lb=function(){return this};g.Jc=function(){return!0};g.ca=function(a){return a===this?!0:a.K()?this.B===a.B&&this.aa.ca(a.aa):!1};g.toString=function(){return B(this.I(!0))};function R(a,b,c){this.m=a;(this.aa=b)&&me(this.aa);a.e()&&K(!this.aa||this.aa.e(),"An empty node cannot have a priority");this.wb=c;this.Cb=null}g=R.prototype;g.K=function(){return!1};g.C=function(){return this.aa||C};g.ga=function(a){return this.m.e()?this:new R(this.m,a,this.wb)};g.R=function(a){if(".priority"===a)return this.C();a=this.m.get(a);return null===a?C:a};g.Q=function(a){var b=E(a);return null===b?this:this.R(b).Q(H(a))};g.Da=function(a){return null!==this.m.get(a)};
g.U=function(a,b){K(b,"We should always be passing snapshot nodes");if(".priority"===a)return this.ga(b);var c=new F(a,b),d,e;b.e()?(d=this.m.remove(a),c=ke(this.wb,c,this.m)):(d=this.m.Oa(a,b),c=ie(this.wb,c,this.m));e=d.e()?C:this.aa;return new R(d,e,c)};g.G=function(a,b){var c=E(a);if(null===c)return b;K(".priority"!==E(a)||1===Kd(a),".priority must be the last token in a path");var d=this.R(c).G(H(a),b);return this.U(c,d)};g.e=function(){return this.m.e()};g.Db=function(){return this.m.count()};
var pe=/^(0|[1-9]\d*)$/;g=R.prototype;g.I=function(a){if(this.e())return null;var b={},c=0,d=0,e=!0;this.P(N,function(f,h){b[f]=h.I(a);c++;e&&pe.test(f)?d=Math.max(d,Number(f)):e=!1});if(!a&&e&&d<2*c){var f=[],h;for(h in b)f[h]=b[h];return f}a&&!this.C().e()&&(b[".priority"]=this.C().I());return b};g.hash=function(){if(null===this.Cb){var a="";this.C().e()||(a+="priority:"+oe(this.C().I())+":");this.P(N,function(b,c){var d=c.hash();""!==d&&(a+=":"+b+":"+d)});this.Cb=""===a?"":Hc(a)}return this.Cb};
g.rf=function(a,b,c){return(c=qe(this,c))?(a=cc(c,new F(a,b)))?a.name:null:cc(this.m,a)};function ud(a,b){var c;c=(c=qe(a,b))?(c=c.Sc())&&c.name:a.m.Sc();return c?new F(c,a.m.get(c)):null}function vd(a,b){var c;c=(c=qe(a,b))?(c=c.fc())&&c.name:a.m.fc();return c?new F(c,a.m.get(c)):null}g.P=function(a,b){var c=qe(this,a);return c?c.ia(function(a){return b(a.name,a.S)}):this.m.ia(b)};g.Xb=function(a){return this.Yb(a.Tc(),a)};
g.Yb=function(a,b){var c=qe(this,b);if(c)return c.Yb(a,function(a){return a});for(var c=this.m.Yb(a.name,Tb),d=ec(c);null!=d&&0>b.compare(d,a);)J(c),d=ec(c);return c};g.sf=function(a){return this.$b(a.Qc(),a)};g.$b=function(a,b){var c=qe(this,b);if(c)return c.$b(a,function(a){return a});for(var c=this.m.$b(a.name,Tb),d=ec(c);null!=d&&0<b.compare(d,a);)J(c),d=ec(c);return c};g.Dc=function(a){return this.e()?a.e()?0:-1:a.K()||a.e()?1:a===Vd?-1:0};
g.lb=function(a){if(a===Qd||ta(this.wb.dc,a.toString()))return this;var b=this.wb,c=this.m;K(a!==Qd,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var d=[],e=!1,c=c.Xb(Tb),f=J(c);f;)e=e||a.Ic(f.S),d.push(f),f=J(c);d=e?je(d,td(a)):Sd;e=a.toString();c=xa(b.dc);c[e]=a;a=xa(b.Bd);a[e]=d;return new R(this.m,this.aa,new he(a,c))};g.Jc=function(a){return a===Qd||ta(this.wb.dc,a.toString())};
g.ca=function(a){if(a===this)return!0;if(a.K())return!1;if(this.C().ca(a.C())&&this.m.count()===a.m.count()){var b=this.Xb(N);a=a.Xb(N);for(var c=J(b),d=J(a);c&&d;){if(c.name!==d.name||!c.S.ca(d.S))return!1;c=J(b);d=J(a)}return null===c&&null===d}return!1};function qe(a,b){return b===Qd?null:a.wb.get(b.toString())}g.toString=function(){return B(this.I(!0))};function M(a,b){if(null===a)return C;var c=null;"object"===typeof a&&".priority"in a?c=a[".priority"]:"undefined"!==typeof b&&(c=b);K(null===c||"string"===typeof c||"number"===typeof c||"object"===typeof c&&".sv"in c,"Invalid priority type found: "+typeof c);"object"===typeof a&&".value"in a&&null!==a[".value"]&&(a=a[".value"]);if("object"!==typeof a||".sv"in a)return new tc(a,M(c));if(a instanceof Array){var d=C,e=a;r(e,function(a,b){if(v(e,b)&&"."!==b.substring(0,1)){var c=M(a);if(c.K()||!c.e())d=
d.U(b,c)}});return d.ga(M(c))}var f=[],h=!1,k=a;ib(k,function(a){if("string"!==typeof a||"."!==a.substring(0,1)){var b=M(k[a]);b.e()||(h=h||!b.C().e(),f.push(new F(a,b)))}});if(0==f.length)return C;var l=je(f,Ub,function(a){return a.name},Wb);if(h){var m=je(f,td(N));return new R(l,M(c),new he({".priority":m},{".priority":N}))}return new R(l,M(c),le)}var re=Math.log(2);
function se(a){this.count=parseInt(Math.log(a+1)/re,10);this.jf=this.count-1;this.eg=a+1&parseInt(Array(this.count+1).join("1"),2)}function te(a){var b=!(a.eg&1<<a.jf);a.jf--;return b}
function je(a,b,c,d){function e(b,d){var f=d-b;if(0==f)return null;if(1==f){var m=a[b],t=c?c(m):m;return new fc(t,m.S,!1,null,null)}var m=parseInt(f/2,10)+b,f=e(b,m),z=e(m+1,d),m=a[m],t=c?c(m):m;return new fc(t,m.S,!1,f,z)}a.sort(b);var f=function(b){function d(b,h){var k=t-b,z=t;t-=b;var z=e(k+1,z),k=a[k],I=c?c(k):k,z=new fc(I,k.S,h,null,z);f?f.left=z:m=z;f=z}for(var f=null,m=null,t=a.length,z=0;z<b.count;++z){var I=te(b),zd=Math.pow(2,b.count-(z+1));I?d(zd,!1):(d(zd,!1),d(zd,!0))}return m}(new se(a.length));
return null!==f?new ac(d||b,f):new ac(d||b)}function oe(a){return"number"===typeof a?"number:"+Xc(a):"string:"+a}function me(a){if(a.K()){var b=a.I();K("string"===typeof b||"number"===typeof b||"object"===typeof b&&v(b,".sv"),"Priority must be a string or number.")}else K(a===Vd||a.e(),"priority of unexpected type.");K(a===Vd||a.C().e(),"Priority nodes can't have a priority of their own.")}var C=new R(new ac(Wb),null,le);function ue(){R.call(this,new ac(Wb),C,le)}ma(ue,R);g=ue.prototype;
g.Dc=function(a){return a===this?0:1};g.ca=function(a){return a===this};g.C=function(){return this};g.R=function(){return C};g.e=function(){return!1};var Vd=new ue,Td=new F("[MIN_NAME]",C),Zd=new F("[MAX_NAME]",Vd);function Id(a,b){this.O=a;this.Yd=b}function Fd(a,b,c,d){return new Id(new tb(b,c,d),a.Yd)}function Jd(a){return a.O.ea?a.O.j():null}Id.prototype.w=function(){return this.Yd};function ub(a){return a.Yd.ea?a.Yd.j():null};function ve(a,b){this.W=a;var c=a.n,d=new kd(c.g),c=S(c)?new kd(c.g):c.ja?new qd(c):new ld(c);this.Hf=new xd(c);var e=b.w(),f=b.O,h=d.xa(C,e.j(),null),k=c.xa(C,f.j(),null);this.Ka=new Id(new tb(k,f.ea,c.Na()),new tb(h,e.ea,d.Na()));this.Xa=[];this.lg=new cd(a)}function we(a){return a.W}g=ve.prototype;g.w=function(){return this.Ka.w().j()};g.fb=function(a){var b=ub(this.Ka);return b&&(S(this.W.n)||!a.e()&&!b.R(E(a)).e())?b.Q(a):null};g.e=function(){return 0===this.Xa.length};g.Pb=function(a){this.Xa.push(a)};
g.jb=function(a,b){var c=[];if(b){K(null==a,"A cancel should cancel all event registrations.");var d=this.W.path;Oa(this.Xa,function(a){(a=a.gf(b,d))&&c.push(a)})}if(a){for(var e=[],f=0;f<this.Xa.length;++f){var h=this.Xa[f];if(!h.matches(a))e.push(h);else if(a.tf()){e=e.concat(this.Xa.slice(f+1));break}}this.Xa=e}else this.Xa=[];return c};
g.ab=function(a,b,c){a.type===Bd&&null!==a.source.Hb&&(K(ub(this.Ka),"We should always have a full cache before handling merges"),K(Jd(this.Ka),"Missing event cache, even though we have a server cache"));var d=this.Ka;a=this.Hf.ab(d,a,b,c);b=this.Hf;c=a.je;K(c.O.j().Jc(b.V.g),"Event snap not indexed");K(c.w().j().Jc(b.V.g),"Server snap not indexed");K(Ib(a.je.w())||!Ib(d.w()),"Once a server snap is complete, it should never go back");this.Ka=a.je;return xe(this,a.fg,a.je.O.j(),null)};
function ye(a,b){var c=a.Ka.O,d=[];c.j().K()||c.j().P(N,function(a,b){d.push(new D("child_added",b,a))});c.ea&&d.push(Eb(c.j()));return xe(a,d,c.j(),b)}function xe(a,b,c,d){return dd(a.lg,b,c,d?[d]:a.Xa)};function ze(a,b,c){this.type=Bd;this.source=a;this.path=b;this.children=c}ze.prototype.Xc=function(a){if(this.path.e())return a=this.children.subtree(new L(a)),a.e()?null:a.value?new Xb(this.source,G,a.value):new ze(this.source,G,a);K(E(this.path)===a,"Can't get a merge for a child not on the path of the operation");return new ze(this.source,H(this.path),this.children)};ze.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"};function Ae(a,b){this.f=Mc("p:rest:");this.F=a;this.Gb=b;this.Aa=null;this.$={}}function Be(a,b){if(n(b))return"tag$"+b;K(fe(a.n),"should have a tag if it's not a default query.");return a.path.toString()}g=Ae.prototype;
g.yf=function(a,b,c,d){var e=a.path.toString();this.f("Listen called for "+e+" "+a.va());var f=Be(a,c),h={};this.$[f]=h;a=ge(a.n);var k=this;Ce(this,e+".json",a,function(a,b){var t=b;404===a&&(a=t=null);null===a&&k.Gb(e,t,!1,c);w(k.$,f)===h&&d(a?401==a?"permission_denied":"rest_error:"+a:"ok",null)})};g.Rf=function(a,b){var c=Be(a,b);delete this.$[c]};g.M=function(a,b){this.Aa=a;var c=$c(a),d=c.data,c=c.Bc&&c.Bc.exp;b&&b("ok",{auth:d,expires:c})};g.ge=function(a){this.Aa=null;a("ok",null)};g.Me=function(){};
g.Cf=function(){};g.Jd=function(){};g.put=function(){};g.zf=function(){};g.Ue=function(){};
function Ce(a,b,c,d){c=c||{};c.format="export";a.Aa&&(c.auth=a.Aa);var e=(a.F.kb?"https://":"http://")+a.F.host+b+"?"+kb(c);a.f("Sending REST request for "+e);var f=new XMLHttpRequest;f.onreadystatechange=function(){if(d&&4===f.readyState){a.f("REST Response for "+e+" received. status:",f.status,"response:",f.responseText);var b=null;if(200<=f.status&&300>f.status){try{b=nb(f.responseText)}catch(c){O("Failed to parse JSON response for "+e+": "+f.responseText)}d(null,b)}else 401!==f.status&&404!==
f.status&&O("Got unsuccessful REST response for "+e+" Status: "+f.status),d(f.status);d=null}};f.open("GET",e,!0);f.send()};function De(a){K(ea(a)&&0<a.length,"Requires a non-empty array");this.Xf=a;this.Oc={}}De.prototype.fe=function(a,b){var c;c=this.Oc[a]||[];var d=c.length;if(0<d){for(var e=Array(d),f=0;f<d;f++)e[f]=c[f];c=e}else c=[];for(d=0;d<c.length;d++)c[d].zc.apply(c[d].Ma,Array.prototype.slice.call(arguments,1))};De.prototype.Eb=function(a,b,c){Ee(this,a);this.Oc[a]=this.Oc[a]||[];this.Oc[a].push({zc:b,Ma:c});(a=this.Ae(a))&&b.apply(c,a)};
De.prototype.ic=function(a,b,c){Ee(this,a);a=this.Oc[a]||[];for(var d=0;d<a.length;d++)if(a[d].zc===b&&(!c||c===a[d].Ma)){a.splice(d,1);break}};function Ee(a,b){K(Ta(a.Xf,function(a){return a===b}),"Unknown event: "+b)};var Fe=function(){var a=0,b=[];return function(c){var d=c===a;a=c;for(var e=Array(8),f=7;0<=f;f--)e[f]="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz".charAt(c%64),c=Math.floor(c/64);K(0===c,"Cannot push at time == 0");c=e.join("");if(d){for(f=11;0<=f&&63===b[f];f--)b[f]=0;b[f]++}else for(f=0;12>f;f++)b[f]=Math.floor(64*Math.random());for(f=0;12>f;f++)c+="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz".charAt(b[f]);K(20===c.length,"nextPushId: Length should be 20.");
return c}}();function Ge(){De.call(this,["online"]);this.kc=!0;if("undefined"!==typeof window&&"undefined"!==typeof window.addEventListener){var a=this;window.addEventListener("online",function(){a.kc||(a.kc=!0,a.fe("online",!0))},!1);window.addEventListener("offline",function(){a.kc&&(a.kc=!1,a.fe("online",!1))},!1)}}ma(Ge,De);Ge.prototype.Ae=function(a){K("online"===a,"Unknown event type: "+a);return[this.kc]};ca(Ge);function He(){De.call(this,["visible"]);var a,b;"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(b="visibilitychange",a="hidden"):"undefined"!==typeof document.mozHidden?(b="mozvisibilitychange",a="mozHidden"):"undefined"!==typeof document.msHidden?(b="msvisibilitychange",a="msHidden"):"undefined"!==typeof document.webkitHidden&&(b="webkitvisibilitychange",a="webkitHidden"));this.Ob=!0;if(b){var c=this;document.addEventListener(b,
function(){var b=!document[a];b!==c.Ob&&(c.Ob=b,c.fe("visible",b))},!1)}}ma(He,De);He.prototype.Ae=function(a){K("visible"===a,"Unknown event type: "+a);return[this.Ob]};ca(He);function L(a,b){if(1==arguments.length){this.o=a.split("/");for(var c=0,d=0;d<this.o.length;d++)0<this.o[d].length&&(this.o[c]=this.o[d],c++);this.o.length=c;this.Z=0}else this.o=a,this.Z=b}function T(a,b){var c=E(a);if(null===c)return b;if(c===E(b))return T(H(a),H(b));throw Error("INTERNAL ERROR: innerPath ("+b+") is not within outerPath ("+a+")");}
function Ie(a,b){for(var c=a.slice(),d=b.slice(),e=0;e<c.length&&e<d.length;e++){var f=Vb(c[e],d[e]);if(0!==f)return f}return c.length===d.length?0:c.length<d.length?-1:1}function E(a){return a.Z>=a.o.length?null:a.o[a.Z]}function Kd(a){return a.o.length-a.Z}function H(a){var b=a.Z;b<a.o.length&&b++;return new L(a.o,b)}function Ld(a){return a.Z<a.o.length?a.o[a.o.length-1]:null}g=L.prototype;
g.toString=function(){for(var a="",b=this.Z;b<this.o.length;b++)""!==this.o[b]&&(a+="/"+this.o[b]);return a||"/"};g.slice=function(a){return this.o.slice(this.Z+(a||0))};g.parent=function(){if(this.Z>=this.o.length)return null;for(var a=[],b=this.Z;b<this.o.length-1;b++)a.push(this.o[b]);return new L(a,0)};
g.u=function(a){for(var b=[],c=this.Z;c<this.o.length;c++)b.push(this.o[c]);if(a instanceof L)for(c=a.Z;c<a.o.length;c++)b.push(a.o[c]);else for(a=a.split("/"),c=0;c<a.length;c++)0<a[c].length&&b.push(a[c]);return new L(b,0)};g.e=function(){return this.Z>=this.o.length};g.ca=function(a){if(Kd(this)!==Kd(a))return!1;for(var b=this.Z,c=a.Z;b<=this.o.length;b++,c++)if(this.o[b]!==a.o[c])return!1;return!0};
g.contains=function(a){var b=this.Z,c=a.Z;if(Kd(this)>Kd(a))return!1;for(;b<this.o.length;){if(this.o[b]!==a.o[c])return!1;++b;++c}return!0};var G=new L("");function Je(a,b){this.Qa=a.slice();this.Ha=Math.max(1,this.Qa.length);this.lf=b;for(var c=0;c<this.Qa.length;c++)this.Ha+=Zc(this.Qa[c]);Ke(this)}Je.prototype.push=function(a){0<this.Qa.length&&(this.Ha+=1);this.Qa.push(a);this.Ha+=Zc(a);Ke(this)};Je.prototype.pop=function(){var a=this.Qa.pop();this.Ha-=Zc(a);0<this.Qa.length&&--this.Ha};
function Ke(a){if(768<a.Ha)throw Error(a.lf+"has a key path longer than 768 bytes ("+a.Ha+").");if(32<a.Qa.length)throw Error(a.lf+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Le(a));}function Le(a){return 0==a.Qa.length?"":"in property '"+a.Qa.join(".")+"'"};function Me(a,b){this.value=a;this.children=b||Ne}var Ne=new ac(function(a,b){return a===b?0:a<b?-1:1});function Oe(a){var b=Pd;r(a,function(a,d){b=b.set(new L(d),a)});return b}g=Me.prototype;g.e=function(){return null===this.value&&this.children.e()};function Pe(a,b,c){if(null!=a.value&&c(a.value))return{path:G,value:a.value};if(b.e())return null;var d=E(b);a=a.children.get(d);return null!==a?(b=Pe(a,H(b),c),null!=b?{path:(new L(d)).u(b.path),value:b.value}:null):null}
function Qe(a,b){return Pe(a,b,function(){return!0})}g.subtree=function(a){if(a.e())return this;var b=this.children.get(E(a));return null!==b?b.subtree(H(a)):Pd};g.set=function(a,b){if(a.e())return new Me(b,this.children);var c=E(a),d=(this.children.get(c)||Pd).set(H(a),b),c=this.children.Oa(c,d);return new Me(this.value,c)};
g.remove=function(a){if(a.e())return this.children.e()?Pd:new Me(null,this.children);var b=E(a),c=this.children.get(b);return c?(a=c.remove(H(a)),b=a.e()?this.children.remove(b):this.children.Oa(b,a),null===this.value&&b.e()?Pd:new Me(this.value,b)):this};g.get=function(a){if(a.e())return this.value;var b=this.children.get(E(a));return b?b.get(H(a)):null};
function Od(a,b,c){if(b.e())return c;var d=E(b);b=Od(a.children.get(d)||Pd,H(b),c);d=b.e()?a.children.remove(d):a.children.Oa(d,b);return new Me(a.value,d)}function Re(a,b){return Se(a,G,b)}function Se(a,b,c){var d={};a.children.ia(function(a,f){d[a]=Se(f,b.u(a),c)});return c(b,a.value,d)}function Te(a,b,c){return Ue(a,b,G,c)}function Ue(a,b,c,d){var e=a.value?d(c,a.value):!1;if(e)return e;if(b.e())return null;e=E(b);return(a=a.children.get(e))?Ue(a,H(b),c.u(e),d):null}
function Ve(a,b,c){We(a,b,G,c)}function We(a,b,c,d){if(b.e())return a;a.value&&d(c,a.value);var e=E(b);return(a=a.children.get(e))?We(a,H(b),c.u(e),d):Pd}function Md(a,b){Xe(a,G,b)}function Xe(a,b,c){a.children.ia(function(a,e){Xe(e,b.u(a),c)});a.value&&c(b,a.value)}function Ye(a,b){a.children.ia(function(a,d){d.value&&b(a,d.value)})}var Pd=new Me(null);Me.prototype.toString=function(){var a={};Md(this,function(b,c){a[b.toString()]=c.toString()});return B(a)};function Ze(a,b,c){this.type=Ed;this.source=$e;this.path=a;this.Qb=b;this.Vd=c}Ze.prototype.Xc=function(a){if(this.path.e()){if(null!=this.Qb.value)return K(this.Qb.children.e(),"affectedTree should not have overlapping affected paths."),this;a=this.Qb.subtree(new L(a));return new Ze(G,a,this.Vd)}K(E(this.path)===a,"operationForChild called for unrelated child.");return new Ze(H(this.path),this.Qb,this.Vd)};
Ze.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" ack write revert="+this.Vd+" affectedTree="+this.Qb+")"};var Yb=0,Bd=1,Ed=2,$b=3;function af(a,b,c,d){this.we=a;this.pf=b;this.Hb=c;this.af=d;K(!d||b,"Tagged queries must be from server.")}var $e=new af(!0,!1,null,!1),bf=new af(!1,!0,null,!1);af.prototype.toString=function(){return this.we?"user":this.af?"server(queryID="+this.Hb+")":"server"};function cf(a){this.X=a}var df=new cf(new Me(null));function ef(a,b,c){if(b.e())return new cf(new Me(c));var d=Qe(a.X,b);if(null!=d){var e=d.path,d=d.value;b=T(e,b);d=d.G(b,c);return new cf(a.X.set(e,d))}a=Od(a.X,b,new Me(c));return new cf(a)}function ff(a,b,c){var d=a;ib(c,function(a,c){d=ef(d,b.u(a),c)});return d}cf.prototype.Rd=function(a){if(a.e())return df;a=Od(this.X,a,Pd);return new cf(a)};function gf(a,b){var c=Qe(a.X,b);return null!=c?a.X.get(c.path).Q(T(c.path,b)):null}
function hf(a){var b=[],c=a.X.value;null!=c?c.K()||c.P(N,function(a,c){b.push(new F(a,c))}):a.X.children.ia(function(a,c){null!=c.value&&b.push(new F(a,c.value))});return b}function jf(a,b){if(b.e())return a;var c=gf(a,b);return null!=c?new cf(new Me(c)):new cf(a.X.subtree(b))}cf.prototype.e=function(){return this.X.e()};cf.prototype.apply=function(a){return kf(G,this.X,a)};
function kf(a,b,c){if(null!=b.value)return c.G(a,b.value);var d=null;b.children.ia(function(b,f){".priority"===b?(K(null!==f.value,"Priority writes must always be leaf nodes"),d=f.value):c=kf(a.u(b),f,c)});c.Q(a).e()||null===d||(c=c.G(a.u(".priority"),d));return c};function lf(){this.T=df;this.na=[];this.Mc=-1}function mf(a,b){for(var c=0;c<a.na.length;c++){var d=a.na[c];if(d.kd===b)return d}return null}g=lf.prototype;
g.Rd=function(a){var b=Ua(this.na,function(b){return b.kd===a});K(0<=b,"removeWrite called with nonexistent writeId.");var c=this.na[b];this.na.splice(b,1);for(var d=c.visible,e=!1,f=this.na.length-1;d&&0<=f;){var h=this.na[f];h.visible&&(f>=b&&nf(h,c.path)?d=!1:c.path.contains(h.path)&&(e=!0));f--}if(d){if(e)this.T=of(this.na,pf,G),this.Mc=0<this.na.length?this.na[this.na.length-1].kd:-1;else if(c.Ga)this.T=this.T.Rd(c.path);else{var k=this;r(c.children,function(a,b){k.T=k.T.Rd(c.path.u(b))})}return!0}return!1};
g.za=function(a,b,c,d){if(c||d){var e=jf(this.T,a);return!d&&e.e()?b:d||null!=b||null!=gf(e,G)?(e=of(this.na,function(b){return(b.visible||d)&&(!c||!(0<=Na(c,b.kd)))&&(b.path.contains(a)||a.contains(b.path))},a),b=b||C,e.apply(b)):null}e=gf(this.T,a);if(null!=e)return e;e=jf(this.T,a);return e.e()?b:null!=b||null!=gf(e,G)?(b=b||C,e.apply(b)):null};
g.yc=function(a,b){var c=C,d=gf(this.T,a);if(d)d.K()||d.P(N,function(a,b){c=c.U(a,b)});else if(b){var e=jf(this.T,a);b.P(N,function(a,b){var d=jf(e,new L(a)).apply(b);c=c.U(a,d)});Oa(hf(e),function(a){c=c.U(a.name,a.S)})}else e=jf(this.T,a),Oa(hf(e),function(a){c=c.U(a.name,a.S)});return c};g.ld=function(a,b,c,d){K(c||d,"Either existingEventSnap or existingServerSnap must exist");a=a.u(b);if(null!=gf(this.T,a))return null;a=jf(this.T,a);return a.e()?d.Q(b):a.apply(d.Q(b))};
g.xc=function(a,b,c){a=a.u(b);var d=gf(this.T,a);return null!=d?d:sb(c,b)?jf(this.T,a).apply(c.j().R(b)):null};g.tc=function(a){return gf(this.T,a)};g.ne=function(a,b,c,d,e,f){var h;a=jf(this.T,a);h=gf(a,G);if(null==h)if(null!=b)h=a.apply(b);else return[];h=h.lb(f);if(h.e()||h.K())return[];b=[];a=td(f);e=e?h.$b(c,f):h.Yb(c,f);for(f=J(e);f&&b.length<d;)0!==a(f,c)&&b.push(f),f=J(e);return b};
function nf(a,b){return a.Ga?a.path.contains(b):!!ua(a.children,function(c,d){return a.path.u(d).contains(b)})}function pf(a){return a.visible}
function of(a,b,c){for(var d=df,e=0;e<a.length;++e){var f=a[e];if(b(f)){var h=f.path;if(f.Ga)c.contains(h)?(h=T(c,h),d=ef(d,h,f.Ga)):h.contains(c)&&(h=T(h,c),d=ef(d,G,f.Ga.Q(h)));else if(f.children)if(c.contains(h))h=T(c,h),d=ff(d,h,f.children);else{if(h.contains(c))if(h=T(h,c),h.e())d=ff(d,G,f.children);else if(f=w(f.children,E(h)))f=f.Q(H(h)),d=ef(d,G,f)}else throw Fc("WriteRecord should have .snap or .children");}}return d}function qf(a,b){this.Mb=a;this.X=b}g=qf.prototype;
g.za=function(a,b,c){return this.X.za(this.Mb,a,b,c)};g.yc=function(a){return this.X.yc(this.Mb,a)};g.ld=function(a,b,c){return this.X.ld(this.Mb,a,b,c)};g.tc=function(a){return this.X.tc(this.Mb.u(a))};g.ne=function(a,b,c,d,e){return this.X.ne(this.Mb,a,b,c,d,e)};g.xc=function(a,b){return this.X.xc(this.Mb,a,b)};g.u=function(a){return new qf(this.Mb.u(a),this.X)};function rf(){this.ya={}}g=rf.prototype;g.e=function(){return wa(this.ya)};g.ab=function(a,b,c){var d=a.source.Hb;if(null!==d)return d=w(this.ya,d),K(null!=d,"SyncTree gave us an op for an invalid query."),d.ab(a,b,c);var e=[];r(this.ya,function(d){e=e.concat(d.ab(a,b,c))});return e};g.Pb=function(a,b,c,d,e){var f=a.va(),h=w(this.ya,f);if(!h){var h=c.za(e?d:null),k=!1;h?k=!0:(h=d instanceof R?c.yc(d):C,k=!1);h=new ve(a,new Id(new tb(h,k,!1),new tb(d,e,!1)));this.ya[f]=h}h.Pb(b);return ye(h,b)};
g.jb=function(a,b,c){var d=a.va(),e=[],f=[],h=null!=sf(this);if("default"===d){var k=this;r(this.ya,function(a,d){f=f.concat(a.jb(b,c));a.e()&&(delete k.ya[d],S(a.W.n)||e.push(a.W))})}else{var l=w(this.ya,d);l&&(f=f.concat(l.jb(b,c)),l.e()&&(delete this.ya[d],S(l.W.n)||e.push(l.W)))}h&&null==sf(this)&&e.push(new U(a.k,a.path));return{Kg:e,mg:f}};function tf(a){return Pa(ra(a.ya),function(a){return!S(a.W.n)})}g.fb=function(a){var b=null;r(this.ya,function(c){b=b||c.fb(a)});return b};
function uf(a,b){if(S(b.n))return sf(a);var c=b.va();return w(a.ya,c)}function sf(a){return va(a.ya,function(a){return S(a.W.n)})||null};function vf(a){this.ta=Pd;this.ib=new lf;this.$e={};this.mc={};this.Nc=a}function wf(a,b,c,d,e){var f=a.ib,h=e;K(d>f.Mc,"Stacking an older write on top of newer ones");n(h)||(h=!0);f.na.push({path:b,Ga:c,kd:d,visible:h});h&&(f.T=ef(f.T,b,c));f.Mc=d;return e?xf(a,new Xb($e,b,c)):[]}function yf(a,b,c,d){var e=a.ib;K(d>e.Mc,"Stacking an older merge on top of newer ones");e.na.push({path:b,children:c,kd:d,visible:!0});e.T=ff(e.T,b,c);e.Mc=d;c=Oe(c);return xf(a,new ze($e,b,c))}
function zf(a,b,c){c=c||!1;var d=mf(a.ib,b);if(a.ib.Rd(b)){var e=Pd;null!=d.Ga?e=e.set(G,!0):ib(d.children,function(a,b){e=e.set(new L(a),b)});return xf(a,new Ze(d.path,e,c))}return[]}function Af(a,b,c){c=Oe(c);return xf(a,new ze(bf,b,c))}function Bf(a,b,c,d){d=Cf(a,d);if(null!=d){var e=Df(d);d=e.path;e=e.Hb;b=T(d,b);c=new Xb(new af(!1,!0,e,!0),b,c);return Ef(a,d,c)}return[]}
function Ff(a,b,c,d){if(d=Cf(a,d)){var e=Df(d);d=e.path;e=e.Hb;b=T(d,b);c=Oe(c);c=new ze(new af(!1,!0,e,!0),b,c);return Ef(a,d,c)}return[]}
vf.prototype.Pb=function(a,b){var c=a.path,d=null,e=!1;Ve(this.ta,c,function(a,b){var f=T(a,c);d=d||b.fb(f);e=e||null!=sf(b)});var f=this.ta.get(c);f?(e=e||null!=sf(f),d=d||f.fb(G)):(f=new rf,this.ta=this.ta.set(c,f));var h;null!=d?h=!0:(h=!1,d=C,Ye(this.ta.subtree(c),function(a,b){var c=b.fb(G);c&&(d=d.U(a,c))}));var k=null!=uf(f,a);if(!k&&!S(a.n)){var l=Gf(a);K(!(l in this.mc),"View does not exist, but we have a tag");var m=Hf++;this.mc[l]=m;this.$e["_"+m]=l}h=f.Pb(a,b,new qf(c,this.ib),d,h);k||
e||(f=uf(f,a),h=h.concat(If(this,a,f)));return h};
vf.prototype.jb=function(a,b,c){var d=a.path,e=this.ta.get(d),f=[];if(e&&("default"===a.va()||null!=uf(e,a))){f=e.jb(a,b,c);e.e()&&(this.ta=this.ta.remove(d));e=f.Kg;f=f.mg;b=-1!==Ua(e,function(a){return S(a.n)});var h=Te(this.ta,d,function(a,b){return null!=sf(b)});if(b&&!h&&(d=this.ta.subtree(d),!d.e()))for(var d=Jf(d),k=0;k<d.length;++k){var l=d[k],m=l.W,l=Kf(this,l);this.Nc.Xe(Lf(m),Mf(this,m),l.xd,l.H)}if(!h&&0<e.length&&!c)if(b)this.Nc.ae(Lf(a),null);else{var t=this;Oa(e,function(a){a.va();
var b=t.mc[Gf(a)];t.Nc.ae(Lf(a),b)})}Nf(this,e)}return f};vf.prototype.za=function(a,b){var c=this.ib,d=Te(this.ta,a,function(b,c){var d=T(b,a);if(d=c.fb(d))return d});return c.za(a,d,b,!0)};function Jf(a){return Re(a,function(a,c,d){if(c&&null!=sf(c))return[sf(c)];var e=[];c&&(e=tf(c));r(d,function(a){e=e.concat(a)});return e})}function Nf(a,b){for(var c=0;c<b.length;++c){var d=b[c];if(!S(d.n)){var d=Gf(d),e=a.mc[d];delete a.mc[d];delete a.$e["_"+e]}}}
function Lf(a){return S(a.n)&&!fe(a.n)?a.Ib():a}function If(a,b,c){var d=b.path,e=Mf(a,b);c=Kf(a,c);b=a.Nc.Xe(Lf(b),e,c.xd,c.H);d=a.ta.subtree(d);if(e)K(null==sf(d.value),"If we're adding a query, it shouldn't be shadowed");else for(e=Re(d,function(a,b,c){if(!a.e()&&b&&null!=sf(b))return[we(sf(b))];var d=[];b&&(d=d.concat(Qa(tf(b),function(a){return a.W})));r(c,function(a){d=d.concat(a)});return d}),d=0;d<e.length;++d)c=e[d],a.Nc.ae(Lf(c),Mf(a,c));return b}
function Kf(a,b){var c=b.W,d=Mf(a,c);return{xd:function(){return(b.w()||C).hash()},H:function(b){if("ok"===b){if(d){var f=c.path;if(b=Cf(a,d)){var h=Df(b);b=h.path;h=h.Hb;f=T(b,f);f=new Zb(new af(!1,!0,h,!0),f);b=Ef(a,b,f)}else b=[]}else b=xf(a,new Zb(bf,c.path));return b}f="Unknown Error";"too_big"===b?f="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"==b?f="Client doesn't have permission to access the desired data.":"unavailable"==b&&
(f="The service is unavailable");f=Error(b+": "+f);f.code=b.toUpperCase();return a.jb(c,null,f)}}}function Gf(a){return a.path.toString()+"$"+a.va()}function Df(a){var b=a.indexOf("$");K(-1!==b&&b<a.length-1,"Bad queryKey.");return{Hb:a.substr(b+1),path:new L(a.substr(0,b))}}function Cf(a,b){var c=a.$e,d="_"+b;return d in c?c[d]:void 0}function Mf(a,b){var c=Gf(b);return w(a.mc,c)}var Hf=1;
function Ef(a,b,c){var d=a.ta.get(b);K(d,"Missing sync point for query tag that we're tracking");return d.ab(c,new qf(b,a.ib),null)}function xf(a,b){return Of(a,b,a.ta,null,new qf(G,a.ib))}function Of(a,b,c,d,e){if(b.path.e())return Pf(a,b,c,d,e);var f=c.get(G);null==d&&null!=f&&(d=f.fb(G));var h=[],k=E(b.path),l=b.Xc(k);if((c=c.children.get(k))&&l)var m=d?d.R(k):null,k=e.u(k),h=h.concat(Of(a,l,c,m,k));f&&(h=h.concat(f.ab(b,e,d)));return h}
function Pf(a,b,c,d,e){var f=c.get(G);null==d&&null!=f&&(d=f.fb(G));var h=[];c.children.ia(function(c,f){var m=d?d.R(c):null,t=e.u(c),z=b.Xc(c);z&&(h=h.concat(Pf(a,z,f,m,t)))});f&&(h=h.concat(f.ab(b,e,d)));return h};function Qf(){this.children={};this.nd=0;this.value=null}function Rf(a,b,c){this.Gd=a?a:"";this.Zc=b?b:null;this.A=c?c:new Qf}function Sf(a,b){for(var c=b instanceof L?b:new L(b),d=a,e;null!==(e=E(c));)d=new Rf(e,d,w(d.A.children,e)||new Qf),c=H(c);return d}g=Rf.prototype;g.Ca=function(){return this.A.value};function Tf(a,b){K("undefined"!==typeof b,"Cannot set value to undefined");a.A.value=b;Uf(a)}g.clear=function(){this.A.value=null;this.A.children={};this.A.nd=0;Uf(this)};
g.wd=function(){return 0<this.A.nd};g.e=function(){return null===this.Ca()&&!this.wd()};g.P=function(a){var b=this;r(this.A.children,function(c,d){a(new Rf(d,b,c))})};function Vf(a,b,c,d){c&&!d&&b(a);a.P(function(a){Vf(a,b,!0,d)});c&&d&&b(a)}function Wf(a,b){for(var c=a.parent();null!==c&&!b(c);)c=c.parent()}g.path=function(){return new L(null===this.Zc?this.Gd:this.Zc.path()+"/"+this.Gd)};g.name=function(){return this.Gd};g.parent=function(){return this.Zc};
function Uf(a){if(null!==a.Zc){var b=a.Zc,c=a.Gd,d=a.e(),e=v(b.A.children,c);d&&e?(delete b.A.children[c],b.A.nd--,Uf(b)):d||e||(b.A.children[c]=a.A,b.A.nd++,Uf(b))}};var Xf=/[\[\].#$\/\u0000-\u001F\u007F]/,Yf=/[\[\].#$\u0000-\u001F\u007F]/,Zf=/^[a-zA-Z][a-zA-Z._\-+]+$/;function $f(a){return p(a)&&0!==a.length&&!Xf.test(a)}function ag(a){return null===a||p(a)||ga(a)&&!Qc(a)||ia(a)&&v(a,".sv")}function bg(a,b,c,d){d&&!n(b)||cg(y(a,1,d),b,c)}
function cg(a,b,c){c instanceof L&&(c=new Je(c,a));if(!n(b))throw Error(a+"contains undefined "+Le(c));if(ha(b))throw Error(a+"contains a function "+Le(c)+" with contents: "+b.toString());if(Qc(b))throw Error(a+"contains "+b.toString()+" "+Le(c));if(p(b)&&b.length>10485760/3&&10485760<Zc(b))throw Error(a+"contains a string greater than 10485760 utf8 bytes "+Le(c)+" ('"+b.substring(0,50)+"...')");if(ia(b)){var d=!1,e=!1;ib(b,function(b,h){if(".value"===b)d=!0;else if(".priority"!==b&&".sv"!==b&&(e=
!0,!$f(b)))throw Error(a+" contains an invalid key ("+b+") "+Le(c)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');c.push(b);cg(a,h,c);c.pop()});if(d&&e)throw Error(a+' contains ".value" child '+Le(c)+" in addition to actual children.");}}
function dg(a,b){var c,d;for(c=0;c<b.length;c++){d=b[c];for(var e=d.slice(),f=0;f<e.length;f++)if((".priority"!==e[f]||f!==e.length-1)&&!$f(e[f]))throw Error(a+"contains an invalid key ("+e[f]+") in path "+d.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');}b.sort(Ie);e=null;for(c=0;c<b.length;c++){d=b[c];if(null!==e&&e.contains(d))throw Error(a+"contains a path "+e.toString()+" that is ancestor of another path "+d.toString());e=d}}
function eg(a,b,c){var d=y(a,1,!1);if(!ia(b)||ea(b))throw Error(d+" must be an object containing the children to replace.");var e=[];ib(b,function(a,b){var k=new L(a);cg(d,b,c.u(k));if(".priority"===Ld(k)&&!ag(b))throw Error(d+"contains an invalid value for '"+k.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");e.push(k)});dg(d,e)}
function fg(a,b,c){if(Qc(c))throw Error(y(a,b,!1)+"is "+c.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ag(c))throw Error(y(a,b,!1)+"must be a valid Firebase priority (a string, finite number, server value, or null).");}
function gg(a,b,c){if(!c||n(b))switch(b){case "value":case "child_added":case "child_removed":case "child_changed":case "child_moved":break;default:throw Error(y(a,1,c)+'must be a valid event type: "value", "child_added", "child_removed", "child_changed", or "child_moved".');}}function hg(a,b){if(n(b)&&!$f(b))throw Error(y(a,2,!0)+'was an invalid key: "'+b+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").');}
function ig(a,b){if(!p(b)||0===b.length||Yf.test(b))throw Error(y(a,1,!1)+'was an invalid path: "'+b+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"');}function jg(a,b){if(".info"===E(b))throw Error(a+" failed: Can't modify data under /.info/");}function kg(a,b){if(!p(b))throw Error(y(a,1,!1)+"must be a valid credential (a string).");}function lg(a,b,c){if(!p(c))throw Error(y(a,b,!1)+"must be a valid string.");}
function mg(a,b){lg(a,1,b);if(!Zf.test(b))throw Error(y(a,1,!1)+"'"+b+"' is not a valid authentication provider.");}function ng(a,b,c,d){if(!d||n(c))if(!ia(c)||null===c)throw Error(y(a,b,d)+"must be a valid object.");}function og(a,b,c){if(!ia(b)||!v(b,c))throw Error(y(a,1,!1)+'must contain the key "'+c+'"');if(!p(w(b,c)))throw Error(y(a,1,!1)+'must contain the key "'+c+'" with type "string"');};function pg(){this.set={}}g=pg.prototype;g.add=function(a,b){this.set[a]=null!==b?b:!0};g.contains=function(a){return v(this.set,a)};g.get=function(a){return this.contains(a)?this.set[a]:void 0};g.remove=function(a){delete this.set[a]};g.clear=function(){this.set={}};g.e=function(){return wa(this.set)};g.count=function(){return pa(this.set)};function qg(a,b){r(a.set,function(a,d){b(d,a)})}g.keys=function(){var a=[];r(this.set,function(b,c){a.push(c)});return a};function qc(){this.m=this.B=null}qc.prototype.find=function(a){if(null!=this.B)return this.B.Q(a);if(a.e()||null==this.m)return null;var b=E(a);a=H(a);return this.m.contains(b)?this.m.get(b).find(a):null};qc.prototype.nc=function(a,b){if(a.e())this.B=b,this.m=null;else if(null!==this.B)this.B=this.B.G(a,b);else{null==this.m&&(this.m=new pg);var c=E(a);this.m.contains(c)||this.m.add(c,new qc);c=this.m.get(c);a=H(a);c.nc(a,b)}};
function rg(a,b){if(b.e())return a.B=null,a.m=null,!0;if(null!==a.B){if(a.B.K())return!1;var c=a.B;a.B=null;c.P(N,function(b,c){a.nc(new L(b),c)});return rg(a,b)}return null!==a.m?(c=E(b),b=H(b),a.m.contains(c)&&rg(a.m.get(c),b)&&a.m.remove(c),a.m.e()?(a.m=null,!0):!1):!0}function rc(a,b,c){null!==a.B?c(b,a.B):a.P(function(a,e){var f=new L(b.toString()+"/"+a);rc(e,f,c)})}qc.prototype.P=function(a){null!==this.m&&qg(this.m,function(b,c){a(b,c)})};var sg="auth.firebase.com";function tg(a,b,c){this.od=a||{};this.ee=b||{};this.$a=c||{};this.od.remember||(this.od.remember="default")}var ug=["remember","redirectTo"];function vg(a){var b={},c={};ib(a||{},function(a,e){0<=Na(ug,a)?b[a]=e:c[a]=e});return new tg(b,{},c)};function wg(a,b){this.Qe=["session",a.Od,a.hc].join(":");this.be=b}wg.prototype.set=function(a,b){if(!b)if(this.be.length)b=this.be[0];else throw Error("fb.login.SessionManager : No storage options available!");b.set(this.Qe,a)};wg.prototype.get=function(){var a=Qa(this.be,q(this.qg,this)),a=Pa(a,function(a){return null!==a});Xa(a,function(a,c){return ad(c.token)-ad(a.token)});return 0<a.length?a.shift():null};wg.prototype.qg=function(a){try{var b=a.get(this.Qe);if(b&&b.token)return b}catch(c){}return null};
wg.prototype.clear=function(){var a=this;Oa(this.be,function(b){b.remove(a.Qe)})};function xg(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function yg(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xg())}function zg(){return"undefined"!==typeof location&&/^file:\//.test(location.href)}
function Ag(a){var b=xg();if(""===b)return!1;if("Microsoft Internet Explorer"===navigator.appName){if((b=b.match(/MSIE ([0-9]{1,}[\.0-9]{0,})/))&&1<b.length)return parseFloat(b[1])>=a}else if(-1<b.indexOf("Trident")&&(b=b.match(/rv:([0-9]{2,2}[\.0-9]{0,})/))&&1<b.length)return parseFloat(b[1])>=a;return!1};function Bg(){var a=window.opener.frames,b;for(b=a.length-1;0<=b;b--)try{if(a[b].location.protocol===window.location.protocol&&a[b].location.host===window.location.host&&"__winchan_relay_frame"===a[b].name)return a[b]}catch(c){}return null}function Cg(a,b,c){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener&&a.addEventListener(b,c,!1)}function Dg(a,b,c){a.detachEvent?a.detachEvent("on"+b,c):a.removeEventListener&&a.removeEventListener(b,c,!1)}
function Eg(a){/^https?:\/\//.test(a)||(a=window.location.href);var b=/^(https?:\/\/[\-_a-zA-Z\.0-9:]+)/.exec(a);return b?b[1]:a}function Fg(a){var b="";try{a=a.replace("#","");var c=lb(a);c&&v(c,"__firebase_request_key")&&(b=w(c,"__firebase_request_key"))}catch(d){}return b}function Gg(){var a=Pc(sg);return a.scheme+"://"+a.host+"/v2"}function Hg(a){return Gg()+"/"+a+"/auth/channel"};function Ig(a){var b=this;this.Ac=a;this.ce="*";Ag(8)?this.Rc=this.zd=Bg():(this.Rc=window.opener,this.zd=window);if(!b.Rc)throw"Unable to find relay frame";Cg(this.zd,"message",q(this.jc,this));Cg(this.zd,"message",q(this.Bf,this));try{Jg(this,{a:"ready"})}catch(c){Cg(this.Rc,"load",function(){Jg(b,{a:"ready"})})}Cg(window,"unload",q(this.Bg,this))}function Jg(a,b){b=B(b);Ag(8)?a.Rc.doPost(b,a.ce):a.Rc.postMessage(b,a.ce)}
Ig.prototype.jc=function(a){var b=this,c;try{c=nb(a.data)}catch(d){}c&&"request"===c.a&&(Dg(window,"message",this.jc),this.ce=a.origin,this.Ac&&setTimeout(function(){b.Ac(b.ce,c.d,function(a,c){b.dg=!c;b.Ac=void 0;Jg(b,{a:"response",d:a,forceKeepWindowOpen:c})})},0))};Ig.prototype.Bg=function(){try{Dg(this.zd,"message",this.Bf)}catch(a){}this.Ac&&(Jg(this,{a:"error",d:"unknown closed window"}),this.Ac=void 0);try{window.close()}catch(b){}};Ig.prototype.Bf=function(a){if(this.dg&&"die"===a.data)try{window.close()}catch(b){}};function Kg(a){this.pc=Ga()+Ga()+Ga();this.Ef=a}Kg.prototype.open=function(a,b){yc.set("redirect_request_id",this.pc);yc.set("redirect_request_id",this.pc);b.requestId=this.pc;b.redirectTo=b.redirectTo||window.location.href;a+=(/\?/.test(a)?"":"?")+kb(b);window.location=a};Kg.isAvailable=function(){return!zg()&&!yg()};Kg.prototype.Cc=function(){return"redirect"};var Lg={NETWORK_ERROR:"Unable to contact the Firebase server.",SERVER_ERROR:"An unknown server error occurred.",TRANSPORT_UNAVAILABLE:"There are no login transports available for the requested method.",REQUEST_INTERRUPTED:"The browser redirected the page before the login request could complete.",USER_CANCELLED:"The user cancelled authentication."};function Mg(a){var b=Error(w(Lg,a),a);b.code=a;return b};function Ng(a){var b;(b=!a.window_features)||(b=xg(),b=-1!==b.indexOf("Fennec/")||-1!==b.indexOf("Firefox/")&&-1!==b.indexOf("Android"));b&&(a.window_features=void 0);a.window_name||(a.window_name="_blank");this.options=a}
Ng.prototype.open=function(a,b,c){function d(a){h&&(document.body.removeChild(h),h=void 0);t&&(t=clearInterval(t));Dg(window,"message",e);Dg(window,"unload",d);if(m&&!a)try{m.close()}catch(b){k.postMessage("die",l)}m=k=void 0}function e(a){if(a.origin===l)try{var b=nb(a.data);"ready"===b.a?k.postMessage(z,l):"error"===b.a?(d(!1),c&&(c(b.d),c=null)):"response"===b.a&&(d(b.forceKeepWindowOpen),c&&(c(null,b.d),c=null))}catch(e){}}var f=Ag(8),h,k;if(!this.options.relay_url)return c(Error("invalid arguments: origin of url and relay_url must match"));
var l=Eg(a);if(l!==Eg(this.options.relay_url))c&&setTimeout(function(){c(Error("invalid arguments: origin of url and relay_url must match"))},0);else{f&&(h=document.createElement("iframe"),h.setAttribute("src",this.options.relay_url),h.style.display="none",h.setAttribute("name","__winchan_relay_frame"),document.body.appendChild(h),k=h.contentWindow);a+=(/\?/.test(a)?"":"?")+kb(b);var m=window.open(a,this.options.window_name,this.options.window_features);k||(k=m);var t=setInterval(function(){m&&m.closed&&
(d(!1),c&&(c(Mg("USER_CANCELLED")),c=null))},500),z=B({a:"request",d:b});Cg(window,"unload",d);Cg(window,"message",e)}};
Ng.isAvailable=function(){var a;if(a="postMessage"in window&&!zg())(a=yg()||"undefined"!==typeof navigator&&(!!xg().match(/Windows Phone/)||!!window.Windows&&/^ms-appx:/.test(location.href)))||(a=xg(),a="undefined"!==typeof navigator&&"undefined"!==typeof window&&!!(a.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i)||a.match(/CriOS/)||a.match(/Twitter for iPhone/)||a.match(/FBAN\/FBIOS/)||window.navigator.standalone)),a=!a;return a&&!xg().match(/PhantomJS/)};Ng.prototype.Cc=function(){return"popup"};function Og(a){a.method||(a.method="GET");a.headers||(a.headers={});a.headers.content_type||(a.headers.content_type="application/json");a.headers.content_type=a.headers.content_type.toLowerCase();this.options=a}
Og.prototype.open=function(a,b,c){function d(){c&&(c(Mg("REQUEST_INTERRUPTED")),c=null)}var e=new XMLHttpRequest,f=this.options.method.toUpperCase(),h;Cg(window,"beforeunload",d);e.onreadystatechange=function(){if(c&&4===e.readyState){var a;if(200<=e.status&&300>e.status){try{a=nb(e.responseText)}catch(b){}c(null,a)}else 500<=e.status&&600>e.status?c(Mg("SERVER_ERROR")):c(Mg("NETWORK_ERROR"));c=null;Dg(window,"beforeunload",d)}};if("GET"===f)a+=(/\?/.test(a)?"":"?")+kb(b),h=null;else{var k=this.options.headers.content_type;
"application/json"===k&&(h=B(b));"application/x-www-form-urlencoded"===k&&(h=kb(b))}e.open(f,a,!0);a={"X-Requested-With":"XMLHttpRequest",Accept:"application/json;text/plain"};za(a,this.options.headers);for(var l in a)e.setRequestHeader(l,a[l]);e.send(h)};Og.isAvailable=function(){var a;if(a=!!window.XMLHttpRequest)a=xg(),a=!(a.match(/MSIE/)||a.match(/Trident/))||Ag(10);return a};Og.prototype.Cc=function(){return"json"};function Pg(a){this.pc=Ga()+Ga()+Ga();this.Ef=a}
Pg.prototype.open=function(a,b,c){function d(){c&&(c(Mg("USER_CANCELLED")),c=null)}var e=this,f=Pc(sg),h;b.requestId=this.pc;b.redirectTo=f.scheme+"://"+f.host+"/blank/page.html";a+=/\?/.test(a)?"":"?";a+=kb(b);(h=window.open(a,"_blank","location=no"))&&ha(h.addEventListener)?(h.addEventListener("loadstart",function(a){var b;if(b=a&&a.url)a:{try{var m=document.createElement("a");m.href=a.url;b=m.host===f.host&&"/blank/page.html"===m.pathname;break a}catch(t){}b=!1}b&&(a=Fg(a.url),h.removeEventListener("exit",
d),h.close(),a=new tg(null,null,{requestId:e.pc,requestKey:a}),e.Ef.requestWithCredential("/auth/session",a,c),c=null)}),h.addEventListener("exit",d)):c(Mg("TRANSPORT_UNAVAILABLE"))};Pg.isAvailable=function(){return yg()};Pg.prototype.Cc=function(){return"redirect"};function Qg(a){a.callback_parameter||(a.callback_parameter="callback");this.options=a;window.__firebase_auth_jsonp=window.__firebase_auth_jsonp||{}}
Qg.prototype.open=function(a,b,c){function d(){c&&(c(Mg("REQUEST_INTERRUPTED")),c=null)}function e(){setTimeout(function(){window.__firebase_auth_jsonp[f]=void 0;wa(window.__firebase_auth_jsonp)&&(window.__firebase_auth_jsonp=void 0);try{var a=document.getElementById(f);a&&a.parentNode.removeChild(a)}catch(b){}},1);Dg(window,"beforeunload",d)}var f="fn"+(new Date).getTime()+Math.floor(99999*Math.random());b[this.options.callback_parameter]="__firebase_auth_jsonp."+f;a+=(/\?/.test(a)?"":"?")+kb(b);
Cg(window,"beforeunload",d);window.__firebase_auth_jsonp[f]=function(a){c&&(c(null,a),c=null);e()};Rg(f,a,c)};
function Rg(a,b,c){setTimeout(function(){try{var d=document.createElement("script");d.type="text/javascript";d.id=a;d.async=!0;d.src=b;d.onerror=function(){var b=document.getElementById(a);null!==b&&b.parentNode.removeChild(b);c&&c(Mg("NETWORK_ERROR"))};var e=document.getElementsByTagName("head");(e&&0!=e.length?e[0]:document.documentElement).appendChild(d)}catch(f){c&&c(Mg("NETWORK_ERROR"))}},0)}Qg.isAvailable=function(){return"undefined"!==typeof document&&null!=document.createElement};
Qg.prototype.Cc=function(){return"json"};function Sg(a,b,c,d){De.call(this,["auth_status"]);this.F=a;this.df=b;this.Vg=c;this.Le=d;this.sc=new wg(a,[xc,yc]);this.mb=null;this.Se=!1;Tg(this)}ma(Sg,De);g=Sg.prototype;g.xe=function(){return this.mb||null};function Tg(a){yc.get("redirect_request_id")&&Ug(a);var b=a.sc.get();b&&b.token?(Vg(a,b),a.df(b.token,function(c,d){Wg(a,c,d,!1,b.token,b)},function(b,d){Xg(a,"resumeSession()",b,d)})):Vg(a,null)}
function Yg(a,b,c,d,e,f){"firebaseio-demo.com"===a.F.domain&&O("Firebase authentication is not supported on demo Firebases (*.firebaseio-demo.com). To secure your Firebase, create a production Firebase at https://www.firebase.com.");a.df(b,function(f,k){Wg(a,f,k,!0,b,c,d||{},e)},function(b,c){Xg(a,"auth()",b,c,f)})}function Zg(a,b){a.sc.clear();Vg(a,null);a.Vg(function(a,d){if("ok"===a)P(b,null);else{var e=(a||"error").toUpperCase(),f=e;d&&(f+=": "+d);f=Error(f);f.code=e;P(b,f)}})}
function Wg(a,b,c,d,e,f,h,k){"ok"===b?(d&&(b=c.auth,f.auth=b,f.expires=c.expires,f.token=bd(e)?e:"",c=null,b&&v(b,"uid")?c=w(b,"uid"):v(f,"uid")&&(c=w(f,"uid")),f.uid=c,c="custom",b&&v(b,"provider")?c=w(b,"provider"):v(f,"provider")&&(c=w(f,"provider")),f.provider=c,a.sc.clear(),bd(e)&&(h=h||{},c=xc,"sessionOnly"===h.remember&&(c=yc),"none"!==h.remember&&a.sc.set(f,c)),Vg(a,f)),P(k,null,f)):(a.sc.clear(),Vg(a,null),f=a=(b||"error").toUpperCase(),c&&(f+=": "+c),f=Error(f),f.code=a,P(k,f))}
function Xg(a,b,c,d,e){O(b+" was canceled: "+d);a.sc.clear();Vg(a,null);a=Error(d);a.code=c.toUpperCase();P(e,a)}function $g(a,b,c,d,e){ah(a);c=new tg(d||{},{},c||{});bh(a,[Og,Qg],"/auth/"+b,c,e)}
function ch(a,b,c,d){ah(a);var e=[Ng,Pg];c=vg(c);"anonymous"===b||"password"===b?setTimeout(function(){P(d,Mg("TRANSPORT_UNAVAILABLE"))},0):(c.ee.window_features="menubar=yes,modal=yes,alwaysRaised=yeslocation=yes,resizable=yes,scrollbars=yes,status=yes,height=625,width=625,top="+("object"===typeof screen?.5*(screen.height-625):0)+",left="+("object"===typeof screen?.5*(screen.width-625):0),c.ee.relay_url=Hg(a.F.hc),c.ee.requestWithCredential=q(a.qc,a),bh(a,e,"/auth/"+b,c,d))}
function Ug(a){var b=yc.get("redirect_request_id");if(b){var c=yc.get("redirect_client_options");yc.remove("redirect_request_id");yc.remove("redirect_client_options");var d=[Og,Qg],b={requestId:b,requestKey:Fg(document.location.hash)},c=new tg(c,{},b);a.Se=!0;try{document.location.hash=document.location.hash.replace(/&__firebase_request_key=([a-zA-z0-9]*)/,"")}catch(e){}bh(a,d,"/auth/session",c,function(){this.Se=!1}.bind(a))}}
g.se=function(a,b){ah(this);var c=vg(a);c.$a._method="POST";this.qc("/users",c,function(a,c){a?P(b,a):P(b,a,c)})};g.Te=function(a,b){var c=this;ah(this);var d="/users/"+encodeURIComponent(a.email),e=vg(a);e.$a._method="DELETE";this.qc(d,e,function(a,d){!a&&d&&d.uid&&c.mb&&c.mb.uid&&c.mb.uid===d.uid&&Zg(c);P(b,a)})};g.pe=function(a,b){ah(this);var c="/users/"+encodeURIComponent(a.email)+"/password",d=vg(a);d.$a._method="PUT";d.$a.password=a.newPassword;this.qc(c,d,function(a){P(b,a)})};
g.oe=function(a,b){ah(this);var c="/users/"+encodeURIComponent(a.oldEmail)+"/email",d=vg(a);d.$a._method="PUT";d.$a.email=a.newEmail;d.$a.password=a.password;this.qc(c,d,function(a){P(b,a)})};g.Ve=function(a,b){ah(this);var c="/users/"+encodeURIComponent(a.email)+"/password",d=vg(a);d.$a._method="POST";this.qc(c,d,function(a){P(b,a)})};g.qc=function(a,b,c){dh(this,[Og,Qg],a,b,c)};
function bh(a,b,c,d,e){dh(a,b,c,d,function(b,c){!b&&c&&c.token&&c.uid?Yg(a,c.token,c,d.od,function(a,b){a?P(e,a):P(e,null,b)}):P(e,b||Mg("UNKNOWN_ERROR"))})}
function dh(a,b,c,d,e){b=Pa(b,function(a){return"function"===typeof a.isAvailable&&a.isAvailable()});0===b.length?setTimeout(function(){P(e,Mg("TRANSPORT_UNAVAILABLE"))},0):(b=new (b.shift())(d.ee),d=jb(d.$a),d.v="js-"+hb,d.transport=b.Cc(),d.suppress_status_codes=!0,a=Gg()+"/"+a.F.hc+c,b.open(a,d,function(a,b){if(a)P(e,a);else if(b&&b.error){var c=Error(b.error.message);c.code=b.error.code;c.details=b.error.details;P(e,c)}else P(e,null,b)}))}
function Vg(a,b){var c=null!==a.mb||null!==b;a.mb=b;c&&a.fe("auth_status",b);a.Le(null!==b)}g.Ae=function(a){K("auth_status"===a,'initial event must be of type "auth_status"');return this.Se?null:[this.mb]};function ah(a){var b=a.F;if("firebaseio.com"!==b.domain&&"firebaseio-demo.com"!==b.domain&&"auth.firebase.com"===sg)throw Error("This custom Firebase server ('"+a.F.domain+"') does not support delegated login.");};var Cc="websocket",Dc="long_polling";function eh(a){this.jc=a;this.Nd=[];this.Sb=0;this.qe=-1;this.Fb=null}function fh(a,b,c){a.qe=b;a.Fb=c;a.qe<a.Sb&&(a.Fb(),a.Fb=null)}function gh(a,b,c){for(a.Nd[b]=c;a.Nd[a.Sb];){var d=a.Nd[a.Sb];delete a.Nd[a.Sb];for(var e=0;e<d.length;++e)if(d[e]){var f=a;Db(function(){f.jc(d[e])})}if(a.Sb===a.qe){a.Fb&&(clearTimeout(a.Fb),a.Fb(),a.Fb=null);break}a.Sb++}};function hh(a,b,c,d){this.re=a;this.f=Mc(a);this.nb=this.ob=0;this.Ua=Rb(b);this.Qf=c;this.Hc=!1;this.Bb=d;this.jd=function(a){return Bc(b,Dc,a)}}var ih,jh;
hh.prototype.open=function(a,b){this.hf=0;this.la=b;this.Af=new eh(a);this.zb=!1;var c=this;this.qb=setTimeout(function(){c.f("Timed out trying to connect.");c.gb();c.qb=null},Math.floor(3E4));Rc(function(){if(!c.zb){c.Sa=new kh(function(a,b,d,k,l){lh(c,arguments);if(c.Sa)if(c.qb&&(clearTimeout(c.qb),c.qb=null),c.Hc=!0,"start"==a)c.id=b,c.Gf=d;else if("close"===a)b?(c.Sa.Xd=!1,fh(c.Af,b,function(){c.gb()})):c.gb();else throw Error("Unrecognized command received: "+a);},function(a,b){lh(c,arguments);
gh(c.Af,a,b)},function(){c.gb()},c.jd);var a={start:"t"};a.ser=Math.floor(1E8*Math.random());c.Sa.he&&(a.cb=c.Sa.he);a.v="5";c.Qf&&(a.s=c.Qf);c.Bb&&(a.ls=c.Bb);"undefined"!==typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(a.r="f");a=c.jd(a);c.f("Connecting via long-poll to "+a);mh(c.Sa,a,function(){})}})};
hh.prototype.start=function(){var a=this.Sa,b=this.Gf;a.ug=this.id;a.vg=b;for(a.le=!0;nh(a););a=this.id;b=this.Gf;this.gc=document.createElement("iframe");var c={dframe:"t"};c.id=a;c.pw=b;this.gc.src=this.jd(c);this.gc.style.display="none";document.body.appendChild(this.gc)};
hh.isAvailable=function(){return ih||!jh&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.Xg)&&!0};g=hh.prototype;g.Ed=function(){};g.dd=function(){this.zb=!0;this.Sa&&(this.Sa.close(),this.Sa=null);this.gc&&(document.body.removeChild(this.gc),this.gc=null);this.qb&&(clearTimeout(this.qb),this.qb=null)};
g.gb=function(){this.zb||(this.f("Longpoll is closing itself"),this.dd(),this.la&&(this.la(this.Hc),this.la=null))};g.close=function(){this.zb||(this.f("Longpoll is being closed."),this.dd())};g.send=function(a){a=B(a);this.ob+=a.length;Ob(this.Ua,"bytes_sent",a.length);a=Ic(a);a=fb(a,!0);a=Vc(a,1840);for(var b=0;b<a.length;b++){var c=this.Sa;c.ad.push({Mg:this.hf,Ug:a.length,kf:a[b]});c.le&&nh(c);this.hf++}};function lh(a,b){var c=B(b).length;a.nb+=c;Ob(a.Ua,"bytes_received",c)}
function kh(a,b,c,d){this.jd=d;this.hb=c;this.Pe=new pg;this.ad=[];this.te=Math.floor(1E8*Math.random());this.Xd=!0;this.he=Ec();window["pLPCommand"+this.he]=a;window["pRTLPCB"+this.he]=b;a=document.createElement("iframe");a.style.display="none";if(document.body){document.body.appendChild(a);try{a.contentWindow.document||Cb("No IE domain setting required")}catch(e){a.src="javascript:void((function(){document.open();document.domain='"+document.domain+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";
a.contentDocument?a.eb=a.contentDocument:a.contentWindow?a.eb=a.contentWindow.document:a.document&&(a.eb=a.document);this.Ea=a;a="";this.Ea.src&&"javascript:"===this.Ea.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";\x3c/script>');a="<html><body>"+a+"</body></html>";try{this.Ea.eb.open(),this.Ea.eb.write(a),this.Ea.eb.close()}catch(f){Cb("frame writing exception"),f.stack&&Cb(f.stack),Cb(f)}}
kh.prototype.close=function(){this.le=!1;if(this.Ea){this.Ea.eb.body.innerHTML="";var a=this;setTimeout(function(){null!==a.Ea&&(document.body.removeChild(a.Ea),a.Ea=null)},Math.floor(0))}var b=this.hb;b&&(this.hb=null,b())};
function nh(a){if(a.le&&a.Xd&&a.Pe.count()<(0<a.ad.length?2:1)){a.te++;var b={};b.id=a.ug;b.pw=a.vg;b.ser=a.te;for(var b=a.jd(b),c="",d=0;0<a.ad.length;)if(1870>=a.ad[0].kf.length+30+c.length){var e=a.ad.shift(),c=c+"&seg"+d+"="+e.Mg+"&ts"+d+"="+e.Ug+"&d"+d+"="+e.kf;d++}else break;oh(a,b+c,a.te);return!0}return!1}function oh(a,b,c){function d(){a.Pe.remove(c);nh(a)}a.Pe.add(c,1);var e=setTimeout(d,Math.floor(25E3));mh(a,b,function(){clearTimeout(e);d()})}
function mh(a,b,c){setTimeout(function(){try{if(a.Xd){var d=a.Ea.eb.createElement("script");d.type="text/javascript";d.async=!0;d.src=b;d.onload=d.onreadystatechange=function(){var a=d.readyState;a&&"loaded"!==a&&"complete"!==a||(d.onload=d.onreadystatechange=null,d.parentNode&&d.parentNode.removeChild(d),c())};d.onerror=function(){Cb("Long-poll script failed to load: "+b);a.Xd=!1;a.close()};a.Ea.eb.body.appendChild(d)}}catch(e){}},Math.floor(1))};var ph=null;"undefined"!==typeof MozWebSocket?ph=MozWebSocket:"undefined"!==typeof WebSocket&&(ph=WebSocket);function qh(a,b,c,d){this.re=a;this.f=Mc(this.re);this.frames=this.Kc=null;this.nb=this.ob=this.bf=0;this.Ua=Rb(b);a={v:"5"};"undefined"!==typeof location&&location.href&&-1!==location.href.indexOf("firebaseio.com")&&(a.r="f");c&&(a.s=c);d&&(a.ls=d);this.ef=Bc(b,Cc,a)}var rh;
qh.prototype.open=function(a,b){this.hb=b;this.zg=a;this.f("Websocket connecting to "+this.ef);this.Hc=!1;xc.set("previous_websocket_failure",!0);try{this.ua=new ph(this.ef)}catch(c){this.f("Error instantiating WebSocket.");var d=c.message||c.data;d&&this.f(d);this.gb();return}var e=this;this.ua.onopen=function(){e.f("Websocket connected.");e.Hc=!0};this.ua.onclose=function(){e.f("Websocket connection was disconnected.");e.ua=null;e.gb()};this.ua.onmessage=function(a){if(null!==e.ua)if(a=a.data,e.nb+=
a.length,Ob(e.Ua,"bytes_received",a.length),sh(e),null!==e.frames)th(e,a);else{a:{K(null===e.frames,"We already have a frame buffer");if(6>=a.length){var b=Number(a);if(!isNaN(b)){e.bf=b;e.frames=[];a=null;break a}}e.bf=1;e.frames=[]}null!==a&&th(e,a)}};this.ua.onerror=function(a){e.f("WebSocket error.  Closing connection.");(a=a.message||a.data)&&e.f(a);e.gb()}};qh.prototype.start=function(){};
qh.isAvailable=function(){var a=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var b=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);b&&1<b.length&&4.4>parseFloat(b[1])&&(a=!0)}return!a&&null!==ph&&!rh};qh.responsesRequiredToBeHealthy=2;qh.healthyTimeout=3E4;g=qh.prototype;g.Ed=function(){xc.remove("previous_websocket_failure")};function th(a,b){a.frames.push(b);if(a.frames.length==a.bf){var c=a.frames.join("");a.frames=null;c=nb(c);a.zg(c)}}
g.send=function(a){sh(this);a=B(a);this.ob+=a.length;Ob(this.Ua,"bytes_sent",a.length);a=Vc(a,16384);1<a.length&&this.ua.send(String(a.length));for(var b=0;b<a.length;b++)this.ua.send(a[b])};g.dd=function(){this.zb=!0;this.Kc&&(clearInterval(this.Kc),this.Kc=null);this.ua&&(this.ua.close(),this.ua=null)};g.gb=function(){this.zb||(this.f("WebSocket is closing itself"),this.dd(),this.hb&&(this.hb(this.Hc),this.hb=null))};g.close=function(){this.zb||(this.f("WebSocket is being closed"),this.dd())};
function sh(a){clearInterval(a.Kc);a.Kc=setInterval(function(){a.ua&&a.ua.send("0");sh(a)},Math.floor(45E3))};function uh(a){vh(this,a)}var wh=[hh,qh];function vh(a,b){var c=qh&&qh.isAvailable(),d=c&&!(xc.wf||!0===xc.get("previous_websocket_failure"));b.Wg&&(c||O("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),d=!0);if(d)a.gd=[qh];else{var e=a.gd=[];Wc(wh,function(a,b){b&&b.isAvailable()&&e.push(b)})}}function xh(a){if(0<a.gd.length)return a.gd[0];throw Error("No transports available");};function yh(a,b,c,d,e,f,h){this.id=a;this.f=Mc("c:"+this.id+":");this.jc=c;this.Wc=d;this.la=e;this.Ne=f;this.F=b;this.Md=[];this.ff=0;this.Pf=new uh(b);this.Ta=0;this.Bb=h;this.f("Connection created");zh(this)}
function zh(a){var b=xh(a.Pf);a.J=new b("c:"+a.id+":"+a.ff++,a.F,void 0,a.Bb);a.Re=b.responsesRequiredToBeHealthy||0;var c=Ah(a,a.J),d=Bh(a,a.J);a.hd=a.J;a.cd=a.J;a.D=null;a.Ab=!1;setTimeout(function(){a.J&&a.J.open(c,d)},Math.floor(0));b=b.healthyTimeout||0;0<b&&(a.yd=setTimeout(function(){a.yd=null;a.Ab||(a.J&&102400<a.J.nb?(a.f("Connection exceeded healthy timeout but has received "+a.J.nb+" bytes.  Marking connection healthy."),a.Ab=!0,a.J.Ed()):a.J&&10240<a.J.ob?a.f("Connection exceeded healthy timeout but has sent "+
a.J.ob+" bytes.  Leaving connection alive."):(a.f("Closing unhealthy connection after timeout."),a.close()))},Math.floor(b)))}function Bh(a,b){return function(c){b===a.J?(a.J=null,c||0!==a.Ta?1===a.Ta&&a.f("Realtime connection lost."):(a.f("Realtime connection failed."),"s-"===a.F.Ya.substr(0,2)&&(xc.remove("host:"+a.F.host),a.F.Ya=a.F.host)),a.close()):b===a.D?(a.f("Secondary connection lost."),c=a.D,a.D=null,a.hd!==c&&a.cd!==c||a.close()):a.f("closing an old connection")}}
function Ah(a,b){return function(c){if(2!=a.Ta)if(b===a.cd){var d=Tc("t",c);c=Tc("d",c);if("c"==d){if(d=Tc("t",c),"d"in c)if(c=c.d,"h"===d){var d=c.ts,e=c.v,f=c.h;a.Nf=c.s;Ac(a.F,f);0==a.Ta&&(a.J.start(),Ch(a,a.J,d),"5"!==e&&O("Protocol version mismatch detected"),c=a.Pf,(c=1<c.gd.length?c.gd[1]:null)&&Dh(a,c))}else if("n"===d){a.f("recvd end transmission on primary");a.cd=a.D;for(c=0;c<a.Md.length;++c)a.Id(a.Md[c]);a.Md=[];Eh(a)}else"s"===d?(a.f("Connection shutdown command received. Shutting down..."),
a.Ne&&(a.Ne(c),a.Ne=null),a.la=null,a.close()):"r"===d?(a.f("Reset packet received.  New host: "+c),Ac(a.F,c),1===a.Ta?a.close():(Fh(a),zh(a))):"e"===d?Nc("Server Error: "+c):"o"===d?(a.f("got pong on primary."),Gh(a),Hh(a)):Nc("Unknown control packet command: "+d)}else"d"==d&&a.Id(c)}else if(b===a.D)if(d=Tc("t",c),c=Tc("d",c),"c"==d)"t"in c&&(c=c.t,"a"===c?Ih(a):"r"===c?(a.f("Got a reset on secondary, closing it"),a.D.close(),a.hd!==a.D&&a.cd!==a.D||a.close()):"o"===c&&(a.f("got pong on secondary."),
a.Mf--,Ih(a)));else if("d"==d)a.Md.push(c);else throw Error("Unknown protocol layer: "+d);else a.f("message on old connection")}}yh.prototype.Fa=function(a){Jh(this,{t:"d",d:a})};function Eh(a){a.hd===a.D&&a.cd===a.D&&(a.f("cleaning up and promoting a connection: "+a.D.re),a.J=a.D,a.D=null)}
function Ih(a){0>=a.Mf?(a.f("Secondary connection is healthy."),a.Ab=!0,a.D.Ed(),a.D.start(),a.f("sending client ack on secondary"),a.D.send({t:"c",d:{t:"a",d:{}}}),a.f("Ending transmission on primary"),a.J.send({t:"c",d:{t:"n",d:{}}}),a.hd=a.D,Eh(a)):(a.f("sending ping on secondary."),a.D.send({t:"c",d:{t:"p",d:{}}}))}yh.prototype.Id=function(a){Gh(this);this.jc(a)};function Gh(a){a.Ab||(a.Re--,0>=a.Re&&(a.f("Primary connection is healthy."),a.Ab=!0,a.J.Ed()))}
function Dh(a,b){a.D=new b("c:"+a.id+":"+a.ff++,a.F,a.Nf);a.Mf=b.responsesRequiredToBeHealthy||0;a.D.open(Ah(a,a.D),Bh(a,a.D));setTimeout(function(){a.D&&(a.f("Timed out trying to upgrade."),a.D.close())},Math.floor(6E4))}function Ch(a,b,c){a.f("Realtime connection established.");a.J=b;a.Ta=1;a.Wc&&(a.Wc(c,a.Nf),a.Wc=null);0===a.Re?(a.f("Primary connection is healthy."),a.Ab=!0):setTimeout(function(){Hh(a)},Math.floor(5E3))}
function Hh(a){a.Ab||1!==a.Ta||(a.f("sending ping on primary."),Jh(a,{t:"c",d:{t:"p",d:{}}}))}function Jh(a,b){if(1!==a.Ta)throw"Connection is not connected";a.hd.send(b)}yh.prototype.close=function(){2!==this.Ta&&(this.f("Closing realtime connection."),this.Ta=2,Fh(this),this.la&&(this.la(),this.la=null))};function Fh(a){a.f("Shutting down all connections");a.J&&(a.J.close(),a.J=null);a.D&&(a.D.close(),a.D=null);a.yd&&(clearTimeout(a.yd),a.yd=null)};function Kh(a,b,c,d){this.id=Lh++;this.f=Mc("p:"+this.id+":");this.xf=this.Ee=!1;this.$={};this.qa=[];this.Yc=0;this.Vc=[];this.oa=!1;this.Za=1E3;this.Fd=3E5;this.Gb=b;this.Uc=c;this.Oe=d;this.F=a;this.sb=this.Aa=this.Ia=this.Bb=this.We=null;this.Ob=!1;this.Td={};this.Lg=0;this.nf=!0;this.Lc=this.Ge=null;Mh(this,0);He.ub().Eb("visible",this.Cg,this);-1===a.host.indexOf("fblocal")&&Ge.ub().Eb("online",this.Ag,this)}var Lh=0,Nh=0;g=Kh.prototype;
g.Fa=function(a,b,c){var d=++this.Lg;a={r:d,a:a,b:b};this.f(B(a));K(this.oa,"sendRequest call when we're not connected not allowed.");this.Ia.Fa(a);c&&(this.Td[d]=c)};g.yf=function(a,b,c,d){var e=a.va(),f=a.path.toString();this.f("Listen called for "+f+" "+e);this.$[f]=this.$[f]||{};K(fe(a.n)||!S(a.n),"listen() called for non-default but complete query");K(!this.$[f][e],"listen() called twice for same path/queryId.");a={H:d,xd:b,Ig:a,tag:c};this.$[f][e]=a;this.oa&&Oh(this,a)};
function Oh(a,b){var c=b.Ig,d=c.path.toString(),e=c.va();a.f("Listen on "+d+" for "+e);var f={p:d};b.tag&&(f.q=ee(c.n),f.t=b.tag);f.h=b.xd();a.Fa("q",f,function(f){var k=f.d,l=f.s;if(k&&"object"===typeof k&&v(k,"w")){var m=w(k,"w");ea(m)&&0<=Na(m,"no_index")&&O("Using an unspecified index. Consider adding "+('".indexOn": "'+c.n.g.toString()+'"')+" at "+c.path.toString()+" to your security rules for better performance")}(a.$[d]&&a.$[d][e])===b&&(a.f("listen response",f),"ok"!==l&&Ph(a,d,e),b.H&&b.H(l,
k))})}g.M=function(a,b,c){this.Aa={ig:a,of:!1,zc:b,md:c};this.f("Authenticating using credential: "+a);Qh(this);(b=40==a.length)||(a=$c(a).Bc,b="object"===typeof a&&!0===w(a,"admin"));b&&(this.f("Admin auth credential detected.  Reducing max reconnect time."),this.Fd=3E4)};g.ge=function(a){delete this.Aa;this.oa&&this.Fa("unauth",{},function(b){a(b.s,b.d)})};
function Qh(a){var b=a.Aa;a.oa&&b&&a.Fa("auth",{cred:b.ig},function(c){var d=c.s;c=c.d||"error";"ok"!==d&&a.Aa===b&&delete a.Aa;b.of?"ok"!==d&&b.md&&b.md(d,c):(b.of=!0,b.zc&&b.zc(d,c))})}g.Rf=function(a,b){var c=a.path.toString(),d=a.va();this.f("Unlisten called for "+c+" "+d);K(fe(a.n)||!S(a.n),"unlisten() called for non-default but complete query");if(Ph(this,c,d)&&this.oa){var e=ee(a.n);this.f("Unlisten on "+c+" for "+d);c={p:c};b&&(c.q=e,c.t=b);this.Fa("n",c)}};
g.Me=function(a,b,c){this.oa?Rh(this,"o",a,b,c):this.Vc.push({$c:a,action:"o",data:b,H:c})};g.Cf=function(a,b,c){this.oa?Rh(this,"om",a,b,c):this.Vc.push({$c:a,action:"om",data:b,H:c})};g.Jd=function(a,b){this.oa?Rh(this,"oc",a,null,b):this.Vc.push({$c:a,action:"oc",data:null,H:b})};function Rh(a,b,c,d,e){c={p:c,d:d};a.f("onDisconnect "+b,c);a.Fa(b,c,function(a){e&&setTimeout(function(){e(a.s,a.d)},Math.floor(0))})}g.put=function(a,b,c,d){Sh(this,"p",a,b,c,d)};
g.zf=function(a,b,c,d){Sh(this,"m",a,b,c,d)};function Sh(a,b,c,d,e,f){d={p:c,d:d};n(f)&&(d.h=f);a.qa.push({action:b,Jf:d,H:e});a.Yc++;b=a.qa.length-1;a.oa?Th(a,b):a.f("Buffering put: "+c)}function Th(a,b){var c=a.qa[b].action,d=a.qa[b].Jf,e=a.qa[b].H;a.qa[b].Jg=a.oa;a.Fa(c,d,function(d){a.f(c+" response",d);delete a.qa[b];a.Yc--;0===a.Yc&&(a.qa=[]);e&&e(d.s,d.d)})}
g.Ue=function(a){this.oa&&(a={c:a},this.f("reportStats",a),this.Fa("s",a,function(a){"ok"!==a.s&&this.f("reportStats","Error sending stats: "+a.d)}))};
g.Id=function(a){if("r"in a){this.f("from server: "+B(a));var b=a.r,c=this.Td[b];c&&(delete this.Td[b],c(a.b))}else{if("error"in a)throw"A server-side error has occurred: "+a.error;"a"in a&&(b=a.a,c=a.b,this.f("handleServerMessage",b,c),"d"===b?this.Gb(c.p,c.d,!1,c.t):"m"===b?this.Gb(c.p,c.d,!0,c.t):"c"===b?Uh(this,c.p,c.q):"ac"===b?(a=c.s,b=c.d,c=this.Aa,delete this.Aa,c&&c.md&&c.md(a,b)):"sd"===b?this.We?this.We(c):"msg"in c&&"undefined"!==typeof console&&console.log("FIREBASE: "+c.msg.replace("\n",
"\nFIREBASE: ")):Nc("Unrecognized action received from server: "+B(b)+"\nAre you using the latest client?"))}};g.Wc=function(a,b){this.f("connection ready");this.oa=!0;this.Lc=(new Date).getTime();this.Oe({serverTimeOffset:a-(new Date).getTime()});this.Bb=b;if(this.nf){var c={};c["sdk.js."+hb.replace(/\./g,"-")]=1;yg()&&(c["framework.cordova"]=1);this.Ue(c)}Vh(this);this.nf=!1;this.Uc(!0)};
function Mh(a,b){K(!a.Ia,"Scheduling a connect when we're already connected/ing?");a.sb&&clearTimeout(a.sb);a.sb=setTimeout(function(){a.sb=null;Wh(a)},Math.floor(b))}g.Cg=function(a){a&&!this.Ob&&this.Za===this.Fd&&(this.f("Window became visible.  Reducing delay."),this.Za=1E3,this.Ia||Mh(this,0));this.Ob=a};g.Ag=function(a){a?(this.f("Browser went online."),this.Za=1E3,this.Ia||Mh(this,0)):(this.f("Browser went offline.  Killing connection."),this.Ia&&this.Ia.close())};
g.Df=function(){this.f("data client disconnected");this.oa=!1;this.Ia=null;for(var a=0;a<this.qa.length;a++){var b=this.qa[a];b&&"h"in b.Jf&&b.Jg&&(b.H&&b.H("disconnect"),delete this.qa[a],this.Yc--)}0===this.Yc&&(this.qa=[]);this.Td={};Xh(this)&&(this.Ob?this.Lc&&(3E4<(new Date).getTime()-this.Lc&&(this.Za=1E3),this.Lc=null):(this.f("Window isn't visible.  Delaying reconnect."),this.Za=this.Fd,this.Ge=(new Date).getTime()),a=Math.max(0,this.Za-((new Date).getTime()-this.Ge)),a*=Math.random(),this.f("Trying to reconnect in "+
a+"ms"),Mh(this,a),this.Za=Math.min(this.Fd,1.3*this.Za));this.Uc(!1)};function Wh(a){if(Xh(a)){a.f("Making a connection attempt");a.Ge=(new Date).getTime();a.Lc=null;var b=q(a.Id,a),c=q(a.Wc,a),d=q(a.Df,a),e=a.id+":"+Nh++;a.Ia=new yh(e,a.F,b,c,d,function(b){O(b+" ("+a.F.toString()+")");a.xf=!0},a.Bb)}}g.yb=function(){this.Ee=!0;this.Ia?this.Ia.close():(this.sb&&(clearTimeout(this.sb),this.sb=null),this.oa&&this.Df())};g.rc=function(){this.Ee=!1;this.Za=1E3;this.Ia||Mh(this,0)};
function Uh(a,b,c){c=c?Qa(c,function(a){return Uc(a)}).join("$"):"default";(a=Ph(a,b,c))&&a.H&&a.H("permission_denied")}function Ph(a,b,c){b=(new L(b)).toString();var d;n(a.$[b])?(d=a.$[b][c],delete a.$[b][c],0===pa(a.$[b])&&delete a.$[b]):d=void 0;return d}function Vh(a){Qh(a);r(a.$,function(b){r(b,function(b){Oh(a,b)})});for(var b=0;b<a.qa.length;b++)a.qa[b]&&Th(a,b);for(;a.Vc.length;)b=a.Vc.shift(),Rh(a,b.action,b.$c,b.data,b.H)}function Xh(a){var b;b=Ge.ub().kc;return!a.xf&&!a.Ee&&b};var V={og:function(){ih=rh=!0}};V.forceLongPolling=V.og;V.pg=function(){jh=!0};V.forceWebSockets=V.pg;V.Pg=function(a,b){a.k.Ra.We=b};V.setSecurityDebugCallback=V.Pg;V.Ye=function(a,b){a.k.Ye(b)};V.stats=V.Ye;V.Ze=function(a,b){a.k.Ze(b)};V.statsIncrementCounter=V.Ze;V.sd=function(a){return a.k.sd};V.dataUpdateCount=V.sd;V.sg=function(a,b){a.k.De=b};V.interceptServerData=V.sg;V.yg=function(a){new Ig(a)};V.onPopupOpen=V.yg;V.Ng=function(a){sg=a};V.setAuthenticationServer=V.Ng;function Q(a,b,c){this.A=a;this.W=b;this.g=c}Q.prototype.I=function(){x("Firebase.DataSnapshot.val",0,0,arguments.length);return this.A.I()};Q.prototype.val=Q.prototype.I;Q.prototype.mf=function(){x("Firebase.DataSnapshot.exportVal",0,0,arguments.length);return this.A.I(!0)};Q.prototype.exportVal=Q.prototype.mf;Q.prototype.ng=function(){x("Firebase.DataSnapshot.exists",0,0,arguments.length);return!this.A.e()};Q.prototype.exists=Q.prototype.ng;
Q.prototype.u=function(a){x("Firebase.DataSnapshot.child",0,1,arguments.length);ga(a)&&(a=String(a));ig("Firebase.DataSnapshot.child",a);var b=new L(a),c=this.W.u(b);return new Q(this.A.Q(b),c,N)};Q.prototype.child=Q.prototype.u;Q.prototype.Da=function(a){x("Firebase.DataSnapshot.hasChild",1,1,arguments.length);ig("Firebase.DataSnapshot.hasChild",a);var b=new L(a);return!this.A.Q(b).e()};Q.prototype.hasChild=Q.prototype.Da;
Q.prototype.C=function(){x("Firebase.DataSnapshot.getPriority",0,0,arguments.length);return this.A.C().I()};Q.prototype.getPriority=Q.prototype.C;Q.prototype.forEach=function(a){x("Firebase.DataSnapshot.forEach",1,1,arguments.length);A("Firebase.DataSnapshot.forEach",1,a,!1);if(this.A.K())return!1;var b=this;return!!this.A.P(this.g,function(c,d){return a(new Q(d,b.W.u(c),N))})};Q.prototype.forEach=Q.prototype.forEach;
Q.prototype.wd=function(){x("Firebase.DataSnapshot.hasChildren",0,0,arguments.length);return this.A.K()?!1:!this.A.e()};Q.prototype.hasChildren=Q.prototype.wd;Q.prototype.name=function(){O("Firebase.DataSnapshot.name() being deprecated. Please use Firebase.DataSnapshot.key() instead.");x("Firebase.DataSnapshot.name",0,0,arguments.length);return this.key()};Q.prototype.name=Q.prototype.name;Q.prototype.key=function(){x("Firebase.DataSnapshot.key",0,0,arguments.length);return this.W.key()};
Q.prototype.key=Q.prototype.key;Q.prototype.Db=function(){x("Firebase.DataSnapshot.numChildren",0,0,arguments.length);return this.A.Db()};Q.prototype.numChildren=Q.prototype.Db;Q.prototype.Ib=function(){x("Firebase.DataSnapshot.ref",0,0,arguments.length);return this.W};Q.prototype.ref=Q.prototype.Ib;function Yh(a,b){this.F=a;this.Ua=Rb(a);this.fd=null;this.da=new vb;this.Hd=1;this.Ra=null;b||0<=("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)?(this.ba=new Ae(this.F,q(this.Gb,this)),setTimeout(q(this.Uc,this,!0),0)):this.ba=this.Ra=new Kh(this.F,q(this.Gb,this),q(this.Uc,this),q(this.Oe,this));this.Sg=Sb(a,q(function(){return new Mb(this.Ua,this.ba)},this));this.uc=new Rf;
this.Ce=new ob;var c=this;this.Cd=new vf({Xe:function(a,b,f,h){b=[];f=c.Ce.j(a.path);f.e()||(b=xf(c.Cd,new Xb(bf,a.path,f)),setTimeout(function(){h("ok")},0));return b},ae:ba});Zh(this,"connected",!1);this.la=new qc;this.M=new Sg(a,q(this.ba.M,this.ba),q(this.ba.ge,this.ba),q(this.Le,this));this.sd=0;this.De=null;this.L=new vf({Xe:function(a,b,f,h){c.ba.yf(a,f,b,function(b,e){var f=h(b,e);Ab(c.da,a.path,f)});return[]},ae:function(a,b){c.ba.Rf(a,b)}})}g=Yh.prototype;
g.toString=function(){return(this.F.kb?"https://":"http://")+this.F.host};g.name=function(){return this.F.hc};function $h(a){a=a.Ce.j(new L(".info/serverTimeOffset")).I()||0;return(new Date).getTime()+a}function ai(a){a=a={timestamp:$h(a)};a.timestamp=a.timestamp||(new Date).getTime();return a}
g.Gb=function(a,b,c,d){this.sd++;var e=new L(a);b=this.De?this.De(a,b):b;a=[];d?c?(b=na(b,function(a){return M(a)}),a=Ff(this.L,e,b,d)):(b=M(b),a=Bf(this.L,e,b,d)):c?(d=na(b,function(a){return M(a)}),a=Af(this.L,e,d)):(d=M(b),a=xf(this.L,new Xb(bf,e,d)));d=e;0<a.length&&(d=bi(this,e));Ab(this.da,d,a)};g.Uc=function(a){Zh(this,"connected",a);!1===a&&ci(this)};g.Oe=function(a){var b=this;Wc(a,function(a,d){Zh(b,d,a)})};g.Le=function(a){Zh(this,"authenticated",a)};
function Zh(a,b,c){b=new L("/.info/"+b);c=M(c);var d=a.Ce;d.Wd=d.Wd.G(b,c);c=xf(a.Cd,new Xb(bf,b,c));Ab(a.da,b,c)}g.Kb=function(a,b,c,d){this.f("set",{path:a.toString(),value:b,$g:c});var e=ai(this);b=M(b,c);var e=sc(b,e),f=this.Hd++,e=wf(this.L,a,e,f,!0);wb(this.da,e);var h=this;this.ba.put(a.toString(),b.I(!0),function(b,c){var e="ok"===b;e||O("set at "+a+" failed: "+b);e=zf(h.L,f,!e);Ab(h.da,a,e);di(d,b,c)});e=ei(this,a);bi(this,e);Ab(this.da,e,[])};
g.update=function(a,b,c){this.f("update",{path:a.toString(),value:b});var d=!0,e=ai(this),f={};r(b,function(a,b){d=!1;var c=M(a);f[b]=sc(c,e)});if(d)Cb("update() called with empty data.  Don't do anything."),di(c,"ok");else{var h=this.Hd++,k=yf(this.L,a,f,h);wb(this.da,k);var l=this;this.ba.zf(a.toString(),b,function(b,d){var e="ok"===b;e||O("update at "+a+" failed: "+b);var e=zf(l.L,h,!e),f=a;0<e.length&&(f=bi(l,a));Ab(l.da,f,e);di(c,b,d)});b=ei(this,a);bi(this,b);Ab(this.da,a,[])}};
function ci(a){a.f("onDisconnectEvents");var b=ai(a),c=[];rc(pc(a.la,b),G,function(b,e){c=c.concat(xf(a.L,new Xb(bf,b,e)));var f=ei(a,b);bi(a,f)});a.la=new qc;Ab(a.da,G,c)}g.Jd=function(a,b){var c=this;this.ba.Jd(a.toString(),function(d,e){"ok"===d&&rg(c.la,a);di(b,d,e)})};function fi(a,b,c,d){var e=M(c);a.ba.Me(b.toString(),e.I(!0),function(c,h){"ok"===c&&a.la.nc(b,e);di(d,c,h)})}function gi(a,b,c,d,e){var f=M(c,d);a.ba.Me(b.toString(),f.I(!0),function(c,d){"ok"===c&&a.la.nc(b,f);di(e,c,d)})}
function hi(a,b,c,d){var e=!0,f;for(f in c)e=!1;e?(Cb("onDisconnect().update() called with empty data.  Don't do anything."),di(d,"ok")):a.ba.Cf(b.toString(),c,function(e,f){if("ok"===e)for(var l in c){var m=M(c[l]);a.la.nc(b.u(l),m)}di(d,e,f)})}function ii(a,b,c){c=".info"===E(b.path)?a.Cd.Pb(b,c):a.L.Pb(b,c);yb(a.da,b.path,c)}g.yb=function(){this.Ra&&this.Ra.yb()};g.rc=function(){this.Ra&&this.Ra.rc()};
g.Ye=function(a){if("undefined"!==typeof console){a?(this.fd||(this.fd=new Lb(this.Ua)),a=this.fd.get()):a=this.Ua.get();var b=Ra(sa(a),function(a,b){return Math.max(b.length,a)},0),c;for(c in a){for(var d=a[c],e=c.length;e<b+2;e++)c+=" ";console.log(c+d)}}};g.Ze=function(a){Ob(this.Ua,a);this.Sg.Of[a]=!0};g.f=function(a){var b="";this.Ra&&(b=this.Ra.id+":");Cb(b,arguments)};
function di(a,b,c){a&&Db(function(){if("ok"==b)a(null);else{var d=(b||"error").toUpperCase(),e=d;c&&(e+=": "+c);e=Error(e);e.code=d;a(e)}})};function ji(a,b,c,d,e){function f(){}a.f("transaction on "+b);var h=new U(a,b);h.Eb("value",f);c={path:b,update:c,H:d,status:null,Ff:Ec(),cf:e,Lf:0,ie:function(){h.ic("value",f)},ke:null,Ba:null,pd:null,qd:null,rd:null};d=a.L.za(b,void 0)||C;c.pd=d;d=c.update(d.I());if(n(d)){cg("transaction failed: Data returned ",d,c.path);c.status=1;e=Sf(a.uc,b);var k=e.Ca()||[];k.push(c);Tf(e,k);"object"===typeof d&&null!==d&&v(d,".priority")?(k=w(d,".priority"),K(ag(k),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):
k=(a.L.za(b)||C).C().I();e=ai(a);d=M(d,k);e=sc(d,e);c.qd=d;c.rd=e;c.Ba=a.Hd++;c=wf(a.L,b,e,c.Ba,c.cf);Ab(a.da,b,c);ki(a)}else c.ie(),c.qd=null,c.rd=null,c.H&&(a=new Q(c.pd,new U(a,c.path),N),c.H(null,!1,a))}function ki(a,b){var c=b||a.uc;b||li(a,c);if(null!==c.Ca()){var d=mi(a,c);K(0<d.length,"Sending zero length transaction queue");Sa(d,function(a){return 1===a.status})&&ni(a,c.path(),d)}else c.wd()&&c.P(function(b){ki(a,b)})}
function ni(a,b,c){for(var d=Qa(c,function(a){return a.Ba}),e=a.L.za(b,d)||C,d=e,e=e.hash(),f=0;f<c.length;f++){var h=c[f];K(1===h.status,"tryToSendTransactionQueue_: items in queue should all be run.");h.status=2;h.Lf++;var k=T(b,h.path),d=d.G(k,h.qd)}d=d.I(!0);a.ba.put(b.toString(),d,function(d){a.f("transaction put response",{path:b.toString(),status:d});var e=[];if("ok"===d){d=[];for(f=0;f<c.length;f++){c[f].status=3;e=e.concat(zf(a.L,c[f].Ba));if(c[f].H){var h=c[f].rd,k=new U(a,c[f].path);d.push(q(c[f].H,
null,null,!0,new Q(h,k,N)))}c[f].ie()}li(a,Sf(a.uc,b));ki(a);Ab(a.da,b,e);for(f=0;f<d.length;f++)Db(d[f])}else{if("datastale"===d)for(f=0;f<c.length;f++)c[f].status=4===c[f].status?5:1;else for(O("transaction at "+b.toString()+" failed: "+d),f=0;f<c.length;f++)c[f].status=5,c[f].ke=d;bi(a,b)}},e)}function bi(a,b){var c=oi(a,b),d=c.path(),c=mi(a,c);pi(a,c,d);return d}
function pi(a,b,c){if(0!==b.length){for(var d=[],e=[],f=Qa(b,function(a){return a.Ba}),h=0;h<b.length;h++){var k=b[h],l=T(c,k.path),m=!1,t;K(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null.");if(5===k.status)m=!0,t=k.ke,e=e.concat(zf(a.L,k.Ba,!0));else if(1===k.status)if(25<=k.Lf)m=!0,t="maxretry",e=e.concat(zf(a.L,k.Ba,!0));else{var z=a.L.za(k.path,f)||C;k.pd=z;var I=b[h].update(z.I());n(I)?(cg("transaction failed: Data returned ",I,k.path),l=M(I),"object"===typeof I&&null!=
I&&v(I,".priority")||(l=l.ga(z.C())),z=k.Ba,I=ai(a),I=sc(l,I),k.qd=l,k.rd=I,k.Ba=a.Hd++,Va(f,z),e=e.concat(wf(a.L,k.path,I,k.Ba,k.cf)),e=e.concat(zf(a.L,z,!0))):(m=!0,t="nodata",e=e.concat(zf(a.L,k.Ba,!0)))}Ab(a.da,c,e);e=[];m&&(b[h].status=3,setTimeout(b[h].ie,Math.floor(0)),b[h].H&&("nodata"===t?(k=new U(a,b[h].path),d.push(q(b[h].H,null,null,!1,new Q(b[h].pd,k,N)))):d.push(q(b[h].H,null,Error(t),!1,null))))}li(a,a.uc);for(h=0;h<d.length;h++)Db(d[h]);ki(a)}}
function oi(a,b){for(var c,d=a.uc;null!==(c=E(b))&&null===d.Ca();)d=Sf(d,c),b=H(b);return d}function mi(a,b){var c=[];qi(a,b,c);c.sort(function(a,b){return a.Ff-b.Ff});return c}function qi(a,b,c){var d=b.Ca();if(null!==d)for(var e=0;e<d.length;e++)c.push(d[e]);b.P(function(b){qi(a,b,c)})}function li(a,b){var c=b.Ca();if(c){for(var d=0,e=0;e<c.length;e++)3!==c[e].status&&(c[d]=c[e],d++);c.length=d;Tf(b,0<c.length?c:null)}b.P(function(b){li(a,b)})}
function ei(a,b){var c=oi(a,b).path(),d=Sf(a.uc,b);Wf(d,function(b){ri(a,b)});ri(a,d);Vf(d,function(b){ri(a,b)});return c}
function ri(a,b){var c=b.Ca();if(null!==c){for(var d=[],e=[],f=-1,h=0;h<c.length;h++)4!==c[h].status&&(2===c[h].status?(K(f===h-1,"All SENT items should be at beginning of queue."),f=h,c[h].status=4,c[h].ke="set"):(K(1===c[h].status,"Unexpected transaction status in abort"),c[h].ie(),e=e.concat(zf(a.L,c[h].Ba,!0)),c[h].H&&d.push(q(c[h].H,null,Error("set"),!1,null))));-1===f?Tf(b,null):c.length=f+1;Ab(a.da,b.path(),e);for(h=0;h<d.length;h++)Db(d[h])}};function W(){this.oc={};this.Sf=!1}W.prototype.yb=function(){for(var a in this.oc)this.oc[a].yb()};W.prototype.rc=function(){for(var a in this.oc)this.oc[a].rc()};W.prototype.ve=function(){this.Sf=!0};ca(W);W.prototype.interrupt=W.prototype.yb;W.prototype.resume=W.prototype.rc;function X(a,b){this.bd=a;this.ra=b}X.prototype.cancel=function(a){x("Firebase.onDisconnect().cancel",0,1,arguments.length);A("Firebase.onDisconnect().cancel",1,a,!0);this.bd.Jd(this.ra,a||null)};X.prototype.cancel=X.prototype.cancel;X.prototype.remove=function(a){x("Firebase.onDisconnect().remove",0,1,arguments.length);jg("Firebase.onDisconnect().remove",this.ra);A("Firebase.onDisconnect().remove",1,a,!0);fi(this.bd,this.ra,null,a)};X.prototype.remove=X.prototype.remove;
X.prototype.set=function(a,b){x("Firebase.onDisconnect().set",1,2,arguments.length);jg("Firebase.onDisconnect().set",this.ra);bg("Firebase.onDisconnect().set",a,this.ra,!1);A("Firebase.onDisconnect().set",2,b,!0);fi(this.bd,this.ra,a,b)};X.prototype.set=X.prototype.set;
X.prototype.Kb=function(a,b,c){x("Firebase.onDisconnect().setWithPriority",2,3,arguments.length);jg("Firebase.onDisconnect().setWithPriority",this.ra);bg("Firebase.onDisconnect().setWithPriority",a,this.ra,!1);fg("Firebase.onDisconnect().setWithPriority",2,b);A("Firebase.onDisconnect().setWithPriority",3,c,!0);gi(this.bd,this.ra,a,b,c)};X.prototype.setWithPriority=X.prototype.Kb;
X.prototype.update=function(a,b){x("Firebase.onDisconnect().update",1,2,arguments.length);jg("Firebase.onDisconnect().update",this.ra);if(ea(a)){for(var c={},d=0;d<a.length;++d)c[""+d]=a[d];a=c;O("Passing an Array to Firebase.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}eg("Firebase.onDisconnect().update",a,this.ra);A("Firebase.onDisconnect().update",2,b,!0);
hi(this.bd,this.ra,a,b)};X.prototype.update=X.prototype.update;function Y(a,b,c,d){this.k=a;this.path=b;this.n=c;this.lc=d}
function si(a){var b=null,c=null;a.ma&&(b=nd(a));a.pa&&(c=pd(a));if(a.g===Qd){if(a.ma){if("[MIN_NAME]"!=md(a))throw Error("Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().");if("string"!==typeof b)throw Error("Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.");}if(a.pa){if("[MAX_NAME]"!=od(a))throw Error("Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().");if("string"!==
typeof c)throw Error("Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.");}}else if(a.g===N){if(null!=b&&!ag(b)||null!=c&&!ag(c))throw Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).");}else if(K(a.g instanceof Ud||a.g===$d,"unknown index type."),null!=b&&"object"===typeof b||null!=c&&"object"===typeof c)throw Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.");
}function ti(a){if(a.ma&&a.pa&&a.ja&&(!a.ja||""===a.Nb))throw Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.");}function ui(a,b){if(!0===a.lc)throw Error(b+": You can't combine multiple orderBy calls.");}g=Y.prototype;g.Ib=function(){x("Query.ref",0,0,arguments.length);return new U(this.k,this.path)};
g.Eb=function(a,b,c,d){x("Query.on",2,4,arguments.length);gg("Query.on",a,!1);A("Query.on",2,b,!1);var e=vi("Query.on",c,d);if("value"===a)ii(this.k,this,new id(b,e.cancel||null,e.Ma||null));else{var f={};f[a]=b;ii(this.k,this,new jd(f,e.cancel,e.Ma))}return b};
g.ic=function(a,b,c){x("Query.off",0,3,arguments.length);gg("Query.off",a,!0);A("Query.off",2,b,!0);mb("Query.off",3,c);var d=null,e=null;"value"===a?d=new id(b||null,null,c||null):a&&(b&&(e={},e[a]=b),d=new jd(e,null,c||null));e=this.k;d=".info"===E(this.path)?e.Cd.jb(this,d):e.L.jb(this,d);yb(e.da,this.path,d)};
g.Dg=function(a,b){function c(h){f&&(f=!1,e.ic(a,c),b.call(d.Ma,h))}x("Query.once",2,4,arguments.length);gg("Query.once",a,!1);A("Query.once",2,b,!1);var d=vi("Query.once",arguments[2],arguments[3]),e=this,f=!0;this.Eb(a,c,function(b){e.ic(a,c);d.cancel&&d.cancel.call(d.Ma,b)})};
g.He=function(a){O("Query.limit() being deprecated. Please use Query.limitToFirst() or Query.limitToLast() instead.");x("Query.limit",1,1,arguments.length);if(!ga(a)||Math.floor(a)!==a||0>=a)throw Error("Query.limit: First argument must be a positive integer.");if(this.n.ja)throw Error("Query.limit: Limit was already set (by another call to limit, limitToFirst, orlimitToLast.");var b=this.n.He(a);ti(b);return new Y(this.k,this.path,b,this.lc)};
g.Ie=function(a){x("Query.limitToFirst",1,1,arguments.length);if(!ga(a)||Math.floor(a)!==a||0>=a)throw Error("Query.limitToFirst: First argument must be a positive integer.");if(this.n.ja)throw Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new Y(this.k,this.path,this.n.Ie(a),this.lc)};
g.Je=function(a){x("Query.limitToLast",1,1,arguments.length);if(!ga(a)||Math.floor(a)!==a||0>=a)throw Error("Query.limitToLast: First argument must be a positive integer.");if(this.n.ja)throw Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new Y(this.k,this.path,this.n.Je(a),this.lc)};
g.Eg=function(a){x("Query.orderByChild",1,1,arguments.length);if("$key"===a)throw Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===a)throw Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===a)throw Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');ig("Query.orderByChild",a);ui(this,"Query.orderByChild");var b=new L(a);if(b.e())throw Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");
b=new Ud(b);b=de(this.n,b);si(b);return new Y(this.k,this.path,b,!0)};g.Fg=function(){x("Query.orderByKey",0,0,arguments.length);ui(this,"Query.orderByKey");var a=de(this.n,Qd);si(a);return new Y(this.k,this.path,a,!0)};g.Gg=function(){x("Query.orderByPriority",0,0,arguments.length);ui(this,"Query.orderByPriority");var a=de(this.n,N);si(a);return new Y(this.k,this.path,a,!0)};
g.Hg=function(){x("Query.orderByValue",0,0,arguments.length);ui(this,"Query.orderByValue");var a=de(this.n,$d);si(a);return new Y(this.k,this.path,a,!0)};g.$d=function(a,b){x("Query.startAt",0,2,arguments.length);bg("Query.startAt",a,this.path,!0);hg("Query.startAt",b);var c=this.n.$d(a,b);ti(c);si(c);if(this.n.ma)throw Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");n(a)||(b=a=null);return new Y(this.k,this.path,c,this.lc)};
g.td=function(a,b){x("Query.endAt",0,2,arguments.length);bg("Query.endAt",a,this.path,!0);hg("Query.endAt",b);var c=this.n.td(a,b);ti(c);si(c);if(this.n.pa)throw Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new Y(this.k,this.path,c,this.lc)};
g.kg=function(a,b){x("Query.equalTo",1,2,arguments.length);bg("Query.equalTo",a,this.path,!1);hg("Query.equalTo",b);if(this.n.ma)throw Error("Query.equalTo: Starting point was already set (by another call to endAt or equalTo).");if(this.n.pa)throw Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.$d(a,b).td(a,b)};
g.toString=function(){x("Query.toString",0,0,arguments.length);for(var a=this.path,b="",c=a.Z;c<a.o.length;c++)""!==a.o[c]&&(b+="/"+encodeURIComponent(String(a.o[c])));return this.k.toString()+(b||"/")};g.va=function(){var a=Uc(ee(this.n));return"{}"===a?"default":a};
function vi(a,b,c){var d={cancel:null,Ma:null};if(b&&c)d.cancel=b,A(a,3,d.cancel,!0),d.Ma=c,mb(a,4,d.Ma);else if(b)if("object"===typeof b&&null!==b)d.Ma=b;else if("function"===typeof b)d.cancel=b;else throw Error(y(a,3,!0)+" must either be a cancel callback or a context object.");return d}Y.prototype.ref=Y.prototype.Ib;Y.prototype.on=Y.prototype.Eb;Y.prototype.off=Y.prototype.ic;Y.prototype.once=Y.prototype.Dg;Y.prototype.limit=Y.prototype.He;Y.prototype.limitToFirst=Y.prototype.Ie;
Y.prototype.limitToLast=Y.prototype.Je;Y.prototype.orderByChild=Y.prototype.Eg;Y.prototype.orderByKey=Y.prototype.Fg;Y.prototype.orderByPriority=Y.prototype.Gg;Y.prototype.orderByValue=Y.prototype.Hg;Y.prototype.startAt=Y.prototype.$d;Y.prototype.endAt=Y.prototype.td;Y.prototype.equalTo=Y.prototype.kg;Y.prototype.toString=Y.prototype.toString;var Z={};Z.vc=Kh;Z.DataConnection=Z.vc;Kh.prototype.Rg=function(a,b){this.Fa("q",{p:a},b)};Z.vc.prototype.simpleListen=Z.vc.prototype.Rg;Kh.prototype.jg=function(a,b){this.Fa("echo",{d:a},b)};Z.vc.prototype.echo=Z.vc.prototype.jg;Kh.prototype.interrupt=Kh.prototype.yb;Z.Vf=yh;Z.RealTimeConnection=Z.Vf;yh.prototype.sendRequest=yh.prototype.Fa;yh.prototype.close=yh.prototype.close;
Z.rg=function(a){var b=Kh.prototype.put;Kh.prototype.put=function(c,d,e,f){n(f)&&(f=a());b.call(this,c,d,e,f)};return function(){Kh.prototype.put=b}};Z.hijackHash=Z.rg;Z.Uf=zc;Z.ConnectionTarget=Z.Uf;Z.va=function(a){return a.va()};Z.queryIdentifier=Z.va;Z.tg=function(a){return a.k.Ra.$};Z.listens=Z.tg;Z.ve=function(a){a.ve()};Z.forceRestClient=Z.ve;function U(a,b){var c,d,e;if(a instanceof Yh)c=a,d=b;else{x("new Firebase",1,2,arguments.length);d=Pc(arguments[0]);c=d.Tg;"firebase"===d.domain&&Oc(d.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead");c&&"undefined"!=c||Oc("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com");d.kb||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&O("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");
c=new zc(d.host,d.kb,c,"ws"===d.scheme||"wss"===d.scheme);d=new L(d.$c);e=d.toString();var f;!(f=!p(c.host)||0===c.host.length||!$f(c.hc))&&(f=0!==e.length)&&(e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),f=!(p(e)&&0!==e.length&&!Yf.test(e)));if(f)throw Error(y("new Firebase",1,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".');if(b)if(b instanceof W)e=b;else if(p(b))e=W.ub(),c.Od=b;else throw Error("Expected a valid Firebase.Context for second argument to new Firebase()");
else e=W.ub();f=c.toString();var h=w(e.oc,f);h||(h=new Yh(c,e.Sf),e.oc[f]=h);c=h}Y.call(this,c,d,be,!1)}ma(U,Y);var wi=U,xi=["Firebase"],yi=aa;xi[0]in yi||!yi.execScript||yi.execScript("var "+xi[0]);for(var zi;xi.length&&(zi=xi.shift());)!xi.length&&n(wi)?yi[zi]=wi:yi=yi[zi]?yi[zi]:yi[zi]={};U.goOffline=function(){x("Firebase.goOffline",0,0,arguments.length);W.ub().yb()};U.goOnline=function(){x("Firebase.goOnline",0,0,arguments.length);W.ub().rc()};
function Lc(a,b){K(!b||!0===a||!1===a,"Can't turn on custom loggers persistently.");!0===a?("undefined"!==typeof console&&("function"===typeof console.log?Bb=q(console.log,console):"object"===typeof console.log&&(Bb=function(a){console.log(a)})),b&&yc.set("logging_enabled",!0)):a?Bb=a:(Bb=null,yc.remove("logging_enabled"))}U.enableLogging=Lc;U.ServerValue={TIMESTAMP:{".sv":"timestamp"}};U.SDK_VERSION=hb;U.INTERNAL=V;U.Context=W;U.TEST_ACCESS=Z;
U.prototype.name=function(){O("Firebase.name() being deprecated. Please use Firebase.key() instead.");x("Firebase.name",0,0,arguments.length);return this.key()};U.prototype.name=U.prototype.name;U.prototype.key=function(){x("Firebase.key",0,0,arguments.length);return this.path.e()?null:Ld(this.path)};U.prototype.key=U.prototype.key;
U.prototype.u=function(a){x("Firebase.child",1,1,arguments.length);if(ga(a))a=String(a);else if(!(a instanceof L))if(null===E(this.path)){var b=a;b&&(b=b.replace(/^\/*\.info(\/|$)/,"/"));ig("Firebase.child",b)}else ig("Firebase.child",a);return new U(this.k,this.path.u(a))};U.prototype.child=U.prototype.u;U.prototype.parent=function(){x("Firebase.parent",0,0,arguments.length);var a=this.path.parent();return null===a?null:new U(this.k,a)};U.prototype.parent=U.prototype.parent;
U.prototype.root=function(){x("Firebase.ref",0,0,arguments.length);for(var a=this;null!==a.parent();)a=a.parent();return a};U.prototype.root=U.prototype.root;U.prototype.set=function(a,b){x("Firebase.set",1,2,arguments.length);jg("Firebase.set",this.path);bg("Firebase.set",a,this.path,!1);A("Firebase.set",2,b,!0);this.k.Kb(this.path,a,null,b||null)};U.prototype.set=U.prototype.set;
U.prototype.update=function(a,b){x("Firebase.update",1,2,arguments.length);jg("Firebase.update",this.path);if(ea(a)){for(var c={},d=0;d<a.length;++d)c[""+d]=a[d];a=c;O("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}eg("Firebase.update",a,this.path);A("Firebase.update",2,b,!0);this.k.update(this.path,a,b||null)};U.prototype.update=U.prototype.update;
U.prototype.Kb=function(a,b,c){x("Firebase.setWithPriority",2,3,arguments.length);jg("Firebase.setWithPriority",this.path);bg("Firebase.setWithPriority",a,this.path,!1);fg("Firebase.setWithPriority",2,b);A("Firebase.setWithPriority",3,c,!0);if(".length"===this.key()||".keys"===this.key())throw"Firebase.setWithPriority failed: "+this.key()+" is a read-only object.";this.k.Kb(this.path,a,b,c||null)};U.prototype.setWithPriority=U.prototype.Kb;
U.prototype.remove=function(a){x("Firebase.remove",0,1,arguments.length);jg("Firebase.remove",this.path);A("Firebase.remove",1,a,!0);this.set(null,a)};U.prototype.remove=U.prototype.remove;
U.prototype.transaction=function(a,b,c){x("Firebase.transaction",1,3,arguments.length);jg("Firebase.transaction",this.path);A("Firebase.transaction",1,a,!1);A("Firebase.transaction",2,b,!0);if(n(c)&&"boolean"!=typeof c)throw Error(y("Firebase.transaction",3,!0)+"must be a boolean.");if(".length"===this.key()||".keys"===this.key())throw"Firebase.transaction failed: "+this.key()+" is a read-only object.";"undefined"===typeof c&&(c=!0);ji(this.k,this.path,a,b||null,c)};U.prototype.transaction=U.prototype.transaction;
U.prototype.Og=function(a,b){x("Firebase.setPriority",1,2,arguments.length);jg("Firebase.setPriority",this.path);fg("Firebase.setPriority",1,a);A("Firebase.setPriority",2,b,!0);this.k.Kb(this.path.u(".priority"),a,null,b)};U.prototype.setPriority=U.prototype.Og;
U.prototype.push=function(a,b){x("Firebase.push",0,2,arguments.length);jg("Firebase.push",this.path);bg("Firebase.push",a,this.path,!0);A("Firebase.push",2,b,!0);var c=$h(this.k),c=Fe(c),c=this.u(c);"undefined"!==typeof a&&null!==a&&c.set(a,b);return c};U.prototype.push=U.prototype.push;U.prototype.hb=function(){jg("Firebase.onDisconnect",this.path);return new X(this.k,this.path)};U.prototype.onDisconnect=U.prototype.hb;
U.prototype.M=function(a,b,c){O("FirebaseRef.auth() being deprecated. Please use FirebaseRef.authWithCustomToken() instead.");x("Firebase.auth",1,3,arguments.length);kg("Firebase.auth",a);A("Firebase.auth",2,b,!0);A("Firebase.auth",3,b,!0);Yg(this.k.M,a,{},{remember:"none"},b,c)};U.prototype.auth=U.prototype.M;U.prototype.ge=function(a){x("Firebase.unauth",0,1,arguments.length);A("Firebase.unauth",1,a,!0);Zg(this.k.M,a)};U.prototype.unauth=U.prototype.ge;
U.prototype.xe=function(){x("Firebase.getAuth",0,0,arguments.length);return this.k.M.xe()};U.prototype.getAuth=U.prototype.xe;U.prototype.xg=function(a,b){x("Firebase.onAuth",1,2,arguments.length);A("Firebase.onAuth",1,a,!1);mb("Firebase.onAuth",2,b);this.k.M.Eb("auth_status",a,b)};U.prototype.onAuth=U.prototype.xg;U.prototype.wg=function(a,b){x("Firebase.offAuth",1,2,arguments.length);A("Firebase.offAuth",1,a,!1);mb("Firebase.offAuth",2,b);this.k.M.ic("auth_status",a,b)};U.prototype.offAuth=U.prototype.wg;
U.prototype.Zf=function(a,b,c){x("Firebase.authWithCustomToken",2,3,arguments.length);kg("Firebase.authWithCustomToken",a);A("Firebase.authWithCustomToken",2,b,!1);ng("Firebase.authWithCustomToken",3,c,!0);Yg(this.k.M,a,{},c||{},b)};U.prototype.authWithCustomToken=U.prototype.Zf;U.prototype.$f=function(a,b,c){x("Firebase.authWithOAuthPopup",2,3,arguments.length);mg("Firebase.authWithOAuthPopup",a);A("Firebase.authWithOAuthPopup",2,b,!1);ng("Firebase.authWithOAuthPopup",3,c,!0);ch(this.k.M,a,c,b)};
U.prototype.authWithOAuthPopup=U.prototype.$f;U.prototype.ag=function(a,b,c){x("Firebase.authWithOAuthRedirect",2,3,arguments.length);mg("Firebase.authWithOAuthRedirect",a);A("Firebase.authWithOAuthRedirect",2,b,!1);ng("Firebase.authWithOAuthRedirect",3,c,!0);var d=this.k.M;ah(d);var e=[Kg],f=vg(c);"anonymous"===a||"firebase"===a?P(b,Mg("TRANSPORT_UNAVAILABLE")):(yc.set("redirect_client_options",f.od),bh(d,e,"/auth/"+a,f,b))};U.prototype.authWithOAuthRedirect=U.prototype.ag;
U.prototype.bg=function(a,b,c,d){x("Firebase.authWithOAuthToken",3,4,arguments.length);mg("Firebase.authWithOAuthToken",a);A("Firebase.authWithOAuthToken",3,c,!1);ng("Firebase.authWithOAuthToken",4,d,!0);p(b)?(lg("Firebase.authWithOAuthToken",2,b),$g(this.k.M,a+"/token",{access_token:b},d,c)):(ng("Firebase.authWithOAuthToken",2,b,!1),$g(this.k.M,a+"/token",b,d,c))};U.prototype.authWithOAuthToken=U.prototype.bg;
U.prototype.Yf=function(a,b){x("Firebase.authAnonymously",1,2,arguments.length);A("Firebase.authAnonymously",1,a,!1);ng("Firebase.authAnonymously",2,b,!0);$g(this.k.M,"anonymous",{},b,a)};U.prototype.authAnonymously=U.prototype.Yf;
U.prototype.cg=function(a,b,c){x("Firebase.authWithPassword",2,3,arguments.length);ng("Firebase.authWithPassword",1,a,!1);og("Firebase.authWithPassword",a,"email");og("Firebase.authWithPassword",a,"password");A("Firebase.authWithPassword",2,b,!1);ng("Firebase.authWithPassword",3,c,!0);$g(this.k.M,"password",a,c,b)};U.prototype.authWithPassword=U.prototype.cg;
U.prototype.se=function(a,b){x("Firebase.createUser",2,2,arguments.length);ng("Firebase.createUser",1,a,!1);og("Firebase.createUser",a,"email");og("Firebase.createUser",a,"password");A("Firebase.createUser",2,b,!1);this.k.M.se(a,b)};U.prototype.createUser=U.prototype.se;U.prototype.Te=function(a,b){x("Firebase.removeUser",2,2,arguments.length);ng("Firebase.removeUser",1,a,!1);og("Firebase.removeUser",a,"email");og("Firebase.removeUser",a,"password");A("Firebase.removeUser",2,b,!1);this.k.M.Te(a,b)};
U.prototype.removeUser=U.prototype.Te;U.prototype.pe=function(a,b){x("Firebase.changePassword",2,2,arguments.length);ng("Firebase.changePassword",1,a,!1);og("Firebase.changePassword",a,"email");og("Firebase.changePassword",a,"oldPassword");og("Firebase.changePassword",a,"newPassword");A("Firebase.changePassword",2,b,!1);this.k.M.pe(a,b)};U.prototype.changePassword=U.prototype.pe;
U.prototype.oe=function(a,b){x("Firebase.changeEmail",2,2,arguments.length);ng("Firebase.changeEmail",1,a,!1);og("Firebase.changeEmail",a,"oldEmail");og("Firebase.changeEmail",a,"newEmail");og("Firebase.changeEmail",a,"password");A("Firebase.changeEmail",2,b,!1);this.k.M.oe(a,b)};U.prototype.changeEmail=U.prototype.oe;
U.prototype.Ve=function(a,b){x("Firebase.resetPassword",2,2,arguments.length);ng("Firebase.resetPassword",1,a,!1);og("Firebase.resetPassword",a,"email");A("Firebase.resetPassword",2,b,!1);this.k.M.Ve(a,b)};U.prototype.resetPassword=U.prototype.Ve;})();

module.exports = Firebase;

},{}],2:[function(require,module,exports){
var ACTIONS = require("../constants/actions");
function initGame() {
    return {
        type: ACTIONS.INIT_GAME
    };
}
exports.initGame = initGame;
function selectFigure(guid) {
    return {
        type: ACTIONS.SELECT_FIGURE,
        guid: guid
    };
}
exports.selectFigure = selectFigure;
function moveFigure(guid, position) {
    return {
        type: ACTIONS.MOVE_FIGURE,
        guid: guid,
        position: position
    };
}
exports.moveFigure = moveFigure;

},{"../constants/actions":7}],3:[function(require,module,exports){
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var component_1 = require("../core/component");
var Footer = (function (_super) {
    __extends(Footer, _super);
    function Footer() {
        _super.call(this, {});
    }
    Footer.prototype.initEvents = function () {
    };
    Footer.prototype.killEvents = function () {
    };
    Footer.prototype.render = function () {
        return "<div class=\"copyright\">\n              <p> Create with &hearts; by <a href=\"http://www.remojansen.com/\">Remo H. Jansen</a></p>\n            </div>";
    };
    return Footer;
})(component_1.Component);
exports.Footer = Footer;

},{"../core/component":9}],4:[function(require,module,exports){
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var CONST = require("../constants/chess");
var component_1 = require("../core/component");
var store_1 = require("../store/store");
var actions = require("../actions/chess_game_actions");
var ChessGame = (function (_super) {
    __extends(ChessGame, _super);
    function ChessGame(props) {
        _super.call(this, props);
    }
    ChessGame.prototype.handleSelect = function ($cell) {
        var guid = $cell.data("guid");
        var selectAction = actions.selectFigure(guid);
        store_1.store.publish(selectAction);
    };
    ChessGame.prototype.handleMove = function (guid, $cell) {
        var position = {
            x: $cell.data("index"),
            y: $cell.parent().data("index")
        };
        var moveAction = actions.moveFigure(guid, position);
        store_1.store.publish(moveAction);
    };
    ChessGame.prototype.initEvents = function () {
        var _this = this;
        $(".figure").on("click", function (e) {
            var $cell = $(e.currentTarget);
            _this.handleSelect($cell);
        });
        $(".available").on("click", function (e) {
            var $cell = $(e.currentTarget);
            var guid = $(".selected").data("guid");
            _this.handleMove(guid, $cell);
        });
    };
    ChessGame.prototype.killEvents = function () {
        $(".figure").off("click");
    };
    ChessGame.prototype.render = function () {
        var renderCell = function (playerColor, cell, cellIndex) {
            var classes = "";
            var figureId = "";
            if (cell.figure !== null && cell.figure.alive === true) {
                classes += cell.figure.type + "_" + cell.figure.color;
                figureId = cell.figure.id;
                if (cell.figure.color === playerColor) {
                    classes += " figure";
                }
                if (cell.figure.selected === true) {
                    classes += " selected";
                }
            }
            if (cell.available === true) {
                classes += " available";
            }
            return "<div class=\"cell " + cell.color + " " + classes + "\"\n                   data-guid=\"" + figureId + "\" data-index=\"" + cellIndex + "\">\n             </div>";
        };
        var renderRow = function (playerColor, row, rowIndex) {
            var cellsHtml = row.map(function (cell, cellIndex) {
                return renderCell(playerColor, cell, cellIndex);
            }).join("\n");
            return "<div class=\"board-row\" data-index=\"" + rowIndex + "\">" + cellsHtml + "</div>";
        };
        var renderBoard = function (playerColor, board) {
            var rowsHtml = board.map(function (row, rowIndex, rows) {
                return renderRow(playerColor, row, rowIndex);
            }).join("\n");
            return "<div class=\"board-border shadow2\">\n                <div class=\"board shadow\">\n                  " + rowsHtml + "\n                </div>\n              </div>";
        };
        var playerColor = this.props.isPlayerOne ? CONST.WHITE : CONST.BLACK;
        return renderBoard(playerColor, this.props.board);
    };
    return ChessGame;
})(component_1.Component);
exports.ChessGame = ChessGame;

},{"../actions/chess_game_actions":2,"../constants/chess":8,"../core/component":9,"../store/store":13}],5:[function(require,module,exports){
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var component_1 = require("../core/component");
var Header = (function (_super) {
    __extends(Header, _super);
    function Header() {
        _super.call(this, {});
    }
    Header.prototype.initEvents = function () {
    };
    Header.prototype.killEvents = function () {
    };
    Header.prototype.render = function () {
        return "<nav class=\"navbar navbar-default navbar-static-top\">\n              <div class=\"container\">\n                <div class=\"navbar-header\">\n                  <a class=\"navbar-brand\" href=\"#\">\n                    <img alt=\"Brand\" src=\"./assets/knight_w.png\">&nbsp;TypeScript Chess\n                  </a>\n                </div>\n              </div>\n            </nav>";
    };
    return Header;
})(component_1.Component);
exports.Header = Header;

},{"../core/component":9}],6:[function(require,module,exports){
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var component_1 = require("../core/component");
var Modal = (function (_super) {
    __extends(Modal, _super);
    function Modal(props) {
        _super.call(this, props);
    }
    Modal.prototype.initEvents = function () {
    };
    Modal.prototype.killEvents = function () {
    };
    Modal.prototype.render = function () {
        return "<div class=\"modal fade in\" tabindex=\"-1\" role=\"dialog\">\n              <div class=\"modal-dialog\">\n                <div class=\"modal-content\">\n                  <div class=\"modal-header\">\n                    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>\n                    <h4 class=\"modal-title\">Please note</h4>\n                  </div>\n                  <div class=\"modal-body\">\n                    <p>" + this.props.text + "</p>\n                  </div>\n                  <div class=\"modal-footer\">\n                    <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">OK</button>\n                  </div>\n                </div>\n              </div>\n            </div>";
    };
    return Modal;
})(component_1.Component);
exports.Modal = Modal;

},{"../core/component":9}],7:[function(require,module,exports){
exports.INIT_GAME = "INIT_GAME";
exports.JOIN_GAME = "JOIN_GAME";
exports.LEAVE_GAME = "LEAVE_GAME";
exports.SELECT_FIGURE = "SELECT_FIGURE";
exports.MOVE_FIGURE = "MOVE_FIGURE";
exports.RESTORE_FIGURE = "RESTORE_FIGURE";

},{}],8:[function(require,module,exports){
exports.BLACK = "b";
exports.WHITE = "w";
exports.FIGURE_KING = "king";
exports.FIGURE_QUEEN = "queen";
exports.FIGURE_BISHOP = "bishop";
exports.FIGURE_KNIGHT = "knight";
exports.FIGURE_TOWER = "tower";
exports.FIGURE_PAWN = "pawn";
exports.BOARD_LENGTH = 8;
exports.WHITE_FIGURES_FIRST_ROW = 7;
exports.WHITE_FIGURES_SECOND_ROW = 6;
exports.BLACK_FIGURES_FIRST_ROW = 0;
exports.BLACK_FIGURES_SECOND_ROW = 1;
exports.KING_FIGURE_INITIAL_COLUMN = 4;
exports.QUEEN_FIGURE_INITIAL_COLUMN = 3;
exports.BISHOP_LEFT_FIGURE_INITIAL_COLUMN = 2;
exports.BISHOP_RIGHT_FIGURE_INITIAL_COLUMN = 5;
exports.KNIGHT_LEFT_FIGURE_INITIAL_COLUMN = 1;
exports.KNIGHT_RIGHT_FIGURE_INITIAL_COLUMN = 6;
exports.TOWER_LEFT_FIGURE_INITIAL_COLUMN = 0;
exports.TOWER_RIGHT_FIGURE_INITIAL_COLUMN = 7;

},{}],9:[function(require,module,exports){
var Component = (function () {
    function Component(props) {
        this.props = props;
    }
    return Component;
})();
exports.Component = Component;

},{}],10:[function(require,module,exports){
var Store = (function () {
    function Store(rootReducer) {
        this._rootReducer = rootReducer;
        this._state = {};
        this._subscribers = [];
    }
    Store.prototype.getState = function () {
        return this._state;
    };
    Store.prototype.setState = function (newState) {
        this._state = newState;
    };
    Store.prototype.publish = function (action) {
        this._state = this._rootReducer(this._state, action);
        this._subscribers.forEach(function (handler) {
            handler();
        });
    };
    Store.prototype.subscribe = function (handler) {
        this._subscribers.push(handler);
    };
    return Store;
})();
exports.Store = Store;

},{}],11:[function(require,module,exports){
var header_1 = require("./components/header");
var footer_1 = require("./components/footer");
var game_1 = require("./components/game");
var gameUtils = require("./utils/game_utils");
var firebaseReferences = require("./utils/firebase_references");
var actions = require("./actions/chess_game_actions");
var store_1 = require("./store/store");
var header = new header_1.Header();
var footer = new footer_1.Footer();
gameUtils.render(header, document.getElementById("header"));
gameUtils.render(footer, document.getElementById("footer"));
var state = store_1.store.getState();
var gameRef = firebaseReferences.ref.child("game-" + state.gameID);
gameRef.on('child_added', function (child) {
    debugger;
    var guid = "";
    var position = { x: 1, y: 1 };
    var moveAction = actions.moveFigure(guid, position);
    store_1.store.publish(moveAction);
});
function refresh() {
    var state = store_1.store.getState();
    var chessGame = new game_1.ChessGame(state);
    gameUtils.render(chessGame, document.getElementById("app"));
}
store_1.store.subscribe(refresh);
store_1.store.publish(actions.initGame());

},{"./actions/chess_game_actions":2,"./components/footer":3,"./components/game":4,"./components/header":5,"./store/store":13,"./utils/firebase_references":15,"./utils/game_utils":16}],12:[function(require,module,exports){
var ACTIONS = require("../constants/actions");
var gameUtils = require("../utils/game_utils");
var chessUtils = require("../utils/chess_utils");
var firebaseReferences = require("../utils/firebase_references");
var board = chessUtils.newBoard();
var player1Figures = chessUtils.getDefaultWhiteFigures();
var player2Figures = chessUtils.getDefaultBlackFigures();
chessUtils.positionFigures(board, player1Figures);
chessUtils.positionFigures(board, player2Figures);
var _a = gameUtils.initGame(firebaseReferences.lobbyRef), gameID = _a.gameID, playerID = _a.playerID, isPlayerOne = _a.isPlayerOne;
var defaultState = {
    gameID: gameID,
    playerID: playerID,
    isPlayerOne: isPlayerOne,
    board: board,
    player1Figures: player1Figures,
    player2Figures: player2Figures
};
function chessReducer(state, action) {
    switch (action.type) {
        case ACTIONS.JOIN_GAME:
            return state;
        case ACTIONS.LEAVE_GAME:
            return state;
        case ACTIONS.SELECT_FIGURE:
            return chessUtils.selectFigure(state, action);
        case ACTIONS.MOVE_FIGURE:
            return chessUtils.moveFigure(state, action);
        case ACTIONS.RESTORE_FIGURE:
            return state;
        case ACTIONS.INIT_GAME:
        default:
            return defaultState;
    }
}
exports.chessReducer = chessReducer;

},{"../constants/actions":7,"../utils/chess_utils":14,"../utils/firebase_references":15,"../utils/game_utils":16}],13:[function(require,module,exports){
var store_1 = require("../core/store");
var chess_reducer_1 = require("../reducers/chess_reducer");
var store = new store_1.Store(chess_reducer_1.chessReducer);
exports.store = store;

},{"../core/store":10,"../reducers/chess_reducer":12}],14:[function(require,module,exports){
var CONST = require("../constants/chess");
var gameUtils = require("./game_utils");
function newBoard() {
    var board = [];
    for (var i = 0; i < CONST.BOARD_LENGTH; i++) {
        var row = [];
        for (var j = 0; j < CONST.BOARD_LENGTH; j++) {
            if (i % 2 === 0) {
                row.push({
                    figure: null,
                    color: (j % 2 === 0) ? CONST.WHITE : CONST.BLACK,
                    available: false
                });
            }
            else {
                row.push({
                    figure: null,
                    color: (j % 2 !== 0) ? CONST.WHITE : CONST.BLACK,
                    available: false
                });
            }
        }
        board.push(row);
    }
    return board;
}
exports.newBoard = newBoard;
function getDefaultFigures(areBlack) {
    var color = areBlack ? CONST.BLACK : CONST.WHITE;
    var firstRow = areBlack ? CONST.BLACK_FIGURES_FIRST_ROW : CONST.WHITE_FIGURES_FIRST_ROW;
    var secondRow = areBlack ? CONST.BLACK_FIGURES_SECOND_ROW : CONST.WHITE_FIGURES_SECOND_ROW;
    var figures = [];
    for (var i = 0; i < CONST.BOARD_LENGTH; i++) {
        figures.push({
            id: gameUtils.guid(),
            color: color,
            type: CONST.FIGURE_PAWN,
            position: {
                y: secondRow,
                x: i
            },
            alive: true,
            selected: false,
            hasMoved: false
        });
    }
    figures.push({ id: gameUtils.guid(), color: color, type: CONST.FIGURE_KING,
        position: { y: firstRow, x: CONST.KING_FIGURE_INITIAL_COLUMN },
        alive: true, selected: false, hasMoved: false });
    figures.push({ id: gameUtils.guid(), color: color, type: CONST.FIGURE_QUEEN,
        position: { y: firstRow, x: CONST.QUEEN_FIGURE_INITIAL_COLUMN },
        alive: true, selected: false, hasMoved: false });
    figures.push({ id: gameUtils.guid(), color: color, type: CONST.FIGURE_BISHOP,
        position: { y: firstRow, x: CONST.BISHOP_LEFT_FIGURE_INITIAL_COLUMN },
        alive: true, selected: false, hasMoved: false });
    figures.push({ id: gameUtils.guid(), color: color, type: CONST.FIGURE_BISHOP,
        position: { y: firstRow, x: CONST.BISHOP_RIGHT_FIGURE_INITIAL_COLUMN },
        alive: true, selected: false, hasMoved: false });
    figures.push({ id: gameUtils.guid(), color: color, type: CONST.FIGURE_KNIGHT,
        position: { y: firstRow, x: CONST.KNIGHT_LEFT_FIGURE_INITIAL_COLUMN },
        alive: true, selected: false, hasMoved: false });
    figures.push({ id: gameUtils.guid(), color: color, type: CONST.FIGURE_KNIGHT,
        position: { y: firstRow, x: CONST.KNIGHT_RIGHT_FIGURE_INITIAL_COLUMN },
        alive: true, selected: false, hasMoved: false });
    figures.push({ id: gameUtils.guid(), color: color, type: CONST.FIGURE_TOWER,
        position: { y: firstRow, x: CONST.TOWER_LEFT_FIGURE_INITIAL_COLUMN },
        alive: true, selected: false, hasMoved: false });
    figures.push({ id: gameUtils.guid(), color: color, type: CONST.FIGURE_TOWER,
        position: { y: firstRow, x: CONST.TOWER_RIGHT_FIGURE_INITIAL_COLUMN },
        alive: true, selected: false, hasMoved: false });
    return figures;
}
exports.getDefaultFigures = getDefaultFigures;
function getDefaultWhiteFigures() {
    return getDefaultFigures(false);
}
exports.getDefaultWhiteFigures = getDefaultWhiteFigures;
function getDefaultBlackFigures() {
    return getDefaultFigures(true);
}
exports.getDefaultBlackFigures = getDefaultBlackFigures;
function selectFigure(state, action) {
    var figures = (state.isPlayerOne) ? state.player1Figures : state.player2Figures;
    var figure = figures.filter(function (f) { return f.id === action.guid; })[0];
    var alreadySelected = figure.selected;
    var player1Figures = state.player1Figures.map(function (figure) {
        figure.selected = false;
        return figure;
    });
    var player2Figures = state.player2Figures.map(function (figure) {
        figure.selected = false;
        return figure;
    });
    var board = newBoard();
    if (alreadySelected === false) {
        if (state.isPlayerOne) {
            player1Figures = player1Figures.map(function (f) {
                if (f.id === action.guid) {
                    f.selected = true;
                }
                return f;
            });
        }
        else {
            player2Figures = player2Figures.map(function (f) {
                if (f.id === action.guid) {
                    f.selected = true;
                }
                return f;
            });
        }
    }
    board = positionFigures(board, player1Figures);
    board = positionFigures(board, player2Figures);
    board = flagAvailableCells(board, player1Figures.concat(player2Figures));
    return {
        gameID: state.gameID,
        playerID: state.playerID,
        isPlayerOne: state.isPlayerOne,
        board: board,
        player1Figures: player1Figures,
        player2Figures: player2Figures
    };
}
exports.selectFigure = selectFigure;
function positionFigures(board, figures) {
    for (var y = 0; y < CONST.BOARD_LENGTH; y++) {
        for (var x = 0; x < CONST.BOARD_LENGTH; x++) {
            var matches = figures.filter(function (figure) {
                return figure.position.x === x && figure.position.y === y;
            });
            if (matches.length !== 0) {
                var figure = matches[0];
                if (figure.alive == true)
                    board[y][x].figure = figure;
            }
        }
    }
    return board;
}
exports.positionFigures = positionFigures;
function flagAvailableCells(board, figures) {
    var selectedFigure = figures.filter(function (figure) {
        return figure.selected === true;
    })[0] || null;
    var selectedFigureMoves = getFigureAvailableMoves(selectedFigure, board);
    for (var y = 0; y < CONST.BOARD_LENGTH; y++) {
        for (var x = 0; x < CONST.BOARD_LENGTH; x++) {
            if (selectedFigure !== null) {
                var matchedMoves = selectedFigureMoves.filter(function (move) {
                    return move.x === x && move.y === y;
                });
                if (matchedMoves.length !== 0) {
                    board[y][x].available = true;
                }
            }
        }
    }
    return board;
}
exports.flagAvailableCells = flagAvailableCells;
function cellContainsFigure(position, board) {
    if (position.y < 0 || position.y > 7 || position.x < 0 || position.y > 7)
        return false;
    var cell = board[position.y][position.x];
    return (cell.figure !== null && cell.figure.alive !== false);
}
function cellContainsEnemyFigure(color, position, board) {
    if (position.y < 0 || position.y > 7 || position.x < 0 || position.y > 7)
        return false;
    if (cellContainsFigure(position, board) === false)
        return false;
    var cell = board[position.y][position.x];
    return (cell.figure !== null && cell.figure.color !== color && cell.figure.alive !== false);
}
function getFigureAvailableMoves(figure, board) {
    if (figure === null)
        return [];
    var negative = -1;
    var positive = 1;
    var yMovement = (figure.color === CONST.WHITE) ? negative : positive;
    var moves = [];
    switch (figure.type) {
        case CONST.FIGURE_KING:
            break;
        case CONST.FIGURE_QUEEN:
            break;
        case CONST.FIGURE_BISHOP:
            break;
        case CONST.FIGURE_KNIGHT:
            break;
        case CONST.FIGURE_TOWER:
            break;
        case CONST.FIGURE_PAWN:
            if (figure.hasMoved === false) {
                moves.push({ x: figure.position.x, y: figure.position.y + (yMovement * 1) });
                moves.push({ x: figure.position.x, y: figure.position.y + (yMovement * 2) });
            }
            else {
                var p = { x: figure.position.x, y: figure.position.y + (yMovement * 1) };
                if (cellContainsFigure(p, board) === false)
                    moves.push(p);
            }
            var pl = { x: (figure.position.x - 1), y: figure.position.y + (yMovement * 1) };
            var pr = { x: (figure.position.x + 1), y: figure.position.y + (yMovement * 1) };
            if (cellContainsEnemyFigure(figure.color, pl, board) === true)
                moves.push(pl);
            if (cellContainsEnemyFigure(figure.color, pr, board) === true)
                moves.push(pr);
            break;
        default:
            moves = [];
    }
    return moves;
}
exports.getFigureAvailableMoves = getFigureAvailableMoves;
function moveFigure(state, action) {
    var playerFigures = (state.isPlayerOne) ? state.player1Figures : state.player2Figures;
    var selectedFigure = playerFigures.filter(function (f) { return f.id === action.guid; })[0];
    var player1Figures = state.player1Figures.map(function (figure) {
        figure.selected = false;
        return figure;
    });
    var player2Figures = state.player2Figures.map(function (figure) {
        figure.selected = false;
        return figure;
    });
    var board = newBoard();
    if (state.isPlayerOne) {
        player1Figures = player1Figures.map(function (f) {
            if (f.id === action.guid) {
                f.position = action.position;
                f.hasMoved = true;
            }
            return f;
        });
        player2Figures = player2Figures.map(function (f) {
            if (f.position.x === action.position.x && f.position.y === action.position.y) {
                f.alive = false;
            }
            return f;
        });
    }
    else {
        player2Figures = player2Figures.map(function (f) {
            if (f.id === action.guid) {
                f.position = action.position;
                f.hasMoved = true;
            }
            return f;
        });
        player1Figures = player1Figures.map(function (f) {
            if (f.position.x === action.position.x && f.position.y === action.position.y) {
                f.alive = false;
            }
            return f;
        });
    }
    board = positionFigures(board, player1Figures);
    board = positionFigures(board, player2Figures);
    return {
        gameID: state.gameID,
        playerID: state.playerID,
        isPlayerOne: state.isPlayerOne,
        board: board,
        player1Figures: player1Figures,
        player2Figures: player2Figures
    };
}
exports.moveFigure = moveFigure;

},{"../constants/chess":8,"./game_utils":16}],15:[function(require,module,exports){
var Firebase = require("firebase");
var ref = new Firebase('https://boiling-torch-2871.firebaseio.com/');
exports.ref = ref;
var lobbyRef = ref.child("lobby");
exports.lobbyRef = lobbyRef;

},{"firebase":1}],16:[function(require,module,exports){
var modal_1 = require("../components/modal");
function displayModal(text) {
    var modal = new modal_1.Modal({ text: text });
    render(modal, document.getElementById("modal"));
    $(".modal").modal();
}
function guid() {
    function s4() {
        return Math.floor((1 + Math.random()) * 0x10000)
            .toString(16)
            .substring(1);
    }
    return s4() + s4() + '-' + s4() + '-' + s4() + '-' +
        s4() + '-' + s4() + s4() + s4();
}
exports.guid = guid;
function isValidGuid(guid) {
    var patt = /^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/;
    return patt.test(guid);
}
function getGameID() {
    var hash = window.location.hash.replace("#", "");
    if (hash === "") {
        return null;
    }
    else if (isValidGuid(hash)) {
        return hash;
    }
    throw new Error("Game id must be a valid GUID");
}
exports.getGameID = getGameID;
function initGame(lobbyRef) {
    var gameID = getGameID();
    if (gameID === null) {
        var gameID = guid();
        var player1ID = guid();
        window.location.hash = guid();
        lobbyRef.push({ id: gameID, player1: player1ID, player2: null });
        displayModal("Invite a friend to join by sharing the following link: " + window.location.href);
        return { gameID: gameID, playerID: player1ID, isPlayerOne: true };
    }
    else {
        var player2ID = guid();
        lobbyRef.update({ player2: player2ID });
        displayModal("You have successfully joined a game!");
        return { gameID: gameID, playerID: player2ID, isPlayerOne: false };
    }
}
exports.initGame = initGame;
function render(component, selector) {
    selector.innerHTML = component.render();
    component.initEvents();
}
exports.render = render;

},{"../components/modal":6}]},{},[11])(11)
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvZmlyZWJhc2UvbGliL2ZpcmViYXNlLXdlYi5qcyIsInNyYy9hY3Rpb25zL2NoZXNzX2dhbWVfYWN0aW9ucy50cyIsInNyYy9jb21wb25lbnRzL2Zvb3Rlci50cyIsInNyYy9jb21wb25lbnRzL2dhbWUudHMiLCJzcmMvY29tcG9uZW50cy9oZWFkZXIudHMiLCJzcmMvY29tcG9uZW50cy9tb2RhbC50cyIsInNyYy9jb25zdGFudHMvYWN0aW9ucy50cyIsInNyYy9jb25zdGFudHMvY2hlc3MudHMiLCJzcmMvY29yZS9jb21wb25lbnQudHMiLCJzcmMvY29yZS9zdG9yZS50cyIsInNyYy9tYWluLnRzIiwic3JjL3JlZHVjZXJzL2NoZXNzX3JlZHVjZXIudHMiLCJzcmMvc3RvcmUvc3RvcmUudHMiLCJzcmMvdXRpbHMvY2hlc3NfdXRpbHMudHMiLCJzcmMvdXRpbHMvZmlyZWJhc2VfcmVmZXJlbmNlcy50cyIsInNyYy91dGlscy9nYW1lX3V0aWxzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FDQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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LFFBQVEsQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUFFLEVBQUcsTUFBTSxFQUFFLE9BQU8sRUFBRyxTQUFTLEVBQUUsT0FBTyxFQUFHLElBQUksRUFBRSxDQUFDLENBQUM7UUFDcEUsWUFBWSxDQUFDLDREQUEwRCxNQUFNLENBQUMsUUFBUSxDQUFDLElBQU0sQ0FBQyxDQUFDO1FBQy9GLE1BQU0sQ0FBQyxFQUFFLE1BQU0sRUFBRyxNQUFNLEVBQUUsUUFBUSxFQUFHLFNBQVMsRUFBRSxXQUFXLEVBQUcsSUFBSSxFQUFFLENBQUM7SUFDdkUsQ0FBQztJQUNELElBQUksQ0FBQyxDQUFDO1FBR0osSUFBSSxTQUFTLEdBQUcsSUFBSSxFQUFFLENBQUM7UUFDdkIsUUFBUSxDQUFDLE1BQU0sQ0FBQyxFQUFFLE9BQU8sRUFBRyxTQUFTLEVBQUUsQ0FBQyxDQUFDO1FBQ3pDLFlBQVksQ0FBQyxzQ0FBc0MsQ0FBQyxDQUFDO1FBQ3JELE1BQU0sQ0FBQyxFQUFFLE1BQU0sRUFBRyxNQUFNLEVBQUUsUUFBUSxFQUFHLFNBQVMsRUFBRSxXQUFXLEVBQUcsS0FBSyxFQUFFLENBQUM7SUFDeEUsQ0FBQztBQUNILENBQUM7QUFPaUMsZ0JBQVEsWUFQekM7QUFFRCxnQkFBZ0IsU0FBUyxFQUFFLFFBQVE7SUFDakMsUUFBUSxDQUFDLFNBQVMsR0FBRyxTQUFTLENBQUMsTUFBTSxFQUFFLENBQUM7SUFDeEMsU0FBUyxDQUFDLFVBQVUsRUFBRSxDQUFDO0FBQ3pCLENBQUM7QUFFYyxjQUFNLFVBRnBCO0FBRTRDIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIi8qISBAbGljZW5zZSBGaXJlYmFzZSB2Mi4zLjJcbiAgICBMaWNlbnNlOiBodHRwczovL3d3dy5maXJlYmFzZS5jb20vdGVybXMvdGVybXMtb2Ytc2VydmljZS5odG1sICovXG4oZnVuY3Rpb24oKSB7dmFyIGcsYWE9dGhpcztmdW5jdGlvbiBuKGEpe3JldHVybiB2b2lkIDAhPT1hfWZ1bmN0aW9uIGJhKCl7fWZ1bmN0aW9uIGNhKGEpe2EudWI9ZnVuY3Rpb24oKXtyZXR1cm4gYS51Zj9hLnVmOmEudWY9bmV3IGF9fVxuZnVuY3Rpb24gZGEoYSl7dmFyIGI9dHlwZW9mIGE7aWYoXCJvYmplY3RcIj09YilpZihhKXtpZihhIGluc3RhbmNlb2YgQXJyYXkpcmV0dXJuXCJhcnJheVwiO2lmKGEgaW5zdGFuY2VvZiBPYmplY3QpcmV0dXJuIGI7dmFyIGM9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGEpO2lmKFwiW29iamVjdCBXaW5kb3ddXCI9PWMpcmV0dXJuXCJvYmplY3RcIjtpZihcIltvYmplY3QgQXJyYXldXCI9PWN8fFwibnVtYmVyXCI9PXR5cGVvZiBhLmxlbmd0aCYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGEuc3BsaWNlJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgYS5wcm9wZXJ0eUlzRW51bWVyYWJsZSYmIWEucHJvcGVydHlJc0VudW1lcmFibGUoXCJzcGxpY2VcIikpcmV0dXJuXCJhcnJheVwiO2lmKFwiW29iamVjdCBGdW5jdGlvbl1cIj09Y3x8XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGEuY2FsbCYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGEucHJvcGVydHlJc0VudW1lcmFibGUmJiFhLnByb3BlcnR5SXNFbnVtZXJhYmxlKFwiY2FsbFwiKSlyZXR1cm5cImZ1bmN0aW9uXCJ9ZWxzZSByZXR1cm5cIm51bGxcIjtcbmVsc2UgaWYoXCJmdW5jdGlvblwiPT1iJiZcInVuZGVmaW5lZFwiPT10eXBlb2YgYS5jYWxsKXJldHVyblwib2JqZWN0XCI7cmV0dXJuIGJ9ZnVuY3Rpb24gZWEoYSl7cmV0dXJuXCJhcnJheVwiPT1kYShhKX1mdW5jdGlvbiBmYShhKXt2YXIgYj1kYShhKTtyZXR1cm5cImFycmF5XCI9PWJ8fFwib2JqZWN0XCI9PWImJlwibnVtYmVyXCI9PXR5cGVvZiBhLmxlbmd0aH1mdW5jdGlvbiBwKGEpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBhfWZ1bmN0aW9uIGdhKGEpe3JldHVyblwibnVtYmVyXCI9PXR5cGVvZiBhfWZ1bmN0aW9uIGhhKGEpe3JldHVyblwiZnVuY3Rpb25cIj09ZGEoYSl9ZnVuY3Rpb24gaWEoYSl7dmFyIGI9dHlwZW9mIGE7cmV0dXJuXCJvYmplY3RcIj09YiYmbnVsbCE9YXx8XCJmdW5jdGlvblwiPT1ifWZ1bmN0aW9uIGphKGEsYixjKXtyZXR1cm4gYS5jYWxsLmFwcGx5KGEuYmluZCxhcmd1bWVudHMpfVxuZnVuY3Rpb24ga2EoYSxiLGMpe2lmKCFhKXRocm93IEVycm9yKCk7aWYoMjxhcmd1bWVudHMubGVuZ3RoKXt2YXIgZD1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMik7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGM9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtBcnJheS5wcm90b3R5cGUudW5zaGlmdC5hcHBseShjLGQpO3JldHVybiBhLmFwcGx5KGIsYyl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiBhLmFwcGx5KGIsYXJndW1lbnRzKX19ZnVuY3Rpb24gcShhLGIsYyl7cT1GdW5jdGlvbi5wcm90b3R5cGUuYmluZCYmLTEhPUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLnRvU3RyaW5nKCkuaW5kZXhPZihcIm5hdGl2ZSBjb2RlXCIpP2phOmthO3JldHVybiBxLmFwcGx5KG51bGwsYXJndW1lbnRzKX12YXIgbGE9RGF0ZS5ub3d8fGZ1bmN0aW9uKCl7cmV0dXJuK25ldyBEYXRlfTtcbmZ1bmN0aW9uIG1hKGEsYil7ZnVuY3Rpb24gYygpe31jLnByb3RvdHlwZT1iLnByb3RvdHlwZTthLmJoPWIucHJvdG90eXBlO2EucHJvdG90eXBlPW5ldyBjO2EucHJvdG90eXBlLmNvbnN0cnVjdG9yPWE7YS5ZZz1mdW5jdGlvbihhLGMsZil7Zm9yKHZhciBoPUFycmF5KGFyZ3VtZW50cy5sZW5ndGgtMiksaz0yO2s8YXJndW1lbnRzLmxlbmd0aDtrKyspaFtrLTJdPWFyZ3VtZW50c1trXTtyZXR1cm4gYi5wcm90b3R5cGVbY10uYXBwbHkoYSxoKX19O2Z1bmN0aW9uIHIoYSxiKXtmb3IodmFyIGMgaW4gYSliLmNhbGwodm9pZCAwLGFbY10sYyxhKX1mdW5jdGlvbiBuYShhLGIpe3ZhciBjPXt9LGQ7Zm9yKGQgaW4gYSljW2RdPWIuY2FsbCh2b2lkIDAsYVtkXSxkLGEpO3JldHVybiBjfWZ1bmN0aW9uIG9hKGEsYil7Zm9yKHZhciBjIGluIGEpaWYoIWIuY2FsbCh2b2lkIDAsYVtjXSxjLGEpKXJldHVybiExO3JldHVybiEwfWZ1bmN0aW9uIHBhKGEpe3ZhciBiPTAsYztmb3IoYyBpbiBhKWIrKztyZXR1cm4gYn1mdW5jdGlvbiBxYShhKXtmb3IodmFyIGIgaW4gYSlyZXR1cm4gYn1mdW5jdGlvbiByYShhKXt2YXIgYj1bXSxjPTAsZDtmb3IoZCBpbiBhKWJbYysrXT1hW2RdO3JldHVybiBifWZ1bmN0aW9uIHNhKGEpe3ZhciBiPVtdLGM9MCxkO2ZvcihkIGluIGEpYltjKytdPWQ7cmV0dXJuIGJ9ZnVuY3Rpb24gdGEoYSxiKXtmb3IodmFyIGMgaW4gYSlpZihhW2NdPT1iKXJldHVybiEwO3JldHVybiExfVxuZnVuY3Rpb24gdWEoYSxiLGMpe2Zvcih2YXIgZCBpbiBhKWlmKGIuY2FsbChjLGFbZF0sZCxhKSlyZXR1cm4gZH1mdW5jdGlvbiB2YShhLGIpe3ZhciBjPXVhKGEsYix2b2lkIDApO3JldHVybiBjJiZhW2NdfWZ1bmN0aW9uIHdhKGEpe2Zvcih2YXIgYiBpbiBhKXJldHVybiExO3JldHVybiEwfWZ1bmN0aW9uIHhhKGEpe3ZhciBiPXt9LGM7Zm9yKGMgaW4gYSliW2NdPWFbY107cmV0dXJuIGJ9dmFyIHlhPVwiY29uc3RydWN0b3IgaGFzT3duUHJvcGVydHkgaXNQcm90b3R5cGVPZiBwcm9wZXJ0eUlzRW51bWVyYWJsZSB0b0xvY2FsZVN0cmluZyB0b1N0cmluZyB2YWx1ZU9mXCIuc3BsaXQoXCIgXCIpO1xuZnVuY3Rpb24gemEoYSxiKXtmb3IodmFyIGMsZCxlPTE7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl7ZD1hcmd1bWVudHNbZV07Zm9yKGMgaW4gZClhW2NdPWRbY107Zm9yKHZhciBmPTA7Zjx5YS5sZW5ndGg7ZisrKWM9eWFbZl0sT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGQsYykmJihhW2NdPWRbY10pfX07ZnVuY3Rpb24gQWEoYSl7YT1TdHJpbmcoYSk7aWYoL15cXHMqJC8udGVzdChhKT8wOi9eW1xcXSw6e31cXHNcXHUyMDI4XFx1MjAyOV0qJC8udGVzdChhLnJlcGxhY2UoL1xcXFxbXCJcXFxcXFwvYmZucnR1XS9nLFwiQFwiKS5yZXBsYWNlKC9cIlteXCJcXFxcXFxuXFxyXFx1MjAyOFxcdTIwMjlcXHgwMC1cXHgwOFxceDBhLVxceDFmXSpcInx0cnVlfGZhbHNlfG51bGx8LT9cXGQrKD86XFwuXFxkKik/KD86W2VFXVsrXFwtXT9cXGQrKT8vZyxcIl1cIikucmVwbGFjZSgvKD86Xnw6fCwpKD86W1xcc1xcdTIwMjhcXHUyMDI5XSpcXFspKy9nLFwiXCIpKSl0cnl7cmV0dXJuIGV2YWwoXCIoXCIrYStcIilcIil9Y2F0Y2goYil7fXRocm93IEVycm9yKFwiSW52YWxpZCBKU09OIHN0cmluZzogXCIrYSk7fWZ1bmN0aW9uIEJhKCl7dGhpcy5TZD12b2lkIDB9XG5mdW5jdGlvbiBDYShhLGIsYyl7c3dpdGNoKHR5cGVvZiBiKXtjYXNlIFwic3RyaW5nXCI6RGEoYixjKTticmVhaztjYXNlIFwibnVtYmVyXCI6Yy5wdXNoKGlzRmluaXRlKGIpJiYhaXNOYU4oYik/YjpcIm51bGxcIik7YnJlYWs7Y2FzZSBcImJvb2xlYW5cIjpjLnB1c2goYik7YnJlYWs7Y2FzZSBcInVuZGVmaW5lZFwiOmMucHVzaChcIm51bGxcIik7YnJlYWs7Y2FzZSBcIm9iamVjdFwiOmlmKG51bGw9PWIpe2MucHVzaChcIm51bGxcIik7YnJlYWt9aWYoZWEoYikpe3ZhciBkPWIubGVuZ3RoO2MucHVzaChcIltcIik7Zm9yKHZhciBlPVwiXCIsZj0wO2Y8ZDtmKyspYy5wdXNoKGUpLGU9YltmXSxDYShhLGEuU2Q/YS5TZC5jYWxsKGIsU3RyaW5nKGYpLGUpOmUsYyksZT1cIixcIjtjLnB1c2goXCJdXCIpO2JyZWFrfWMucHVzaChcIntcIik7ZD1cIlwiO2ZvcihmIGluIGIpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsZikmJihlPWJbZl0sXCJmdW5jdGlvblwiIT10eXBlb2YgZSYmKGMucHVzaChkKSxEYShmLGMpLFxuYy5wdXNoKFwiOlwiKSxDYShhLGEuU2Q/YS5TZC5jYWxsKGIsZixlKTplLGMpLGQ9XCIsXCIpKTtjLnB1c2goXCJ9XCIpO2JyZWFrO2Nhc2UgXCJmdW5jdGlvblwiOmJyZWFrO2RlZmF1bHQ6dGhyb3cgRXJyb3IoXCJVbmtub3duIHR5cGU6IFwiK3R5cGVvZiBiKTt9fXZhciBFYT17J1wiJzonXFxcXFwiJyxcIlxcXFxcIjpcIlxcXFxcXFxcXCIsXCIvXCI6XCJcXFxcL1wiLFwiXFxiXCI6XCJcXFxcYlwiLFwiXFxmXCI6XCJcXFxcZlwiLFwiXFxuXCI6XCJcXFxcblwiLFwiXFxyXCI6XCJcXFxcclwiLFwiXFx0XCI6XCJcXFxcdFwiLFwiXFx4MEJcIjpcIlxcXFx1MDAwYlwifSxGYT0vXFx1ZmZmZi8udGVzdChcIlxcdWZmZmZcIik/L1tcXFxcXFxcIlxceDAwLVxceDFmXFx4N2YtXFx1ZmZmZl0vZzovW1xcXFxcXFwiXFx4MDAtXFx4MWZcXHg3Zi1cXHhmZl0vZztcbmZ1bmN0aW9uIERhKGEsYil7Yi5wdXNoKCdcIicsYS5yZXBsYWNlKEZhLGZ1bmN0aW9uKGEpe2lmKGEgaW4gRWEpcmV0dXJuIEVhW2FdO3ZhciBiPWEuY2hhckNvZGVBdCgwKSxlPVwiXFxcXHVcIjsxNj5iP2UrPVwiMDAwXCI6MjU2PmI/ZSs9XCIwMFwiOjQwOTY+YiYmKGUrPVwiMFwiKTtyZXR1cm4gRWFbYV09ZStiLnRvU3RyaW5nKDE2KX0pLCdcIicpfTtmdW5jdGlvbiBHYSgpe3JldHVybiBNYXRoLmZsb29yKDIxNDc0ODM2NDgqTWF0aC5yYW5kb20oKSkudG9TdHJpbmcoMzYpK01hdGguYWJzKE1hdGguZmxvb3IoMjE0NzQ4MzY0OCpNYXRoLnJhbmRvbSgpKV5sYSgpKS50b1N0cmluZygzNil9O3ZhciBIYTthOnt2YXIgSWE9YWEubmF2aWdhdG9yO2lmKElhKXt2YXIgSmE9SWEudXNlckFnZW50O2lmKEphKXtIYT1KYTticmVhayBhfX1IYT1cIlwifTtmdW5jdGlvbiBLYSgpe3RoaXMuVmE9LTF9O2Z1bmN0aW9uIExhKCl7dGhpcy5WYT0tMTt0aGlzLlZhPTY0O3RoaXMuTj1bXTt0aGlzLm1lPVtdO3RoaXMuV2Y9W107dGhpcy5MZD1bXTt0aGlzLkxkWzBdPTEyODtmb3IodmFyIGE9MTthPHRoaXMuVmE7KythKXRoaXMuTGRbYV09MDt0aGlzLmRlPXRoaXMuYWM9MDt0aGlzLnJlc2V0KCl9bWEoTGEsS2EpO0xhLnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3RoaXMuTlswXT0xNzMyNTg0MTkzO3RoaXMuTlsxXT00MDIzMjMzNDE3O3RoaXMuTlsyXT0yNTYyMzgzMTAyO3RoaXMuTlszXT0yNzE3MzM4Nzg7dGhpcy5OWzRdPTMyODUzNzc1MjA7dGhpcy5kZT10aGlzLmFjPTB9O1xuZnVuY3Rpb24gTWEoYSxiLGMpe2N8fChjPTApO3ZhciBkPWEuV2Y7aWYocChiKSlmb3IodmFyIGU9MDsxNj5lO2UrKylkW2VdPWIuY2hhckNvZGVBdChjKTw8MjR8Yi5jaGFyQ29kZUF0KGMrMSk8PDE2fGIuY2hhckNvZGVBdChjKzIpPDw4fGIuY2hhckNvZGVBdChjKzMpLGMrPTQ7ZWxzZSBmb3IoZT0wOzE2PmU7ZSsrKWRbZV09YltjXTw8MjR8YltjKzFdPDwxNnxiW2MrMl08PDh8YltjKzNdLGMrPTQ7Zm9yKGU9MTY7ODA+ZTtlKyspe3ZhciBmPWRbZS0zXV5kW2UtOF1eZFtlLTE0XV5kW2UtMTZdO2RbZV09KGY8PDF8Zj4+PjMxKSY0Mjk0OTY3Mjk1fWI9YS5OWzBdO2M9YS5OWzFdO2Zvcih2YXIgaD1hLk5bMl0saz1hLk5bM10sbD1hLk5bNF0sbSxlPTA7ODA+ZTtlKyspNDA+ZT8yMD5lPyhmPWteYyYoaF5rKSxtPTE1MTg1MDAyNDkpOihmPWNeaF5rLG09MTg1OTc3NTM5Myk6NjA+ZT8oZj1jJmh8ayYoY3xoKSxtPTI0MDA5NTk3MDgpOihmPWNeaF5rLG09MzM5NTQ2OTc4MiksZj0oYjw8XG41fGI+Pj4yNykrZitsK20rZFtlXSY0Mjk0OTY3Mjk1LGw9ayxrPWgsaD0oYzw8MzB8Yz4+PjIpJjQyOTQ5NjcyOTUsYz1iLGI9ZjthLk5bMF09YS5OWzBdK2ImNDI5NDk2NzI5NTthLk5bMV09YS5OWzFdK2MmNDI5NDk2NzI5NTthLk5bMl09YS5OWzJdK2gmNDI5NDk2NzI5NTthLk5bM109YS5OWzNdK2smNDI5NDk2NzI5NTthLk5bNF09YS5OWzRdK2wmNDI5NDk2NzI5NX1cbkxhLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oYSxiKXtpZihudWxsIT1hKXtuKGIpfHwoYj1hLmxlbmd0aCk7Zm9yKHZhciBjPWItdGhpcy5WYSxkPTAsZT10aGlzLm1lLGY9dGhpcy5hYztkPGI7KXtpZigwPT1mKWZvcig7ZDw9YzspTWEodGhpcyxhLGQpLGQrPXRoaXMuVmE7aWYocChhKSlmb3IoO2Q8Yjspe2lmKGVbZl09YS5jaGFyQ29kZUF0KGQpLCsrZiwrK2QsZj09dGhpcy5WYSl7TWEodGhpcyxlKTtmPTA7YnJlYWt9fWVsc2UgZm9yKDtkPGI7KWlmKGVbZl09YVtkXSwrK2YsKytkLGY9PXRoaXMuVmEpe01hKHRoaXMsZSk7Zj0wO2JyZWFrfX10aGlzLmFjPWY7dGhpcy5kZSs9Yn19O3ZhciB1PUFycmF5LnByb3RvdHlwZSxOYT11LmluZGV4T2Y/ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB1LmluZGV4T2YuY2FsbChhLGIsYyl9OmZ1bmN0aW9uKGEsYixjKXtjPW51bGw9PWM/MDowPmM/TWF0aC5tYXgoMCxhLmxlbmd0aCtjKTpjO2lmKHAoYSkpcmV0dXJuIHAoYikmJjE9PWIubGVuZ3RoP2EuaW5kZXhPZihiLGMpOi0xO2Zvcig7YzxhLmxlbmd0aDtjKyspaWYoYyBpbiBhJiZhW2NdPT09YilyZXR1cm4gYztyZXR1cm4tMX0sT2E9dS5mb3JFYWNoP2Z1bmN0aW9uKGEsYixjKXt1LmZvckVhY2guY2FsbChhLGIsYyl9OmZ1bmN0aW9uKGEsYixjKXtmb3IodmFyIGQ9YS5sZW5ndGgsZT1wKGEpP2Euc3BsaXQoXCJcIik6YSxmPTA7ZjxkO2YrKylmIGluIGUmJmIuY2FsbChjLGVbZl0sZixhKX0sUGE9dS5maWx0ZXI/ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB1LmZpbHRlci5jYWxsKGEsYixjKX06ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD1hLmxlbmd0aCxlPVtdLGY9MCxoPXAoYSk/XG5hLnNwbGl0KFwiXCIpOmEsaz0wO2s8ZDtrKyspaWYoayBpbiBoKXt2YXIgbD1oW2tdO2IuY2FsbChjLGwsayxhKSYmKGVbZisrXT1sKX1yZXR1cm4gZX0sUWE9dS5tYXA/ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB1Lm1hcC5jYWxsKGEsYixjKX06ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD1hLmxlbmd0aCxlPUFycmF5KGQpLGY9cChhKT9hLnNwbGl0KFwiXCIpOmEsaD0wO2g8ZDtoKyspaCBpbiBmJiYoZVtoXT1iLmNhbGwoYyxmW2hdLGgsYSkpO3JldHVybiBlfSxSYT11LnJlZHVjZT9mdW5jdGlvbihhLGIsYyxkKXtmb3IodmFyIGU9W10sZj0xLGg9YXJndW1lbnRzLmxlbmd0aDtmPGg7ZisrKWUucHVzaChhcmd1bWVudHNbZl0pO2QmJihlWzBdPXEoYixkKSk7cmV0dXJuIHUucmVkdWNlLmFwcGx5KGEsZSl9OmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPWM7T2EoYSxmdW5jdGlvbihjLGgpe2U9Yi5jYWxsKGQsZSxjLGgsYSl9KTtyZXR1cm4gZX0sU2E9dS5ldmVyeT9mdW5jdGlvbihhLGIsXG5jKXtyZXR1cm4gdS5ldmVyeS5jYWxsKGEsYixjKX06ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD1hLmxlbmd0aCxlPXAoYSk/YS5zcGxpdChcIlwiKTphLGY9MDtmPGQ7ZisrKWlmKGYgaW4gZSYmIWIuY2FsbChjLGVbZl0sZixhKSlyZXR1cm4hMTtyZXR1cm4hMH07ZnVuY3Rpb24gVGEoYSxiKXt2YXIgYz1VYShhLGIsdm9pZCAwKTtyZXR1cm4gMD5jP251bGw6cChhKT9hLmNoYXJBdChjKTphW2NdfWZ1bmN0aW9uIFVhKGEsYixjKXtmb3IodmFyIGQ9YS5sZW5ndGgsZT1wKGEpP2Euc3BsaXQoXCJcIik6YSxmPTA7ZjxkO2YrKylpZihmIGluIGUmJmIuY2FsbChjLGVbZl0sZixhKSlyZXR1cm4gZjtyZXR1cm4tMX1mdW5jdGlvbiBWYShhLGIpe3ZhciBjPU5hKGEsYik7MDw9YyYmdS5zcGxpY2UuY2FsbChhLGMsMSl9ZnVuY3Rpb24gV2EoYSxiLGMpe3JldHVybiAyPj1hcmd1bWVudHMubGVuZ3RoP3Uuc2xpY2UuY2FsbChhLGIpOnUuc2xpY2UuY2FsbChhLGIsYyl9XG5mdW5jdGlvbiBYYShhLGIpe2Euc29ydChifHxZYSl9ZnVuY3Rpb24gWWEoYSxiKXtyZXR1cm4gYT5iPzE6YTxiPy0xOjB9O3ZhciBaYT0tMSE9SGEuaW5kZXhPZihcIk9wZXJhXCIpfHwtMSE9SGEuaW5kZXhPZihcIk9QUlwiKSwkYT0tMSE9SGEuaW5kZXhPZihcIlRyaWRlbnRcIil8fC0xIT1IYS5pbmRleE9mKFwiTVNJRVwiKSxhYj0tMSE9SGEuaW5kZXhPZihcIkdlY2tvXCIpJiYtMT09SGEudG9Mb3dlckNhc2UoKS5pbmRleE9mKFwid2Via2l0XCIpJiYhKC0xIT1IYS5pbmRleE9mKFwiVHJpZGVudFwiKXx8LTEhPUhhLmluZGV4T2YoXCJNU0lFXCIpKSxiYj0tMSE9SGEudG9Mb3dlckNhc2UoKS5pbmRleE9mKFwid2Via2l0XCIpO1xuKGZ1bmN0aW9uKCl7dmFyIGE9XCJcIixiO2lmKFphJiZhYS5vcGVyYSlyZXR1cm4gYT1hYS5vcGVyYS52ZXJzaW9uLGhhKGEpP2EoKTphO2FiP2I9L3J2XFw6KFteXFwpO10rKShcXCl8OykvOiRhP2I9L1xcYig/Ok1TSUV8cnYpWzogXShbXlxcKTtdKykoXFwpfDspLzpiYiYmKGI9L1dlYktpdFxcLyhcXFMrKS8pO2ImJihhPShhPWIuZXhlYyhIYSkpP2FbMV06XCJcIik7cmV0dXJuICRhJiYoYj0oYj1hYS5kb2N1bWVudCk/Yi5kb2N1bWVudE1vZGU6dm9pZCAwLGI+cGFyc2VGbG9hdChhKSk/U3RyaW5nKGIpOmF9KSgpO3ZhciBjYj1udWxsLGRiPW51bGwsZWI9bnVsbDtmdW5jdGlvbiBmYihhLGIpe2lmKCFmYShhKSl0aHJvdyBFcnJvcihcImVuY29kZUJ5dGVBcnJheSB0YWtlcyBhbiBhcnJheSBhcyBhIHBhcmFtZXRlclwiKTtnYigpO2Zvcih2YXIgYz1iP2RiOmNiLGQ9W10sZT0wO2U8YS5sZW5ndGg7ZSs9Myl7dmFyIGY9YVtlXSxoPWUrMTxhLmxlbmd0aCxrPWg/YVtlKzFdOjAsbD1lKzI8YS5sZW5ndGgsbT1sP2FbZSsyXTowLHQ9Zj4+MixmPShmJjMpPDw0fGs+PjQsaz0oayYxNSk8PDJ8bT4+NixtPW0mNjM7bHx8KG09NjQsaHx8KGs9NjQpKTtkLnB1c2goY1t0XSxjW2ZdLGNba10sY1ttXSl9cmV0dXJuIGQuam9pbihcIlwiKX1cbmZ1bmN0aW9uIGdiKCl7aWYoIWNiKXtjYj17fTtkYj17fTtlYj17fTtmb3IodmFyIGE9MDs2NT5hO2ErKyljYlthXT1cIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89XCIuY2hhckF0KGEpLGRiW2FdPVwiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODktXy5cIi5jaGFyQXQoYSksZWJbZGJbYV1dPWEsNjI8PWEmJihlYltcIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89XCIuY2hhckF0KGEpXT1hKX19O3ZhciBoYj1oYnx8XCIyLjMuMlwiO2Z1bmN0aW9uIHYoYSxiKXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGEsYil9ZnVuY3Rpb24gdyhhLGIpe2lmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhLGIpKXJldHVybiBhW2JdfWZ1bmN0aW9uIGliKGEsYil7Zm9yKHZhciBjIGluIGEpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGEsYykmJmIoYyxhW2NdKX1mdW5jdGlvbiBqYihhKXt2YXIgYj17fTtpYihhLGZ1bmN0aW9uKGEsZCl7YlthXT1kfSk7cmV0dXJuIGJ9O2Z1bmN0aW9uIGtiKGEpe3ZhciBiPVtdO2liKGEsZnVuY3Rpb24oYSxkKXtlYShkKT9PYShkLGZ1bmN0aW9uKGQpe2IucHVzaChlbmNvZGVVUklDb21wb25lbnQoYSkrXCI9XCIrZW5jb2RlVVJJQ29tcG9uZW50KGQpKX0pOmIucHVzaChlbmNvZGVVUklDb21wb25lbnQoYSkrXCI9XCIrZW5jb2RlVVJJQ29tcG9uZW50KGQpKX0pO3JldHVybiBiLmxlbmd0aD9cIiZcIitiLmpvaW4oXCImXCIpOlwiXCJ9ZnVuY3Rpb24gbGIoYSl7dmFyIGI9e307YT1hLnJlcGxhY2UoL15cXD8vLFwiXCIpLnNwbGl0KFwiJlwiKTtPYShhLGZ1bmN0aW9uKGEpe2EmJihhPWEuc3BsaXQoXCI9XCIpLGJbYVswXV09YVsxXSl9KTtyZXR1cm4gYn07ZnVuY3Rpb24geChhLGIsYyxkKXt2YXIgZTtkPGI/ZT1cImF0IGxlYXN0IFwiK2I6ZD5jJiYoZT0wPT09Yz9cIm5vbmVcIjpcIm5vIG1vcmUgdGhhbiBcIitjKTtpZihlKXRocm93IEVycm9yKGErXCIgZmFpbGVkOiBXYXMgY2FsbGVkIHdpdGggXCIrZCsoMT09PWQ/XCIgYXJndW1lbnQuXCI6XCIgYXJndW1lbnRzLlwiKStcIiBFeHBlY3RzIFwiK2UrXCIuXCIpO31mdW5jdGlvbiB5KGEsYixjKXt2YXIgZD1cIlwiO3N3aXRjaChiKXtjYXNlIDE6ZD1jP1wiZmlyc3RcIjpcIkZpcnN0XCI7YnJlYWs7Y2FzZSAyOmQ9Yz9cInNlY29uZFwiOlwiU2Vjb25kXCI7YnJlYWs7Y2FzZSAzOmQ9Yz9cInRoaXJkXCI6XCJUaGlyZFwiO2JyZWFrO2Nhc2UgNDpkPWM/XCJmb3VydGhcIjpcIkZvdXJ0aFwiO2JyZWFrO2RlZmF1bHQ6dGhyb3cgRXJyb3IoXCJlcnJvclByZWZpeCBjYWxsZWQgd2l0aCBhcmd1bWVudE51bWJlciA+IDQuICBOZWVkIHRvIHVwZGF0ZSBpdD9cIik7fXJldHVybiBhPWErXCIgZmFpbGVkOiBcIisoZCtcIiBhcmd1bWVudCBcIil9XG5mdW5jdGlvbiBBKGEsYixjLGQpe2lmKCghZHx8bihjKSkmJiFoYShjKSl0aHJvdyBFcnJvcih5KGEsYixkKStcIm11c3QgYmUgYSB2YWxpZCBmdW5jdGlvbi5cIik7fWZ1bmN0aW9uIG1iKGEsYixjKXtpZihuKGMpJiYoIWlhKGMpfHxudWxsPT09YykpdGhyb3cgRXJyb3IoeShhLGIsITApK1wibXVzdCBiZSBhIHZhbGlkIGNvbnRleHQgb2JqZWN0LlwiKTt9O2Z1bmN0aW9uIG5iKGEpe3JldHVyblwidW5kZWZpbmVkXCIhPT10eXBlb2YgSlNPTiYmbihKU09OLnBhcnNlKT9KU09OLnBhcnNlKGEpOkFhKGEpfWZ1bmN0aW9uIEIoYSl7aWYoXCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBKU09OJiZuKEpTT04uc3RyaW5naWZ5KSlhPUpTT04uc3RyaW5naWZ5KGEpO2Vsc2V7dmFyIGI9W107Q2EobmV3IEJhLGEsYik7YT1iLmpvaW4oXCJcIil9cmV0dXJuIGF9O2Z1bmN0aW9uIG9iKCl7dGhpcy5XZD1DfW9iLnByb3RvdHlwZS5qPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLldkLlEoYSl9O29iLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLldkLnRvU3RyaW5nKCl9O2Z1bmN0aW9uIHBiKCl7fXBiLnByb3RvdHlwZS5xZj1mdW5jdGlvbigpe3JldHVybiBudWxsfTtwYi5wcm90b3R5cGUueWU9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH07dmFyIHFiPW5ldyBwYjtmdW5jdGlvbiByYihhLGIsYyl7dGhpcy5UZj1hO3RoaXMuS2E9Yjt0aGlzLktkPWN9cmIucHJvdG90eXBlLnFmPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMuS2EuTztpZihzYihiLGEpKXJldHVybiBiLmooKS5SKGEpO2I9bnVsbCE9dGhpcy5LZD9uZXcgdGIodGhpcy5LZCwhMCwhMSk6dGhpcy5LYS53KCk7cmV0dXJuIHRoaXMuVGYueGMoYSxiKX07cmIucHJvdG90eXBlLnllPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1udWxsIT10aGlzLktkP3RoaXMuS2Q6dWIodGhpcy5LYSk7YT10aGlzLlRmLm5lKGQsYiwxLGMsYSk7cmV0dXJuIDA9PT1hLmxlbmd0aD9udWxsOmFbMF19O2Z1bmN0aW9uIHZiKCl7dGhpcy50Yj1bXX1mdW5jdGlvbiB3YihhLGIpe2Zvcih2YXIgYz1udWxsLGQ9MDtkPGIubGVuZ3RoO2QrKyl7dmFyIGU9YltkXSxmPWUuWmIoKTtudWxsPT09Y3x8Zi5jYShjLlpiKCkpfHwoYS50Yi5wdXNoKGMpLGM9bnVsbCk7bnVsbD09PWMmJihjPW5ldyB4YihmKSk7Yy5hZGQoZSl9YyYmYS50Yi5wdXNoKGMpfWZ1bmN0aW9uIHliKGEsYixjKXt3YihhLGMpO3piKGEsZnVuY3Rpb24oYSl7cmV0dXJuIGEuY2EoYil9KX1mdW5jdGlvbiBBYihhLGIsYyl7d2IoYSxjKTt6YihhLGZ1bmN0aW9uKGEpe3JldHVybiBhLmNvbnRhaW5zKGIpfHxiLmNvbnRhaW5zKGEpfSl9XG5mdW5jdGlvbiB6YihhLGIpe2Zvcih2YXIgYz0hMCxkPTA7ZDxhLnRiLmxlbmd0aDtkKyspe3ZhciBlPWEudGJbZF07aWYoZSlpZihlPWUuWmIoKSxiKGUpKXtmb3IodmFyIGU9YS50YltkXSxmPTA7ZjxlLnZkLmxlbmd0aDtmKyspe3ZhciBoPWUudmRbZl07aWYobnVsbCE9PWgpe2UudmRbZl09bnVsbDt2YXIgaz1oLlZiKCk7QmImJkNiKFwiZXZlbnQ6IFwiK2gudG9TdHJpbmcoKSk7RGIoayl9fWEudGJbZF09bnVsbH1lbHNlIGM9ITF9YyYmKGEudGI9W10pfWZ1bmN0aW9uIHhiKGEpe3RoaXMucmE9YTt0aGlzLnZkPVtdfXhiLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oYSl7dGhpcy52ZC5wdXNoKGEpfTt4Yi5wcm90b3R5cGUuWmI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yYX07ZnVuY3Rpb24gRChhLGIsYyxkKXt0aGlzLnR5cGU9YTt0aGlzLkphPWI7dGhpcy5XYT1jO3RoaXMuS2U9ZDt0aGlzLlFkPXZvaWQgMH1mdW5jdGlvbiBFYihhKXtyZXR1cm4gbmV3IEQoRmIsYSl9dmFyIEZiPVwidmFsdWVcIjtmdW5jdGlvbiBHYihhLGIsYyxkKXt0aGlzLnVlPWI7dGhpcy5aZD1jO3RoaXMuUWQ9ZDt0aGlzLnVkPWF9R2IucHJvdG90eXBlLlpiPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5aZC5JYigpO3JldHVyblwidmFsdWVcIj09PXRoaXMudWQ/YS5wYXRoOmEucGFyZW50KCkucGF0aH07R2IucHJvdG90eXBlLnplPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudWR9O0diLnByb3RvdHlwZS5WYj1mdW5jdGlvbigpe3JldHVybiB0aGlzLnVlLlZiKHRoaXMpfTtHYi5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5aYigpLnRvU3RyaW5nKCkrXCI6XCIrdGhpcy51ZCtcIjpcIitCKHRoaXMuWmQubWYoKSl9O2Z1bmN0aW9uIEhiKGEsYixjKXt0aGlzLnVlPWE7dGhpcy5lcnJvcj1iO3RoaXMucGF0aD1jfUhiLnByb3RvdHlwZS5aYj1mdW5jdGlvbigpe3JldHVybiB0aGlzLnBhdGh9O0hiLnByb3RvdHlwZS56ZT1mdW5jdGlvbigpe3JldHVyblwiY2FuY2VsXCJ9O1xuSGIucHJvdG90eXBlLlZiPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudWUuVmIodGhpcyl9O0hiLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnBhdGgudG9TdHJpbmcoKStcIjpjYW5jZWxcIn07ZnVuY3Rpb24gdGIoYSxiLGMpe3RoaXMuQT1hO3RoaXMuZWE9Yjt0aGlzLlViPWN9ZnVuY3Rpb24gSWIoYSl7cmV0dXJuIGEuZWF9ZnVuY3Rpb24gSmIoYSl7cmV0dXJuIGEuVWJ9ZnVuY3Rpb24gS2IoYSxiKXtyZXR1cm4gYi5lKCk/YS5lYSYmIWEuVWI6c2IoYSxFKGIpKX1mdW5jdGlvbiBzYihhLGIpe3JldHVybiBhLmVhJiYhYS5VYnx8YS5BLkRhKGIpfXRiLnByb3RvdHlwZS5qPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuQX07ZnVuY3Rpb24gTGIoYSl7dGhpcy5nZz1hO3RoaXMuRGQ9bnVsbH1MYi5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZy5nZXQoKSxiPXhhKGEpO2lmKHRoaXMuRGQpZm9yKHZhciBjIGluIHRoaXMuRGQpYltjXS09dGhpcy5EZFtjXTt0aGlzLkRkPWE7cmV0dXJuIGJ9O2Z1bmN0aW9uIE1iKGEsYil7dGhpcy5PZj17fTt0aGlzLmZkPW5ldyBMYihhKTt0aGlzLmJhPWI7dmFyIGM9MUU0KzJFNCpNYXRoLnJhbmRvbSgpO3NldFRpbWVvdXQocSh0aGlzLklmLHRoaXMpLE1hdGguZmxvb3IoYykpfU1iLnByb3RvdHlwZS5JZj1mdW5jdGlvbigpe3ZhciBhPXRoaXMuZmQuZ2V0KCksYj17fSxjPSExLGQ7Zm9yKGQgaW4gYSkwPGFbZF0mJnYodGhpcy5PZixkKSYmKGJbZF09YVtkXSxjPSEwKTtjJiZ0aGlzLmJhLlVlKGIpO3NldFRpbWVvdXQocSh0aGlzLklmLHRoaXMpLE1hdGguZmxvb3IoNkU1Kk1hdGgucmFuZG9tKCkpKX07ZnVuY3Rpb24gTmIoKXt0aGlzLkVjPXt9fWZ1bmN0aW9uIE9iKGEsYixjKXtuKGMpfHwoYz0xKTt2KGEuRWMsYil8fChhLkVjW2JdPTApO2EuRWNbYl0rPWN9TmIucHJvdG90eXBlLmdldD1mdW5jdGlvbigpe3JldHVybiB4YSh0aGlzLkVjKX07dmFyIFBiPXt9LFFiPXt9O2Z1bmN0aW9uIFJiKGEpe2E9YS50b1N0cmluZygpO1BiW2FdfHwoUGJbYV09bmV3IE5iKTtyZXR1cm4gUGJbYV19ZnVuY3Rpb24gU2IoYSxiKXt2YXIgYz1hLnRvU3RyaW5nKCk7UWJbY118fChRYltjXT1iKCkpO3JldHVybiBRYltjXX07ZnVuY3Rpb24gRihhLGIpe3RoaXMubmFtZT1hO3RoaXMuUz1ifWZ1bmN0aW9uIFRiKGEsYil7cmV0dXJuIG5ldyBGKGEsYil9O2Z1bmN0aW9uIFViKGEsYil7cmV0dXJuIFZiKGEubmFtZSxiLm5hbWUpfWZ1bmN0aW9uIFdiKGEsYil7cmV0dXJuIFZiKGEsYil9O2Z1bmN0aW9uIFhiKGEsYixjKXt0aGlzLnR5cGU9WWI7dGhpcy5zb3VyY2U9YTt0aGlzLnBhdGg9Yjt0aGlzLkdhPWN9WGIucHJvdG90eXBlLlhjPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnBhdGguZSgpP25ldyBYYih0aGlzLnNvdXJjZSxHLHRoaXMuR2EuUihhKSk6bmV3IFhiKHRoaXMuc291cmNlLEgodGhpcy5wYXRoKSx0aGlzLkdhKX07WGIucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuXCJPcGVyYXRpb24oXCIrdGhpcy5wYXRoK1wiOiBcIit0aGlzLnNvdXJjZS50b1N0cmluZygpK1wiIG92ZXJ3cml0ZTogXCIrdGhpcy5HYS50b1N0cmluZygpK1wiKVwifTtmdW5jdGlvbiBaYihhLGIpe3RoaXMudHlwZT0kYjt0aGlzLnNvdXJjZT1hO3RoaXMucGF0aD1ifVpiLnByb3RvdHlwZS5YYz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnBhdGguZSgpP25ldyBaYih0aGlzLnNvdXJjZSxHKTpuZXcgWmIodGhpcy5zb3VyY2UsSCh0aGlzLnBhdGgpKX07WmIucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuXCJPcGVyYXRpb24oXCIrdGhpcy5wYXRoK1wiOiBcIit0aGlzLnNvdXJjZS50b1N0cmluZygpK1wiIGxpc3Rlbl9jb21wbGV0ZSlcIn07ZnVuY3Rpb24gYWMoYSxiKXt0aGlzLkxhPWE7dGhpcy53YT1iP2I6YmN9Zz1hYy5wcm90b3R5cGU7Zy5PYT1mdW5jdGlvbihhLGIpe3JldHVybiBuZXcgYWModGhpcy5MYSx0aGlzLndhLk9hKGEsYix0aGlzLkxhKS5ZKG51bGwsbnVsbCwhMSxudWxsLG51bGwpKX07Zy5yZW1vdmU9ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyBhYyh0aGlzLkxhLHRoaXMud2EucmVtb3ZlKGEsdGhpcy5MYSkuWShudWxsLG51bGwsITEsbnVsbCxudWxsKSl9O2cuZ2V0PWZ1bmN0aW9uKGEpe2Zvcih2YXIgYixjPXRoaXMud2E7IWMuZSgpOyl7Yj10aGlzLkxhKGEsYy5rZXkpO2lmKDA9PT1iKXJldHVybiBjLnZhbHVlOzA+Yj9jPWMubGVmdDowPGImJihjPWMucmlnaHQpfXJldHVybiBudWxsfTtcbmZ1bmN0aW9uIGNjKGEsYil7Zm9yKHZhciBjLGQ9YS53YSxlPW51bGw7IWQuZSgpOyl7Yz1hLkxhKGIsZC5rZXkpO2lmKDA9PT1jKXtpZihkLmxlZnQuZSgpKXJldHVybiBlP2Uua2V5Om51bGw7Zm9yKGQ9ZC5sZWZ0OyFkLnJpZ2h0LmUoKTspZD1kLnJpZ2h0O3JldHVybiBkLmtleX0wPmM/ZD1kLmxlZnQ6MDxjJiYoZT1kLGQ9ZC5yaWdodCl9dGhyb3cgRXJyb3IoXCJBdHRlbXB0ZWQgdG8gZmluZCBwcmVkZWNlc3NvciBrZXkgZm9yIGEgbm9uZXhpc3RlbnQga2V5LiAgV2hhdCBnaXZlcz9cIik7fWcuZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLndhLmUoKX07Zy5jb3VudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLndhLmNvdW50KCl9O2cuU2M9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy53YS5TYygpfTtnLmZjPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMud2EuZmMoKX07Zy5pYT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy53YS5pYShhKX07XG5nLlhiPWZ1bmN0aW9uKGEpe3JldHVybiBuZXcgZGModGhpcy53YSxudWxsLHRoaXMuTGEsITEsYSl9O2cuWWI9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbmV3IGRjKHRoaXMud2EsYSx0aGlzLkxhLCExLGIpfTtnLiRiPWZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBkYyh0aGlzLndhLGEsdGhpcy5MYSwhMCxiKX07Zy5zZj1mdW5jdGlvbihhKXtyZXR1cm4gbmV3IGRjKHRoaXMud2EsbnVsbCx0aGlzLkxhLCEwLGEpfTtmdW5jdGlvbiBkYyhhLGIsYyxkLGUpe3RoaXMuVWQ9ZXx8bnVsbDt0aGlzLkZlPWQ7dGhpcy5QYT1bXTtmb3IoZT0xOyFhLmUoKTspaWYoZT1iP2MoYS5rZXksYik6MSxkJiYoZSo9LTEpLDA+ZSlhPXRoaXMuRmU/YS5sZWZ0OmEucmlnaHQ7ZWxzZSBpZigwPT09ZSl7dGhpcy5QYS5wdXNoKGEpO2JyZWFrfWVsc2UgdGhpcy5QYS5wdXNoKGEpLGE9dGhpcy5GZT9hLnJpZ2h0OmEubGVmdH1cbmZ1bmN0aW9uIEooYSl7aWYoMD09PWEuUGEubGVuZ3RoKXJldHVybiBudWxsO3ZhciBiPWEuUGEucG9wKCksYztjPWEuVWQ/YS5VZChiLmtleSxiLnZhbHVlKTp7a2V5OmIua2V5LHZhbHVlOmIudmFsdWV9O2lmKGEuRmUpZm9yKGI9Yi5sZWZ0OyFiLmUoKTspYS5QYS5wdXNoKGIpLGI9Yi5yaWdodDtlbHNlIGZvcihiPWIucmlnaHQ7IWIuZSgpOylhLlBhLnB1c2goYiksYj1iLmxlZnQ7cmV0dXJuIGN9ZnVuY3Rpb24gZWMoYSl7aWYoMD09PWEuUGEubGVuZ3RoKXJldHVybiBudWxsO3ZhciBiO2I9YS5QYTtiPWJbYi5sZW5ndGgtMV07cmV0dXJuIGEuVWQ/YS5VZChiLmtleSxiLnZhbHVlKTp7a2V5OmIua2V5LHZhbHVlOmIudmFsdWV9fWZ1bmN0aW9uIGZjKGEsYixjLGQsZSl7dGhpcy5rZXk9YTt0aGlzLnZhbHVlPWI7dGhpcy5jb2xvcj1udWxsIT1jP2M6ITA7dGhpcy5sZWZ0PW51bGwhPWQ/ZDpiYzt0aGlzLnJpZ2h0PW51bGwhPWU/ZTpiY31nPWZjLnByb3RvdHlwZTtcbmcuWT1mdW5jdGlvbihhLGIsYyxkLGUpe3JldHVybiBuZXcgZmMobnVsbCE9YT9hOnRoaXMua2V5LG51bGwhPWI/Yjp0aGlzLnZhbHVlLG51bGwhPWM/Yzp0aGlzLmNvbG9yLG51bGwhPWQ/ZDp0aGlzLmxlZnQsbnVsbCE9ZT9lOnRoaXMucmlnaHQpfTtnLmNvdW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGVmdC5jb3VudCgpKzErdGhpcy5yaWdodC5jb3VudCgpfTtnLmU9ZnVuY3Rpb24oKXtyZXR1cm4hMX07Zy5pYT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5sZWZ0LmlhKGEpfHxhKHRoaXMua2V5LHRoaXMudmFsdWUpfHx0aGlzLnJpZ2h0LmlhKGEpfTtmdW5jdGlvbiBnYyhhKXtyZXR1cm4gYS5sZWZ0LmUoKT9hOmdjKGEubGVmdCl9Zy5TYz1mdW5jdGlvbigpe3JldHVybiBnYyh0aGlzKS5rZXl9O2cuZmM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yaWdodC5lKCk/dGhpcy5rZXk6dGhpcy5yaWdodC5mYygpfTtcbmcuT2E9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGU7ZT10aGlzO2Q9YyhhLGUua2V5KTtlPTA+ZD9lLlkobnVsbCxudWxsLG51bGwsZS5sZWZ0Lk9hKGEsYixjKSxudWxsKTowPT09ZD9lLlkobnVsbCxiLG51bGwsbnVsbCxudWxsKTplLlkobnVsbCxudWxsLG51bGwsbnVsbCxlLnJpZ2h0Lk9hKGEsYixjKSk7cmV0dXJuIGhjKGUpfTtmdW5jdGlvbiBpYyhhKXtpZihhLmxlZnQuZSgpKXJldHVybiBiYzthLmxlZnQuZmEoKXx8YS5sZWZ0LmxlZnQuZmEoKXx8KGE9amMoYSkpO2E9YS5ZKG51bGwsbnVsbCxudWxsLGljKGEubGVmdCksbnVsbCk7cmV0dXJuIGhjKGEpfVxuZy5yZW1vdmU9ZnVuY3Rpb24oYSxiKXt2YXIgYyxkO2M9dGhpcztpZigwPmIoYSxjLmtleSkpYy5sZWZ0LmUoKXx8Yy5sZWZ0LmZhKCl8fGMubGVmdC5sZWZ0LmZhKCl8fChjPWpjKGMpKSxjPWMuWShudWxsLG51bGwsbnVsbCxjLmxlZnQucmVtb3ZlKGEsYiksbnVsbCk7ZWxzZXtjLmxlZnQuZmEoKSYmKGM9a2MoYykpO2MucmlnaHQuZSgpfHxjLnJpZ2h0LmZhKCl8fGMucmlnaHQubGVmdC5mYSgpfHwoYz1sYyhjKSxjLmxlZnQubGVmdC5mYSgpJiYoYz1rYyhjKSxjPWxjKGMpKSk7aWYoMD09PWIoYSxjLmtleSkpe2lmKGMucmlnaHQuZSgpKXJldHVybiBiYztkPWdjKGMucmlnaHQpO2M9Yy5ZKGQua2V5LGQudmFsdWUsbnVsbCxudWxsLGljKGMucmlnaHQpKX1jPWMuWShudWxsLG51bGwsbnVsbCxudWxsLGMucmlnaHQucmVtb3ZlKGEsYikpfXJldHVybiBoYyhjKX07Zy5mYT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNvbG9yfTtcbmZ1bmN0aW9uIGhjKGEpe2EucmlnaHQuZmEoKSYmIWEubGVmdC5mYSgpJiYoYT1tYyhhKSk7YS5sZWZ0LmZhKCkmJmEubGVmdC5sZWZ0LmZhKCkmJihhPWtjKGEpKTthLmxlZnQuZmEoKSYmYS5yaWdodC5mYSgpJiYoYT1sYyhhKSk7cmV0dXJuIGF9ZnVuY3Rpb24gamMoYSl7YT1sYyhhKTthLnJpZ2h0LmxlZnQuZmEoKSYmKGE9YS5ZKG51bGwsbnVsbCxudWxsLG51bGwsa2MoYS5yaWdodCkpLGE9bWMoYSksYT1sYyhhKSk7cmV0dXJuIGF9ZnVuY3Rpb24gbWMoYSl7cmV0dXJuIGEucmlnaHQuWShudWxsLG51bGwsYS5jb2xvcixhLlkobnVsbCxudWxsLCEwLG51bGwsYS5yaWdodC5sZWZ0KSxudWxsKX1mdW5jdGlvbiBrYyhhKXtyZXR1cm4gYS5sZWZ0LlkobnVsbCxudWxsLGEuY29sb3IsbnVsbCxhLlkobnVsbCxudWxsLCEwLGEubGVmdC5yaWdodCxudWxsKSl9XG5mdW5jdGlvbiBsYyhhKXtyZXR1cm4gYS5ZKG51bGwsbnVsbCwhYS5jb2xvcixhLmxlZnQuWShudWxsLG51bGwsIWEubGVmdC5jb2xvcixudWxsLG51bGwpLGEucmlnaHQuWShudWxsLG51bGwsIWEucmlnaHQuY29sb3IsbnVsbCxudWxsKSl9ZnVuY3Rpb24gbmMoKXt9Zz1uYy5wcm90b3R5cGU7Zy5ZPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9O2cuT2E9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbmV3IGZjKGEsYixudWxsKX07Zy5yZW1vdmU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc307Zy5jb3VudD1mdW5jdGlvbigpe3JldHVybiAwfTtnLmU9ZnVuY3Rpb24oKXtyZXR1cm4hMH07Zy5pYT1mdW5jdGlvbigpe3JldHVybiExfTtnLlNjPWZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9O2cuZmM9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH07Zy5mYT1mdW5jdGlvbigpe3JldHVybiExfTt2YXIgYmM9bmV3IG5jO2Z1bmN0aW9uIG9jKGEsYil7cmV0dXJuIGEmJlwib2JqZWN0XCI9PT10eXBlb2YgYT8oSyhcIi5zdlwiaW4gYSxcIlVuZXhwZWN0ZWQgbGVhZiBub2RlIG9yIHByaW9yaXR5IGNvbnRlbnRzXCIpLGJbYVtcIi5zdlwiXV0pOmF9ZnVuY3Rpb24gcGMoYSxiKXt2YXIgYz1uZXcgcWM7cmMoYSxuZXcgTChcIlwiKSxmdW5jdGlvbihhLGUpe2MubmMoYSxzYyhlLGIpKX0pO3JldHVybiBjfWZ1bmN0aW9uIHNjKGEsYil7dmFyIGM9YS5DKCkuSSgpLGM9b2MoYyxiKSxkO2lmKGEuSygpKXt2YXIgZT1vYyhhLkNhKCksYik7cmV0dXJuIGUhPT1hLkNhKCl8fGMhPT1hLkMoKS5JKCk/bmV3IHRjKGUsTShjKSk6YX1kPWE7YyE9PWEuQygpLkkoKSYmKGQ9ZC5nYShuZXcgdGMoYykpKTthLlAoTixmdW5jdGlvbihhLGMpe3ZhciBlPXNjKGMsYik7ZSE9PWMmJihkPWQuVShhLGUpKX0pO3JldHVybiBkfTtmdW5jdGlvbiB1Yygpe3RoaXMud2M9e319dWMucHJvdG90eXBlLnNldD1mdW5jdGlvbihhLGIpe251bGw9PWI/ZGVsZXRlIHRoaXMud2NbYV06dGhpcy53Y1thXT1ifTt1Yy5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKGEpe3JldHVybiB2KHRoaXMud2MsYSk/dGhpcy53Y1thXTpudWxsfTt1Yy5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKGEpe2RlbGV0ZSB0aGlzLndjW2FdfTt1Yy5wcm90b3R5cGUud2Y9ITA7ZnVuY3Rpb24gdmMoYSl7dGhpcy5GYz1hO3RoaXMuUGQ9XCJmaXJlYmFzZTpcIn1nPXZjLnByb3RvdHlwZTtnLnNldD1mdW5jdGlvbihhLGIpe251bGw9PWI/dGhpcy5GYy5yZW1vdmVJdGVtKHRoaXMuUGQrYSk6dGhpcy5GYy5zZXRJdGVtKHRoaXMuUGQrYSxCKGIpKX07Zy5nZXQ9ZnVuY3Rpb24oYSl7YT10aGlzLkZjLmdldEl0ZW0odGhpcy5QZCthKTtyZXR1cm4gbnVsbD09YT9udWxsOm5iKGEpfTtnLnJlbW92ZT1mdW5jdGlvbihhKXt0aGlzLkZjLnJlbW92ZUl0ZW0odGhpcy5QZCthKX07Zy53Zj0hMTtnLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuRmMudG9TdHJpbmcoKX07ZnVuY3Rpb24gd2MoYSl7dHJ5e2lmKFwidW5kZWZpbmVkXCIhPT10eXBlb2Ygd2luZG93JiZcInVuZGVmaW5lZFwiIT09dHlwZW9mIHdpbmRvd1thXSl7dmFyIGI9d2luZG93W2FdO2Iuc2V0SXRlbShcImZpcmViYXNlOnNlbnRpbmVsXCIsXCJjYWNoZVwiKTtiLnJlbW92ZUl0ZW0oXCJmaXJlYmFzZTpzZW50aW5lbFwiKTtyZXR1cm4gbmV3IHZjKGIpfX1jYXRjaChjKXt9cmV0dXJuIG5ldyB1Y312YXIgeGM9d2MoXCJsb2NhbFN0b3JhZ2VcIikseWM9d2MoXCJzZXNzaW9uU3RvcmFnZVwiKTtmdW5jdGlvbiB6YyhhLGIsYyxkLGUpe3RoaXMuaG9zdD1hLnRvTG93ZXJDYXNlKCk7dGhpcy5kb21haW49dGhpcy5ob3N0LnN1YnN0cih0aGlzLmhvc3QuaW5kZXhPZihcIi5cIikrMSk7dGhpcy5rYj1iO3RoaXMuaGM9Yzt0aGlzLldnPWQ7dGhpcy5PZD1lfHxcIlwiO3RoaXMuWWE9eGMuZ2V0KFwiaG9zdDpcIithKXx8dGhpcy5ob3N0fWZ1bmN0aW9uIEFjKGEsYil7YiE9PWEuWWEmJihhLllhPWIsXCJzLVwiPT09YS5ZYS5zdWJzdHIoMCwyKSYmeGMuc2V0KFwiaG9zdDpcIithLmhvc3QsYS5ZYSkpfVxuZnVuY3Rpb24gQmMoYSxiLGMpe0soXCJzdHJpbmdcIj09PXR5cGVvZiBiLFwidHlwZW9mIHR5cGUgbXVzdCA9PSBzdHJpbmdcIik7SyhcIm9iamVjdFwiPT09dHlwZW9mIGMsXCJ0eXBlb2YgcGFyYW1zIG11c3QgPT0gb2JqZWN0XCIpO2lmKGI9PT1DYyliPShhLmtiP1wid3NzOi8vXCI6XCJ3czovL1wiKSthLllhK1wiLy53cz9cIjtlbHNlIGlmKGI9PT1EYyliPShhLmtiP1wiaHR0cHM6Ly9cIjpcImh0dHA6Ly9cIikrYS5ZYStcIi8ubHA/XCI7ZWxzZSB0aHJvdyBFcnJvcihcIlVua25vd24gY29ubmVjdGlvbiB0eXBlOiBcIitiKTthLmhvc3QhPT1hLllhJiYoYy5ucz1hLmhjKTt2YXIgZD1bXTtyKGMsZnVuY3Rpb24oYSxiKXtkLnB1c2goYitcIj1cIithKX0pO3JldHVybiBiK2Quam9pbihcIiZcIil9emMucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7dmFyIGE9KHRoaXMua2I/XCJodHRwczovL1wiOlwiaHR0cDovL1wiKSt0aGlzLmhvc3Q7dGhpcy5PZCYmKGErPVwiPFwiK3RoaXMuT2QrXCI+XCIpO3JldHVybiBhfTt2YXIgRWM9ZnVuY3Rpb24oKXt2YXIgYT0xO3JldHVybiBmdW5jdGlvbigpe3JldHVybiBhKyt9fSgpO2Z1bmN0aW9uIEsoYSxiKXtpZighYSl0aHJvdyBGYyhiKTt9ZnVuY3Rpb24gRmMoYSl7cmV0dXJuIEVycm9yKFwiRmlyZWJhc2UgKFwiK2hiK1wiKSBJTlRFUk5BTCBBU1NFUlQgRkFJTEVEOiBcIithKX1cbmZ1bmN0aW9uIEdjKGEpe3RyeXt2YXIgYjtpZihcInVuZGVmaW5lZFwiIT09dHlwZW9mIGF0b2IpYj1hdG9iKGEpO2Vsc2V7Z2IoKTtmb3IodmFyIGM9ZWIsZD1bXSxlPTA7ZTxhLmxlbmd0aDspe3ZhciBmPWNbYS5jaGFyQXQoZSsrKV0saD1lPGEubGVuZ3RoP2NbYS5jaGFyQXQoZSldOjA7KytlO3ZhciBrPWU8YS5sZW5ndGg/Y1thLmNoYXJBdChlKV06NjQ7KytlO3ZhciBsPWU8YS5sZW5ndGg/Y1thLmNoYXJBdChlKV06NjQ7KytlO2lmKG51bGw9PWZ8fG51bGw9PWh8fG51bGw9PWt8fG51bGw9PWwpdGhyb3cgRXJyb3IoKTtkLnB1c2goZjw8MnxoPj40KTs2NCE9ayYmKGQucHVzaChoPDw0JjI0MHxrPj4yKSw2NCE9bCYmZC5wdXNoKGs8PDYmMTkyfGwpKX1pZig4MTkyPmQubGVuZ3RoKWI9U3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLGQpO2Vsc2V7YT1cIlwiO2ZvcihjPTA7YzxkLmxlbmd0aDtjKz04MTkyKWErPVN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCxXYShkLGMsXG5jKzgxOTIpKTtiPWF9fXJldHVybiBifWNhdGNoKG0pe0NiKFwiYmFzZTY0RGVjb2RlIGZhaWxlZDogXCIsbSl9cmV0dXJuIG51bGx9ZnVuY3Rpb24gSGMoYSl7dmFyIGI9SWMoYSk7YT1uZXcgTGE7YS51cGRhdGUoYik7dmFyIGI9W10sYz04KmEuZGU7NTY+YS5hYz9hLnVwZGF0ZShhLkxkLDU2LWEuYWMpOmEudXBkYXRlKGEuTGQsYS5WYS0oYS5hYy01NikpO2Zvcih2YXIgZD1hLlZhLTE7NTY8PWQ7ZC0tKWEubWVbZF09YyYyNTUsYy89MjU2O01hKGEsYS5tZSk7Zm9yKGQ9Yz0wOzU+ZDtkKyspZm9yKHZhciBlPTI0OzA8PWU7ZS09OCliW2NdPWEuTltkXT4+ZSYyNTUsKytjO3JldHVybiBmYihiKX1cbmZ1bmN0aW9uIEpjKGEpe2Zvcih2YXIgYj1cIlwiLGM9MDtjPGFyZ3VtZW50cy5sZW5ndGg7YysrKWI9ZmEoYXJndW1lbnRzW2NdKT9iK0pjLmFwcGx5KG51bGwsYXJndW1lbnRzW2NdKTpcIm9iamVjdFwiPT09dHlwZW9mIGFyZ3VtZW50c1tjXT9iK0IoYXJndW1lbnRzW2NdKTpiK2FyZ3VtZW50c1tjXSxiKz1cIiBcIjtyZXR1cm4gYn12YXIgQmI9bnVsbCxLYz0hMDtmdW5jdGlvbiBDYihhKXshMD09PUtjJiYoS2M9ITEsbnVsbD09PUJiJiYhMD09PXljLmdldChcImxvZ2dpbmdfZW5hYmxlZFwiKSYmTGMoITApKTtpZihCYil7dmFyIGI9SmMuYXBwbHkobnVsbCxhcmd1bWVudHMpO0JiKGIpfX1mdW5jdGlvbiBNYyhhKXtyZXR1cm4gZnVuY3Rpb24oKXtDYihhLGFyZ3VtZW50cyl9fVxuZnVuY3Rpb24gTmMoYSl7aWYoXCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBjb25zb2xlKXt2YXIgYj1cIkZJUkVCQVNFIElOVEVSTkFMIEVSUk9SOiBcIitKYy5hcHBseShudWxsLGFyZ3VtZW50cyk7XCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBjb25zb2xlLmVycm9yP2NvbnNvbGUuZXJyb3IoYik6Y29uc29sZS5sb2coYil9fWZ1bmN0aW9uIE9jKGEpe3ZhciBiPUpjLmFwcGx5KG51bGwsYXJndW1lbnRzKTt0aHJvdyBFcnJvcihcIkZJUkVCQVNFIEZBVEFMIEVSUk9SOiBcIitiKTt9ZnVuY3Rpb24gTyhhKXtpZihcInVuZGVmaW5lZFwiIT09dHlwZW9mIGNvbnNvbGUpe3ZhciBiPVwiRklSRUJBU0UgV0FSTklORzogXCIrSmMuYXBwbHkobnVsbCxhcmd1bWVudHMpO1widW5kZWZpbmVkXCIhPT10eXBlb2YgY29uc29sZS53YXJuP2NvbnNvbGUud2FybihiKTpjb25zb2xlLmxvZyhiKX19XG5mdW5jdGlvbiBQYyhhKXt2YXIgYj1cIlwiLGM9XCJcIixkPVwiXCIsZT1cIlwiLGY9ITAsaD1cImh0dHBzXCIsaz00NDM7aWYocChhKSl7dmFyIGw9YS5pbmRleE9mKFwiLy9cIik7MDw9bCYmKGg9YS5zdWJzdHJpbmcoMCxsLTEpLGE9YS5zdWJzdHJpbmcobCsyKSk7bD1hLmluZGV4T2YoXCIvXCIpOy0xPT09bCYmKGw9YS5sZW5ndGgpO2I9YS5zdWJzdHJpbmcoMCxsKTtlPVwiXCI7YT1hLnN1YnN0cmluZyhsKS5zcGxpdChcIi9cIik7Zm9yKGw9MDtsPGEubGVuZ3RoO2wrKylpZigwPGFbbF0ubGVuZ3RoKXt2YXIgbT1hW2xdO3RyeXttPWRlY29kZVVSSUNvbXBvbmVudChtLnJlcGxhY2UoL1xcKy9nLFwiIFwiKSl9Y2F0Y2godCl7fWUrPVwiL1wiK219YT1iLnNwbGl0KFwiLlwiKTszPT09YS5sZW5ndGg/KGM9YVsxXSxkPWFbMF0udG9Mb3dlckNhc2UoKSk6Mj09PWEubGVuZ3RoJiYoYz1hWzBdKTtsPWIuaW5kZXhPZihcIjpcIik7MDw9bCYmKGY9XCJodHRwc1wiPT09aHx8XCJ3c3NcIj09PWgsaz1iLnN1YnN0cmluZyhsKzEpLGlzRmluaXRlKGspJiZcbihrPVN0cmluZyhrKSksaz1wKGspPy9eXFxzKi0/MHgvaS50ZXN0KGspP3BhcnNlSW50KGssMTYpOnBhcnNlSW50KGssMTApOk5hTil9cmV0dXJue2hvc3Q6Yixwb3J0OmssZG9tYWluOmMsVGc6ZCxrYjpmLHNjaGVtZTpoLCRjOmV9fWZ1bmN0aW9uIFFjKGEpe3JldHVybiBnYShhKSYmKGEhPWF8fGE9PU51bWJlci5QT1NJVElWRV9JTkZJTklUWXx8YT09TnVtYmVyLk5FR0FUSVZFX0lORklOSVRZKX1cbmZ1bmN0aW9uIFJjKGEpe2lmKFwiY29tcGxldGVcIj09PWRvY3VtZW50LnJlYWR5U3RhdGUpYSgpO2Vsc2V7dmFyIGI9ITEsYz1mdW5jdGlvbigpe2RvY3VtZW50LmJvZHk/Ynx8KGI9ITAsYSgpKTpzZXRUaW1lb3V0KGMsTWF0aC5mbG9vcigxMCkpfTtkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyPyhkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLGMsITEpLHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLGMsITEpKTpkb2N1bWVudC5hdHRhY2hFdmVudCYmKGRvY3VtZW50LmF0dGFjaEV2ZW50KFwib25yZWFkeXN0YXRlY2hhbmdlXCIsZnVuY3Rpb24oKXtcImNvbXBsZXRlXCI9PT1kb2N1bWVudC5yZWFkeVN0YXRlJiZjKCl9KSx3aW5kb3cuYXR0YWNoRXZlbnQoXCJvbmxvYWRcIixjKSl9fVxuZnVuY3Rpb24gVmIoYSxiKXtpZihhPT09YilyZXR1cm4gMDtpZihcIltNSU5fTkFNRV1cIj09PWF8fFwiW01BWF9OQU1FXVwiPT09YilyZXR1cm4tMTtpZihcIltNSU5fTkFNRV1cIj09PWJ8fFwiW01BWF9OQU1FXVwiPT09YSlyZXR1cm4gMTt2YXIgYz1TYyhhKSxkPVNjKGIpO3JldHVybiBudWxsIT09Yz9udWxsIT09ZD8wPT1jLWQ/YS5sZW5ndGgtYi5sZW5ndGg6Yy1kOi0xOm51bGwhPT1kPzE6YTxiPy0xOjF9ZnVuY3Rpb24gVGMoYSxiKXtpZihiJiZhIGluIGIpcmV0dXJuIGJbYV07dGhyb3cgRXJyb3IoXCJNaXNzaW5nIHJlcXVpcmVkIGtleSAoXCIrYStcIikgaW4gb2JqZWN0OiBcIitCKGIpKTt9XG5mdW5jdGlvbiBVYyhhKXtpZihcIm9iamVjdFwiIT09dHlwZW9mIGF8fG51bGw9PT1hKXJldHVybiBCKGEpO3ZhciBiPVtdLGM7Zm9yKGMgaW4gYSliLnB1c2goYyk7Yi5zb3J0KCk7Yz1cIntcIjtmb3IodmFyIGQ9MDtkPGIubGVuZ3RoO2QrKykwIT09ZCYmKGMrPVwiLFwiKSxjKz1CKGJbZF0pLGMrPVwiOlwiLGMrPVVjKGFbYltkXV0pO3JldHVybiBjK1wifVwifWZ1bmN0aW9uIFZjKGEsYil7aWYoYS5sZW5ndGg8PWIpcmV0dXJuW2FdO2Zvcih2YXIgYz1bXSxkPTA7ZDxhLmxlbmd0aDtkKz1iKWQrYj5hP2MucHVzaChhLnN1YnN0cmluZyhkLGEubGVuZ3RoKSk6Yy5wdXNoKGEuc3Vic3RyaW5nKGQsZCtiKSk7cmV0dXJuIGN9ZnVuY3Rpb24gV2MoYSxiKXtpZihlYShhKSlmb3IodmFyIGM9MDtjPGEubGVuZ3RoOysrYyliKGMsYVtjXSk7ZWxzZSByKGEsYil9XG5mdW5jdGlvbiBYYyhhKXtLKCFRYyhhKSxcIkludmFsaWQgSlNPTiBudW1iZXJcIik7dmFyIGIsYyxkLGU7MD09PWE/KGQ9Yz0wLGI9LUluZmluaXR5PT09MS9hPzE6MCk6KGI9MD5hLGE9TWF0aC5hYnMoYSksYT49TWF0aC5wb3coMiwtMTAyMik/KGQ9TWF0aC5taW4oTWF0aC5mbG9vcihNYXRoLmxvZyhhKS9NYXRoLkxOMiksMTAyMyksYz1kKzEwMjMsZD1NYXRoLnJvdW5kKGEqTWF0aC5wb3coMiw1Mi1kKS1NYXRoLnBvdygyLDUyKSkpOihjPTAsZD1NYXRoLnJvdW5kKGEvTWF0aC5wb3coMiwtMTA3NCkpKSk7ZT1bXTtmb3IoYT01MjthOy0tYSllLnB1c2goZCUyPzE6MCksZD1NYXRoLmZsb29yKGQvMik7Zm9yKGE9MTE7YTstLWEpZS5wdXNoKGMlMj8xOjApLGM9TWF0aC5mbG9vcihjLzIpO2UucHVzaChiPzE6MCk7ZS5yZXZlcnNlKCk7Yj1lLmpvaW4oXCJcIik7Yz1cIlwiO2ZvcihhPTA7NjQ+YTthKz04KWQ9cGFyc2VJbnQoYi5zdWJzdHIoYSw4KSwyKS50b1N0cmluZygxNiksMT09PWQubGVuZ3RoJiZcbihkPVwiMFwiK2QpLGMrPWQ7cmV0dXJuIGMudG9Mb3dlckNhc2UoKX12YXIgWWM9L14tP1xcZHsxLDEwfSQvO2Z1bmN0aW9uIFNjKGEpe3JldHVybiBZYy50ZXN0KGEpJiYoYT1OdW1iZXIoYSksLTIxNDc0ODM2NDg8PWEmJjIxNDc0ODM2NDc+PWEpP2E6bnVsbH1mdW5jdGlvbiBEYihhKXt0cnl7YSgpfWNhdGNoKGIpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXtPKFwiRXhjZXB0aW9uIHdhcyB0aHJvd24gYnkgdXNlciBjYWxsYmFjay5cIixiLnN0YWNrfHxcIlwiKTt0aHJvdyBiO30sTWF0aC5mbG9vcigwKSl9fWZ1bmN0aW9uIFAoYSxiKXtpZihoYShhKSl7dmFyIGM9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpLnNsaWNlKCk7RGIoZnVuY3Rpb24oKXthLmFwcGx5KG51bGwsYyl9KX19O2Z1bmN0aW9uIEljKGEpe2Zvcih2YXIgYj1bXSxjPTAsZD0wO2Q8YS5sZW5ndGg7ZCsrKXt2YXIgZT1hLmNoYXJDb2RlQXQoZCk7NTUyOTY8PWUmJjU2MzE5Pj1lJiYoZS09NTUyOTYsZCsrLEsoZDxhLmxlbmd0aCxcIlN1cnJvZ2F0ZSBwYWlyIG1pc3NpbmcgdHJhaWwgc3Vycm9nYXRlLlwiKSxlPTY1NTM2KyhlPDwxMCkrKGEuY2hhckNvZGVBdChkKS01NjMyMCkpOzEyOD5lP2JbYysrXT1lOigyMDQ4PmU/YltjKytdPWU+PjZ8MTkyOig2NTUzNj5lP2JbYysrXT1lPj4xMnwyMjQ6KGJbYysrXT1lPj4xOHwyNDAsYltjKytdPWU+PjEyJjYzfDEyOCksYltjKytdPWU+PjYmNjN8MTI4KSxiW2MrK109ZSY2M3wxMjgpfXJldHVybiBifWZ1bmN0aW9uIFpjKGEpe2Zvcih2YXIgYj0wLGM9MDtjPGEubGVuZ3RoO2MrKyl7dmFyIGQ9YS5jaGFyQ29kZUF0KGMpOzEyOD5kP2IrKzoyMDQ4PmQ/Yis9Mjo1NTI5Njw9ZCYmNTYzMTk+PWQ/KGIrPTQsYysrKTpiKz0zfXJldHVybiBifTtmdW5jdGlvbiAkYyhhKXt2YXIgYj17fSxjPXt9LGQ9e30sZT1cIlwiO3RyeXt2YXIgZj1hLnNwbGl0KFwiLlwiKSxiPW5iKEdjKGZbMF0pfHxcIlwiKSxjPW5iKEdjKGZbMV0pfHxcIlwiKSxlPWZbMl0sZD1jLmR8fHt9O2RlbGV0ZSBjLmR9Y2F0Y2goaCl7fXJldHVybntaZzpiLEJjOmMsZGF0YTpkLFFnOmV9fWZ1bmN0aW9uIGFkKGEpe2E9JGMoYSkuQmM7cmV0dXJuXCJvYmplY3RcIj09PXR5cGVvZiBhJiZhLmhhc093blByb3BlcnR5KFwiaWF0XCIpP3coYSxcImlhdFwiKTpudWxsfWZ1bmN0aW9uIGJkKGEpe2E9JGMoYSk7dmFyIGI9YS5CYztyZXR1cm4hIWEuUWcmJiEhYiYmXCJvYmplY3RcIj09PXR5cGVvZiBiJiZiLmhhc093blByb3BlcnR5KFwiaWF0XCIpfTtmdW5jdGlvbiBjZChhKXt0aGlzLlc9YTt0aGlzLmc9YS5uLmd9ZnVuY3Rpb24gZGQoYSxiLGMsZCl7dmFyIGU9W10sZj1bXTtPYShiLGZ1bmN0aW9uKGIpe1wiY2hpbGRfY2hhbmdlZFwiPT09Yi50eXBlJiZhLmcuQWQoYi5LZSxiLkphKSYmZi5wdXNoKG5ldyBEKFwiY2hpbGRfbW92ZWRcIixiLkphLGIuV2EpKX0pO2VkKGEsZSxcImNoaWxkX3JlbW92ZWRcIixiLGQsYyk7ZWQoYSxlLFwiY2hpbGRfYWRkZWRcIixiLGQsYyk7ZWQoYSxlLFwiY2hpbGRfbW92ZWRcIixmLGQsYyk7ZWQoYSxlLFwiY2hpbGRfY2hhbmdlZFwiLGIsZCxjKTtlZChhLGUsRmIsYixkLGMpO3JldHVybiBlfWZ1bmN0aW9uIGVkKGEsYixjLGQsZSxmKXtkPVBhKGQsZnVuY3Rpb24oYSl7cmV0dXJuIGEudHlwZT09PWN9KTtYYShkLHEoYS5oZyxhKSk7T2EoZCxmdW5jdGlvbihjKXt2YXIgZD1mZChhLGMsZik7T2EoZSxmdW5jdGlvbihlKXtlLktmKGMudHlwZSkmJmIucHVzaChlLmNyZWF0ZUV2ZW50KGQsYS5XKSl9KX0pfVxuZnVuY3Rpb24gZmQoYSxiLGMpe1widmFsdWVcIiE9PWIudHlwZSYmXCJjaGlsZF9yZW1vdmVkXCIhPT1iLnR5cGUmJihiLlFkPWMucmYoYi5XYSxiLkphLGEuZykpO3JldHVybiBifWNkLnByb3RvdHlwZS5oZz1mdW5jdGlvbihhLGIpe2lmKG51bGw9PWEuV2F8fG51bGw9PWIuV2EpdGhyb3cgRmMoXCJTaG91bGQgb25seSBjb21wYXJlIGNoaWxkXyBldmVudHMuXCIpO3JldHVybiB0aGlzLmcuY29tcGFyZShuZXcgRihhLldhLGEuSmEpLG5ldyBGKGIuV2EsYi5KYSkpfTtmdW5jdGlvbiBnZCgpe3RoaXMuYmI9e319XG5mdW5jdGlvbiBoZChhLGIpe3ZhciBjPWIudHlwZSxkPWIuV2E7SyhcImNoaWxkX2FkZGVkXCI9PWN8fFwiY2hpbGRfY2hhbmdlZFwiPT1jfHxcImNoaWxkX3JlbW92ZWRcIj09YyxcIk9ubHkgY2hpbGQgY2hhbmdlcyBzdXBwb3J0ZWQgZm9yIHRyYWNraW5nXCIpO0soXCIucHJpb3JpdHlcIiE9PWQsXCJPbmx5IG5vbi1wcmlvcml0eSBjaGlsZCBjaGFuZ2VzIGNhbiBiZSB0cmFja2VkLlwiKTt2YXIgZT13KGEuYmIsZCk7aWYoZSl7dmFyIGY9ZS50eXBlO2lmKFwiY2hpbGRfYWRkZWRcIj09YyYmXCJjaGlsZF9yZW1vdmVkXCI9PWYpYS5iYltkXT1uZXcgRChcImNoaWxkX2NoYW5nZWRcIixiLkphLGQsZS5KYSk7ZWxzZSBpZihcImNoaWxkX3JlbW92ZWRcIj09YyYmXCJjaGlsZF9hZGRlZFwiPT1mKWRlbGV0ZSBhLmJiW2RdO2Vsc2UgaWYoXCJjaGlsZF9yZW1vdmVkXCI9PWMmJlwiY2hpbGRfY2hhbmdlZFwiPT1mKWEuYmJbZF09bmV3IEQoXCJjaGlsZF9yZW1vdmVkXCIsZS5LZSxkKTtlbHNlIGlmKFwiY2hpbGRfY2hhbmdlZFwiPT1jJiZcblwiY2hpbGRfYWRkZWRcIj09ZilhLmJiW2RdPW5ldyBEKFwiY2hpbGRfYWRkZWRcIixiLkphLGQpO2Vsc2UgaWYoXCJjaGlsZF9jaGFuZ2VkXCI9PWMmJlwiY2hpbGRfY2hhbmdlZFwiPT1mKWEuYmJbZF09bmV3IEQoXCJjaGlsZF9jaGFuZ2VkXCIsYi5KYSxkLGUuS2UpO2Vsc2UgdGhyb3cgRmMoXCJJbGxlZ2FsIGNvbWJpbmF0aW9uIG9mIGNoYW5nZXM6IFwiK2IrXCIgb2NjdXJyZWQgYWZ0ZXIgXCIrZSk7fWVsc2UgYS5iYltkXT1ifTtmdW5jdGlvbiBpZChhLGIsYyl7dGhpcy5SYj1hO3RoaXMucGI9Yjt0aGlzLnJiPWN8fG51bGx9Zz1pZC5wcm90b3R5cGU7Zy5LZj1mdW5jdGlvbihhKXtyZXR1cm5cInZhbHVlXCI9PT1hfTtnLmNyZWF0ZUV2ZW50PWZ1bmN0aW9uKGEsYil7dmFyIGM9Yi5uLmc7cmV0dXJuIG5ldyBHYihcInZhbHVlXCIsdGhpcyxuZXcgUShhLkphLGIuSWIoKSxjKSl9O2cuVmI9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5yYjtpZihcImNhbmNlbFwiPT09YS56ZSgpKXtLKHRoaXMucGIsXCJSYWlzaW5nIGEgY2FuY2VsIGV2ZW50IG9uIGEgbGlzdGVuZXIgd2l0aCBubyBjYW5jZWwgY2FsbGJhY2tcIik7dmFyIGM9dGhpcy5wYjtyZXR1cm4gZnVuY3Rpb24oKXtjLmNhbGwoYixhLmVycm9yKX19dmFyIGQ9dGhpcy5SYjtyZXR1cm4gZnVuY3Rpb24oKXtkLmNhbGwoYixhLlpkKX19O2cuZ2Y9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5wYj9uZXcgSGIodGhpcyxhLGIpOm51bGx9O1xuZy5tYXRjaGVzPWZ1bmN0aW9uKGEpe3JldHVybiBhIGluc3RhbmNlb2YgaWQ/YS5SYiYmdGhpcy5SYj9hLlJiPT09dGhpcy5SYiYmYS5yYj09PXRoaXMucmI6ITA6ITF9O2cudGY9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbCE9PXRoaXMuUmJ9O2Z1bmN0aW9uIGpkKGEsYixjKXt0aGlzLmhhPWE7dGhpcy5wYj1iO3RoaXMucmI9Y31nPWpkLnByb3RvdHlwZTtnLktmPWZ1bmN0aW9uKGEpe2E9XCJjaGlsZHJlbl9hZGRlZFwiPT09YT9cImNoaWxkX2FkZGVkXCI6YTtyZXR1cm4oXCJjaGlsZHJlbl9yZW1vdmVkXCI9PT1hP1wiY2hpbGRfcmVtb3ZlZFwiOmEpaW4gdGhpcy5oYX07Zy5nZj1mdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLnBiP25ldyBIYih0aGlzLGEsYik6bnVsbH07XG5nLmNyZWF0ZUV2ZW50PWZ1bmN0aW9uKGEsYil7SyhudWxsIT1hLldhLFwiQ2hpbGQgZXZlbnRzIHNob3VsZCBoYXZlIGEgY2hpbGROYW1lLlwiKTt2YXIgYz1iLkliKCkudShhLldhKTtyZXR1cm4gbmV3IEdiKGEudHlwZSx0aGlzLG5ldyBRKGEuSmEsYyxiLm4uZyksYS5RZCl9O2cuVmI9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5yYjtpZihcImNhbmNlbFwiPT09YS56ZSgpKXtLKHRoaXMucGIsXCJSYWlzaW5nIGEgY2FuY2VsIGV2ZW50IG9uIGEgbGlzdGVuZXIgd2l0aCBubyBjYW5jZWwgY2FsbGJhY2tcIik7dmFyIGM9dGhpcy5wYjtyZXR1cm4gZnVuY3Rpb24oKXtjLmNhbGwoYixhLmVycm9yKX19dmFyIGQ9dGhpcy5oYVthLnVkXTtyZXR1cm4gZnVuY3Rpb24oKXtkLmNhbGwoYixhLlpkLGEuUWQpfX07XG5nLm1hdGNoZXM9ZnVuY3Rpb24oYSl7aWYoYSBpbnN0YW5jZW9mIGpkKXtpZighdGhpcy5oYXx8IWEuaGEpcmV0dXJuITA7aWYodGhpcy5yYj09PWEucmIpe3ZhciBiPXBhKGEuaGEpO2lmKGI9PT1wYSh0aGlzLmhhKSl7aWYoMT09PWIpe3ZhciBiPXFhKGEuaGEpLGM9cWEodGhpcy5oYSk7cmV0dXJuIGM9PT1iJiYoIWEuaGFbYl18fCF0aGlzLmhhW2NdfHxhLmhhW2JdPT09dGhpcy5oYVtjXSl9cmV0dXJuIG9hKHRoaXMuaGEsZnVuY3Rpb24oYixjKXtyZXR1cm4gYS5oYVtjXT09PWJ9KX19fXJldHVybiExfTtnLnRmPWZ1bmN0aW9uKCl7cmV0dXJuIG51bGwhPT10aGlzLmhhfTtmdW5jdGlvbiBrZChhKXt0aGlzLmc9YX1nPWtkLnByb3RvdHlwZTtnLkc9ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe0soYS5KYyh0aGlzLmcpLFwiQSBub2RlIG11c3QgYmUgaW5kZXhlZCBpZiBvbmx5IGEgY2hpbGQgaXMgdXBkYXRlZFwiKTtlPWEuUihiKTtpZihlLlEoZCkuY2EoYy5RKGQpKSYmZS5lKCk9PWMuZSgpKXJldHVybiBhO251bGwhPWYmJihjLmUoKT9hLkRhKGIpP2hkKGYsbmV3IEQoXCJjaGlsZF9yZW1vdmVkXCIsZSxiKSk6SyhhLksoKSxcIkEgY2hpbGQgcmVtb3ZlIHdpdGhvdXQgYW4gb2xkIGNoaWxkIG9ubHkgbWFrZXMgc2Vuc2Ugb24gYSBsZWFmIG5vZGVcIik6ZS5lKCk/aGQoZixuZXcgRChcImNoaWxkX2FkZGVkXCIsYyxiKSk6aGQoZixuZXcgRChcImNoaWxkX2NoYW5nZWRcIixjLGIsZSkpKTtyZXR1cm4gYS5LKCkmJmMuZSgpP2E6YS5VKGIsYykubGIodGhpcy5nKX07XG5nLnhhPWZ1bmN0aW9uKGEsYixjKXtudWxsIT1jJiYoYS5LKCl8fGEuUChOLGZ1bmN0aW9uKGEsZSl7Yi5EYShhKXx8aGQoYyxuZXcgRChcImNoaWxkX3JlbW92ZWRcIixlLGEpKX0pLGIuSygpfHxiLlAoTixmdW5jdGlvbihiLGUpe2lmKGEuRGEoYikpe3ZhciBmPWEuUihiKTtmLmNhKGUpfHxoZChjLG5ldyBEKFwiY2hpbGRfY2hhbmdlZFwiLGUsYixmKSl9ZWxzZSBoZChjLG5ldyBEKFwiY2hpbGRfYWRkZWRcIixlLGIpKX0pKTtyZXR1cm4gYi5sYih0aGlzLmcpfTtnLmdhPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGEuZSgpP0M6YS5nYShiKX07Zy5OYT1mdW5jdGlvbigpe3JldHVybiExfTtnLldiPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9O2Z1bmN0aW9uIGxkKGEpe3RoaXMuQmU9bmV3IGtkKGEuZyk7dGhpcy5nPWEuZzt2YXIgYjthLm1hPyhiPW1kKGEpLGI9YS5nLlBjKG5kKGEpLGIpKTpiPWEuZy5UYygpO3RoaXMuZWQ9YjthLnBhPyhiPW9kKGEpLGE9YS5nLlBjKHBkKGEpLGIpKTphPWEuZy5RYygpO3RoaXMuR2M9YX1nPWxkLnByb3RvdHlwZTtnLm1hdGNoZXM9ZnVuY3Rpb24oYSl7cmV0dXJuIDA+PXRoaXMuZy5jb21wYXJlKHRoaXMuZWQsYSkmJjA+PXRoaXMuZy5jb21wYXJlKGEsdGhpcy5HYyl9O2cuRz1mdW5jdGlvbihhLGIsYyxkLGUsZil7dGhpcy5tYXRjaGVzKG5ldyBGKGIsYykpfHwoYz1DKTtyZXR1cm4gdGhpcy5CZS5HKGEsYixjLGQsZSxmKX07XG5nLnhhPWZ1bmN0aW9uKGEsYixjKXtiLksoKSYmKGI9Qyk7dmFyIGQ9Yi5sYih0aGlzLmcpLGQ9ZC5nYShDKSxlPXRoaXM7Yi5QKE4sZnVuY3Rpb24oYSxiKXtlLm1hdGNoZXMobmV3IEYoYSxiKSl8fChkPWQuVShhLEMpKX0pO3JldHVybiB0aGlzLkJlLnhhKGEsZCxjKX07Zy5nYT1mdW5jdGlvbihhKXtyZXR1cm4gYX07Zy5OYT1mdW5jdGlvbigpe3JldHVybiEwfTtnLldiPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuQmV9O2Z1bmN0aW9uIHFkKGEpe3RoaXMuc2E9bmV3IGxkKGEpO3RoaXMuZz1hLmc7SyhhLmphLFwiT25seSB2YWxpZCBpZiBsaW1pdCBoYXMgYmVlbiBzZXRcIik7dGhpcy5rYT1hLmthO3RoaXMuSmI9IXJkKGEpfWc9cWQucHJvdG90eXBlO2cuRz1mdW5jdGlvbihhLGIsYyxkLGUsZil7dGhpcy5zYS5tYXRjaGVzKG5ldyBGKGIsYykpfHwoYz1DKTtyZXR1cm4gYS5SKGIpLmNhKGMpP2E6YS5EYigpPHRoaXMua2E/dGhpcy5zYS5XYigpLkcoYSxiLGMsZCxlLGYpOnNkKHRoaXMsYSxiLGMsZSxmKX07XG5nLnhhPWZ1bmN0aW9uKGEsYixjKXt2YXIgZDtpZihiLksoKXx8Yi5lKCkpZD1DLmxiKHRoaXMuZyk7ZWxzZSBpZigyKnRoaXMua2E8Yi5EYigpJiZiLkpjKHRoaXMuZykpe2Q9Qy5sYih0aGlzLmcpO2I9dGhpcy5KYj9iLiRiKHRoaXMuc2EuR2MsdGhpcy5nKTpiLlliKHRoaXMuc2EuZWQsdGhpcy5nKTtmb3IodmFyIGU9MDswPGIuUGEubGVuZ3RoJiZlPHRoaXMua2E7KXt2YXIgZj1KKGIpLGg7aWYoaD10aGlzLkpiPzA+PXRoaXMuZy5jb21wYXJlKHRoaXMuc2EuZWQsZik6MD49dGhpcy5nLmNvbXBhcmUoZix0aGlzLnNhLkdjKSlkPWQuVShmLm5hbWUsZi5TKSxlKys7ZWxzZSBicmVha319ZWxzZXtkPWIubGIodGhpcy5nKTtkPWQuZ2EoQyk7dmFyIGssbCxtO2lmKHRoaXMuSmIpe2I9ZC5zZih0aGlzLmcpO2s9dGhpcy5zYS5HYztsPXRoaXMuc2EuZWQ7dmFyIHQ9dGQodGhpcy5nKTttPWZ1bmN0aW9uKGEsYil7cmV0dXJuIHQoYixhKX19ZWxzZSBiPWQuWGIodGhpcy5nKSxrPXRoaXMuc2EuZWQsXG5sPXRoaXMuc2EuR2MsbT10ZCh0aGlzLmcpO2Zvcih2YXIgZT0wLHo9ITE7MDxiLlBhLmxlbmd0aDspZj1KKGIpLCF6JiYwPj1tKGssZikmJih6PSEwKSwoaD16JiZlPHRoaXMua2EmJjA+PW0oZixsKSk/ZSsrOmQ9ZC5VKGYubmFtZSxDKX1yZXR1cm4gdGhpcy5zYS5XYigpLnhhKGEsZCxjKX07Zy5nYT1mdW5jdGlvbihhKXtyZXR1cm4gYX07Zy5OYT1mdW5jdGlvbigpe3JldHVybiEwfTtnLldiPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2EuV2IoKX07XG5mdW5jdGlvbiBzZChhLGIsYyxkLGUsZil7dmFyIGg7aWYoYS5KYil7dmFyIGs9dGQoYS5nKTtoPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGsoYixhKX19ZWxzZSBoPXRkKGEuZyk7SyhiLkRiKCk9PWEua2EsXCJcIik7dmFyIGw9bmV3IEYoYyxkKSxtPWEuSmI/dWQoYixhLmcpOnZkKGIsYS5nKSx0PWEuc2EubWF0Y2hlcyhsKTtpZihiLkRhKGMpKXtmb3IodmFyIHo9Yi5SKGMpLG09ZS55ZShhLmcsbSxhLkpiKTtudWxsIT1tJiYobS5uYW1lPT1jfHxiLkRhKG0ubmFtZSkpOyltPWUueWUoYS5nLG0sYS5KYik7ZT1udWxsPT1tPzE6aChtLGwpO2lmKHQmJiFkLmUoKSYmMDw9ZSlyZXR1cm4gbnVsbCE9ZiYmaGQoZixuZXcgRChcImNoaWxkX2NoYW5nZWRcIixkLGMseikpLGIuVShjLGQpO251bGwhPWYmJmhkKGYsbmV3IEQoXCJjaGlsZF9yZW1vdmVkXCIseixjKSk7Yj1iLlUoYyxDKTtyZXR1cm4gbnVsbCE9bSYmYS5zYS5tYXRjaGVzKG0pPyhudWxsIT1mJiZoZChmLG5ldyBEKFwiY2hpbGRfYWRkZWRcIixcbm0uUyxtLm5hbWUpKSxiLlUobS5uYW1lLG0uUykpOmJ9cmV0dXJuIGQuZSgpP2I6dCYmMDw9aChtLGwpPyhudWxsIT1mJiYoaGQoZixuZXcgRChcImNoaWxkX3JlbW92ZWRcIixtLlMsbS5uYW1lKSksaGQoZixuZXcgRChcImNoaWxkX2FkZGVkXCIsZCxjKSkpLGIuVShjLGQpLlUobS5uYW1lLEMpKTpifTtmdW5jdGlvbiB3ZChhLGIpe3RoaXMuamU9YTt0aGlzLmZnPWJ9ZnVuY3Rpb24geGQoYSl7dGhpcy5WPWF9XG54ZC5wcm90b3R5cGUuYWI9ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9bmV3IGdkLGY7aWYoYi50eXBlPT09WWIpYi5zb3VyY2Uud2U/Yz15ZCh0aGlzLGEsYi5wYXRoLGIuR2EsYyxkLGUpOihLKGIuc291cmNlLnBmLFwiVW5rbm93biBzb3VyY2UuXCIpLGY9Yi5zb3VyY2UuYWZ8fEpiKGEudygpKSYmIWIucGF0aC5lKCksYz1BZCh0aGlzLGEsYi5wYXRoLGIuR2EsYyxkLGYsZSkpO2Vsc2UgaWYoYi50eXBlPT09QmQpYi5zb3VyY2Uud2U/Yz1DZCh0aGlzLGEsYi5wYXRoLGIuY2hpbGRyZW4sYyxkLGUpOihLKGIuc291cmNlLnBmLFwiVW5rbm93biBzb3VyY2UuXCIpLGY9Yi5zb3VyY2UuYWZ8fEpiKGEudygpKSxjPURkKHRoaXMsYSxiLnBhdGgsYi5jaGlsZHJlbixjLGQsZixlKSk7ZWxzZSBpZihiLnR5cGU9PT1FZClpZihiLlZkKWlmKGI9Yi5wYXRoLG51bGwhPWMudGMoYikpYz1hO2Vsc2V7Zj1uZXcgcmIoYyxhLGQpO2Q9YS5PLmooKTtpZihiLmUoKXx8XCIucHJpb3JpdHlcIj09PUUoYikpSWIoYS53KCkpP1xuYj1jLnphKHViKGEpKTooYj1hLncoKS5qKCksSyhiIGluc3RhbmNlb2YgUixcInNlcnZlckNoaWxkcmVuIHdvdWxkIGJlIGNvbXBsZXRlIGlmIGxlYWYgbm9kZVwiKSxiPWMueWMoYikpLGI9dGhpcy5WLnhhKGQsYixlKTtlbHNle3ZhciBoPUUoYiksaz1jLnhjKGgsYS53KCkpO251bGw9PWsmJnNiKGEudygpLGgpJiYoaz1kLlIoaCkpO2I9bnVsbCE9az90aGlzLlYuRyhkLGgsayxIKGIpLGYsZSk6YS5PLmooKS5EYShoKT90aGlzLlYuRyhkLGgsQyxIKGIpLGYsZSk6ZDtiLmUoKSYmSWIoYS53KCkpJiYoZD1jLnphKHViKGEpKSxkLksoKSYmKGI9dGhpcy5WLnhhKGIsZCxlKSkpfWQ9SWIoYS53KCkpfHxudWxsIT1jLnRjKEcpO2M9RmQoYSxiLGQsdGhpcy5WLk5hKCkpfWVsc2UgYz1HZCh0aGlzLGEsYi5wYXRoLGIuUWIsYyxkLGUpO2Vsc2UgaWYoYi50eXBlPT09JGIpZD1iLnBhdGgsYj1hLncoKSxmPWIuaigpLGg9Yi5lYXx8ZC5lKCksYz1IZCh0aGlzLG5ldyBJZChhLk8sbmV3IHRiKGYsXG5oLGIuVWIpKSxkLGMscWIsZSk7ZWxzZSB0aHJvdyBGYyhcIlVua25vd24gb3BlcmF0aW9uIHR5cGU6IFwiK2IudHlwZSk7ZT1yYShlLmJiKTtkPWM7Yj1kLk87Yi5lYSYmKGY9Yi5qKCkuSygpfHxiLmooKS5lKCksaD1KZChhKSwoMDxlLmxlbmd0aHx8IWEuTy5lYXx8ZiYmIWIuaigpLmNhKGgpfHwhYi5qKCkuQygpLmNhKGguQygpKSkmJmUucHVzaChFYihKZChkKSkpKTtyZXR1cm4gbmV3IHdkKGMsZSl9O1xuZnVuY3Rpb24gSGQoYSxiLGMsZCxlLGYpe3ZhciBoPWIuTztpZihudWxsIT1kLnRjKGMpKXJldHVybiBiO3ZhciBrO2lmKGMuZSgpKUsoSWIoYi53KCkpLFwiSWYgY2hhbmdlIHBhdGggaXMgZW1wdHksIHdlIG11c3QgaGF2ZSBjb21wbGV0ZSBzZXJ2ZXIgZGF0YVwiKSxKYihiLncoKSk/KGU9dWIoYiksZD1kLnljKGUgaW5zdGFuY2VvZiBSP2U6QykpOmQ9ZC56YSh1YihiKSksZj1hLlYueGEoYi5PLmooKSxkLGYpO2Vsc2V7dmFyIGw9RShjKTtpZihcIi5wcmlvcml0eVwiPT1sKUsoMT09S2QoYyksXCJDYW4ndCBoYXZlIGEgcHJpb3JpdHkgd2l0aCBhZGRpdGlvbmFsIHBhdGggY29tcG9uZW50c1wiKSxmPWguaigpLGs9Yi53KCkuaigpLGQ9ZC5sZChjLGYsayksZj1udWxsIT1kP2EuVi5nYShmLGQpOmguaigpO2Vsc2V7dmFyIG09SChjKTtzYihoLGwpPyhrPWIudygpLmooKSxkPWQubGQoYyxoLmooKSxrKSxkPW51bGwhPWQ/aC5qKCkuUihsKS5HKG0sZCk6aC5qKCkuUihsKSk6ZD1kLnhjKGwsXG5iLncoKSk7Zj1udWxsIT1kP2EuVi5HKGguaigpLGwsZCxtLGUsZik6aC5qKCl9fXJldHVybiBGZChiLGYsaC5lYXx8Yy5lKCksYS5WLk5hKCkpfWZ1bmN0aW9uIEFkKGEsYixjLGQsZSxmLGgsayl7dmFyIGw9Yi53KCk7aD1oP2EuVjphLlYuV2IoKTtpZihjLmUoKSlkPWgueGEobC5qKCksZCxudWxsKTtlbHNlIGlmKGguTmEoKSYmIWwuVWIpZD1sLmooKS5HKGMsZCksZD1oLnhhKGwuaigpLGQsbnVsbCk7ZWxzZXt2YXIgbT1FKGMpO2lmKCFLYihsLGMpJiYxPEtkKGMpKXJldHVybiBiO3ZhciB0PUgoYyk7ZD1sLmooKS5SKG0pLkcodCxkKTtkPVwiLnByaW9yaXR5XCI9PW0/aC5nYShsLmooKSxkKTpoLkcobC5qKCksbSxkLHQscWIsbnVsbCl9bD1sLmVhfHxjLmUoKTtiPW5ldyBJZChiLk8sbmV3IHRiKGQsbCxoLk5hKCkpKTtyZXR1cm4gSGQoYSxiLGMsZSxuZXcgcmIoZSxiLGYpLGspfVxuZnVuY3Rpb24geWQoYSxiLGMsZCxlLGYsaCl7dmFyIGs9Yi5PO2U9bmV3IHJiKGUsYixmKTtpZihjLmUoKSloPWEuVi54YShiLk8uaigpLGQsaCksYT1GZChiLGgsITAsYS5WLk5hKCkpO2Vsc2UgaWYoZj1FKGMpLFwiLnByaW9yaXR5XCI9PT1mKWg9YS5WLmdhKGIuTy5qKCksZCksYT1GZChiLGgsay5lYSxrLlViKTtlbHNle2M9SChjKTt2YXIgbD1rLmooKS5SKGYpO2lmKCFjLmUoKSl7dmFyIG09ZS5xZihmKTtkPW51bGwhPW0/XCIucHJpb3JpdHlcIj09PUxkKGMpJiZtLlEoYy5wYXJlbnQoKSkuZSgpP206bS5HKGMsZCk6Q31sLmNhKGQpP2E9YjooaD1hLlYuRyhrLmooKSxmLGQsYyxlLGgpLGE9RmQoYixoLGsuZWEsYS5WLk5hKCkpKX1yZXR1cm4gYX1cbmZ1bmN0aW9uIENkKGEsYixjLGQsZSxmLGgpe3ZhciBrPWI7TWQoZCxmdW5jdGlvbihkLG0pe3ZhciB0PWMudShkKTtzYihiLk8sRSh0KSkmJihrPXlkKGEsayx0LG0sZSxmLGgpKX0pO01kKGQsZnVuY3Rpb24oZCxtKXt2YXIgdD1jLnUoZCk7c2IoYi5PLEUodCkpfHwoaz15ZChhLGssdCxtLGUsZixoKSl9KTtyZXR1cm4ga31mdW5jdGlvbiBOZChhLGIpe01kKGIsZnVuY3Rpb24oYixkKXthPWEuRyhiLGQpfSk7cmV0dXJuIGF9XG5mdW5jdGlvbiBEZChhLGIsYyxkLGUsZixoLGspe2lmKGIudygpLmooKS5lKCkmJiFJYihiLncoKSkpcmV0dXJuIGI7dmFyIGw9YjtjPWMuZSgpP2Q6T2QoUGQsYyxkKTt2YXIgbT1iLncoKS5qKCk7Yy5jaGlsZHJlbi5pYShmdW5jdGlvbihjLGQpe2lmKG0uRGEoYykpe3ZhciBJPWIudygpLmooKS5SKGMpLEk9TmQoSSxkKTtsPUFkKGEsbCxuZXcgTChjKSxJLGUsZixoLGspfX0pO2MuY2hpbGRyZW4uaWEoZnVuY3Rpb24oYyxkKXt2YXIgST0hc2IoYi53KCksYykmJm51bGw9PWQudmFsdWU7bS5EYShjKXx8SXx8KEk9Yi53KCkuaigpLlIoYyksST1OZChJLGQpLGw9QWQoYSxsLG5ldyBMKGMpLEksZSxmLGgsaykpfSk7cmV0dXJuIGx9XG5mdW5jdGlvbiBHZChhLGIsYyxkLGUsZixoKXtpZihudWxsIT1lLnRjKGMpKXJldHVybiBiO3ZhciBrPUpiKGIudygpKSxsPWIudygpO2lmKG51bGwhPWQudmFsdWUpe2lmKGMuZSgpJiZsLmVhfHxLYihsLGMpKXJldHVybiBBZChhLGIsYyxsLmooKS5RKGMpLGUsZixrLGgpO2lmKGMuZSgpKXt2YXIgbT1QZDtsLmooKS5QKFFkLGZ1bmN0aW9uKGEsYil7bT1tLnNldChuZXcgTChhKSxiKX0pO3JldHVybiBEZChhLGIsYyxtLGUsZixrLGgpfXJldHVybiBifW09UGQ7TWQoZCxmdW5jdGlvbihhKXt2YXIgYj1jLnUoYSk7S2IobCxiKSYmKG09bS5zZXQoYSxsLmooKS5RKGIpKSl9KTtyZXR1cm4gRGQoYSxiLGMsbSxlLGYsayxoKX07ZnVuY3Rpb24gUmQoKXt9dmFyIFNkPXt9O2Z1bmN0aW9uIHRkKGEpe3JldHVybiBxKGEuY29tcGFyZSxhKX1SZC5wcm90b3R5cGUuQWQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gMCE9PXRoaXMuY29tcGFyZShuZXcgRihcIltNSU5fTkFNRV1cIixhKSxuZXcgRihcIltNSU5fTkFNRV1cIixiKSl9O1JkLnByb3RvdHlwZS5UYz1mdW5jdGlvbigpe3JldHVybiBUZH07ZnVuY3Rpb24gVWQoYSl7SyghYS5lKCkmJlwiLnByaW9yaXR5XCIhPT1FKGEpLFwiQ2FuJ3QgY3JlYXRlIFBhdGhJbmRleCB3aXRoIGVtcHR5IHBhdGggb3IgLnByaW9yaXR5IGtleVwiKTt0aGlzLmNjPWF9bWEoVWQsUmQpO2c9VWQucHJvdG90eXBlO2cuSWM9ZnVuY3Rpb24oYSl7cmV0dXJuIWEuUSh0aGlzLmNjKS5lKCl9O2cuY29tcGFyZT1mdW5jdGlvbihhLGIpe3ZhciBjPWEuUy5RKHRoaXMuY2MpLGQ9Yi5TLlEodGhpcy5jYyksYz1jLkRjKGQpO3JldHVybiAwPT09Yz9WYihhLm5hbWUsYi5uYW1lKTpjfTtcbmcuUGM9ZnVuY3Rpb24oYSxiKXt2YXIgYz1NKGEpLGM9Qy5HKHRoaXMuY2MsYyk7cmV0dXJuIG5ldyBGKGIsYyl9O2cuUWM9ZnVuY3Rpb24oKXt2YXIgYT1DLkcodGhpcy5jYyxWZCk7cmV0dXJuIG5ldyBGKFwiW01BWF9OQU1FXVwiLGEpfTtnLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2Muc2xpY2UoKS5qb2luKFwiL1wiKX07ZnVuY3Rpb24gV2QoKXt9bWEoV2QsUmQpO2c9V2QucHJvdG90eXBlO2cuY29tcGFyZT1mdW5jdGlvbihhLGIpe3ZhciBjPWEuUy5DKCksZD1iLlMuQygpLGM9Yy5EYyhkKTtyZXR1cm4gMD09PWM/VmIoYS5uYW1lLGIubmFtZSk6Y307Zy5JYz1mdW5jdGlvbihhKXtyZXR1cm4hYS5DKCkuZSgpfTtnLkFkPWZ1bmN0aW9uKGEsYil7cmV0dXJuIWEuQygpLmNhKGIuQygpKX07Zy5UYz1mdW5jdGlvbigpe3JldHVybiBUZH07Zy5RYz1mdW5jdGlvbigpe3JldHVybiBuZXcgRihcIltNQVhfTkFNRV1cIixuZXcgdGMoXCJbUFJJT1JJVFktUE9TVF1cIixWZCkpfTtcbmcuUGM9ZnVuY3Rpb24oYSxiKXt2YXIgYz1NKGEpO3JldHVybiBuZXcgRihiLG5ldyB0YyhcIltQUklPUklUWS1QT1NUXVwiLGMpKX07Zy50b1N0cmluZz1mdW5jdGlvbigpe3JldHVyblwiLnByaW9yaXR5XCJ9O3ZhciBOPW5ldyBXZDtmdW5jdGlvbiBYZCgpe31tYShYZCxSZCk7Zz1YZC5wcm90b3R5cGU7Zy5jb21wYXJlPWZ1bmN0aW9uKGEsYil7cmV0dXJuIFZiKGEubmFtZSxiLm5hbWUpfTtnLkljPWZ1bmN0aW9uKCl7dGhyb3cgRmMoXCJLZXlJbmRleC5pc0RlZmluZWRPbiBub3QgZXhwZWN0ZWQgdG8gYmUgY2FsbGVkLlwiKTt9O2cuQWQ9ZnVuY3Rpb24oKXtyZXR1cm4hMX07Zy5UYz1mdW5jdGlvbigpe3JldHVybiBUZH07Zy5RYz1mdW5jdGlvbigpe3JldHVybiBuZXcgRihcIltNQVhfTkFNRV1cIixDKX07Zy5QYz1mdW5jdGlvbihhKXtLKHAoYSksXCJLZXlJbmRleCBpbmRleFZhbHVlIG11c3QgYWx3YXlzIGJlIGEgc3RyaW5nLlwiKTtyZXR1cm4gbmV3IEYoYSxDKX07Zy50b1N0cmluZz1mdW5jdGlvbigpe3JldHVyblwiLmtleVwifTtcbnZhciBRZD1uZXcgWGQ7ZnVuY3Rpb24gWWQoKXt9bWEoWWQsUmQpO2c9WWQucHJvdG90eXBlO2cuY29tcGFyZT1mdW5jdGlvbihhLGIpe3ZhciBjPWEuUy5EYyhiLlMpO3JldHVybiAwPT09Yz9WYihhLm5hbWUsYi5uYW1lKTpjfTtnLkljPWZ1bmN0aW9uKCl7cmV0dXJuITB9O2cuQWQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4hYS5jYShiKX07Zy5UYz1mdW5jdGlvbigpe3JldHVybiBUZH07Zy5RYz1mdW5jdGlvbigpe3JldHVybiBaZH07Zy5QYz1mdW5jdGlvbihhLGIpe3ZhciBjPU0oYSk7cmV0dXJuIG5ldyBGKGIsYyl9O2cudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm5cIi52YWx1ZVwifTt2YXIgJGQ9bmV3IFlkO2Z1bmN0aW9uIGFlKCl7dGhpcy5UYj10aGlzLnBhPXRoaXMuTGI9dGhpcy5tYT10aGlzLmphPSExO3RoaXMua2E9MDt0aGlzLk5iPVwiXCI7dGhpcy5lYz1udWxsO3RoaXMueGI9XCJcIjt0aGlzLmJjPW51bGw7dGhpcy52Yj1cIlwiO3RoaXMuZz1OfXZhciBiZT1uZXcgYWU7ZnVuY3Rpb24gcmQoYSl7cmV0dXJuXCJcIj09PWEuTmI/YS5tYTpcImxcIj09PWEuTmJ9ZnVuY3Rpb24gbmQoYSl7SyhhLm1hLFwiT25seSB2YWxpZCBpZiBzdGFydCBoYXMgYmVlbiBzZXRcIik7cmV0dXJuIGEuZWN9ZnVuY3Rpb24gbWQoYSl7SyhhLm1hLFwiT25seSB2YWxpZCBpZiBzdGFydCBoYXMgYmVlbiBzZXRcIik7cmV0dXJuIGEuTGI/YS54YjpcIltNSU5fTkFNRV1cIn1mdW5jdGlvbiBwZChhKXtLKGEucGEsXCJPbmx5IHZhbGlkIGlmIGVuZCBoYXMgYmVlbiBzZXRcIik7cmV0dXJuIGEuYmN9XG5mdW5jdGlvbiBvZChhKXtLKGEucGEsXCJPbmx5IHZhbGlkIGlmIGVuZCBoYXMgYmVlbiBzZXRcIik7cmV0dXJuIGEuVGI/YS52YjpcIltNQVhfTkFNRV1cIn1mdW5jdGlvbiBjZShhKXt2YXIgYj1uZXcgYWU7Yi5qYT1hLmphO2Iua2E9YS5rYTtiLm1hPWEubWE7Yi5lYz1hLmVjO2IuTGI9YS5MYjtiLnhiPWEueGI7Yi5wYT1hLnBhO2IuYmM9YS5iYztiLlRiPWEuVGI7Yi52Yj1hLnZiO2IuZz1hLmc7cmV0dXJuIGJ9Zz1hZS5wcm90b3R5cGU7Zy5IZT1mdW5jdGlvbihhKXt2YXIgYj1jZSh0aGlzKTtiLmphPSEwO2Iua2E9YTtiLk5iPVwiXCI7cmV0dXJuIGJ9O2cuSWU9ZnVuY3Rpb24oYSl7dmFyIGI9Y2UodGhpcyk7Yi5qYT0hMDtiLmthPWE7Yi5OYj1cImxcIjtyZXR1cm4gYn07Zy5KZT1mdW5jdGlvbihhKXt2YXIgYj1jZSh0aGlzKTtiLmphPSEwO2Iua2E9YTtiLk5iPVwiclwiO3JldHVybiBifTtcbmcuJGQ9ZnVuY3Rpb24oYSxiKXt2YXIgYz1jZSh0aGlzKTtjLm1hPSEwO24oYSl8fChhPW51bGwpO2MuZWM9YTtudWxsIT1iPyhjLkxiPSEwLGMueGI9Yik6KGMuTGI9ITEsYy54Yj1cIlwiKTtyZXR1cm4gY307Zy50ZD1mdW5jdGlvbihhLGIpe3ZhciBjPWNlKHRoaXMpO2MucGE9ITA7bihhKXx8KGE9bnVsbCk7Yy5iYz1hO24oYik/KGMuVGI9ITAsYy52Yj1iKTooYy5haD0hMSxjLnZiPVwiXCIpO3JldHVybiBjfTtmdW5jdGlvbiBkZShhLGIpe3ZhciBjPWNlKGEpO2MuZz1iO3JldHVybiBjfWZ1bmN0aW9uIGVlKGEpe3ZhciBiPXt9O2EubWEmJihiLnNwPWEuZWMsYS5MYiYmKGIuc249YS54YikpO2EucGEmJihiLmVwPWEuYmMsYS5UYiYmKGIuZW49YS52YikpO2lmKGEuamEpe2IubD1hLmthO3ZhciBjPWEuTmI7XCJcIj09PWMmJihjPXJkKGEpP1wibFwiOlwiclwiKTtiLnZmPWN9YS5nIT09TiYmKGIuaT1hLmcudG9TdHJpbmcoKSk7cmV0dXJuIGJ9XG5mdW5jdGlvbiBTKGEpe3JldHVybiEoYS5tYXx8YS5wYXx8YS5qYSl9ZnVuY3Rpb24gZmUoYSl7cmV0dXJuIFMoYSkmJmEuZz09Tn1mdW5jdGlvbiBnZShhKXt2YXIgYj17fTtpZihmZShhKSlyZXR1cm4gYjt2YXIgYzthLmc9PT1OP2M9XCIkcHJpb3JpdHlcIjphLmc9PT0kZD9jPVwiJHZhbHVlXCI6YS5nPT09UWQ/Yz1cIiRrZXlcIjooSyhhLmcgaW5zdGFuY2VvZiBVZCxcIlVucmVjb2duaXplZCBpbmRleCB0eXBlIVwiKSxjPWEuZy50b1N0cmluZygpKTtiLm9yZGVyQnk9QihjKTthLm1hJiYoYi5zdGFydEF0PUIoYS5lYyksYS5MYiYmKGIuc3RhcnRBdCs9XCIsXCIrQihhLnhiKSkpO2EucGEmJihiLmVuZEF0PUIoYS5iYyksYS5UYiYmKGIuZW5kQXQrPVwiLFwiK0IoYS52YikpKTthLmphJiYocmQoYSk/Yi5saW1pdFRvRmlyc3Q9YS5rYTpiLmxpbWl0VG9MYXN0PWEua2EpO3JldHVybiBifWcudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gQihlZSh0aGlzKSl9O2Z1bmN0aW9uIGhlKGEsYil7dGhpcy5CZD1hO3RoaXMuZGM9Yn1oZS5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKGEpe3ZhciBiPXcodGhpcy5CZCxhKTtpZighYil0aHJvdyBFcnJvcihcIk5vIGluZGV4IGRlZmluZWQgZm9yIFwiK2EpO3JldHVybiBiPT09U2Q/bnVsbDpifTtmdW5jdGlvbiBpZShhLGIsYyl7dmFyIGQ9bmEoYS5CZCxmdW5jdGlvbihkLGYpe3ZhciBoPXcoYS5kYyxmKTtLKGgsXCJNaXNzaW5nIGluZGV4IGltcGxlbWVudGF0aW9uIGZvciBcIitmKTtpZihkPT09U2Qpe2lmKGguSWMoYi5TKSl7Zm9yKHZhciBrPVtdLGw9Yy5YYihUYiksbT1KKGwpO207KW0ubmFtZSE9Yi5uYW1lJiZrLnB1c2gobSksbT1KKGwpO2sucHVzaChiKTtyZXR1cm4gamUoayx0ZChoKSl9cmV0dXJuIFNkfWg9Yy5nZXQoYi5uYW1lKTtrPWQ7aCYmKGs9ay5yZW1vdmUobmV3IEYoYi5uYW1lLGgpKSk7cmV0dXJuIGsuT2EoYixiLlMpfSk7cmV0dXJuIG5ldyBoZShkLGEuZGMpfVxuZnVuY3Rpb24ga2UoYSxiLGMpe3ZhciBkPW5hKGEuQmQsZnVuY3Rpb24oYSl7aWYoYT09PVNkKXJldHVybiBhO3ZhciBkPWMuZ2V0KGIubmFtZSk7cmV0dXJuIGQ/YS5yZW1vdmUobmV3IEYoYi5uYW1lLGQpKTphfSk7cmV0dXJuIG5ldyBoZShkLGEuZGMpfXZhciBsZT1uZXcgaGUoe1wiLnByaW9yaXR5XCI6U2R9LHtcIi5wcmlvcml0eVwiOk59KTtmdW5jdGlvbiB0YyhhLGIpe3RoaXMuQj1hO0sobih0aGlzLkIpJiZudWxsIT09dGhpcy5CLFwiTGVhZk5vZGUgc2hvdWxkbid0IGJlIGNyZWF0ZWQgd2l0aCBudWxsL3VuZGVmaW5lZCB2YWx1ZS5cIik7dGhpcy5hYT1ifHxDO21lKHRoaXMuYWEpO3RoaXMuQ2I9bnVsbH12YXIgbmU9W1wib2JqZWN0XCIsXCJib29sZWFuXCIsXCJudW1iZXJcIixcInN0cmluZ1wiXTtnPXRjLnByb3RvdHlwZTtnLks9ZnVuY3Rpb24oKXtyZXR1cm4hMH07Zy5DPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYWF9O2cuZ2E9ZnVuY3Rpb24oYSl7cmV0dXJuIG5ldyB0Yyh0aGlzLkIsYSl9O2cuUj1mdW5jdGlvbihhKXtyZXR1cm5cIi5wcmlvcml0eVwiPT09YT90aGlzLmFhOkN9O2cuUT1mdW5jdGlvbihhKXtyZXR1cm4gYS5lKCk/dGhpczpcIi5wcmlvcml0eVwiPT09RShhKT90aGlzLmFhOkN9O2cuRGE9ZnVuY3Rpb24oKXtyZXR1cm4hMX07Zy5yZj1mdW5jdGlvbigpe3JldHVybiBudWxsfTtcbmcuVT1mdW5jdGlvbihhLGIpe3JldHVyblwiLnByaW9yaXR5XCI9PT1hP3RoaXMuZ2EoYik6Yi5lKCkmJlwiLnByaW9yaXR5XCIhPT1hP3RoaXM6Qy5VKGEsYikuZ2EodGhpcy5hYSl9O2cuRz1mdW5jdGlvbihhLGIpe3ZhciBjPUUoYSk7aWYobnVsbD09PWMpcmV0dXJuIGI7aWYoYi5lKCkmJlwiLnByaW9yaXR5XCIhPT1jKXJldHVybiB0aGlzO0soXCIucHJpb3JpdHlcIiE9PWN8fDE9PT1LZChhKSxcIi5wcmlvcml0eSBtdXN0IGJlIHRoZSBsYXN0IHRva2VuIGluIGEgcGF0aFwiKTtyZXR1cm4gdGhpcy5VKGMsQy5HKEgoYSksYikpfTtnLmU9ZnVuY3Rpb24oKXtyZXR1cm4hMX07Zy5EYj1mdW5jdGlvbigpe3JldHVybiAwfTtnLlA9ZnVuY3Rpb24oKXtyZXR1cm4hMX07Zy5JPWZ1bmN0aW9uKGEpe3JldHVybiBhJiYhdGhpcy5DKCkuZSgpP3tcIi52YWx1ZVwiOnRoaXMuQ2EoKSxcIi5wcmlvcml0eVwiOnRoaXMuQygpLkkoKX06dGhpcy5DYSgpfTtcbmcuaGFzaD1mdW5jdGlvbigpe2lmKG51bGw9PT10aGlzLkNiKXt2YXIgYT1cIlwiO3RoaXMuYWEuZSgpfHwoYSs9XCJwcmlvcml0eTpcIitvZSh0aGlzLmFhLkkoKSkrXCI6XCIpO3ZhciBiPXR5cGVvZiB0aGlzLkIsYT1hKyhiK1wiOlwiKSxhPVwibnVtYmVyXCI9PT1iP2ErWGModGhpcy5CKTphK3RoaXMuQjt0aGlzLkNiPUhjKGEpfXJldHVybiB0aGlzLkNifTtnLkNhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuQn07Zy5EYz1mdW5jdGlvbihhKXtpZihhPT09QylyZXR1cm4gMTtpZihhIGluc3RhbmNlb2YgUilyZXR1cm4tMTtLKGEuSygpLFwiVW5rbm93biBub2RlIHR5cGVcIik7dmFyIGI9dHlwZW9mIGEuQixjPXR5cGVvZiB0aGlzLkIsZD1OYShuZSxiKSxlPU5hKG5lLGMpO0soMDw9ZCxcIlVua25vd24gbGVhZiB0eXBlOiBcIitiKTtLKDA8PWUsXCJVbmtub3duIGxlYWYgdHlwZTogXCIrYyk7cmV0dXJuIGQ9PT1lP1wib2JqZWN0XCI9PT1jPzA6dGhpcy5CPGEuQj8tMTp0aGlzLkI9PT1hLkI/MDoxOmUtZH07XG5nLmxiPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9O2cuSmM9ZnVuY3Rpb24oKXtyZXR1cm4hMH07Zy5jYT1mdW5jdGlvbihhKXtyZXR1cm4gYT09PXRoaXM/ITA6YS5LKCk/dGhpcy5CPT09YS5CJiZ0aGlzLmFhLmNhKGEuYWEpOiExfTtnLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIEIodGhpcy5JKCEwKSl9O2Z1bmN0aW9uIFIoYSxiLGMpe3RoaXMubT1hOyh0aGlzLmFhPWIpJiZtZSh0aGlzLmFhKTthLmUoKSYmSyghdGhpcy5hYXx8dGhpcy5hYS5lKCksXCJBbiBlbXB0eSBub2RlIGNhbm5vdCBoYXZlIGEgcHJpb3JpdHlcIik7dGhpcy53Yj1jO3RoaXMuQ2I9bnVsbH1nPVIucHJvdG90eXBlO2cuSz1mdW5jdGlvbigpe3JldHVybiExfTtnLkM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5hYXx8Q307Zy5nYT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5tLmUoKT90aGlzOm5ldyBSKHRoaXMubSxhLHRoaXMud2IpfTtnLlI9ZnVuY3Rpb24oYSl7aWYoXCIucHJpb3JpdHlcIj09PWEpcmV0dXJuIHRoaXMuQygpO2E9dGhpcy5tLmdldChhKTtyZXR1cm4gbnVsbD09PWE/QzphfTtnLlE9ZnVuY3Rpb24oYSl7dmFyIGI9RShhKTtyZXR1cm4gbnVsbD09PWI/dGhpczp0aGlzLlIoYikuUShIKGEpKX07Zy5EYT1mdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9PXRoaXMubS5nZXQoYSl9O1xuZy5VPWZ1bmN0aW9uKGEsYil7SyhiLFwiV2Ugc2hvdWxkIGFsd2F5cyBiZSBwYXNzaW5nIHNuYXBzaG90IG5vZGVzXCIpO2lmKFwiLnByaW9yaXR5XCI9PT1hKXJldHVybiB0aGlzLmdhKGIpO3ZhciBjPW5ldyBGKGEsYiksZCxlO2IuZSgpPyhkPXRoaXMubS5yZW1vdmUoYSksYz1rZSh0aGlzLndiLGMsdGhpcy5tKSk6KGQ9dGhpcy5tLk9hKGEsYiksYz1pZSh0aGlzLndiLGMsdGhpcy5tKSk7ZT1kLmUoKT9DOnRoaXMuYWE7cmV0dXJuIG5ldyBSKGQsZSxjKX07Zy5HPWZ1bmN0aW9uKGEsYil7dmFyIGM9RShhKTtpZihudWxsPT09YylyZXR1cm4gYjtLKFwiLnByaW9yaXR5XCIhPT1FKGEpfHwxPT09S2QoYSksXCIucHJpb3JpdHkgbXVzdCBiZSB0aGUgbGFzdCB0b2tlbiBpbiBhIHBhdGhcIik7dmFyIGQ9dGhpcy5SKGMpLkcoSChhKSxiKTtyZXR1cm4gdGhpcy5VKGMsZCl9O2cuZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm0uZSgpfTtnLkRiPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubS5jb3VudCgpfTtcbnZhciBwZT0vXigwfFsxLTldXFxkKikkLztnPVIucHJvdG90eXBlO2cuST1mdW5jdGlvbihhKXtpZih0aGlzLmUoKSlyZXR1cm4gbnVsbDt2YXIgYj17fSxjPTAsZD0wLGU9ITA7dGhpcy5QKE4sZnVuY3Rpb24oZixoKXtiW2ZdPWguSShhKTtjKys7ZSYmcGUudGVzdChmKT9kPU1hdGgubWF4KGQsTnVtYmVyKGYpKTplPSExfSk7aWYoIWEmJmUmJmQ8MipjKXt2YXIgZj1bXSxoO2ZvcihoIGluIGIpZltoXT1iW2hdO3JldHVybiBmfWEmJiF0aGlzLkMoKS5lKCkmJihiW1wiLnByaW9yaXR5XCJdPXRoaXMuQygpLkkoKSk7cmV0dXJuIGJ9O2cuaGFzaD1mdW5jdGlvbigpe2lmKG51bGw9PT10aGlzLkNiKXt2YXIgYT1cIlwiO3RoaXMuQygpLmUoKXx8KGErPVwicHJpb3JpdHk6XCIrb2UodGhpcy5DKCkuSSgpKStcIjpcIik7dGhpcy5QKE4sZnVuY3Rpb24oYixjKXt2YXIgZD1jLmhhc2goKTtcIlwiIT09ZCYmKGErPVwiOlwiK2IrXCI6XCIrZCl9KTt0aGlzLkNiPVwiXCI9PT1hP1wiXCI6SGMoYSl9cmV0dXJuIHRoaXMuQ2J9O1xuZy5yZj1mdW5jdGlvbihhLGIsYyl7cmV0dXJuKGM9cWUodGhpcyxjKSk/KGE9Y2MoYyxuZXcgRihhLGIpKSk/YS5uYW1lOm51bGw6Y2ModGhpcy5tLGEpfTtmdW5jdGlvbiB1ZChhLGIpe3ZhciBjO2M9KGM9cWUoYSxiKSk/KGM9Yy5TYygpKSYmYy5uYW1lOmEubS5TYygpO3JldHVybiBjP25ldyBGKGMsYS5tLmdldChjKSk6bnVsbH1mdW5jdGlvbiB2ZChhLGIpe3ZhciBjO2M9KGM9cWUoYSxiKSk/KGM9Yy5mYygpKSYmYy5uYW1lOmEubS5mYygpO3JldHVybiBjP25ldyBGKGMsYS5tLmdldChjKSk6bnVsbH1nLlA9ZnVuY3Rpb24oYSxiKXt2YXIgYz1xZSh0aGlzLGEpO3JldHVybiBjP2MuaWEoZnVuY3Rpb24oYSl7cmV0dXJuIGIoYS5uYW1lLGEuUyl9KTp0aGlzLm0uaWEoYil9O2cuWGI9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuWWIoYS5UYygpLGEpfTtcbmcuWWI9ZnVuY3Rpb24oYSxiKXt2YXIgYz1xZSh0aGlzLGIpO2lmKGMpcmV0dXJuIGMuWWIoYSxmdW5jdGlvbihhKXtyZXR1cm4gYX0pO2Zvcih2YXIgYz10aGlzLm0uWWIoYS5uYW1lLFRiKSxkPWVjKGMpO251bGwhPWQmJjA+Yi5jb21wYXJlKGQsYSk7KUooYyksZD1lYyhjKTtyZXR1cm4gY307Zy5zZj1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy4kYihhLlFjKCksYSl9O2cuJGI9ZnVuY3Rpb24oYSxiKXt2YXIgYz1xZSh0aGlzLGIpO2lmKGMpcmV0dXJuIGMuJGIoYSxmdW5jdGlvbihhKXtyZXR1cm4gYX0pO2Zvcih2YXIgYz10aGlzLm0uJGIoYS5uYW1lLFRiKSxkPWVjKGMpO251bGwhPWQmJjA8Yi5jb21wYXJlKGQsYSk7KUooYyksZD1lYyhjKTtyZXR1cm4gY307Zy5EYz1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lKCk/YS5lKCk/MDotMTphLksoKXx8YS5lKCk/MTphPT09VmQ/LTE6MH07XG5nLmxiPWZ1bmN0aW9uKGEpe2lmKGE9PT1RZHx8dGEodGhpcy53Yi5kYyxhLnRvU3RyaW5nKCkpKXJldHVybiB0aGlzO3ZhciBiPXRoaXMud2IsYz10aGlzLm07SyhhIT09UWQsXCJLZXlJbmRleCBhbHdheXMgZXhpc3RzIGFuZCBpc24ndCBtZWFudCB0byBiZSBhZGRlZCB0byB0aGUgSW5kZXhNYXAuXCIpO2Zvcih2YXIgZD1bXSxlPSExLGM9Yy5YYihUYiksZj1KKGMpO2Y7KWU9ZXx8YS5JYyhmLlMpLGQucHVzaChmKSxmPUooYyk7ZD1lP2plKGQsdGQoYSkpOlNkO2U9YS50b1N0cmluZygpO2M9eGEoYi5kYyk7Y1tlXT1hO2E9eGEoYi5CZCk7YVtlXT1kO3JldHVybiBuZXcgUih0aGlzLm0sdGhpcy5hYSxuZXcgaGUoYSxjKSl9O2cuSmM9ZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT1RZHx8dGEodGhpcy53Yi5kYyxhLnRvU3RyaW5nKCkpfTtcbmcuY2E9ZnVuY3Rpb24oYSl7aWYoYT09PXRoaXMpcmV0dXJuITA7aWYoYS5LKCkpcmV0dXJuITE7aWYodGhpcy5DKCkuY2EoYS5DKCkpJiZ0aGlzLm0uY291bnQoKT09PWEubS5jb3VudCgpKXt2YXIgYj10aGlzLlhiKE4pO2E9YS5YYihOKTtmb3IodmFyIGM9SihiKSxkPUooYSk7YyYmZDspe2lmKGMubmFtZSE9PWQubmFtZXx8IWMuUy5jYShkLlMpKXJldHVybiExO2M9SihiKTtkPUooYSl9cmV0dXJuIG51bGw9PT1jJiZudWxsPT09ZH1yZXR1cm4hMX07ZnVuY3Rpb24gcWUoYSxiKXtyZXR1cm4gYj09PVFkP251bGw6YS53Yi5nZXQoYi50b1N0cmluZygpKX1nLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIEIodGhpcy5JKCEwKSl9O2Z1bmN0aW9uIE0oYSxiKXtpZihudWxsPT09YSlyZXR1cm4gQzt2YXIgYz1udWxsO1wib2JqZWN0XCI9PT10eXBlb2YgYSYmXCIucHJpb3JpdHlcImluIGE/Yz1hW1wiLnByaW9yaXR5XCJdOlwidW5kZWZpbmVkXCIhPT10eXBlb2YgYiYmKGM9Yik7SyhudWxsPT09Y3x8XCJzdHJpbmdcIj09PXR5cGVvZiBjfHxcIm51bWJlclwiPT09dHlwZW9mIGN8fFwib2JqZWN0XCI9PT10eXBlb2YgYyYmXCIuc3ZcImluIGMsXCJJbnZhbGlkIHByaW9yaXR5IHR5cGUgZm91bmQ6IFwiK3R5cGVvZiBjKTtcIm9iamVjdFwiPT09dHlwZW9mIGEmJlwiLnZhbHVlXCJpbiBhJiZudWxsIT09YVtcIi52YWx1ZVwiXSYmKGE9YVtcIi52YWx1ZVwiXSk7aWYoXCJvYmplY3RcIiE9PXR5cGVvZiBhfHxcIi5zdlwiaW4gYSlyZXR1cm4gbmV3IHRjKGEsTShjKSk7aWYoYSBpbnN0YW5jZW9mIEFycmF5KXt2YXIgZD1DLGU9YTtyKGUsZnVuY3Rpb24oYSxiKXtpZih2KGUsYikmJlwiLlwiIT09Yi5zdWJzdHJpbmcoMCwxKSl7dmFyIGM9TShhKTtpZihjLksoKXx8IWMuZSgpKWQ9XG5kLlUoYixjKX19KTtyZXR1cm4gZC5nYShNKGMpKX12YXIgZj1bXSxoPSExLGs9YTtpYihrLGZ1bmN0aW9uKGEpe2lmKFwic3RyaW5nXCIhPT10eXBlb2YgYXx8XCIuXCIhPT1hLnN1YnN0cmluZygwLDEpKXt2YXIgYj1NKGtbYV0pO2IuZSgpfHwoaD1ofHwhYi5DKCkuZSgpLGYucHVzaChuZXcgRihhLGIpKSl9fSk7aWYoMD09Zi5sZW5ndGgpcmV0dXJuIEM7dmFyIGw9amUoZixVYixmdW5jdGlvbihhKXtyZXR1cm4gYS5uYW1lfSxXYik7aWYoaCl7dmFyIG09amUoZix0ZChOKSk7cmV0dXJuIG5ldyBSKGwsTShjKSxuZXcgaGUoe1wiLnByaW9yaXR5XCI6bX0se1wiLnByaW9yaXR5XCI6Tn0pKX1yZXR1cm4gbmV3IFIobCxNKGMpLGxlKX12YXIgcmU9TWF0aC5sb2coMik7XG5mdW5jdGlvbiBzZShhKXt0aGlzLmNvdW50PXBhcnNlSW50KE1hdGgubG9nKGErMSkvcmUsMTApO3RoaXMuamY9dGhpcy5jb3VudC0xO3RoaXMuZWc9YSsxJnBhcnNlSW50KEFycmF5KHRoaXMuY291bnQrMSkuam9pbihcIjFcIiksMil9ZnVuY3Rpb24gdGUoYSl7dmFyIGI9IShhLmVnJjE8PGEuamYpO2EuamYtLTtyZXR1cm4gYn1cbmZ1bmN0aW9uIGplKGEsYixjLGQpe2Z1bmN0aW9uIGUoYixkKXt2YXIgZj1kLWI7aWYoMD09ZilyZXR1cm4gbnVsbDtpZigxPT1mKXt2YXIgbT1hW2JdLHQ9Yz9jKG0pOm07cmV0dXJuIG5ldyBmYyh0LG0uUywhMSxudWxsLG51bGwpfXZhciBtPXBhcnNlSW50KGYvMiwxMCkrYixmPWUoYixtKSx6PWUobSsxLGQpLG09YVttXSx0PWM/YyhtKTptO3JldHVybiBuZXcgZmModCxtLlMsITEsZix6KX1hLnNvcnQoYik7dmFyIGY9ZnVuY3Rpb24oYil7ZnVuY3Rpb24gZChiLGgpe3ZhciBrPXQtYix6PXQ7dC09Yjt2YXIgej1lKGsrMSx6KSxrPWFba10sST1jP2Moayk6ayx6PW5ldyBmYyhJLGsuUyxoLG51bGwseik7Zj9mLmxlZnQ9ejptPXo7Zj16fWZvcih2YXIgZj1udWxsLG09bnVsbCx0PWEubGVuZ3RoLHo9MDt6PGIuY291bnQ7Kyt6KXt2YXIgST10ZShiKSx6ZD1NYXRoLnBvdygyLGIuY291bnQtKHorMSkpO0k/ZCh6ZCwhMSk6KGQoemQsITEpLGQoemQsITApKX1yZXR1cm4gbX0obmV3IHNlKGEubGVuZ3RoKSk7XG5yZXR1cm4gbnVsbCE9PWY/bmV3IGFjKGR8fGIsZik6bmV3IGFjKGR8fGIpfWZ1bmN0aW9uIG9lKGEpe3JldHVyblwibnVtYmVyXCI9PT10eXBlb2YgYT9cIm51bWJlcjpcIitYYyhhKTpcInN0cmluZzpcIithfWZ1bmN0aW9uIG1lKGEpe2lmKGEuSygpKXt2YXIgYj1hLkkoKTtLKFwic3RyaW5nXCI9PT10eXBlb2YgYnx8XCJudW1iZXJcIj09PXR5cGVvZiBifHxcIm9iamVjdFwiPT09dHlwZW9mIGImJnYoYixcIi5zdlwiKSxcIlByaW9yaXR5IG11c3QgYmUgYSBzdHJpbmcgb3IgbnVtYmVyLlwiKX1lbHNlIEsoYT09PVZkfHxhLmUoKSxcInByaW9yaXR5IG9mIHVuZXhwZWN0ZWQgdHlwZS5cIik7SyhhPT09VmR8fGEuQygpLmUoKSxcIlByaW9yaXR5IG5vZGVzIGNhbid0IGhhdmUgYSBwcmlvcml0eSBvZiB0aGVpciBvd24uXCIpfXZhciBDPW5ldyBSKG5ldyBhYyhXYiksbnVsbCxsZSk7ZnVuY3Rpb24gdWUoKXtSLmNhbGwodGhpcyxuZXcgYWMoV2IpLEMsbGUpfW1hKHVlLFIpO2c9dWUucHJvdG90eXBlO1xuZy5EYz1mdW5jdGlvbihhKXtyZXR1cm4gYT09PXRoaXM/MDoxfTtnLmNhPWZ1bmN0aW9uKGEpe3JldHVybiBhPT09dGhpc307Zy5DPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9O2cuUj1mdW5jdGlvbigpe3JldHVybiBDfTtnLmU9ZnVuY3Rpb24oKXtyZXR1cm4hMX07dmFyIFZkPW5ldyB1ZSxUZD1uZXcgRihcIltNSU5fTkFNRV1cIixDKSxaZD1uZXcgRihcIltNQVhfTkFNRV1cIixWZCk7ZnVuY3Rpb24gSWQoYSxiKXt0aGlzLk89YTt0aGlzLllkPWJ9ZnVuY3Rpb24gRmQoYSxiLGMsZCl7cmV0dXJuIG5ldyBJZChuZXcgdGIoYixjLGQpLGEuWWQpfWZ1bmN0aW9uIEpkKGEpe3JldHVybiBhLk8uZWE/YS5PLmooKTpudWxsfUlkLnByb3RvdHlwZS53PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuWWR9O2Z1bmN0aW9uIHViKGEpe3JldHVybiBhLllkLmVhP2EuWWQuaigpOm51bGx9O2Z1bmN0aW9uIHZlKGEsYil7dGhpcy5XPWE7dmFyIGM9YS5uLGQ9bmV3IGtkKGMuZyksYz1TKGMpP25ldyBrZChjLmcpOmMuamE/bmV3IHFkKGMpOm5ldyBsZChjKTt0aGlzLkhmPW5ldyB4ZChjKTt2YXIgZT1iLncoKSxmPWIuTyxoPWQueGEoQyxlLmooKSxudWxsKSxrPWMueGEoQyxmLmooKSxudWxsKTt0aGlzLkthPW5ldyBJZChuZXcgdGIoayxmLmVhLGMuTmEoKSksbmV3IHRiKGgsZS5lYSxkLk5hKCkpKTt0aGlzLlhhPVtdO3RoaXMubGc9bmV3IGNkKGEpfWZ1bmN0aW9uIHdlKGEpe3JldHVybiBhLld9Zz12ZS5wcm90b3R5cGU7Zy53PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuS2EudygpLmooKX07Zy5mYj1mdW5jdGlvbihhKXt2YXIgYj11Yih0aGlzLkthKTtyZXR1cm4gYiYmKFModGhpcy5XLm4pfHwhYS5lKCkmJiFiLlIoRShhKSkuZSgpKT9iLlEoYSk6bnVsbH07Zy5lPWZ1bmN0aW9uKCl7cmV0dXJuIDA9PT10aGlzLlhhLmxlbmd0aH07Zy5QYj1mdW5jdGlvbihhKXt0aGlzLlhhLnB1c2goYSl9O1xuZy5qYj1mdW5jdGlvbihhLGIpe3ZhciBjPVtdO2lmKGIpe0sobnVsbD09YSxcIkEgY2FuY2VsIHNob3VsZCBjYW5jZWwgYWxsIGV2ZW50IHJlZ2lzdHJhdGlvbnMuXCIpO3ZhciBkPXRoaXMuVy5wYXRoO09hKHRoaXMuWGEsZnVuY3Rpb24oYSl7KGE9YS5nZihiLGQpKSYmYy5wdXNoKGEpfSl9aWYoYSl7Zm9yKHZhciBlPVtdLGY9MDtmPHRoaXMuWGEubGVuZ3RoOysrZil7dmFyIGg9dGhpcy5YYVtmXTtpZighaC5tYXRjaGVzKGEpKWUucHVzaChoKTtlbHNlIGlmKGEudGYoKSl7ZT1lLmNvbmNhdCh0aGlzLlhhLnNsaWNlKGYrMSkpO2JyZWFrfX10aGlzLlhhPWV9ZWxzZSB0aGlzLlhhPVtdO3JldHVybiBjfTtcbmcuYWI9ZnVuY3Rpb24oYSxiLGMpe2EudHlwZT09PUJkJiZudWxsIT09YS5zb3VyY2UuSGImJihLKHViKHRoaXMuS2EpLFwiV2Ugc2hvdWxkIGFsd2F5cyBoYXZlIGEgZnVsbCBjYWNoZSBiZWZvcmUgaGFuZGxpbmcgbWVyZ2VzXCIpLEsoSmQodGhpcy5LYSksXCJNaXNzaW5nIGV2ZW50IGNhY2hlLCBldmVuIHRob3VnaCB3ZSBoYXZlIGEgc2VydmVyIGNhY2hlXCIpKTt2YXIgZD10aGlzLkthO2E9dGhpcy5IZi5hYihkLGEsYixjKTtiPXRoaXMuSGY7Yz1hLmplO0soYy5PLmooKS5KYyhiLlYuZyksXCJFdmVudCBzbmFwIG5vdCBpbmRleGVkXCIpO0soYy53KCkuaigpLkpjKGIuVi5nKSxcIlNlcnZlciBzbmFwIG5vdCBpbmRleGVkXCIpO0soSWIoYS5qZS53KCkpfHwhSWIoZC53KCkpLFwiT25jZSBhIHNlcnZlciBzbmFwIGlzIGNvbXBsZXRlLCBpdCBzaG91bGQgbmV2ZXIgZ28gYmFja1wiKTt0aGlzLkthPWEuamU7cmV0dXJuIHhlKHRoaXMsYS5mZyxhLmplLk8uaigpLG51bGwpfTtcbmZ1bmN0aW9uIHllKGEsYil7dmFyIGM9YS5LYS5PLGQ9W107Yy5qKCkuSygpfHxjLmooKS5QKE4sZnVuY3Rpb24oYSxiKXtkLnB1c2gobmV3IEQoXCJjaGlsZF9hZGRlZFwiLGIsYSkpfSk7Yy5lYSYmZC5wdXNoKEViKGMuaigpKSk7cmV0dXJuIHhlKGEsZCxjLmooKSxiKX1mdW5jdGlvbiB4ZShhLGIsYyxkKXtyZXR1cm4gZGQoYS5sZyxiLGMsZD9bZF06YS5YYSl9O2Z1bmN0aW9uIHplKGEsYixjKXt0aGlzLnR5cGU9QmQ7dGhpcy5zb3VyY2U9YTt0aGlzLnBhdGg9Yjt0aGlzLmNoaWxkcmVuPWN9emUucHJvdG90eXBlLlhjPWZ1bmN0aW9uKGEpe2lmKHRoaXMucGF0aC5lKCkpcmV0dXJuIGE9dGhpcy5jaGlsZHJlbi5zdWJ0cmVlKG5ldyBMKGEpKSxhLmUoKT9udWxsOmEudmFsdWU/bmV3IFhiKHRoaXMuc291cmNlLEcsYS52YWx1ZSk6bmV3IHplKHRoaXMuc291cmNlLEcsYSk7SyhFKHRoaXMucGF0aCk9PT1hLFwiQ2FuJ3QgZ2V0IGEgbWVyZ2UgZm9yIGEgY2hpbGQgbm90IG9uIHRoZSBwYXRoIG9mIHRoZSBvcGVyYXRpb25cIik7cmV0dXJuIG5ldyB6ZSh0aGlzLnNvdXJjZSxIKHRoaXMucGF0aCksdGhpcy5jaGlsZHJlbil9O3plLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVyblwiT3BlcmF0aW9uKFwiK3RoaXMucGF0aCtcIjogXCIrdGhpcy5zb3VyY2UudG9TdHJpbmcoKStcIiBtZXJnZTogXCIrdGhpcy5jaGlsZHJlbi50b1N0cmluZygpK1wiKVwifTtmdW5jdGlvbiBBZShhLGIpe3RoaXMuZj1NYyhcInA6cmVzdDpcIik7dGhpcy5GPWE7dGhpcy5HYj1iO3RoaXMuQWE9bnVsbDt0aGlzLiQ9e319ZnVuY3Rpb24gQmUoYSxiKXtpZihuKGIpKXJldHVyblwidGFnJFwiK2I7SyhmZShhLm4pLFwic2hvdWxkIGhhdmUgYSB0YWcgaWYgaXQncyBub3QgYSBkZWZhdWx0IHF1ZXJ5LlwiKTtyZXR1cm4gYS5wYXRoLnRvU3RyaW5nKCl9Zz1BZS5wcm90b3R5cGU7XG5nLnlmPWZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPWEucGF0aC50b1N0cmluZygpO3RoaXMuZihcIkxpc3RlbiBjYWxsZWQgZm9yIFwiK2UrXCIgXCIrYS52YSgpKTt2YXIgZj1CZShhLGMpLGg9e307dGhpcy4kW2ZdPWg7YT1nZShhLm4pO3ZhciBrPXRoaXM7Q2UodGhpcyxlK1wiLmpzb25cIixhLGZ1bmN0aW9uKGEsYil7dmFyIHQ9Yjs0MDQ9PT1hJiYoYT10PW51bGwpO251bGw9PT1hJiZrLkdiKGUsdCwhMSxjKTt3KGsuJCxmKT09PWgmJmQoYT80MDE9PWE/XCJwZXJtaXNzaW9uX2RlbmllZFwiOlwicmVzdF9lcnJvcjpcIithOlwib2tcIixudWxsKX0pfTtnLlJmPWZ1bmN0aW9uKGEsYil7dmFyIGM9QmUoYSxiKTtkZWxldGUgdGhpcy4kW2NdfTtnLk09ZnVuY3Rpb24oYSxiKXt0aGlzLkFhPWE7dmFyIGM9JGMoYSksZD1jLmRhdGEsYz1jLkJjJiZjLkJjLmV4cDtiJiZiKFwib2tcIix7YXV0aDpkLGV4cGlyZXM6Y30pfTtnLmdlPWZ1bmN0aW9uKGEpe3RoaXMuQWE9bnVsbDthKFwib2tcIixudWxsKX07Zy5NZT1mdW5jdGlvbigpe307XG5nLkNmPWZ1bmN0aW9uKCl7fTtnLkpkPWZ1bmN0aW9uKCl7fTtnLnB1dD1mdW5jdGlvbigpe307Zy56Zj1mdW5jdGlvbigpe307Zy5VZT1mdW5jdGlvbigpe307XG5mdW5jdGlvbiBDZShhLGIsYyxkKXtjPWN8fHt9O2MuZm9ybWF0PVwiZXhwb3J0XCI7YS5BYSYmKGMuYXV0aD1hLkFhKTt2YXIgZT0oYS5GLmtiP1wiaHR0cHM6Ly9cIjpcImh0dHA6Ly9cIikrYS5GLmhvc3QrYitcIj9cIitrYihjKTthLmYoXCJTZW5kaW5nIFJFU1QgcmVxdWVzdCBmb3IgXCIrZSk7dmFyIGY9bmV3IFhNTEh0dHBSZXF1ZXN0O2Yub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7aWYoZCYmND09PWYucmVhZHlTdGF0ZSl7YS5mKFwiUkVTVCBSZXNwb25zZSBmb3IgXCIrZStcIiByZWNlaXZlZC4gc3RhdHVzOlwiLGYuc3RhdHVzLFwicmVzcG9uc2U6XCIsZi5yZXNwb25zZVRleHQpO3ZhciBiPW51bGw7aWYoMjAwPD1mLnN0YXR1cyYmMzAwPmYuc3RhdHVzKXt0cnl7Yj1uYihmLnJlc3BvbnNlVGV4dCl9Y2F0Y2goYyl7TyhcIkZhaWxlZCB0byBwYXJzZSBKU09OIHJlc3BvbnNlIGZvciBcIitlK1wiOiBcIitmLnJlc3BvbnNlVGV4dCl9ZChudWxsLGIpfWVsc2UgNDAxIT09Zi5zdGF0dXMmJjQwNCE9PVxuZi5zdGF0dXMmJk8oXCJHb3QgdW5zdWNjZXNzZnVsIFJFU1QgcmVzcG9uc2UgZm9yIFwiK2UrXCIgU3RhdHVzOiBcIitmLnN0YXR1cyksZChmLnN0YXR1cyk7ZD1udWxsfX07Zi5vcGVuKFwiR0VUXCIsZSwhMCk7Zi5zZW5kKCl9O2Z1bmN0aW9uIERlKGEpe0soZWEoYSkmJjA8YS5sZW5ndGgsXCJSZXF1aXJlcyBhIG5vbi1lbXB0eSBhcnJheVwiKTt0aGlzLlhmPWE7dGhpcy5PYz17fX1EZS5wcm90b3R5cGUuZmU9ZnVuY3Rpb24oYSxiKXt2YXIgYztjPXRoaXMuT2NbYV18fFtdO3ZhciBkPWMubGVuZ3RoO2lmKDA8ZCl7Zm9yKHZhciBlPUFycmF5KGQpLGY9MDtmPGQ7ZisrKWVbZl09Y1tmXTtjPWV9ZWxzZSBjPVtdO2ZvcihkPTA7ZDxjLmxlbmd0aDtkKyspY1tkXS56Yy5hcHBseShjW2RdLk1hLEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKSl9O0RlLnByb3RvdHlwZS5FYj1mdW5jdGlvbihhLGIsYyl7RWUodGhpcyxhKTt0aGlzLk9jW2FdPXRoaXMuT2NbYV18fFtdO3RoaXMuT2NbYV0ucHVzaCh7emM6YixNYTpjfSk7KGE9dGhpcy5BZShhKSkmJmIuYXBwbHkoYyxhKX07XG5EZS5wcm90b3R5cGUuaWM9ZnVuY3Rpb24oYSxiLGMpe0VlKHRoaXMsYSk7YT10aGlzLk9jW2FdfHxbXTtmb3IodmFyIGQ9MDtkPGEubGVuZ3RoO2QrKylpZihhW2RdLnpjPT09YiYmKCFjfHxjPT09YVtkXS5NYSkpe2Euc3BsaWNlKGQsMSk7YnJlYWt9fTtmdW5jdGlvbiBFZShhLGIpe0soVGEoYS5YZixmdW5jdGlvbihhKXtyZXR1cm4gYT09PWJ9KSxcIlVua25vd24gZXZlbnQ6IFwiK2IpfTt2YXIgRmU9ZnVuY3Rpb24oKXt2YXIgYT0wLGI9W107cmV0dXJuIGZ1bmN0aW9uKGMpe3ZhciBkPWM9PT1hO2E9Yztmb3IodmFyIGU9QXJyYXkoOCksZj03OzA8PWY7Zi0tKWVbZl09XCItMDEyMzQ1Njc4OUFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaX2FiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6XCIuY2hhckF0KGMlNjQpLGM9TWF0aC5mbG9vcihjLzY0KTtLKDA9PT1jLFwiQ2Fubm90IHB1c2ggYXQgdGltZSA9PSAwXCIpO2M9ZS5qb2luKFwiXCIpO2lmKGQpe2ZvcihmPTExOzA8PWYmJjYzPT09YltmXTtmLS0pYltmXT0wO2JbZl0rK31lbHNlIGZvcihmPTA7MTI+ZjtmKyspYltmXT1NYXRoLmZsb29yKDY0Kk1hdGgucmFuZG9tKCkpO2ZvcihmPTA7MTI+ZjtmKyspYys9XCItMDEyMzQ1Njc4OUFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaX2FiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6XCIuY2hhckF0KGJbZl0pO0soMjA9PT1jLmxlbmd0aCxcIm5leHRQdXNoSWQ6IExlbmd0aCBzaG91bGQgYmUgMjAuXCIpO1xucmV0dXJuIGN9fSgpO2Z1bmN0aW9uIEdlKCl7RGUuY2FsbCh0aGlzLFtcIm9ubGluZVwiXSk7dGhpcy5rYz0hMDtpZihcInVuZGVmaW5lZFwiIT09dHlwZW9mIHdpbmRvdyYmXCJ1bmRlZmluZWRcIiE9PXR5cGVvZiB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcil7dmFyIGE9dGhpczt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm9ubGluZVwiLGZ1bmN0aW9uKCl7YS5rY3x8KGEua2M9ITAsYS5mZShcIm9ubGluZVwiLCEwKSl9LCExKTt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm9mZmxpbmVcIixmdW5jdGlvbigpe2Eua2MmJihhLmtjPSExLGEuZmUoXCJvbmxpbmVcIiwhMSkpfSwhMSl9fW1hKEdlLERlKTtHZS5wcm90b3R5cGUuQWU9ZnVuY3Rpb24oYSl7SyhcIm9ubGluZVwiPT09YSxcIlVua25vd24gZXZlbnQgdHlwZTogXCIrYSk7cmV0dXJuW3RoaXMua2NdfTtjYShHZSk7ZnVuY3Rpb24gSGUoKXtEZS5jYWxsKHRoaXMsW1widmlzaWJsZVwiXSk7dmFyIGEsYjtcInVuZGVmaW5lZFwiIT09dHlwZW9mIGRvY3VtZW50JiZcInVuZGVmaW5lZFwiIT09dHlwZW9mIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXImJihcInVuZGVmaW5lZFwiIT09dHlwZW9mIGRvY3VtZW50LmhpZGRlbj8oYj1cInZpc2liaWxpdHljaGFuZ2VcIixhPVwiaGlkZGVuXCIpOlwidW5kZWZpbmVkXCIhPT10eXBlb2YgZG9jdW1lbnQubW96SGlkZGVuPyhiPVwibW96dmlzaWJpbGl0eWNoYW5nZVwiLGE9XCJtb3pIaWRkZW5cIik6XCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBkb2N1bWVudC5tc0hpZGRlbj8oYj1cIm1zdmlzaWJpbGl0eWNoYW5nZVwiLGE9XCJtc0hpZGRlblwiKTpcInVuZGVmaW5lZFwiIT09dHlwZW9mIGRvY3VtZW50LndlYmtpdEhpZGRlbiYmKGI9XCJ3ZWJraXR2aXNpYmlsaXR5Y2hhbmdlXCIsYT1cIndlYmtpdEhpZGRlblwiKSk7dGhpcy5PYj0hMDtpZihiKXt2YXIgYz10aGlzO2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoYixcbmZ1bmN0aW9uKCl7dmFyIGI9IWRvY3VtZW50W2FdO2IhPT1jLk9iJiYoYy5PYj1iLGMuZmUoXCJ2aXNpYmxlXCIsYikpfSwhMSl9fW1hKEhlLERlKTtIZS5wcm90b3R5cGUuQWU9ZnVuY3Rpb24oYSl7SyhcInZpc2libGVcIj09PWEsXCJVbmtub3duIGV2ZW50IHR5cGU6IFwiK2EpO3JldHVyblt0aGlzLk9iXX07Y2EoSGUpO2Z1bmN0aW9uIEwoYSxiKXtpZigxPT1hcmd1bWVudHMubGVuZ3RoKXt0aGlzLm89YS5zcGxpdChcIi9cIik7Zm9yKHZhciBjPTAsZD0wO2Q8dGhpcy5vLmxlbmd0aDtkKyspMDx0aGlzLm9bZF0ubGVuZ3RoJiYodGhpcy5vW2NdPXRoaXMub1tkXSxjKyspO3RoaXMuby5sZW5ndGg9Yzt0aGlzLlo9MH1lbHNlIHRoaXMubz1hLHRoaXMuWj1ifWZ1bmN0aW9uIFQoYSxiKXt2YXIgYz1FKGEpO2lmKG51bGw9PT1jKXJldHVybiBiO2lmKGM9PT1FKGIpKXJldHVybiBUKEgoYSksSChiKSk7dGhyb3cgRXJyb3IoXCJJTlRFUk5BTCBFUlJPUjogaW5uZXJQYXRoIChcIitiK1wiKSBpcyBub3Qgd2l0aGluIG91dGVyUGF0aCAoXCIrYStcIilcIik7fVxuZnVuY3Rpb24gSWUoYSxiKXtmb3IodmFyIGM9YS5zbGljZSgpLGQ9Yi5zbGljZSgpLGU9MDtlPGMubGVuZ3RoJiZlPGQubGVuZ3RoO2UrKyl7dmFyIGY9VmIoY1tlXSxkW2VdKTtpZigwIT09ZilyZXR1cm4gZn1yZXR1cm4gYy5sZW5ndGg9PT1kLmxlbmd0aD8wOmMubGVuZ3RoPGQubGVuZ3RoPy0xOjF9ZnVuY3Rpb24gRShhKXtyZXR1cm4gYS5aPj1hLm8ubGVuZ3RoP251bGw6YS5vW2EuWl19ZnVuY3Rpb24gS2QoYSl7cmV0dXJuIGEuby5sZW5ndGgtYS5afWZ1bmN0aW9uIEgoYSl7dmFyIGI9YS5aO2I8YS5vLmxlbmd0aCYmYisrO3JldHVybiBuZXcgTChhLm8sYil9ZnVuY3Rpb24gTGQoYSl7cmV0dXJuIGEuWjxhLm8ubGVuZ3RoP2Eub1thLm8ubGVuZ3RoLTFdOm51bGx9Zz1MLnByb3RvdHlwZTtcbmcudG9TdHJpbmc9ZnVuY3Rpb24oKXtmb3IodmFyIGE9XCJcIixiPXRoaXMuWjtiPHRoaXMuby5sZW5ndGg7YisrKVwiXCIhPT10aGlzLm9bYl0mJihhKz1cIi9cIit0aGlzLm9bYl0pO3JldHVybiBhfHxcIi9cIn07Zy5zbGljZT1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5vLnNsaWNlKHRoaXMuWisoYXx8MCkpfTtnLnBhcmVudD1mdW5jdGlvbigpe2lmKHRoaXMuWj49dGhpcy5vLmxlbmd0aClyZXR1cm4gbnVsbDtmb3IodmFyIGE9W10sYj10aGlzLlo7Yjx0aGlzLm8ubGVuZ3RoLTE7YisrKWEucHVzaCh0aGlzLm9bYl0pO3JldHVybiBuZXcgTChhLDApfTtcbmcudT1mdW5jdGlvbihhKXtmb3IodmFyIGI9W10sYz10aGlzLlo7Yzx0aGlzLm8ubGVuZ3RoO2MrKyliLnB1c2godGhpcy5vW2NdKTtpZihhIGluc3RhbmNlb2YgTClmb3IoYz1hLlo7YzxhLm8ubGVuZ3RoO2MrKyliLnB1c2goYS5vW2NdKTtlbHNlIGZvcihhPWEuc3BsaXQoXCIvXCIpLGM9MDtjPGEubGVuZ3RoO2MrKykwPGFbY10ubGVuZ3RoJiZiLnB1c2goYVtjXSk7cmV0dXJuIG5ldyBMKGIsMCl9O2cuZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLlo+PXRoaXMuby5sZW5ndGh9O2cuY2E9ZnVuY3Rpb24oYSl7aWYoS2QodGhpcykhPT1LZChhKSlyZXR1cm4hMTtmb3IodmFyIGI9dGhpcy5aLGM9YS5aO2I8PXRoaXMuby5sZW5ndGg7YisrLGMrKylpZih0aGlzLm9bYl0hPT1hLm9bY10pcmV0dXJuITE7cmV0dXJuITB9O1xuZy5jb250YWlucz1mdW5jdGlvbihhKXt2YXIgYj10aGlzLlosYz1hLlo7aWYoS2QodGhpcyk+S2QoYSkpcmV0dXJuITE7Zm9yKDtiPHRoaXMuby5sZW5ndGg7KXtpZih0aGlzLm9bYl0hPT1hLm9bY10pcmV0dXJuITE7KytiOysrY31yZXR1cm4hMH07dmFyIEc9bmV3IEwoXCJcIik7ZnVuY3Rpb24gSmUoYSxiKXt0aGlzLlFhPWEuc2xpY2UoKTt0aGlzLkhhPU1hdGgubWF4KDEsdGhpcy5RYS5sZW5ndGgpO3RoaXMubGY9Yjtmb3IodmFyIGM9MDtjPHRoaXMuUWEubGVuZ3RoO2MrKyl0aGlzLkhhKz1aYyh0aGlzLlFhW2NdKTtLZSh0aGlzKX1KZS5wcm90b3R5cGUucHVzaD1mdW5jdGlvbihhKXswPHRoaXMuUWEubGVuZ3RoJiYodGhpcy5IYSs9MSk7dGhpcy5RYS5wdXNoKGEpO3RoaXMuSGErPVpjKGEpO0tlKHRoaXMpfTtKZS5wcm90b3R5cGUucG9wPWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5RYS5wb3AoKTt0aGlzLkhhLT1aYyhhKTswPHRoaXMuUWEubGVuZ3RoJiYtLXRoaXMuSGF9O1xuZnVuY3Rpb24gS2UoYSl7aWYoNzY4PGEuSGEpdGhyb3cgRXJyb3IoYS5sZitcImhhcyBhIGtleSBwYXRoIGxvbmdlciB0aGFuIDc2OCBieXRlcyAoXCIrYS5IYStcIikuXCIpO2lmKDMyPGEuUWEubGVuZ3RoKXRocm93IEVycm9yKGEubGYrXCJwYXRoIHNwZWNpZmllZCBleGNlZWRzIHRoZSBtYXhpbXVtIGRlcHRoIHRoYXQgY2FuIGJlIHdyaXR0ZW4gKDMyKSBvciBvYmplY3QgY29udGFpbnMgYSBjeWNsZSBcIitMZShhKSk7fWZ1bmN0aW9uIExlKGEpe3JldHVybiAwPT1hLlFhLmxlbmd0aD9cIlwiOlwiaW4gcHJvcGVydHkgJ1wiK2EuUWEuam9pbihcIi5cIikrXCInXCJ9O2Z1bmN0aW9uIE1lKGEsYil7dGhpcy52YWx1ZT1hO3RoaXMuY2hpbGRyZW49Ynx8TmV9dmFyIE5lPW5ldyBhYyhmdW5jdGlvbihhLGIpe3JldHVybiBhPT09Yj8wOmE8Yj8tMToxfSk7ZnVuY3Rpb24gT2UoYSl7dmFyIGI9UGQ7cihhLGZ1bmN0aW9uKGEsZCl7Yj1iLnNldChuZXcgTChkKSxhKX0pO3JldHVybiBifWc9TWUucHJvdG90eXBlO2cuZT1mdW5jdGlvbigpe3JldHVybiBudWxsPT09dGhpcy52YWx1ZSYmdGhpcy5jaGlsZHJlbi5lKCl9O2Z1bmN0aW9uIFBlKGEsYixjKXtpZihudWxsIT1hLnZhbHVlJiZjKGEudmFsdWUpKXJldHVybntwYXRoOkcsdmFsdWU6YS52YWx1ZX07aWYoYi5lKCkpcmV0dXJuIG51bGw7dmFyIGQ9RShiKTthPWEuY2hpbGRyZW4uZ2V0KGQpO3JldHVybiBudWxsIT09YT8oYj1QZShhLEgoYiksYyksbnVsbCE9Yj97cGF0aDoobmV3IEwoZCkpLnUoYi5wYXRoKSx2YWx1ZTpiLnZhbHVlfTpudWxsKTpudWxsfVxuZnVuY3Rpb24gUWUoYSxiKXtyZXR1cm4gUGUoYSxiLGZ1bmN0aW9uKCl7cmV0dXJuITB9KX1nLnN1YnRyZWU9ZnVuY3Rpb24oYSl7aWYoYS5lKCkpcmV0dXJuIHRoaXM7dmFyIGI9dGhpcy5jaGlsZHJlbi5nZXQoRShhKSk7cmV0dXJuIG51bGwhPT1iP2Iuc3VidHJlZShIKGEpKTpQZH07Zy5zZXQ9ZnVuY3Rpb24oYSxiKXtpZihhLmUoKSlyZXR1cm4gbmV3IE1lKGIsdGhpcy5jaGlsZHJlbik7dmFyIGM9RShhKSxkPSh0aGlzLmNoaWxkcmVuLmdldChjKXx8UGQpLnNldChIKGEpLGIpLGM9dGhpcy5jaGlsZHJlbi5PYShjLGQpO3JldHVybiBuZXcgTWUodGhpcy52YWx1ZSxjKX07XG5nLnJlbW92ZT1mdW5jdGlvbihhKXtpZihhLmUoKSlyZXR1cm4gdGhpcy5jaGlsZHJlbi5lKCk/UGQ6bmV3IE1lKG51bGwsdGhpcy5jaGlsZHJlbik7dmFyIGI9RShhKSxjPXRoaXMuY2hpbGRyZW4uZ2V0KGIpO3JldHVybiBjPyhhPWMucmVtb3ZlKEgoYSkpLGI9YS5lKCk/dGhpcy5jaGlsZHJlbi5yZW1vdmUoYik6dGhpcy5jaGlsZHJlbi5PYShiLGEpLG51bGw9PT10aGlzLnZhbHVlJiZiLmUoKT9QZDpuZXcgTWUodGhpcy52YWx1ZSxiKSk6dGhpc307Zy5nZXQ9ZnVuY3Rpb24oYSl7aWYoYS5lKCkpcmV0dXJuIHRoaXMudmFsdWU7dmFyIGI9dGhpcy5jaGlsZHJlbi5nZXQoRShhKSk7cmV0dXJuIGI/Yi5nZXQoSChhKSk6bnVsbH07XG5mdW5jdGlvbiBPZChhLGIsYyl7aWYoYi5lKCkpcmV0dXJuIGM7dmFyIGQ9RShiKTtiPU9kKGEuY2hpbGRyZW4uZ2V0KGQpfHxQZCxIKGIpLGMpO2Q9Yi5lKCk/YS5jaGlsZHJlbi5yZW1vdmUoZCk6YS5jaGlsZHJlbi5PYShkLGIpO3JldHVybiBuZXcgTWUoYS52YWx1ZSxkKX1mdW5jdGlvbiBSZShhLGIpe3JldHVybiBTZShhLEcsYil9ZnVuY3Rpb24gU2UoYSxiLGMpe3ZhciBkPXt9O2EuY2hpbGRyZW4uaWEoZnVuY3Rpb24oYSxmKXtkW2FdPVNlKGYsYi51KGEpLGMpfSk7cmV0dXJuIGMoYixhLnZhbHVlLGQpfWZ1bmN0aW9uIFRlKGEsYixjKXtyZXR1cm4gVWUoYSxiLEcsYyl9ZnVuY3Rpb24gVWUoYSxiLGMsZCl7dmFyIGU9YS52YWx1ZT9kKGMsYS52YWx1ZSk6ITE7aWYoZSlyZXR1cm4gZTtpZihiLmUoKSlyZXR1cm4gbnVsbDtlPUUoYik7cmV0dXJuKGE9YS5jaGlsZHJlbi5nZXQoZSkpP1VlKGEsSChiKSxjLnUoZSksZCk6bnVsbH1cbmZ1bmN0aW9uIFZlKGEsYixjKXtXZShhLGIsRyxjKX1mdW5jdGlvbiBXZShhLGIsYyxkKXtpZihiLmUoKSlyZXR1cm4gYTthLnZhbHVlJiZkKGMsYS52YWx1ZSk7dmFyIGU9RShiKTtyZXR1cm4oYT1hLmNoaWxkcmVuLmdldChlKSk/V2UoYSxIKGIpLGMudShlKSxkKTpQZH1mdW5jdGlvbiBNZChhLGIpe1hlKGEsRyxiKX1mdW5jdGlvbiBYZShhLGIsYyl7YS5jaGlsZHJlbi5pYShmdW5jdGlvbihhLGUpe1hlKGUsYi51KGEpLGMpfSk7YS52YWx1ZSYmYyhiLGEudmFsdWUpfWZ1bmN0aW9uIFllKGEsYil7YS5jaGlsZHJlbi5pYShmdW5jdGlvbihhLGQpe2QudmFsdWUmJmIoYSxkLnZhbHVlKX0pfXZhciBQZD1uZXcgTWUobnVsbCk7TWUucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7dmFyIGE9e307TWQodGhpcyxmdW5jdGlvbihiLGMpe2FbYi50b1N0cmluZygpXT1jLnRvU3RyaW5nKCl9KTtyZXR1cm4gQihhKX07ZnVuY3Rpb24gWmUoYSxiLGMpe3RoaXMudHlwZT1FZDt0aGlzLnNvdXJjZT0kZTt0aGlzLnBhdGg9YTt0aGlzLlFiPWI7dGhpcy5WZD1jfVplLnByb3RvdHlwZS5YYz1mdW5jdGlvbihhKXtpZih0aGlzLnBhdGguZSgpKXtpZihudWxsIT10aGlzLlFiLnZhbHVlKXJldHVybiBLKHRoaXMuUWIuY2hpbGRyZW4uZSgpLFwiYWZmZWN0ZWRUcmVlIHNob3VsZCBub3QgaGF2ZSBvdmVybGFwcGluZyBhZmZlY3RlZCBwYXRocy5cIiksdGhpczthPXRoaXMuUWIuc3VidHJlZShuZXcgTChhKSk7cmV0dXJuIG5ldyBaZShHLGEsdGhpcy5WZCl9SyhFKHRoaXMucGF0aCk9PT1hLFwib3BlcmF0aW9uRm9yQ2hpbGQgY2FsbGVkIGZvciB1bnJlbGF0ZWQgY2hpbGQuXCIpO3JldHVybiBuZXcgWmUoSCh0aGlzLnBhdGgpLHRoaXMuUWIsdGhpcy5WZCl9O1xuWmUucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuXCJPcGVyYXRpb24oXCIrdGhpcy5wYXRoK1wiOiBcIit0aGlzLnNvdXJjZS50b1N0cmluZygpK1wiIGFjayB3cml0ZSByZXZlcnQ9XCIrdGhpcy5WZCtcIiBhZmZlY3RlZFRyZWU9XCIrdGhpcy5RYitcIilcIn07dmFyIFliPTAsQmQ9MSxFZD0yLCRiPTM7ZnVuY3Rpb24gYWYoYSxiLGMsZCl7dGhpcy53ZT1hO3RoaXMucGY9Yjt0aGlzLkhiPWM7dGhpcy5hZj1kO0soIWR8fGIsXCJUYWdnZWQgcXVlcmllcyBtdXN0IGJlIGZyb20gc2VydmVyLlwiKX12YXIgJGU9bmV3IGFmKCEwLCExLG51bGwsITEpLGJmPW5ldyBhZighMSwhMCxudWxsLCExKTthZi5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy53ZT9cInVzZXJcIjp0aGlzLmFmP1wic2VydmVyKHF1ZXJ5SUQ9XCIrdGhpcy5IYitcIilcIjpcInNlcnZlclwifTtmdW5jdGlvbiBjZihhKXt0aGlzLlg9YX12YXIgZGY9bmV3IGNmKG5ldyBNZShudWxsKSk7ZnVuY3Rpb24gZWYoYSxiLGMpe2lmKGIuZSgpKXJldHVybiBuZXcgY2YobmV3IE1lKGMpKTt2YXIgZD1RZShhLlgsYik7aWYobnVsbCE9ZCl7dmFyIGU9ZC5wYXRoLGQ9ZC52YWx1ZTtiPVQoZSxiKTtkPWQuRyhiLGMpO3JldHVybiBuZXcgY2YoYS5YLnNldChlLGQpKX1hPU9kKGEuWCxiLG5ldyBNZShjKSk7cmV0dXJuIG5ldyBjZihhKX1mdW5jdGlvbiBmZihhLGIsYyl7dmFyIGQ9YTtpYihjLGZ1bmN0aW9uKGEsYyl7ZD1lZihkLGIudShhKSxjKX0pO3JldHVybiBkfWNmLnByb3RvdHlwZS5SZD1mdW5jdGlvbihhKXtpZihhLmUoKSlyZXR1cm4gZGY7YT1PZCh0aGlzLlgsYSxQZCk7cmV0dXJuIG5ldyBjZihhKX07ZnVuY3Rpb24gZ2YoYSxiKXt2YXIgYz1RZShhLlgsYik7cmV0dXJuIG51bGwhPWM/YS5YLmdldChjLnBhdGgpLlEoVChjLnBhdGgsYikpOm51bGx9XG5mdW5jdGlvbiBoZihhKXt2YXIgYj1bXSxjPWEuWC52YWx1ZTtudWxsIT1jP2MuSygpfHxjLlAoTixmdW5jdGlvbihhLGMpe2IucHVzaChuZXcgRihhLGMpKX0pOmEuWC5jaGlsZHJlbi5pYShmdW5jdGlvbihhLGMpe251bGwhPWMudmFsdWUmJmIucHVzaChuZXcgRihhLGMudmFsdWUpKX0pO3JldHVybiBifWZ1bmN0aW9uIGpmKGEsYil7aWYoYi5lKCkpcmV0dXJuIGE7dmFyIGM9Z2YoYSxiKTtyZXR1cm4gbnVsbCE9Yz9uZXcgY2YobmV3IE1lKGMpKTpuZXcgY2YoYS5YLnN1YnRyZWUoYikpfWNmLnByb3RvdHlwZS5lPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuWC5lKCl9O2NmLnByb3RvdHlwZS5hcHBseT1mdW5jdGlvbihhKXtyZXR1cm4ga2YoRyx0aGlzLlgsYSl9O1xuZnVuY3Rpb24ga2YoYSxiLGMpe2lmKG51bGwhPWIudmFsdWUpcmV0dXJuIGMuRyhhLGIudmFsdWUpO3ZhciBkPW51bGw7Yi5jaGlsZHJlbi5pYShmdW5jdGlvbihiLGYpe1wiLnByaW9yaXR5XCI9PT1iPyhLKG51bGwhPT1mLnZhbHVlLFwiUHJpb3JpdHkgd3JpdGVzIG11c3QgYWx3YXlzIGJlIGxlYWYgbm9kZXNcIiksZD1mLnZhbHVlKTpjPWtmKGEudShiKSxmLGMpfSk7Yy5RKGEpLmUoKXx8bnVsbD09PWR8fChjPWMuRyhhLnUoXCIucHJpb3JpdHlcIiksZCkpO3JldHVybiBjfTtmdW5jdGlvbiBsZigpe3RoaXMuVD1kZjt0aGlzLm5hPVtdO3RoaXMuTWM9LTF9ZnVuY3Rpb24gbWYoYSxiKXtmb3IodmFyIGM9MDtjPGEubmEubGVuZ3RoO2MrKyl7dmFyIGQ9YS5uYVtjXTtpZihkLmtkPT09YilyZXR1cm4gZH1yZXR1cm4gbnVsbH1nPWxmLnByb3RvdHlwZTtcbmcuUmQ9ZnVuY3Rpb24oYSl7dmFyIGI9VWEodGhpcy5uYSxmdW5jdGlvbihiKXtyZXR1cm4gYi5rZD09PWF9KTtLKDA8PWIsXCJyZW1vdmVXcml0ZSBjYWxsZWQgd2l0aCBub25leGlzdGVudCB3cml0ZUlkLlwiKTt2YXIgYz10aGlzLm5hW2JdO3RoaXMubmEuc3BsaWNlKGIsMSk7Zm9yKHZhciBkPWMudmlzaWJsZSxlPSExLGY9dGhpcy5uYS5sZW5ndGgtMTtkJiYwPD1mOyl7dmFyIGg9dGhpcy5uYVtmXTtoLnZpc2libGUmJihmPj1iJiZuZihoLGMucGF0aCk/ZD0hMTpjLnBhdGguY29udGFpbnMoaC5wYXRoKSYmKGU9ITApKTtmLS19aWYoZCl7aWYoZSl0aGlzLlQ9b2YodGhpcy5uYSxwZixHKSx0aGlzLk1jPTA8dGhpcy5uYS5sZW5ndGg/dGhpcy5uYVt0aGlzLm5hLmxlbmd0aC0xXS5rZDotMTtlbHNlIGlmKGMuR2EpdGhpcy5UPXRoaXMuVC5SZChjLnBhdGgpO2Vsc2V7dmFyIGs9dGhpcztyKGMuY2hpbGRyZW4sZnVuY3Rpb24oYSxiKXtrLlQ9ay5ULlJkKGMucGF0aC51KGIpKX0pfXJldHVybiEwfXJldHVybiExfTtcbmcuemE9ZnVuY3Rpb24oYSxiLGMsZCl7aWYoY3x8ZCl7dmFyIGU9amYodGhpcy5ULGEpO3JldHVybiFkJiZlLmUoKT9iOmR8fG51bGwhPWJ8fG51bGwhPWdmKGUsRyk/KGU9b2YodGhpcy5uYSxmdW5jdGlvbihiKXtyZXR1cm4oYi52aXNpYmxlfHxkKSYmKCFjfHwhKDA8PU5hKGMsYi5rZCkpKSYmKGIucGF0aC5jb250YWlucyhhKXx8YS5jb250YWlucyhiLnBhdGgpKX0sYSksYj1ifHxDLGUuYXBwbHkoYikpOm51bGx9ZT1nZih0aGlzLlQsYSk7aWYobnVsbCE9ZSlyZXR1cm4gZTtlPWpmKHRoaXMuVCxhKTtyZXR1cm4gZS5lKCk/YjpudWxsIT1ifHxudWxsIT1nZihlLEcpPyhiPWJ8fEMsZS5hcHBseShiKSk6bnVsbH07XG5nLnljPWZ1bmN0aW9uKGEsYil7dmFyIGM9QyxkPWdmKHRoaXMuVCxhKTtpZihkKWQuSygpfHxkLlAoTixmdW5jdGlvbihhLGIpe2M9Yy5VKGEsYil9KTtlbHNlIGlmKGIpe3ZhciBlPWpmKHRoaXMuVCxhKTtiLlAoTixmdW5jdGlvbihhLGIpe3ZhciBkPWpmKGUsbmV3IEwoYSkpLmFwcGx5KGIpO2M9Yy5VKGEsZCl9KTtPYShoZihlKSxmdW5jdGlvbihhKXtjPWMuVShhLm5hbWUsYS5TKX0pfWVsc2UgZT1qZih0aGlzLlQsYSksT2EoaGYoZSksZnVuY3Rpb24oYSl7Yz1jLlUoYS5uYW1lLGEuUyl9KTtyZXR1cm4gY307Zy5sZD1mdW5jdGlvbihhLGIsYyxkKXtLKGN8fGQsXCJFaXRoZXIgZXhpc3RpbmdFdmVudFNuYXAgb3IgZXhpc3RpbmdTZXJ2ZXJTbmFwIG11c3QgZXhpc3RcIik7YT1hLnUoYik7aWYobnVsbCE9Z2YodGhpcy5ULGEpKXJldHVybiBudWxsO2E9amYodGhpcy5ULGEpO3JldHVybiBhLmUoKT9kLlEoYik6YS5hcHBseShkLlEoYikpfTtcbmcueGM9ZnVuY3Rpb24oYSxiLGMpe2E9YS51KGIpO3ZhciBkPWdmKHRoaXMuVCxhKTtyZXR1cm4gbnVsbCE9ZD9kOnNiKGMsYik/amYodGhpcy5ULGEpLmFwcGx5KGMuaigpLlIoYikpOm51bGx9O2cudGM9ZnVuY3Rpb24oYSl7cmV0dXJuIGdmKHRoaXMuVCxhKX07Zy5uZT1mdW5jdGlvbihhLGIsYyxkLGUsZil7dmFyIGg7YT1qZih0aGlzLlQsYSk7aD1nZihhLEcpO2lmKG51bGw9PWgpaWYobnVsbCE9YiloPWEuYXBwbHkoYik7ZWxzZSByZXR1cm5bXTtoPWgubGIoZik7aWYoaC5lKCl8fGguSygpKXJldHVybltdO2I9W107YT10ZChmKTtlPWU/aC4kYihjLGYpOmguWWIoYyxmKTtmb3IoZj1KKGUpO2YmJmIubGVuZ3RoPGQ7KTAhPT1hKGYsYykmJmIucHVzaChmKSxmPUooZSk7cmV0dXJuIGJ9O1xuZnVuY3Rpb24gbmYoYSxiKXtyZXR1cm4gYS5HYT9hLnBhdGguY29udGFpbnMoYik6ISF1YShhLmNoaWxkcmVuLGZ1bmN0aW9uKGMsZCl7cmV0dXJuIGEucGF0aC51KGQpLmNvbnRhaW5zKGIpfSl9ZnVuY3Rpb24gcGYoYSl7cmV0dXJuIGEudmlzaWJsZX1cbmZ1bmN0aW9uIG9mKGEsYixjKXtmb3IodmFyIGQ9ZGYsZT0wO2U8YS5sZW5ndGg7KytlKXt2YXIgZj1hW2VdO2lmKGIoZikpe3ZhciBoPWYucGF0aDtpZihmLkdhKWMuY29udGFpbnMoaCk/KGg9VChjLGgpLGQ9ZWYoZCxoLGYuR2EpKTpoLmNvbnRhaW5zKGMpJiYoaD1UKGgsYyksZD1lZihkLEcsZi5HYS5RKGgpKSk7ZWxzZSBpZihmLmNoaWxkcmVuKWlmKGMuY29udGFpbnMoaCkpaD1UKGMsaCksZD1mZihkLGgsZi5jaGlsZHJlbik7ZWxzZXtpZihoLmNvbnRhaW5zKGMpKWlmKGg9VChoLGMpLGguZSgpKWQ9ZmYoZCxHLGYuY2hpbGRyZW4pO2Vsc2UgaWYoZj13KGYuY2hpbGRyZW4sRShoKSkpZj1mLlEoSChoKSksZD1lZihkLEcsZil9ZWxzZSB0aHJvdyBGYyhcIldyaXRlUmVjb3JkIHNob3VsZCBoYXZlIC5zbmFwIG9yIC5jaGlsZHJlblwiKTt9fXJldHVybiBkfWZ1bmN0aW9uIHFmKGEsYil7dGhpcy5NYj1hO3RoaXMuWD1ifWc9cWYucHJvdG90eXBlO1xuZy56YT1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIHRoaXMuWC56YSh0aGlzLk1iLGEsYixjKX07Zy55Yz1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5YLnljKHRoaXMuTWIsYSl9O2cubGQ9ZnVuY3Rpb24oYSxiLGMpe3JldHVybiB0aGlzLlgubGQodGhpcy5NYixhLGIsYyl9O2cudGM9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuWC50Yyh0aGlzLk1iLnUoYSkpfTtnLm5lPWZ1bmN0aW9uKGEsYixjLGQsZSl7cmV0dXJuIHRoaXMuWC5uZSh0aGlzLk1iLGEsYixjLGQsZSl9O2cueGM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5YLnhjKHRoaXMuTWIsYSxiKX07Zy51PWZ1bmN0aW9uKGEpe3JldHVybiBuZXcgcWYodGhpcy5NYi51KGEpLHRoaXMuWCl9O2Z1bmN0aW9uIHJmKCl7dGhpcy55YT17fX1nPXJmLnByb3RvdHlwZTtnLmU9ZnVuY3Rpb24oKXtyZXR1cm4gd2EodGhpcy55YSl9O2cuYWI9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEuc291cmNlLkhiO2lmKG51bGwhPT1kKXJldHVybiBkPXcodGhpcy55YSxkKSxLKG51bGwhPWQsXCJTeW5jVHJlZSBnYXZlIHVzIGFuIG9wIGZvciBhbiBpbnZhbGlkIHF1ZXJ5LlwiKSxkLmFiKGEsYixjKTt2YXIgZT1bXTtyKHRoaXMueWEsZnVuY3Rpb24oZCl7ZT1lLmNvbmNhdChkLmFiKGEsYixjKSl9KTtyZXR1cm4gZX07Zy5QYj1mdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmPWEudmEoKSxoPXcodGhpcy55YSxmKTtpZighaCl7dmFyIGg9Yy56YShlP2Q6bnVsbCksaz0hMTtoP2s9ITA6KGg9ZCBpbnN0YW5jZW9mIFI/Yy55YyhkKTpDLGs9ITEpO2g9bmV3IHZlKGEsbmV3IElkKG5ldyB0YihoLGssITEpLG5ldyB0YihkLGUsITEpKSk7dGhpcy55YVtmXT1ofWguUGIoYik7cmV0dXJuIHllKGgsYil9O1xuZy5qYj1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9YS52YSgpLGU9W10sZj1bXSxoPW51bGwhPXNmKHRoaXMpO2lmKFwiZGVmYXVsdFwiPT09ZCl7dmFyIGs9dGhpcztyKHRoaXMueWEsZnVuY3Rpb24oYSxkKXtmPWYuY29uY2F0KGEuamIoYixjKSk7YS5lKCkmJihkZWxldGUgay55YVtkXSxTKGEuVy5uKXx8ZS5wdXNoKGEuVykpfSl9ZWxzZXt2YXIgbD13KHRoaXMueWEsZCk7bCYmKGY9Zi5jb25jYXQobC5qYihiLGMpKSxsLmUoKSYmKGRlbGV0ZSB0aGlzLnlhW2RdLFMobC5XLm4pfHxlLnB1c2gobC5XKSkpfWgmJm51bGw9PXNmKHRoaXMpJiZlLnB1c2gobmV3IFUoYS5rLGEucGF0aCkpO3JldHVybntLZzplLG1nOmZ9fTtmdW5jdGlvbiB0ZihhKXtyZXR1cm4gUGEocmEoYS55YSksZnVuY3Rpb24oYSl7cmV0dXJuIVMoYS5XLm4pfSl9Zy5mYj1mdW5jdGlvbihhKXt2YXIgYj1udWxsO3IodGhpcy55YSxmdW5jdGlvbihjKXtiPWJ8fGMuZmIoYSl9KTtyZXR1cm4gYn07XG5mdW5jdGlvbiB1ZihhLGIpe2lmKFMoYi5uKSlyZXR1cm4gc2YoYSk7dmFyIGM9Yi52YSgpO3JldHVybiB3KGEueWEsYyl9ZnVuY3Rpb24gc2YoYSl7cmV0dXJuIHZhKGEueWEsZnVuY3Rpb24oYSl7cmV0dXJuIFMoYS5XLm4pfSl8fG51bGx9O2Z1bmN0aW9uIHZmKGEpe3RoaXMudGE9UGQ7dGhpcy5pYj1uZXcgbGY7dGhpcy4kZT17fTt0aGlzLm1jPXt9O3RoaXMuTmM9YX1mdW5jdGlvbiB3ZihhLGIsYyxkLGUpe3ZhciBmPWEuaWIsaD1lO0soZD5mLk1jLFwiU3RhY2tpbmcgYW4gb2xkZXIgd3JpdGUgb24gdG9wIG9mIG5ld2VyIG9uZXNcIik7bihoKXx8KGg9ITApO2YubmEucHVzaCh7cGF0aDpiLEdhOmMsa2Q6ZCx2aXNpYmxlOmh9KTtoJiYoZi5UPWVmKGYuVCxiLGMpKTtmLk1jPWQ7cmV0dXJuIGU/eGYoYSxuZXcgWGIoJGUsYixjKSk6W119ZnVuY3Rpb24geWYoYSxiLGMsZCl7dmFyIGU9YS5pYjtLKGQ+ZS5NYyxcIlN0YWNraW5nIGFuIG9sZGVyIG1lcmdlIG9uIHRvcCBvZiBuZXdlciBvbmVzXCIpO2UubmEucHVzaCh7cGF0aDpiLGNoaWxkcmVuOmMsa2Q6ZCx2aXNpYmxlOiEwfSk7ZS5UPWZmKGUuVCxiLGMpO2UuTWM9ZDtjPU9lKGMpO3JldHVybiB4ZihhLG5ldyB6ZSgkZSxiLGMpKX1cbmZ1bmN0aW9uIHpmKGEsYixjKXtjPWN8fCExO3ZhciBkPW1mKGEuaWIsYik7aWYoYS5pYi5SZChiKSl7dmFyIGU9UGQ7bnVsbCE9ZC5HYT9lPWUuc2V0KEcsITApOmliKGQuY2hpbGRyZW4sZnVuY3Rpb24oYSxiKXtlPWUuc2V0KG5ldyBMKGEpLGIpfSk7cmV0dXJuIHhmKGEsbmV3IFplKGQucGF0aCxlLGMpKX1yZXR1cm5bXX1mdW5jdGlvbiBBZihhLGIsYyl7Yz1PZShjKTtyZXR1cm4geGYoYSxuZXcgemUoYmYsYixjKSl9ZnVuY3Rpb24gQmYoYSxiLGMsZCl7ZD1DZihhLGQpO2lmKG51bGwhPWQpe3ZhciBlPURmKGQpO2Q9ZS5wYXRoO2U9ZS5IYjtiPVQoZCxiKTtjPW5ldyBYYihuZXcgYWYoITEsITAsZSwhMCksYixjKTtyZXR1cm4gRWYoYSxkLGMpfXJldHVybltdfVxuZnVuY3Rpb24gRmYoYSxiLGMsZCl7aWYoZD1DZihhLGQpKXt2YXIgZT1EZihkKTtkPWUucGF0aDtlPWUuSGI7Yj1UKGQsYik7Yz1PZShjKTtjPW5ldyB6ZShuZXcgYWYoITEsITAsZSwhMCksYixjKTtyZXR1cm4gRWYoYSxkLGMpfXJldHVybltdfVxudmYucHJvdG90eXBlLlBiPWZ1bmN0aW9uKGEsYil7dmFyIGM9YS5wYXRoLGQ9bnVsbCxlPSExO1ZlKHRoaXMudGEsYyxmdW5jdGlvbihhLGIpe3ZhciBmPVQoYSxjKTtkPWR8fGIuZmIoZik7ZT1lfHxudWxsIT1zZihiKX0pO3ZhciBmPXRoaXMudGEuZ2V0KGMpO2Y/KGU9ZXx8bnVsbCE9c2YoZiksZD1kfHxmLmZiKEcpKTooZj1uZXcgcmYsdGhpcy50YT10aGlzLnRhLnNldChjLGYpKTt2YXIgaDtudWxsIT1kP2g9ITA6KGg9ITEsZD1DLFllKHRoaXMudGEuc3VidHJlZShjKSxmdW5jdGlvbihhLGIpe3ZhciBjPWIuZmIoRyk7YyYmKGQ9ZC5VKGEsYykpfSkpO3ZhciBrPW51bGwhPXVmKGYsYSk7aWYoIWsmJiFTKGEubikpe3ZhciBsPUdmKGEpO0soIShsIGluIHRoaXMubWMpLFwiVmlldyBkb2VzIG5vdCBleGlzdCwgYnV0IHdlIGhhdmUgYSB0YWdcIik7dmFyIG09SGYrKzt0aGlzLm1jW2xdPW07dGhpcy4kZVtcIl9cIittXT1sfWg9Zi5QYihhLGIsbmV3IHFmKGMsdGhpcy5pYiksZCxoKTtrfHxcbmV8fChmPXVmKGYsYSksaD1oLmNvbmNhdChJZih0aGlzLGEsZikpKTtyZXR1cm4gaH07XG52Zi5wcm90b3R5cGUuamI9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEucGF0aCxlPXRoaXMudGEuZ2V0KGQpLGY9W107aWYoZSYmKFwiZGVmYXVsdFwiPT09YS52YSgpfHxudWxsIT11ZihlLGEpKSl7Zj1lLmpiKGEsYixjKTtlLmUoKSYmKHRoaXMudGE9dGhpcy50YS5yZW1vdmUoZCkpO2U9Zi5LZztmPWYubWc7Yj0tMSE9PVVhKGUsZnVuY3Rpb24oYSl7cmV0dXJuIFMoYS5uKX0pO3ZhciBoPVRlKHRoaXMudGEsZCxmdW5jdGlvbihhLGIpe3JldHVybiBudWxsIT1zZihiKX0pO2lmKGImJiFoJiYoZD10aGlzLnRhLnN1YnRyZWUoZCksIWQuZSgpKSlmb3IodmFyIGQ9SmYoZCksaz0wO2s8ZC5sZW5ndGg7KytrKXt2YXIgbD1kW2tdLG09bC5XLGw9S2YodGhpcyxsKTt0aGlzLk5jLlhlKExmKG0pLE1mKHRoaXMsbSksbC54ZCxsLkgpfWlmKCFoJiYwPGUubGVuZ3RoJiYhYylpZihiKXRoaXMuTmMuYWUoTGYoYSksbnVsbCk7ZWxzZXt2YXIgdD10aGlzO09hKGUsZnVuY3Rpb24oYSl7YS52YSgpO1xudmFyIGI9dC5tY1tHZihhKV07dC5OYy5hZShMZihhKSxiKX0pfU5mKHRoaXMsZSl9cmV0dXJuIGZ9O3ZmLnByb3RvdHlwZS56YT1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMuaWIsZD1UZSh0aGlzLnRhLGEsZnVuY3Rpb24oYixjKXt2YXIgZD1UKGIsYSk7aWYoZD1jLmZiKGQpKXJldHVybiBkfSk7cmV0dXJuIGMuemEoYSxkLGIsITApfTtmdW5jdGlvbiBKZihhKXtyZXR1cm4gUmUoYSxmdW5jdGlvbihhLGMsZCl7aWYoYyYmbnVsbCE9c2YoYykpcmV0dXJuW3NmKGMpXTt2YXIgZT1bXTtjJiYoZT10ZihjKSk7cihkLGZ1bmN0aW9uKGEpe2U9ZS5jb25jYXQoYSl9KTtyZXR1cm4gZX0pfWZ1bmN0aW9uIE5mKGEsYil7Zm9yKHZhciBjPTA7YzxiLmxlbmd0aDsrK2Mpe3ZhciBkPWJbY107aWYoIVMoZC5uKSl7dmFyIGQ9R2YoZCksZT1hLm1jW2RdO2RlbGV0ZSBhLm1jW2RdO2RlbGV0ZSBhLiRlW1wiX1wiK2VdfX19XG5mdW5jdGlvbiBMZihhKXtyZXR1cm4gUyhhLm4pJiYhZmUoYS5uKT9hLkliKCk6YX1mdW5jdGlvbiBJZihhLGIsYyl7dmFyIGQ9Yi5wYXRoLGU9TWYoYSxiKTtjPUtmKGEsYyk7Yj1hLk5jLlhlKExmKGIpLGUsYy54ZCxjLkgpO2Q9YS50YS5zdWJ0cmVlKGQpO2lmKGUpSyhudWxsPT1zZihkLnZhbHVlKSxcIklmIHdlJ3JlIGFkZGluZyBhIHF1ZXJ5LCBpdCBzaG91bGRuJ3QgYmUgc2hhZG93ZWRcIik7ZWxzZSBmb3IoZT1SZShkLGZ1bmN0aW9uKGEsYixjKXtpZighYS5lKCkmJmImJm51bGwhPXNmKGIpKXJldHVyblt3ZShzZihiKSldO3ZhciBkPVtdO2ImJihkPWQuY29uY2F0KFFhKHRmKGIpLGZ1bmN0aW9uKGEpe3JldHVybiBhLld9KSkpO3IoYyxmdW5jdGlvbihhKXtkPWQuY29uY2F0KGEpfSk7cmV0dXJuIGR9KSxkPTA7ZDxlLmxlbmd0aDsrK2QpYz1lW2RdLGEuTmMuYWUoTGYoYyksTWYoYSxjKSk7cmV0dXJuIGJ9XG5mdW5jdGlvbiBLZihhLGIpe3ZhciBjPWIuVyxkPU1mKGEsYyk7cmV0dXJue3hkOmZ1bmN0aW9uKCl7cmV0dXJuKGIudygpfHxDKS5oYXNoKCl9LEg6ZnVuY3Rpb24oYil7aWYoXCJva1wiPT09Yil7aWYoZCl7dmFyIGY9Yy5wYXRoO2lmKGI9Q2YoYSxkKSl7dmFyIGg9RGYoYik7Yj1oLnBhdGg7aD1oLkhiO2Y9VChiLGYpO2Y9bmV3IFpiKG5ldyBhZighMSwhMCxoLCEwKSxmKTtiPUVmKGEsYixmKX1lbHNlIGI9W119ZWxzZSBiPXhmKGEsbmV3IFpiKGJmLGMucGF0aCkpO3JldHVybiBifWY9XCJVbmtub3duIEVycm9yXCI7XCJ0b29fYmlnXCI9PT1iP2Y9XCJUaGUgZGF0YSByZXF1ZXN0ZWQgZXhjZWVkcyB0aGUgbWF4aW11bSBzaXplIHRoYXQgY2FuIGJlIGFjY2Vzc2VkIHdpdGggYSBzaW5nbGUgcmVxdWVzdC5cIjpcInBlcm1pc3Npb25fZGVuaWVkXCI9PWI/Zj1cIkNsaWVudCBkb2Vzbid0IGhhdmUgcGVybWlzc2lvbiB0byBhY2Nlc3MgdGhlIGRlc2lyZWQgZGF0YS5cIjpcInVuYXZhaWxhYmxlXCI9PWImJlxuKGY9XCJUaGUgc2VydmljZSBpcyB1bmF2YWlsYWJsZVwiKTtmPUVycm9yKGIrXCI6IFwiK2YpO2YuY29kZT1iLnRvVXBwZXJDYXNlKCk7cmV0dXJuIGEuamIoYyxudWxsLGYpfX19ZnVuY3Rpb24gR2YoYSl7cmV0dXJuIGEucGF0aC50b1N0cmluZygpK1wiJFwiK2EudmEoKX1mdW5jdGlvbiBEZihhKXt2YXIgYj1hLmluZGV4T2YoXCIkXCIpO0soLTEhPT1iJiZiPGEubGVuZ3RoLTEsXCJCYWQgcXVlcnlLZXkuXCIpO3JldHVybntIYjphLnN1YnN0cihiKzEpLHBhdGg6bmV3IEwoYS5zdWJzdHIoMCxiKSl9fWZ1bmN0aW9uIENmKGEsYil7dmFyIGM9YS4kZSxkPVwiX1wiK2I7cmV0dXJuIGQgaW4gYz9jW2RdOnZvaWQgMH1mdW5jdGlvbiBNZihhLGIpe3ZhciBjPUdmKGIpO3JldHVybiB3KGEubWMsYyl9dmFyIEhmPTE7XG5mdW5jdGlvbiBFZihhLGIsYyl7dmFyIGQ9YS50YS5nZXQoYik7SyhkLFwiTWlzc2luZyBzeW5jIHBvaW50IGZvciBxdWVyeSB0YWcgdGhhdCB3ZSdyZSB0cmFja2luZ1wiKTtyZXR1cm4gZC5hYihjLG5ldyBxZihiLGEuaWIpLG51bGwpfWZ1bmN0aW9uIHhmKGEsYil7cmV0dXJuIE9mKGEsYixhLnRhLG51bGwsbmV3IHFmKEcsYS5pYikpfWZ1bmN0aW9uIE9mKGEsYixjLGQsZSl7aWYoYi5wYXRoLmUoKSlyZXR1cm4gUGYoYSxiLGMsZCxlKTt2YXIgZj1jLmdldChHKTtudWxsPT1kJiZudWxsIT1mJiYoZD1mLmZiKEcpKTt2YXIgaD1bXSxrPUUoYi5wYXRoKSxsPWIuWGMoayk7aWYoKGM9Yy5jaGlsZHJlbi5nZXQoaykpJiZsKXZhciBtPWQ/ZC5SKGspOm51bGwsaz1lLnUoayksaD1oLmNvbmNhdChPZihhLGwsYyxtLGspKTtmJiYoaD1oLmNvbmNhdChmLmFiKGIsZSxkKSkpO3JldHVybiBofVxuZnVuY3Rpb24gUGYoYSxiLGMsZCxlKXt2YXIgZj1jLmdldChHKTtudWxsPT1kJiZudWxsIT1mJiYoZD1mLmZiKEcpKTt2YXIgaD1bXTtjLmNoaWxkcmVuLmlhKGZ1bmN0aW9uKGMsZil7dmFyIG09ZD9kLlIoYyk6bnVsbCx0PWUudShjKSx6PWIuWGMoYyk7eiYmKGg9aC5jb25jYXQoUGYoYSx6LGYsbSx0KSkpfSk7ZiYmKGg9aC5jb25jYXQoZi5hYihiLGUsZCkpKTtyZXR1cm4gaH07ZnVuY3Rpb24gUWYoKXt0aGlzLmNoaWxkcmVuPXt9O3RoaXMubmQ9MDt0aGlzLnZhbHVlPW51bGx9ZnVuY3Rpb24gUmYoYSxiLGMpe3RoaXMuR2Q9YT9hOlwiXCI7dGhpcy5aYz1iP2I6bnVsbDt0aGlzLkE9Yz9jOm5ldyBRZn1mdW5jdGlvbiBTZihhLGIpe2Zvcih2YXIgYz1iIGluc3RhbmNlb2YgTD9iOm5ldyBMKGIpLGQ9YSxlO251bGwhPT0oZT1FKGMpKTspZD1uZXcgUmYoZSxkLHcoZC5BLmNoaWxkcmVuLGUpfHxuZXcgUWYpLGM9SChjKTtyZXR1cm4gZH1nPVJmLnByb3RvdHlwZTtnLkNhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuQS52YWx1ZX07ZnVuY3Rpb24gVGYoYSxiKXtLKFwidW5kZWZpbmVkXCIhPT10eXBlb2YgYixcIkNhbm5vdCBzZXQgdmFsdWUgdG8gdW5kZWZpbmVkXCIpO2EuQS52YWx1ZT1iO1VmKGEpfWcuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLkEudmFsdWU9bnVsbDt0aGlzLkEuY2hpbGRyZW49e307dGhpcy5BLm5kPTA7VWYodGhpcyl9O1xuZy53ZD1mdW5jdGlvbigpe3JldHVybiAwPHRoaXMuQS5uZH07Zy5lPWZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PT10aGlzLkNhKCkmJiF0aGlzLndkKCl9O2cuUD1mdW5jdGlvbihhKXt2YXIgYj10aGlzO3IodGhpcy5BLmNoaWxkcmVuLGZ1bmN0aW9uKGMsZCl7YShuZXcgUmYoZCxiLGMpKX0pfTtmdW5jdGlvbiBWZihhLGIsYyxkKXtjJiYhZCYmYihhKTthLlAoZnVuY3Rpb24oYSl7VmYoYSxiLCEwLGQpfSk7YyYmZCYmYihhKX1mdW5jdGlvbiBXZihhLGIpe2Zvcih2YXIgYz1hLnBhcmVudCgpO251bGwhPT1jJiYhYihjKTspYz1jLnBhcmVudCgpfWcucGF0aD1mdW5jdGlvbigpe3JldHVybiBuZXcgTChudWxsPT09dGhpcy5aYz90aGlzLkdkOnRoaXMuWmMucGF0aCgpK1wiL1wiK3RoaXMuR2QpfTtnLm5hbWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5HZH07Zy5wYXJlbnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5aY307XG5mdW5jdGlvbiBVZihhKXtpZihudWxsIT09YS5aYyl7dmFyIGI9YS5aYyxjPWEuR2QsZD1hLmUoKSxlPXYoYi5BLmNoaWxkcmVuLGMpO2QmJmU/KGRlbGV0ZSBiLkEuY2hpbGRyZW5bY10sYi5BLm5kLS0sVWYoYikpOmR8fGV8fChiLkEuY2hpbGRyZW5bY109YS5BLGIuQS5uZCsrLFVmKGIpKX19O3ZhciBYZj0vW1xcW1xcXS4jJFxcL1xcdTAwMDAtXFx1MDAxRlxcdTAwN0ZdLyxZZj0vW1xcW1xcXS4jJFxcdTAwMDAtXFx1MDAxRlxcdTAwN0ZdLyxaZj0vXlthLXpBLVpdW2EtekEtWi5fXFwtK10rJC87ZnVuY3Rpb24gJGYoYSl7cmV0dXJuIHAoYSkmJjAhPT1hLmxlbmd0aCYmIVhmLnRlc3QoYSl9ZnVuY3Rpb24gYWcoYSl7cmV0dXJuIG51bGw9PT1hfHxwKGEpfHxnYShhKSYmIVFjKGEpfHxpYShhKSYmdihhLFwiLnN2XCIpfWZ1bmN0aW9uIGJnKGEsYixjLGQpe2QmJiFuKGIpfHxjZyh5KGEsMSxkKSxiLGMpfVxuZnVuY3Rpb24gY2coYSxiLGMpe2MgaW5zdGFuY2VvZiBMJiYoYz1uZXcgSmUoYyxhKSk7aWYoIW4oYikpdGhyb3cgRXJyb3IoYStcImNvbnRhaW5zIHVuZGVmaW5lZCBcIitMZShjKSk7aWYoaGEoYikpdGhyb3cgRXJyb3IoYStcImNvbnRhaW5zIGEgZnVuY3Rpb24gXCIrTGUoYykrXCIgd2l0aCBjb250ZW50czogXCIrYi50b1N0cmluZygpKTtpZihRYyhiKSl0aHJvdyBFcnJvcihhK1wiY29udGFpbnMgXCIrYi50b1N0cmluZygpK1wiIFwiK0xlKGMpKTtpZihwKGIpJiZiLmxlbmd0aD4xMDQ4NTc2MC8zJiYxMDQ4NTc2MDxaYyhiKSl0aHJvdyBFcnJvcihhK1wiY29udGFpbnMgYSBzdHJpbmcgZ3JlYXRlciB0aGFuIDEwNDg1NzYwIHV0ZjggYnl0ZXMgXCIrTGUoYykrXCIgKCdcIitiLnN1YnN0cmluZygwLDUwKStcIi4uLicpXCIpO2lmKGlhKGIpKXt2YXIgZD0hMSxlPSExO2liKGIsZnVuY3Rpb24oYixoKXtpZihcIi52YWx1ZVwiPT09YilkPSEwO2Vsc2UgaWYoXCIucHJpb3JpdHlcIiE9PWImJlwiLnN2XCIhPT1iJiYoZT1cbiEwLCEkZihiKSkpdGhyb3cgRXJyb3IoYStcIiBjb250YWlucyBhbiBpbnZhbGlkIGtleSAoXCIrYitcIikgXCIrTGUoYykrJy4gIEtleXMgbXVzdCBiZSBub24tZW1wdHkgc3RyaW5ncyBhbmQgY2FuXFwndCBjb250YWluIFwiLlwiLCBcIiNcIiwgXCIkXCIsIFwiL1wiLCBcIltcIiwgb3IgXCJdXCInKTtjLnB1c2goYik7Y2coYSxoLGMpO2MucG9wKCl9KTtpZihkJiZlKXRocm93IEVycm9yKGErJyBjb250YWlucyBcIi52YWx1ZVwiIGNoaWxkICcrTGUoYykrXCIgaW4gYWRkaXRpb24gdG8gYWN0dWFsIGNoaWxkcmVuLlwiKTt9fVxuZnVuY3Rpb24gZGcoYSxiKXt2YXIgYyxkO2ZvcihjPTA7YzxiLmxlbmd0aDtjKyspe2Q9YltjXTtmb3IodmFyIGU9ZC5zbGljZSgpLGY9MDtmPGUubGVuZ3RoO2YrKylpZigoXCIucHJpb3JpdHlcIiE9PWVbZl18fGYhPT1lLmxlbmd0aC0xKSYmISRmKGVbZl0pKXRocm93IEVycm9yKGErXCJjb250YWlucyBhbiBpbnZhbGlkIGtleSAoXCIrZVtmXStcIikgaW4gcGF0aCBcIitkLnRvU3RyaW5nKCkrJy4gS2V5cyBtdXN0IGJlIG5vbi1lbXB0eSBzdHJpbmdzIGFuZCBjYW5cXCd0IGNvbnRhaW4gXCIuXCIsIFwiI1wiLCBcIiRcIiwgXCIvXCIsIFwiW1wiLCBvciBcIl1cIicpO31iLnNvcnQoSWUpO2U9bnVsbDtmb3IoYz0wO2M8Yi5sZW5ndGg7YysrKXtkPWJbY107aWYobnVsbCE9PWUmJmUuY29udGFpbnMoZCkpdGhyb3cgRXJyb3IoYStcImNvbnRhaW5zIGEgcGF0aCBcIitlLnRvU3RyaW5nKCkrXCIgdGhhdCBpcyBhbmNlc3RvciBvZiBhbm90aGVyIHBhdGggXCIrZC50b1N0cmluZygpKTtlPWR9fVxuZnVuY3Rpb24gZWcoYSxiLGMpe3ZhciBkPXkoYSwxLCExKTtpZighaWEoYil8fGVhKGIpKXRocm93IEVycm9yKGQrXCIgbXVzdCBiZSBhbiBvYmplY3QgY29udGFpbmluZyB0aGUgY2hpbGRyZW4gdG8gcmVwbGFjZS5cIik7dmFyIGU9W107aWIoYixmdW5jdGlvbihhLGIpe3ZhciBrPW5ldyBMKGEpO2NnKGQsYixjLnUoaykpO2lmKFwiLnByaW9yaXR5XCI9PT1MZChrKSYmIWFnKGIpKXRocm93IEVycm9yKGQrXCJjb250YWlucyBhbiBpbnZhbGlkIHZhbHVlIGZvciAnXCIray50b1N0cmluZygpK1wiJywgd2hpY2ggbXVzdCBiZSBhIHZhbGlkIEZpcmViYXNlIHByaW9yaXR5IChhIHN0cmluZywgZmluaXRlIG51bWJlciwgc2VydmVyIHZhbHVlLCBvciBudWxsKS5cIik7ZS5wdXNoKGspfSk7ZGcoZCxlKX1cbmZ1bmN0aW9uIGZnKGEsYixjKXtpZihRYyhjKSl0aHJvdyBFcnJvcih5KGEsYiwhMSkrXCJpcyBcIitjLnRvU3RyaW5nKCkrXCIsIGJ1dCBtdXN0IGJlIGEgdmFsaWQgRmlyZWJhc2UgcHJpb3JpdHkgKGEgc3RyaW5nLCBmaW5pdGUgbnVtYmVyLCBzZXJ2ZXIgdmFsdWUsIG9yIG51bGwpLlwiKTtpZighYWcoYykpdGhyb3cgRXJyb3IoeShhLGIsITEpK1wibXVzdCBiZSBhIHZhbGlkIEZpcmViYXNlIHByaW9yaXR5IChhIHN0cmluZywgZmluaXRlIG51bWJlciwgc2VydmVyIHZhbHVlLCBvciBudWxsKS5cIik7fVxuZnVuY3Rpb24gZ2coYSxiLGMpe2lmKCFjfHxuKGIpKXN3aXRjaChiKXtjYXNlIFwidmFsdWVcIjpjYXNlIFwiY2hpbGRfYWRkZWRcIjpjYXNlIFwiY2hpbGRfcmVtb3ZlZFwiOmNhc2UgXCJjaGlsZF9jaGFuZ2VkXCI6Y2FzZSBcImNoaWxkX21vdmVkXCI6YnJlYWs7ZGVmYXVsdDp0aHJvdyBFcnJvcih5KGEsMSxjKSsnbXVzdCBiZSBhIHZhbGlkIGV2ZW50IHR5cGU6IFwidmFsdWVcIiwgXCJjaGlsZF9hZGRlZFwiLCBcImNoaWxkX3JlbW92ZWRcIiwgXCJjaGlsZF9jaGFuZ2VkXCIsIG9yIFwiY2hpbGRfbW92ZWRcIi4nKTt9fWZ1bmN0aW9uIGhnKGEsYil7aWYobihiKSYmISRmKGIpKXRocm93IEVycm9yKHkoYSwyLCEwKSsnd2FzIGFuIGludmFsaWQga2V5OiBcIicrYisnXCIuICBGaXJlYmFzZSBrZXlzIG11c3QgYmUgbm9uLWVtcHR5IHN0cmluZ3MgYW5kIGNhblxcJ3QgY29udGFpbiBcIi5cIiwgXCIjXCIsIFwiJFwiLCBcIi9cIiwgXCJbXCIsIG9yIFwiXVwiKS4nKTt9XG5mdW5jdGlvbiBpZyhhLGIpe2lmKCFwKGIpfHwwPT09Yi5sZW5ndGh8fFlmLnRlc3QoYikpdGhyb3cgRXJyb3IoeShhLDEsITEpKyd3YXMgYW4gaW52YWxpZCBwYXRoOiBcIicrYisnXCIuIFBhdGhzIG11c3QgYmUgbm9uLWVtcHR5IHN0cmluZ3MgYW5kIGNhblxcJ3QgY29udGFpbiBcIi5cIiwgXCIjXCIsIFwiJFwiLCBcIltcIiwgb3IgXCJdXCInKTt9ZnVuY3Rpb24gamcoYSxiKXtpZihcIi5pbmZvXCI9PT1FKGIpKXRocm93IEVycm9yKGErXCIgZmFpbGVkOiBDYW4ndCBtb2RpZnkgZGF0YSB1bmRlciAvLmluZm8vXCIpO31mdW5jdGlvbiBrZyhhLGIpe2lmKCFwKGIpKXRocm93IEVycm9yKHkoYSwxLCExKStcIm11c3QgYmUgYSB2YWxpZCBjcmVkZW50aWFsIChhIHN0cmluZykuXCIpO31mdW5jdGlvbiBsZyhhLGIsYyl7aWYoIXAoYykpdGhyb3cgRXJyb3IoeShhLGIsITEpK1wibXVzdCBiZSBhIHZhbGlkIHN0cmluZy5cIik7fVxuZnVuY3Rpb24gbWcoYSxiKXtsZyhhLDEsYik7aWYoIVpmLnRlc3QoYikpdGhyb3cgRXJyb3IoeShhLDEsITEpK1wiJ1wiK2IrXCInIGlzIG5vdCBhIHZhbGlkIGF1dGhlbnRpY2F0aW9uIHByb3ZpZGVyLlwiKTt9ZnVuY3Rpb24gbmcoYSxiLGMsZCl7aWYoIWR8fG4oYykpaWYoIWlhKGMpfHxudWxsPT09Yyl0aHJvdyBFcnJvcih5KGEsYixkKStcIm11c3QgYmUgYSB2YWxpZCBvYmplY3QuXCIpO31mdW5jdGlvbiBvZyhhLGIsYyl7aWYoIWlhKGIpfHwhdihiLGMpKXRocm93IEVycm9yKHkoYSwxLCExKSsnbXVzdCBjb250YWluIHRoZSBrZXkgXCInK2MrJ1wiJyk7aWYoIXAodyhiLGMpKSl0aHJvdyBFcnJvcih5KGEsMSwhMSkrJ211c3QgY29udGFpbiB0aGUga2V5IFwiJytjKydcIiB3aXRoIHR5cGUgXCJzdHJpbmdcIicpO307ZnVuY3Rpb24gcGcoKXt0aGlzLnNldD17fX1nPXBnLnByb3RvdHlwZTtnLmFkZD1mdW5jdGlvbihhLGIpe3RoaXMuc2V0W2FdPW51bGwhPT1iP2I6ITB9O2cuY29udGFpbnM9ZnVuY3Rpb24oYSl7cmV0dXJuIHYodGhpcy5zZXQsYSl9O2cuZ2V0PWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmNvbnRhaW5zKGEpP3RoaXMuc2V0W2FdOnZvaWQgMH07Zy5yZW1vdmU9ZnVuY3Rpb24oYSl7ZGVsZXRlIHRoaXMuc2V0W2FdfTtnLmNsZWFyPWZ1bmN0aW9uKCl7dGhpcy5zZXQ9e319O2cuZT1mdW5jdGlvbigpe3JldHVybiB3YSh0aGlzLnNldCl9O2cuY291bnQ9ZnVuY3Rpb24oKXtyZXR1cm4gcGEodGhpcy5zZXQpfTtmdW5jdGlvbiBxZyhhLGIpe3IoYS5zZXQsZnVuY3Rpb24oYSxkKXtiKGQsYSl9KX1nLmtleXM9ZnVuY3Rpb24oKXt2YXIgYT1bXTtyKHRoaXMuc2V0LGZ1bmN0aW9uKGIsYyl7YS5wdXNoKGMpfSk7cmV0dXJuIGF9O2Z1bmN0aW9uIHFjKCl7dGhpcy5tPXRoaXMuQj1udWxsfXFjLnByb3RvdHlwZS5maW5kPWZ1bmN0aW9uKGEpe2lmKG51bGwhPXRoaXMuQilyZXR1cm4gdGhpcy5CLlEoYSk7aWYoYS5lKCl8fG51bGw9PXRoaXMubSlyZXR1cm4gbnVsbDt2YXIgYj1FKGEpO2E9SChhKTtyZXR1cm4gdGhpcy5tLmNvbnRhaW5zKGIpP3RoaXMubS5nZXQoYikuZmluZChhKTpudWxsfTtxYy5wcm90b3R5cGUubmM9ZnVuY3Rpb24oYSxiKXtpZihhLmUoKSl0aGlzLkI9Yix0aGlzLm09bnVsbDtlbHNlIGlmKG51bGwhPT10aGlzLkIpdGhpcy5CPXRoaXMuQi5HKGEsYik7ZWxzZXtudWxsPT10aGlzLm0mJih0aGlzLm09bmV3IHBnKTt2YXIgYz1FKGEpO3RoaXMubS5jb250YWlucyhjKXx8dGhpcy5tLmFkZChjLG5ldyBxYyk7Yz10aGlzLm0uZ2V0KGMpO2E9SChhKTtjLm5jKGEsYil9fTtcbmZ1bmN0aW9uIHJnKGEsYil7aWYoYi5lKCkpcmV0dXJuIGEuQj1udWxsLGEubT1udWxsLCEwO2lmKG51bGwhPT1hLkIpe2lmKGEuQi5LKCkpcmV0dXJuITE7dmFyIGM9YS5CO2EuQj1udWxsO2MuUChOLGZ1bmN0aW9uKGIsYyl7YS5uYyhuZXcgTChiKSxjKX0pO3JldHVybiByZyhhLGIpfXJldHVybiBudWxsIT09YS5tPyhjPUUoYiksYj1IKGIpLGEubS5jb250YWlucyhjKSYmcmcoYS5tLmdldChjKSxiKSYmYS5tLnJlbW92ZShjKSxhLm0uZSgpPyhhLm09bnVsbCwhMCk6ITEpOiEwfWZ1bmN0aW9uIHJjKGEsYixjKXtudWxsIT09YS5CP2MoYixhLkIpOmEuUChmdW5jdGlvbihhLGUpe3ZhciBmPW5ldyBMKGIudG9TdHJpbmcoKStcIi9cIithKTtyYyhlLGYsYyl9KX1xYy5wcm90b3R5cGUuUD1mdW5jdGlvbihhKXtudWxsIT09dGhpcy5tJiZxZyh0aGlzLm0sZnVuY3Rpb24oYixjKXthKGIsYyl9KX07dmFyIHNnPVwiYXV0aC5maXJlYmFzZS5jb21cIjtmdW5jdGlvbiB0ZyhhLGIsYyl7dGhpcy5vZD1hfHx7fTt0aGlzLmVlPWJ8fHt9O3RoaXMuJGE9Y3x8e307dGhpcy5vZC5yZW1lbWJlcnx8KHRoaXMub2QucmVtZW1iZXI9XCJkZWZhdWx0XCIpfXZhciB1Zz1bXCJyZW1lbWJlclwiLFwicmVkaXJlY3RUb1wiXTtmdW5jdGlvbiB2ZyhhKXt2YXIgYj17fSxjPXt9O2liKGF8fHt9LGZ1bmN0aW9uKGEsZSl7MDw9TmEodWcsYSk/YlthXT1lOmNbYV09ZX0pO3JldHVybiBuZXcgdGcoYix7fSxjKX07ZnVuY3Rpb24gd2coYSxiKXt0aGlzLlFlPVtcInNlc3Npb25cIixhLk9kLGEuaGNdLmpvaW4oXCI6XCIpO3RoaXMuYmU9Yn13Zy5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKGEsYil7aWYoIWIpaWYodGhpcy5iZS5sZW5ndGgpYj10aGlzLmJlWzBdO2Vsc2UgdGhyb3cgRXJyb3IoXCJmYi5sb2dpbi5TZXNzaW9uTWFuYWdlciA6IE5vIHN0b3JhZ2Ugb3B0aW9ucyBhdmFpbGFibGUhXCIpO2Iuc2V0KHRoaXMuUWUsYSl9O3dnLnByb3RvdHlwZS5nZXQ9ZnVuY3Rpb24oKXt2YXIgYT1RYSh0aGlzLmJlLHEodGhpcy5xZyx0aGlzKSksYT1QYShhLGZ1bmN0aW9uKGEpe3JldHVybiBudWxsIT09YX0pO1hhKGEsZnVuY3Rpb24oYSxjKXtyZXR1cm4gYWQoYy50b2tlbiktYWQoYS50b2tlbil9KTtyZXR1cm4gMDxhLmxlbmd0aD9hLnNoaWZ0KCk6bnVsbH07d2cucHJvdG90eXBlLnFnPWZ1bmN0aW9uKGEpe3RyeXt2YXIgYj1hLmdldCh0aGlzLlFlKTtpZihiJiZiLnRva2VuKXJldHVybiBifWNhdGNoKGMpe31yZXR1cm4gbnVsbH07XG53Zy5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt2YXIgYT10aGlzO09hKHRoaXMuYmUsZnVuY3Rpb24oYil7Yi5yZW1vdmUoYS5RZSl9KX07ZnVuY3Rpb24geGcoKXtyZXR1cm5cInVuZGVmaW5lZFwiIT09dHlwZW9mIG5hdmlnYXRvciYmXCJzdHJpbmdcIj09PXR5cGVvZiBuYXZpZ2F0b3IudXNlckFnZW50P25hdmlnYXRvci51c2VyQWdlbnQ6XCJcIn1mdW5jdGlvbiB5Zygpe3JldHVyblwidW5kZWZpbmVkXCIhPT10eXBlb2Ygd2luZG93JiYhISh3aW5kb3cuY29yZG92YXx8d2luZG93LnBob25lZ2FwfHx3aW5kb3cuUGhvbmVHYXApJiYvaW9zfGlwaG9uZXxpcG9kfGlwYWR8YW5kcm9pZHxibGFja2JlcnJ5fGllbW9iaWxlL2kudGVzdCh4ZygpKX1mdW5jdGlvbiB6Zygpe3JldHVyblwidW5kZWZpbmVkXCIhPT10eXBlb2YgbG9jYXRpb24mJi9eZmlsZTpcXC8vLnRlc3QobG9jYXRpb24uaHJlZil9XG5mdW5jdGlvbiBBZyhhKXt2YXIgYj14ZygpO2lmKFwiXCI9PT1iKXJldHVybiExO2lmKFwiTWljcm9zb2Z0IEludGVybmV0IEV4cGxvcmVyXCI9PT1uYXZpZ2F0b3IuYXBwTmFtZSl7aWYoKGI9Yi5tYXRjaCgvTVNJRSAoWzAtOV17MSx9W1xcLjAtOV17MCx9KS8pKSYmMTxiLmxlbmd0aClyZXR1cm4gcGFyc2VGbG9hdChiWzFdKT49YX1lbHNlIGlmKC0xPGIuaW5kZXhPZihcIlRyaWRlbnRcIikmJihiPWIubWF0Y2goL3J2OihbMC05XXsyLDJ9W1xcLjAtOV17MCx9KS8pKSYmMTxiLmxlbmd0aClyZXR1cm4gcGFyc2VGbG9hdChiWzFdKT49YTtyZXR1cm4hMX07ZnVuY3Rpb24gQmcoKXt2YXIgYT13aW5kb3cub3BlbmVyLmZyYW1lcyxiO2ZvcihiPWEubGVuZ3RoLTE7MDw9YjtiLS0pdHJ5e2lmKGFbYl0ubG9jYXRpb24ucHJvdG9jb2w9PT13aW5kb3cubG9jYXRpb24ucHJvdG9jb2wmJmFbYl0ubG9jYXRpb24uaG9zdD09PXdpbmRvdy5sb2NhdGlvbi5ob3N0JiZcIl9fd2luY2hhbl9yZWxheV9mcmFtZVwiPT09YVtiXS5uYW1lKXJldHVybiBhW2JdfWNhdGNoKGMpe31yZXR1cm4gbnVsbH1mdW5jdGlvbiBDZyhhLGIsYyl7YS5hdHRhY2hFdmVudD9hLmF0dGFjaEV2ZW50KFwib25cIitiLGMpOmEuYWRkRXZlbnRMaXN0ZW5lciYmYS5hZGRFdmVudExpc3RlbmVyKGIsYywhMSl9ZnVuY3Rpb24gRGcoYSxiLGMpe2EuZGV0YWNoRXZlbnQ/YS5kZXRhY2hFdmVudChcIm9uXCIrYixjKTphLnJlbW92ZUV2ZW50TGlzdGVuZXImJmEucmVtb3ZlRXZlbnRMaXN0ZW5lcihiLGMsITEpfVxuZnVuY3Rpb24gRWcoYSl7L15odHRwcz86XFwvXFwvLy50ZXN0KGEpfHwoYT13aW5kb3cubG9jYXRpb24uaHJlZik7dmFyIGI9L14oaHR0cHM/OlxcL1xcL1tcXC1fYS16QS1aXFwuMC05Ol0rKS8uZXhlYyhhKTtyZXR1cm4gYj9iWzFdOmF9ZnVuY3Rpb24gRmcoYSl7dmFyIGI9XCJcIjt0cnl7YT1hLnJlcGxhY2UoXCIjXCIsXCJcIik7dmFyIGM9bGIoYSk7YyYmdihjLFwiX19maXJlYmFzZV9yZXF1ZXN0X2tleVwiKSYmKGI9dyhjLFwiX19maXJlYmFzZV9yZXF1ZXN0X2tleVwiKSl9Y2F0Y2goZCl7fXJldHVybiBifWZ1bmN0aW9uIEdnKCl7dmFyIGE9UGMoc2cpO3JldHVybiBhLnNjaGVtZStcIjovL1wiK2EuaG9zdCtcIi92MlwifWZ1bmN0aW9uIEhnKGEpe3JldHVybiBHZygpK1wiL1wiK2ErXCIvYXV0aC9jaGFubmVsXCJ9O2Z1bmN0aW9uIElnKGEpe3ZhciBiPXRoaXM7dGhpcy5BYz1hO3RoaXMuY2U9XCIqXCI7QWcoOCk/dGhpcy5SYz10aGlzLnpkPUJnKCk6KHRoaXMuUmM9d2luZG93Lm9wZW5lcix0aGlzLnpkPXdpbmRvdyk7aWYoIWIuUmMpdGhyb3dcIlVuYWJsZSB0byBmaW5kIHJlbGF5IGZyYW1lXCI7Q2codGhpcy56ZCxcIm1lc3NhZ2VcIixxKHRoaXMuamMsdGhpcykpO0NnKHRoaXMuemQsXCJtZXNzYWdlXCIscSh0aGlzLkJmLHRoaXMpKTt0cnl7SmcodGhpcyx7YTpcInJlYWR5XCJ9KX1jYXRjaChjKXtDZyh0aGlzLlJjLFwibG9hZFwiLGZ1bmN0aW9uKCl7SmcoYix7YTpcInJlYWR5XCJ9KX0pfUNnKHdpbmRvdyxcInVubG9hZFwiLHEodGhpcy5CZyx0aGlzKSl9ZnVuY3Rpb24gSmcoYSxiKXtiPUIoYik7QWcoOCk/YS5SYy5kb1Bvc3QoYixhLmNlKTphLlJjLnBvc3RNZXNzYWdlKGIsYS5jZSl9XG5JZy5wcm90b3R5cGUuamM9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcyxjO3RyeXtjPW5iKGEuZGF0YSl9Y2F0Y2goZCl7fWMmJlwicmVxdWVzdFwiPT09Yy5hJiYoRGcod2luZG93LFwibWVzc2FnZVwiLHRoaXMuamMpLHRoaXMuY2U9YS5vcmlnaW4sdGhpcy5BYyYmc2V0VGltZW91dChmdW5jdGlvbigpe2IuQWMoYi5jZSxjLmQsZnVuY3Rpb24oYSxjKXtiLmRnPSFjO2IuQWM9dm9pZCAwO0pnKGIse2E6XCJyZXNwb25zZVwiLGQ6YSxmb3JjZUtlZXBXaW5kb3dPcGVuOmN9KX0pfSwwKSl9O0lnLnByb3RvdHlwZS5CZz1mdW5jdGlvbigpe3RyeXtEZyh0aGlzLnpkLFwibWVzc2FnZVwiLHRoaXMuQmYpfWNhdGNoKGEpe310aGlzLkFjJiYoSmcodGhpcyx7YTpcImVycm9yXCIsZDpcInVua25vd24gY2xvc2VkIHdpbmRvd1wifSksdGhpcy5BYz12b2lkIDApO3RyeXt3aW5kb3cuY2xvc2UoKX1jYXRjaChiKXt9fTtJZy5wcm90b3R5cGUuQmY9ZnVuY3Rpb24oYSl7aWYodGhpcy5kZyYmXCJkaWVcIj09PWEuZGF0YSl0cnl7d2luZG93LmNsb3NlKCl9Y2F0Y2goYil7fX07ZnVuY3Rpb24gS2coYSl7dGhpcy5wYz1HYSgpK0dhKCkrR2EoKTt0aGlzLkVmPWF9S2cucHJvdG90eXBlLm9wZW49ZnVuY3Rpb24oYSxiKXt5Yy5zZXQoXCJyZWRpcmVjdF9yZXF1ZXN0X2lkXCIsdGhpcy5wYyk7eWMuc2V0KFwicmVkaXJlY3RfcmVxdWVzdF9pZFwiLHRoaXMucGMpO2IucmVxdWVzdElkPXRoaXMucGM7Yi5yZWRpcmVjdFRvPWIucmVkaXJlY3RUb3x8d2luZG93LmxvY2F0aW9uLmhyZWY7YSs9KC9cXD8vLnRlc3QoYSk/XCJcIjpcIj9cIikra2IoYik7d2luZG93LmxvY2F0aW9uPWF9O0tnLmlzQXZhaWxhYmxlPWZ1bmN0aW9uKCl7cmV0dXJuIXpnKCkmJiF5ZygpfTtLZy5wcm90b3R5cGUuQ2M9ZnVuY3Rpb24oKXtyZXR1cm5cInJlZGlyZWN0XCJ9O3ZhciBMZz17TkVUV09SS19FUlJPUjpcIlVuYWJsZSB0byBjb250YWN0IHRoZSBGaXJlYmFzZSBzZXJ2ZXIuXCIsU0VSVkVSX0VSUk9SOlwiQW4gdW5rbm93biBzZXJ2ZXIgZXJyb3Igb2NjdXJyZWQuXCIsVFJBTlNQT1JUX1VOQVZBSUxBQkxFOlwiVGhlcmUgYXJlIG5vIGxvZ2luIHRyYW5zcG9ydHMgYXZhaWxhYmxlIGZvciB0aGUgcmVxdWVzdGVkIG1ldGhvZC5cIixSRVFVRVNUX0lOVEVSUlVQVEVEOlwiVGhlIGJyb3dzZXIgcmVkaXJlY3RlZCB0aGUgcGFnZSBiZWZvcmUgdGhlIGxvZ2luIHJlcXVlc3QgY291bGQgY29tcGxldGUuXCIsVVNFUl9DQU5DRUxMRUQ6XCJUaGUgdXNlciBjYW5jZWxsZWQgYXV0aGVudGljYXRpb24uXCJ9O2Z1bmN0aW9uIE1nKGEpe3ZhciBiPUVycm9yKHcoTGcsYSksYSk7Yi5jb2RlPWE7cmV0dXJuIGJ9O2Z1bmN0aW9uIE5nKGEpe3ZhciBiOyhiPSFhLndpbmRvd19mZWF0dXJlcyl8fChiPXhnKCksYj0tMSE9PWIuaW5kZXhPZihcIkZlbm5lYy9cIil8fC0xIT09Yi5pbmRleE9mKFwiRmlyZWZveC9cIikmJi0xIT09Yi5pbmRleE9mKFwiQW5kcm9pZFwiKSk7YiYmKGEud2luZG93X2ZlYXR1cmVzPXZvaWQgMCk7YS53aW5kb3dfbmFtZXx8KGEud2luZG93X25hbWU9XCJfYmxhbmtcIik7dGhpcy5vcHRpb25zPWF9XG5OZy5wcm90b3R5cGUub3Blbj1mdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZChhKXtoJiYoZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChoKSxoPXZvaWQgMCk7dCYmKHQ9Y2xlYXJJbnRlcnZhbCh0KSk7RGcod2luZG93LFwibWVzc2FnZVwiLGUpO0RnKHdpbmRvdyxcInVubG9hZFwiLGQpO2lmKG0mJiFhKXRyeXttLmNsb3NlKCl9Y2F0Y2goYil7ay5wb3N0TWVzc2FnZShcImRpZVwiLGwpfW09az12b2lkIDB9ZnVuY3Rpb24gZShhKXtpZihhLm9yaWdpbj09PWwpdHJ5e3ZhciBiPW5iKGEuZGF0YSk7XCJyZWFkeVwiPT09Yi5hP2sucG9zdE1lc3NhZ2UoeixsKTpcImVycm9yXCI9PT1iLmE/KGQoITEpLGMmJihjKGIuZCksYz1udWxsKSk6XCJyZXNwb25zZVwiPT09Yi5hJiYoZChiLmZvcmNlS2VlcFdpbmRvd09wZW4pLGMmJihjKG51bGwsYi5kKSxjPW51bGwpKX1jYXRjaChlKXt9fXZhciBmPUFnKDgpLGgsaztpZighdGhpcy5vcHRpb25zLnJlbGF5X3VybClyZXR1cm4gYyhFcnJvcihcImludmFsaWQgYXJndW1lbnRzOiBvcmlnaW4gb2YgdXJsIGFuZCByZWxheV91cmwgbXVzdCBtYXRjaFwiKSk7XG52YXIgbD1FZyhhKTtpZihsIT09RWcodGhpcy5vcHRpb25zLnJlbGF5X3VybCkpYyYmc2V0VGltZW91dChmdW5jdGlvbigpe2MoRXJyb3IoXCJpbnZhbGlkIGFyZ3VtZW50czogb3JpZ2luIG9mIHVybCBhbmQgcmVsYXlfdXJsIG11c3QgbWF0Y2hcIikpfSwwKTtlbHNle2YmJihoPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpZnJhbWVcIiksaC5zZXRBdHRyaWJ1dGUoXCJzcmNcIix0aGlzLm9wdGlvbnMucmVsYXlfdXJsKSxoLnN0eWxlLmRpc3BsYXk9XCJub25lXCIsaC5zZXRBdHRyaWJ1dGUoXCJuYW1lXCIsXCJfX3dpbmNoYW5fcmVsYXlfZnJhbWVcIiksZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChoKSxrPWguY29udGVudFdpbmRvdyk7YSs9KC9cXD8vLnRlc3QoYSk/XCJcIjpcIj9cIikra2IoYik7dmFyIG09d2luZG93Lm9wZW4oYSx0aGlzLm9wdGlvbnMud2luZG93X25hbWUsdGhpcy5vcHRpb25zLndpbmRvd19mZWF0dXJlcyk7a3x8KGs9bSk7dmFyIHQ9c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXttJiZtLmNsb3NlZCYmXG4oZCghMSksYyYmKGMoTWcoXCJVU0VSX0NBTkNFTExFRFwiKSksYz1udWxsKSl9LDUwMCksej1CKHthOlwicmVxdWVzdFwiLGQ6Yn0pO0NnKHdpbmRvdyxcInVubG9hZFwiLGQpO0NnKHdpbmRvdyxcIm1lc3NhZ2VcIixlKX19O1xuTmcuaXNBdmFpbGFibGU9ZnVuY3Rpb24oKXt2YXIgYTtpZihhPVwicG9zdE1lc3NhZ2VcImluIHdpbmRvdyYmIXpnKCkpKGE9eWcoKXx8XCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBuYXZpZ2F0b3ImJighIXhnKCkubWF0Y2goL1dpbmRvd3MgUGhvbmUvKXx8ISF3aW5kb3cuV2luZG93cyYmL15tcy1hcHB4Oi8udGVzdChsb2NhdGlvbi5ocmVmKSkpfHwoYT14ZygpLGE9XCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBuYXZpZ2F0b3ImJlwidW5kZWZpbmVkXCIhPT10eXBlb2Ygd2luZG93JiYhIShhLm1hdGNoKC8oaVBob25lfGlQb2R8aVBhZCkuKkFwcGxlV2ViS2l0KD8hLipTYWZhcmkpL2kpfHxhLm1hdGNoKC9DcmlPUy8pfHxhLm1hdGNoKC9Ud2l0dGVyIGZvciBpUGhvbmUvKXx8YS5tYXRjaCgvRkJBTlxcL0ZCSU9TLyl8fHdpbmRvdy5uYXZpZ2F0b3Iuc3RhbmRhbG9uZSkpLGE9IWE7cmV0dXJuIGEmJiF4ZygpLm1hdGNoKC9QaGFudG9tSlMvKX07TmcucHJvdG90eXBlLkNjPWZ1bmN0aW9uKCl7cmV0dXJuXCJwb3B1cFwifTtmdW5jdGlvbiBPZyhhKXthLm1ldGhvZHx8KGEubWV0aG9kPVwiR0VUXCIpO2EuaGVhZGVyc3x8KGEuaGVhZGVycz17fSk7YS5oZWFkZXJzLmNvbnRlbnRfdHlwZXx8KGEuaGVhZGVycy5jb250ZW50X3R5cGU9XCJhcHBsaWNhdGlvbi9qc29uXCIpO2EuaGVhZGVycy5jb250ZW50X3R5cGU9YS5oZWFkZXJzLmNvbnRlbnRfdHlwZS50b0xvd2VyQ2FzZSgpO3RoaXMub3B0aW9ucz1hfVxuT2cucHJvdG90eXBlLm9wZW49ZnVuY3Rpb24oYSxiLGMpe2Z1bmN0aW9uIGQoKXtjJiYoYyhNZyhcIlJFUVVFU1RfSU5URVJSVVBURURcIikpLGM9bnVsbCl9dmFyIGU9bmV3IFhNTEh0dHBSZXF1ZXN0LGY9dGhpcy5vcHRpb25zLm1ldGhvZC50b1VwcGVyQ2FzZSgpLGg7Q2cod2luZG93LFwiYmVmb3JldW5sb2FkXCIsZCk7ZS5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXtpZihjJiY0PT09ZS5yZWFkeVN0YXRlKXt2YXIgYTtpZigyMDA8PWUuc3RhdHVzJiYzMDA+ZS5zdGF0dXMpe3RyeXthPW5iKGUucmVzcG9uc2VUZXh0KX1jYXRjaChiKXt9YyhudWxsLGEpfWVsc2UgNTAwPD1lLnN0YXR1cyYmNjAwPmUuc3RhdHVzP2MoTWcoXCJTRVJWRVJfRVJST1JcIikpOmMoTWcoXCJORVRXT1JLX0VSUk9SXCIpKTtjPW51bGw7RGcod2luZG93LFwiYmVmb3JldW5sb2FkXCIsZCl9fTtpZihcIkdFVFwiPT09ZilhKz0oL1xcPy8udGVzdChhKT9cIlwiOlwiP1wiKStrYihiKSxoPW51bGw7ZWxzZXt2YXIgaz10aGlzLm9wdGlvbnMuaGVhZGVycy5jb250ZW50X3R5cGU7XG5cImFwcGxpY2F0aW9uL2pzb25cIj09PWsmJihoPUIoYikpO1wiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCI9PT1rJiYoaD1rYihiKSl9ZS5vcGVuKGYsYSwhMCk7YT17XCJYLVJlcXVlc3RlZC1XaXRoXCI6XCJYTUxIdHRwUmVxdWVzdFwiLEFjY2VwdDpcImFwcGxpY2F0aW9uL2pzb247dGV4dC9wbGFpblwifTt6YShhLHRoaXMub3B0aW9ucy5oZWFkZXJzKTtmb3IodmFyIGwgaW4gYSllLnNldFJlcXVlc3RIZWFkZXIobCxhW2xdKTtlLnNlbmQoaCl9O09nLmlzQXZhaWxhYmxlPWZ1bmN0aW9uKCl7dmFyIGE7aWYoYT0hIXdpbmRvdy5YTUxIdHRwUmVxdWVzdClhPXhnKCksYT0hKGEubWF0Y2goL01TSUUvKXx8YS5tYXRjaCgvVHJpZGVudC8pKXx8QWcoMTApO3JldHVybiBhfTtPZy5wcm90b3R5cGUuQ2M9ZnVuY3Rpb24oKXtyZXR1cm5cImpzb25cIn07ZnVuY3Rpb24gUGcoYSl7dGhpcy5wYz1HYSgpK0dhKCkrR2EoKTt0aGlzLkVmPWF9XG5QZy5wcm90b3R5cGUub3Blbj1mdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZCgpe2MmJihjKE1nKFwiVVNFUl9DQU5DRUxMRURcIikpLGM9bnVsbCl9dmFyIGU9dGhpcyxmPVBjKHNnKSxoO2IucmVxdWVzdElkPXRoaXMucGM7Yi5yZWRpcmVjdFRvPWYuc2NoZW1lK1wiOi8vXCIrZi5ob3N0K1wiL2JsYW5rL3BhZ2UuaHRtbFwiO2ErPS9cXD8vLnRlc3QoYSk/XCJcIjpcIj9cIjthKz1rYihiKTsoaD13aW5kb3cub3BlbihhLFwiX2JsYW5rXCIsXCJsb2NhdGlvbj1ub1wiKSkmJmhhKGguYWRkRXZlbnRMaXN0ZW5lcik/KGguYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRzdGFydFwiLGZ1bmN0aW9uKGEpe3ZhciBiO2lmKGI9YSYmYS51cmwpYTp7dHJ5e3ZhciBtPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO20uaHJlZj1hLnVybDtiPW0uaG9zdD09PWYuaG9zdCYmXCIvYmxhbmsvcGFnZS5odG1sXCI9PT1tLnBhdGhuYW1lO2JyZWFrIGF9Y2F0Y2godCl7fWI9ITF9YiYmKGE9RmcoYS51cmwpLGgucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImV4aXRcIixcbmQpLGguY2xvc2UoKSxhPW5ldyB0ZyhudWxsLG51bGwse3JlcXVlc3RJZDplLnBjLHJlcXVlc3RLZXk6YX0pLGUuRWYucmVxdWVzdFdpdGhDcmVkZW50aWFsKFwiL2F1dGgvc2Vzc2lvblwiLGEsYyksYz1udWxsKX0pLGguYWRkRXZlbnRMaXN0ZW5lcihcImV4aXRcIixkKSk6YyhNZyhcIlRSQU5TUE9SVF9VTkFWQUlMQUJMRVwiKSl9O1BnLmlzQXZhaWxhYmxlPWZ1bmN0aW9uKCl7cmV0dXJuIHlnKCl9O1BnLnByb3RvdHlwZS5DYz1mdW5jdGlvbigpe3JldHVyblwicmVkaXJlY3RcIn07ZnVuY3Rpb24gUWcoYSl7YS5jYWxsYmFja19wYXJhbWV0ZXJ8fChhLmNhbGxiYWNrX3BhcmFtZXRlcj1cImNhbGxiYWNrXCIpO3RoaXMub3B0aW9ucz1hO3dpbmRvdy5fX2ZpcmViYXNlX2F1dGhfanNvbnA9d2luZG93Ll9fZmlyZWJhc2VfYXV0aF9qc29ucHx8e319XG5RZy5wcm90b3R5cGUub3Blbj1mdW5jdGlvbihhLGIsYyl7ZnVuY3Rpb24gZCgpe2MmJihjKE1nKFwiUkVRVUVTVF9JTlRFUlJVUFRFRFwiKSksYz1udWxsKX1mdW5jdGlvbiBlKCl7c2V0VGltZW91dChmdW5jdGlvbigpe3dpbmRvdy5fX2ZpcmViYXNlX2F1dGhfanNvbnBbZl09dm9pZCAwO3dhKHdpbmRvdy5fX2ZpcmViYXNlX2F1dGhfanNvbnApJiYod2luZG93Ll9fZmlyZWJhc2VfYXV0aF9qc29ucD12b2lkIDApO3RyeXt2YXIgYT1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChmKTthJiZhLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYSl9Y2F0Y2goYil7fX0sMSk7RGcod2luZG93LFwiYmVmb3JldW5sb2FkXCIsZCl9dmFyIGY9XCJmblwiKyhuZXcgRGF0ZSkuZ2V0VGltZSgpK01hdGguZmxvb3IoOTk5OTkqTWF0aC5yYW5kb20oKSk7Ylt0aGlzLm9wdGlvbnMuY2FsbGJhY2tfcGFyYW1ldGVyXT1cIl9fZmlyZWJhc2VfYXV0aF9qc29ucC5cIitmO2ErPSgvXFw/Ly50ZXN0KGEpP1wiXCI6XCI/XCIpK2tiKGIpO1xuQ2cod2luZG93LFwiYmVmb3JldW5sb2FkXCIsZCk7d2luZG93Ll9fZmlyZWJhc2VfYXV0aF9qc29ucFtmXT1mdW5jdGlvbihhKXtjJiYoYyhudWxsLGEpLGM9bnVsbCk7ZSgpfTtSZyhmLGEsYyl9O1xuZnVuY3Rpb24gUmcoYSxiLGMpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXt0cnl7dmFyIGQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtkLnR5cGU9XCJ0ZXh0L2phdmFzY3JpcHRcIjtkLmlkPWE7ZC5hc3luYz0hMDtkLnNyYz1iO2Qub25lcnJvcj1mdW5jdGlvbigpe3ZhciBiPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGEpO251bGwhPT1iJiZiLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYik7YyYmYyhNZyhcIk5FVFdPUktfRVJST1JcIikpfTt2YXIgZT1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIik7KGUmJjAhPWUubGVuZ3RoP2VbMF06ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KS5hcHBlbmRDaGlsZChkKX1jYXRjaChmKXtjJiZjKE1nKFwiTkVUV09SS19FUlJPUlwiKSl9fSwwKX1RZy5pc0F2YWlsYWJsZT1mdW5jdGlvbigpe3JldHVyblwidW5kZWZpbmVkXCIhPT10eXBlb2YgZG9jdW1lbnQmJm51bGwhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnR9O1xuUWcucHJvdG90eXBlLkNjPWZ1bmN0aW9uKCl7cmV0dXJuXCJqc29uXCJ9O2Z1bmN0aW9uIFNnKGEsYixjLGQpe0RlLmNhbGwodGhpcyxbXCJhdXRoX3N0YXR1c1wiXSk7dGhpcy5GPWE7dGhpcy5kZj1iO3RoaXMuVmc9Yzt0aGlzLkxlPWQ7dGhpcy5zYz1uZXcgd2coYSxbeGMseWNdKTt0aGlzLm1iPW51bGw7dGhpcy5TZT0hMTtUZyh0aGlzKX1tYShTZyxEZSk7Zz1TZy5wcm90b3R5cGU7Zy54ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm1ifHxudWxsfTtmdW5jdGlvbiBUZyhhKXt5Yy5nZXQoXCJyZWRpcmVjdF9yZXF1ZXN0X2lkXCIpJiZVZyhhKTt2YXIgYj1hLnNjLmdldCgpO2ImJmIudG9rZW4/KFZnKGEsYiksYS5kZihiLnRva2VuLGZ1bmN0aW9uKGMsZCl7V2coYSxjLGQsITEsYi50b2tlbixiKX0sZnVuY3Rpb24oYixkKXtYZyhhLFwicmVzdW1lU2Vzc2lvbigpXCIsYixkKX0pKTpWZyhhLG51bGwpfVxuZnVuY3Rpb24gWWcoYSxiLGMsZCxlLGYpe1wiZmlyZWJhc2Vpby1kZW1vLmNvbVwiPT09YS5GLmRvbWFpbiYmTyhcIkZpcmViYXNlIGF1dGhlbnRpY2F0aW9uIGlzIG5vdCBzdXBwb3J0ZWQgb24gZGVtbyBGaXJlYmFzZXMgKCouZmlyZWJhc2Vpby1kZW1vLmNvbSkuIFRvIHNlY3VyZSB5b3VyIEZpcmViYXNlLCBjcmVhdGUgYSBwcm9kdWN0aW9uIEZpcmViYXNlIGF0IGh0dHBzOi8vd3d3LmZpcmViYXNlLmNvbS5cIik7YS5kZihiLGZ1bmN0aW9uKGYsayl7V2coYSxmLGssITAsYixjLGR8fHt9LGUpfSxmdW5jdGlvbihiLGMpe1hnKGEsXCJhdXRoKClcIixiLGMsZil9KX1mdW5jdGlvbiBaZyhhLGIpe2Euc2MuY2xlYXIoKTtWZyhhLG51bGwpO2EuVmcoZnVuY3Rpb24oYSxkKXtpZihcIm9rXCI9PT1hKVAoYixudWxsKTtlbHNle3ZhciBlPShhfHxcImVycm9yXCIpLnRvVXBwZXJDYXNlKCksZj1lO2QmJihmKz1cIjogXCIrZCk7Zj1FcnJvcihmKTtmLmNvZGU9ZTtQKGIsZil9fSl9XG5mdW5jdGlvbiBXZyhhLGIsYyxkLGUsZixoLGspe1wib2tcIj09PWI/KGQmJihiPWMuYXV0aCxmLmF1dGg9YixmLmV4cGlyZXM9Yy5leHBpcmVzLGYudG9rZW49YmQoZSk/ZTpcIlwiLGM9bnVsbCxiJiZ2KGIsXCJ1aWRcIik/Yz13KGIsXCJ1aWRcIik6dihmLFwidWlkXCIpJiYoYz13KGYsXCJ1aWRcIikpLGYudWlkPWMsYz1cImN1c3RvbVwiLGImJnYoYixcInByb3ZpZGVyXCIpP2M9dyhiLFwicHJvdmlkZXJcIik6dihmLFwicHJvdmlkZXJcIikmJihjPXcoZixcInByb3ZpZGVyXCIpKSxmLnByb3ZpZGVyPWMsYS5zYy5jbGVhcigpLGJkKGUpJiYoaD1ofHx7fSxjPXhjLFwic2Vzc2lvbk9ubHlcIj09PWgucmVtZW1iZXImJihjPXljKSxcIm5vbmVcIiE9PWgucmVtZW1iZXImJmEuc2Muc2V0KGYsYykpLFZnKGEsZikpLFAoayxudWxsLGYpKTooYS5zYy5jbGVhcigpLFZnKGEsbnVsbCksZj1hPShifHxcImVycm9yXCIpLnRvVXBwZXJDYXNlKCksYyYmKGYrPVwiOiBcIitjKSxmPUVycm9yKGYpLGYuY29kZT1hLFAoayxmKSl9XG5mdW5jdGlvbiBYZyhhLGIsYyxkLGUpe08oYitcIiB3YXMgY2FuY2VsZWQ6IFwiK2QpO2Euc2MuY2xlYXIoKTtWZyhhLG51bGwpO2E9RXJyb3IoZCk7YS5jb2RlPWMudG9VcHBlckNhc2UoKTtQKGUsYSl9ZnVuY3Rpb24gJGcoYSxiLGMsZCxlKXthaChhKTtjPW5ldyB0ZyhkfHx7fSx7fSxjfHx7fSk7YmgoYSxbT2csUWddLFwiL2F1dGgvXCIrYixjLGUpfVxuZnVuY3Rpb24gY2goYSxiLGMsZCl7YWgoYSk7dmFyIGU9W05nLFBnXTtjPXZnKGMpO1wiYW5vbnltb3VzXCI9PT1ifHxcInBhc3N3b3JkXCI9PT1iP3NldFRpbWVvdXQoZnVuY3Rpb24oKXtQKGQsTWcoXCJUUkFOU1BPUlRfVU5BVkFJTEFCTEVcIikpfSwwKTooYy5lZS53aW5kb3dfZmVhdHVyZXM9XCJtZW51YmFyPXllcyxtb2RhbD15ZXMsYWx3YXlzUmFpc2VkPXllc2xvY2F0aW9uPXllcyxyZXNpemFibGU9eWVzLHNjcm9sbGJhcnM9eWVzLHN0YXR1cz15ZXMsaGVpZ2h0PTYyNSx3aWR0aD02MjUsdG9wPVwiKyhcIm9iamVjdFwiPT09dHlwZW9mIHNjcmVlbj8uNSooc2NyZWVuLmhlaWdodC02MjUpOjApK1wiLGxlZnQ9XCIrKFwib2JqZWN0XCI9PT10eXBlb2Ygc2NyZWVuPy41KihzY3JlZW4ud2lkdGgtNjI1KTowKSxjLmVlLnJlbGF5X3VybD1IZyhhLkYuaGMpLGMuZWUucmVxdWVzdFdpdGhDcmVkZW50aWFsPXEoYS5xYyxhKSxiaChhLGUsXCIvYXV0aC9cIitiLGMsZCkpfVxuZnVuY3Rpb24gVWcoYSl7dmFyIGI9eWMuZ2V0KFwicmVkaXJlY3RfcmVxdWVzdF9pZFwiKTtpZihiKXt2YXIgYz15Yy5nZXQoXCJyZWRpcmVjdF9jbGllbnRfb3B0aW9uc1wiKTt5Yy5yZW1vdmUoXCJyZWRpcmVjdF9yZXF1ZXN0X2lkXCIpO3ljLnJlbW92ZShcInJlZGlyZWN0X2NsaWVudF9vcHRpb25zXCIpO3ZhciBkPVtPZyxRZ10sYj17cmVxdWVzdElkOmIscmVxdWVzdEtleTpGZyhkb2N1bWVudC5sb2NhdGlvbi5oYXNoKX0sYz1uZXcgdGcoYyx7fSxiKTthLlNlPSEwO3RyeXtkb2N1bWVudC5sb2NhdGlvbi5oYXNoPWRvY3VtZW50LmxvY2F0aW9uLmhhc2gucmVwbGFjZSgvJl9fZmlyZWJhc2VfcmVxdWVzdF9rZXk9KFthLXpBLXowLTldKikvLFwiXCIpfWNhdGNoKGUpe31iaChhLGQsXCIvYXV0aC9zZXNzaW9uXCIsYyxmdW5jdGlvbigpe3RoaXMuU2U9ITF9LmJpbmQoYSkpfX1cbmcuc2U9ZnVuY3Rpb24oYSxiKXthaCh0aGlzKTt2YXIgYz12ZyhhKTtjLiRhLl9tZXRob2Q9XCJQT1NUXCI7dGhpcy5xYyhcIi91c2Vyc1wiLGMsZnVuY3Rpb24oYSxjKXthP1AoYixhKTpQKGIsYSxjKX0pfTtnLlRlPWZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpczthaCh0aGlzKTt2YXIgZD1cIi91c2Vycy9cIitlbmNvZGVVUklDb21wb25lbnQoYS5lbWFpbCksZT12ZyhhKTtlLiRhLl9tZXRob2Q9XCJERUxFVEVcIjt0aGlzLnFjKGQsZSxmdW5jdGlvbihhLGQpeyFhJiZkJiZkLnVpZCYmYy5tYiYmYy5tYi51aWQmJmMubWIudWlkPT09ZC51aWQmJlpnKGMpO1AoYixhKX0pfTtnLnBlPWZ1bmN0aW9uKGEsYil7YWgodGhpcyk7dmFyIGM9XCIvdXNlcnMvXCIrZW5jb2RlVVJJQ29tcG9uZW50KGEuZW1haWwpK1wiL3Bhc3N3b3JkXCIsZD12ZyhhKTtkLiRhLl9tZXRob2Q9XCJQVVRcIjtkLiRhLnBhc3N3b3JkPWEubmV3UGFzc3dvcmQ7dGhpcy5xYyhjLGQsZnVuY3Rpb24oYSl7UChiLGEpfSl9O1xuZy5vZT1mdW5jdGlvbihhLGIpe2FoKHRoaXMpO3ZhciBjPVwiL3VzZXJzL1wiK2VuY29kZVVSSUNvbXBvbmVudChhLm9sZEVtYWlsKStcIi9lbWFpbFwiLGQ9dmcoYSk7ZC4kYS5fbWV0aG9kPVwiUFVUXCI7ZC4kYS5lbWFpbD1hLm5ld0VtYWlsO2QuJGEucGFzc3dvcmQ9YS5wYXNzd29yZDt0aGlzLnFjKGMsZCxmdW5jdGlvbihhKXtQKGIsYSl9KX07Zy5WZT1mdW5jdGlvbihhLGIpe2FoKHRoaXMpO3ZhciBjPVwiL3VzZXJzL1wiK2VuY29kZVVSSUNvbXBvbmVudChhLmVtYWlsKStcIi9wYXNzd29yZFwiLGQ9dmcoYSk7ZC4kYS5fbWV0aG9kPVwiUE9TVFwiO3RoaXMucWMoYyxkLGZ1bmN0aW9uKGEpe1AoYixhKX0pfTtnLnFjPWZ1bmN0aW9uKGEsYixjKXtkaCh0aGlzLFtPZyxRZ10sYSxiLGMpfTtcbmZ1bmN0aW9uIGJoKGEsYixjLGQsZSl7ZGgoYSxiLGMsZCxmdW5jdGlvbihiLGMpeyFiJiZjJiZjLnRva2VuJiZjLnVpZD9ZZyhhLGMudG9rZW4sYyxkLm9kLGZ1bmN0aW9uKGEsYil7YT9QKGUsYSk6UChlLG51bGwsYil9KTpQKGUsYnx8TWcoXCJVTktOT1dOX0VSUk9SXCIpKX0pfVxuZnVuY3Rpb24gZGgoYSxiLGMsZCxlKXtiPVBhKGIsZnVuY3Rpb24oYSl7cmV0dXJuXCJmdW5jdGlvblwiPT09dHlwZW9mIGEuaXNBdmFpbGFibGUmJmEuaXNBdmFpbGFibGUoKX0pOzA9PT1iLmxlbmd0aD9zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7UChlLE1nKFwiVFJBTlNQT1JUX1VOQVZBSUxBQkxFXCIpKX0sMCk6KGI9bmV3IChiLnNoaWZ0KCkpKGQuZWUpLGQ9amIoZC4kYSksZC52PVwianMtXCIraGIsZC50cmFuc3BvcnQ9Yi5DYygpLGQuc3VwcHJlc3Nfc3RhdHVzX2NvZGVzPSEwLGE9R2coKStcIi9cIithLkYuaGMrYyxiLm9wZW4oYSxkLGZ1bmN0aW9uKGEsYil7aWYoYSlQKGUsYSk7ZWxzZSBpZihiJiZiLmVycm9yKXt2YXIgYz1FcnJvcihiLmVycm9yLm1lc3NhZ2UpO2MuY29kZT1iLmVycm9yLmNvZGU7Yy5kZXRhaWxzPWIuZXJyb3IuZGV0YWlscztQKGUsYyl9ZWxzZSBQKGUsbnVsbCxiKX0pKX1cbmZ1bmN0aW9uIFZnKGEsYil7dmFyIGM9bnVsbCE9PWEubWJ8fG51bGwhPT1iO2EubWI9YjtjJiZhLmZlKFwiYXV0aF9zdGF0dXNcIixiKTthLkxlKG51bGwhPT1iKX1nLkFlPWZ1bmN0aW9uKGEpe0soXCJhdXRoX3N0YXR1c1wiPT09YSwnaW5pdGlhbCBldmVudCBtdXN0IGJlIG9mIHR5cGUgXCJhdXRoX3N0YXR1c1wiJyk7cmV0dXJuIHRoaXMuU2U/bnVsbDpbdGhpcy5tYl19O2Z1bmN0aW9uIGFoKGEpe3ZhciBiPWEuRjtpZihcImZpcmViYXNlaW8uY29tXCIhPT1iLmRvbWFpbiYmXCJmaXJlYmFzZWlvLWRlbW8uY29tXCIhPT1iLmRvbWFpbiYmXCJhdXRoLmZpcmViYXNlLmNvbVwiPT09c2cpdGhyb3cgRXJyb3IoXCJUaGlzIGN1c3RvbSBGaXJlYmFzZSBzZXJ2ZXIgKCdcIithLkYuZG9tYWluK1wiJykgZG9lcyBub3Qgc3VwcG9ydCBkZWxlZ2F0ZWQgbG9naW4uXCIpO307dmFyIENjPVwid2Vic29ja2V0XCIsRGM9XCJsb25nX3BvbGxpbmdcIjtmdW5jdGlvbiBlaChhKXt0aGlzLmpjPWE7dGhpcy5OZD1bXTt0aGlzLlNiPTA7dGhpcy5xZT0tMTt0aGlzLkZiPW51bGx9ZnVuY3Rpb24gZmgoYSxiLGMpe2EucWU9YjthLkZiPWM7YS5xZTxhLlNiJiYoYS5GYigpLGEuRmI9bnVsbCl9ZnVuY3Rpb24gZ2goYSxiLGMpe2ZvcihhLk5kW2JdPWM7YS5OZFthLlNiXTspe3ZhciBkPWEuTmRbYS5TYl07ZGVsZXRlIGEuTmRbYS5TYl07Zm9yKHZhciBlPTA7ZTxkLmxlbmd0aDsrK2UpaWYoZFtlXSl7dmFyIGY9YTtEYihmdW5jdGlvbigpe2YuamMoZFtlXSl9KX1pZihhLlNiPT09YS5xZSl7YS5GYiYmKGNsZWFyVGltZW91dChhLkZiKSxhLkZiKCksYS5GYj1udWxsKTticmVha31hLlNiKyt9fTtmdW5jdGlvbiBoaChhLGIsYyxkKXt0aGlzLnJlPWE7dGhpcy5mPU1jKGEpO3RoaXMubmI9dGhpcy5vYj0wO3RoaXMuVWE9UmIoYik7dGhpcy5RZj1jO3RoaXMuSGM9ITE7dGhpcy5CYj1kO3RoaXMuamQ9ZnVuY3Rpb24oYSl7cmV0dXJuIEJjKGIsRGMsYSl9fXZhciBpaCxqaDtcbmhoLnByb3RvdHlwZS5vcGVuPWZ1bmN0aW9uKGEsYil7dGhpcy5oZj0wO3RoaXMubGE9Yjt0aGlzLkFmPW5ldyBlaChhKTt0aGlzLnpiPSExO3ZhciBjPXRoaXM7dGhpcy5xYj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Yy5mKFwiVGltZWQgb3V0IHRyeWluZyB0byBjb25uZWN0LlwiKTtjLmdiKCk7Yy5xYj1udWxsfSxNYXRoLmZsb29yKDNFNCkpO1JjKGZ1bmN0aW9uKCl7aWYoIWMuemIpe2MuU2E9bmV3IGtoKGZ1bmN0aW9uKGEsYixkLGssbCl7bGgoYyxhcmd1bWVudHMpO2lmKGMuU2EpaWYoYy5xYiYmKGNsZWFyVGltZW91dChjLnFiKSxjLnFiPW51bGwpLGMuSGM9ITAsXCJzdGFydFwiPT1hKWMuaWQ9YixjLkdmPWQ7ZWxzZSBpZihcImNsb3NlXCI9PT1hKWI/KGMuU2EuWGQ9ITEsZmgoYy5BZixiLGZ1bmN0aW9uKCl7Yy5nYigpfSkpOmMuZ2IoKTtlbHNlIHRocm93IEVycm9yKFwiVW5yZWNvZ25pemVkIGNvbW1hbmQgcmVjZWl2ZWQ6IFwiK2EpO30sZnVuY3Rpb24oYSxiKXtsaChjLGFyZ3VtZW50cyk7XG5naChjLkFmLGEsYil9LGZ1bmN0aW9uKCl7Yy5nYigpfSxjLmpkKTt2YXIgYT17c3RhcnQ6XCJ0XCJ9O2Euc2VyPU1hdGguZmxvb3IoMUU4Kk1hdGgucmFuZG9tKCkpO2MuU2EuaGUmJihhLmNiPWMuU2EuaGUpO2Eudj1cIjVcIjtjLlFmJiYoYS5zPWMuUWYpO2MuQmImJihhLmxzPWMuQmIpO1widW5kZWZpbmVkXCIhPT10eXBlb2YgbG9jYXRpb24mJmxvY2F0aW9uLmhyZWYmJi0xIT09bG9jYXRpb24uaHJlZi5pbmRleE9mKFwiZmlyZWJhc2Vpby5jb21cIikmJihhLnI9XCJmXCIpO2E9Yy5qZChhKTtjLmYoXCJDb25uZWN0aW5nIHZpYSBsb25nLXBvbGwgdG8gXCIrYSk7bWgoYy5TYSxhLGZ1bmN0aW9uKCl7fSl9fSl9O1xuaGgucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5TYSxiPXRoaXMuR2Y7YS51Zz10aGlzLmlkO2Eudmc9Yjtmb3IoYS5sZT0hMDtuaChhKTspO2E9dGhpcy5pZDtiPXRoaXMuR2Y7dGhpcy5nYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaWZyYW1lXCIpO3ZhciBjPXtkZnJhbWU6XCJ0XCJ9O2MuaWQ9YTtjLnB3PWI7dGhpcy5nYy5zcmM9dGhpcy5qZChjKTt0aGlzLmdjLnN0eWxlLmRpc3BsYXk9XCJub25lXCI7ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLmdjKX07XG5oaC5pc0F2YWlsYWJsZT1mdW5jdGlvbigpe3JldHVybiBpaHx8IWpoJiZcInVuZGVmaW5lZFwiIT09dHlwZW9mIGRvY3VtZW50JiZudWxsIT1kb2N1bWVudC5jcmVhdGVFbGVtZW50JiYhKFwib2JqZWN0XCI9PT10eXBlb2Ygd2luZG93JiZ3aW5kb3cuY2hyb21lJiZ3aW5kb3cuY2hyb21lLmV4dGVuc2lvbiYmIS9eY2hyb21lLy50ZXN0KHdpbmRvdy5sb2NhdGlvbi5ocmVmKSkmJiEoXCJvYmplY3RcIj09PXR5cGVvZiBXaW5kb3dzJiZcIm9iamVjdFwiPT09dHlwZW9mIFdpbmRvd3MuWGcpJiYhMH07Zz1oaC5wcm90b3R5cGU7Zy5FZD1mdW5jdGlvbigpe307Zy5kZD1mdW5jdGlvbigpe3RoaXMuemI9ITA7dGhpcy5TYSYmKHRoaXMuU2EuY2xvc2UoKSx0aGlzLlNhPW51bGwpO3RoaXMuZ2MmJihkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHRoaXMuZ2MpLHRoaXMuZ2M9bnVsbCk7dGhpcy5xYiYmKGNsZWFyVGltZW91dCh0aGlzLnFiKSx0aGlzLnFiPW51bGwpfTtcbmcuZ2I9ZnVuY3Rpb24oKXt0aGlzLnpifHwodGhpcy5mKFwiTG9uZ3BvbGwgaXMgY2xvc2luZyBpdHNlbGZcIiksdGhpcy5kZCgpLHRoaXMubGEmJih0aGlzLmxhKHRoaXMuSGMpLHRoaXMubGE9bnVsbCkpfTtnLmNsb3NlPWZ1bmN0aW9uKCl7dGhpcy56Ynx8KHRoaXMuZihcIkxvbmdwb2xsIGlzIGJlaW5nIGNsb3NlZC5cIiksdGhpcy5kZCgpKX07Zy5zZW5kPWZ1bmN0aW9uKGEpe2E9QihhKTt0aGlzLm9iKz1hLmxlbmd0aDtPYih0aGlzLlVhLFwiYnl0ZXNfc2VudFwiLGEubGVuZ3RoKTthPUljKGEpO2E9ZmIoYSwhMCk7YT1WYyhhLDE4NDApO2Zvcih2YXIgYj0wO2I8YS5sZW5ndGg7YisrKXt2YXIgYz10aGlzLlNhO2MuYWQucHVzaCh7TWc6dGhpcy5oZixVZzphLmxlbmd0aCxrZjphW2JdfSk7Yy5sZSYmbmgoYyk7dGhpcy5oZisrfX07ZnVuY3Rpb24gbGgoYSxiKXt2YXIgYz1CKGIpLmxlbmd0aDthLm5iKz1jO09iKGEuVWEsXCJieXRlc19yZWNlaXZlZFwiLGMpfVxuZnVuY3Rpb24ga2goYSxiLGMsZCl7dGhpcy5qZD1kO3RoaXMuaGI9Yzt0aGlzLlBlPW5ldyBwZzt0aGlzLmFkPVtdO3RoaXMudGU9TWF0aC5mbG9vcigxRTgqTWF0aC5yYW5kb20oKSk7dGhpcy5YZD0hMDt0aGlzLmhlPUVjKCk7d2luZG93W1wicExQQ29tbWFuZFwiK3RoaXMuaGVdPWE7d2luZG93W1wicFJUTFBDQlwiK3RoaXMuaGVdPWI7YT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaWZyYW1lXCIpO2Euc3R5bGUuZGlzcGxheT1cIm5vbmVcIjtpZihkb2N1bWVudC5ib2R5KXtkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGEpO3RyeXthLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnR8fENiKFwiTm8gSUUgZG9tYWluIHNldHRpbmcgcmVxdWlyZWRcIil9Y2F0Y2goZSl7YS5zcmM9XCJqYXZhc2NyaXB0OnZvaWQoKGZ1bmN0aW9uKCl7ZG9jdW1lbnQub3BlbigpO2RvY3VtZW50LmRvbWFpbj0nXCIrZG9jdW1lbnQuZG9tYWluK1wiJztkb2N1bWVudC5jbG9zZSgpO30pKCkpXCJ9fWVsc2UgdGhyb3dcIkRvY3VtZW50IGJvZHkgaGFzIG5vdCBpbml0aWFsaXplZC4gV2FpdCB0byBpbml0aWFsaXplIEZpcmViYXNlIHVudGlsIGFmdGVyIHRoZSBkb2N1bWVudCBpcyByZWFkeS5cIjtcbmEuY29udGVudERvY3VtZW50P2EuZWI9YS5jb250ZW50RG9jdW1lbnQ6YS5jb250ZW50V2luZG93P2EuZWI9YS5jb250ZW50V2luZG93LmRvY3VtZW50OmEuZG9jdW1lbnQmJihhLmViPWEuZG9jdW1lbnQpO3RoaXMuRWE9YTthPVwiXCI7dGhpcy5FYS5zcmMmJlwiamF2YXNjcmlwdDpcIj09PXRoaXMuRWEuc3JjLnN1YnN0cigwLDExKSYmKGE9JzxzY3JpcHQ+ZG9jdW1lbnQuZG9tYWluPVwiJytkb2N1bWVudC5kb21haW4rJ1wiO1xceDNjL3NjcmlwdD4nKTthPVwiPGh0bWw+PGJvZHk+XCIrYStcIjwvYm9keT48L2h0bWw+XCI7dHJ5e3RoaXMuRWEuZWIub3BlbigpLHRoaXMuRWEuZWIud3JpdGUoYSksdGhpcy5FYS5lYi5jbG9zZSgpfWNhdGNoKGYpe0NiKFwiZnJhbWUgd3JpdGluZyBleGNlcHRpb25cIiksZi5zdGFjayYmQ2IoZi5zdGFjayksQ2IoZil9fVxua2gucHJvdG90eXBlLmNsb3NlPWZ1bmN0aW9uKCl7dGhpcy5sZT0hMTtpZih0aGlzLkVhKXt0aGlzLkVhLmViLmJvZHkuaW5uZXJIVE1MPVwiXCI7dmFyIGE9dGhpcztzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bnVsbCE9PWEuRWEmJihkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGEuRWEpLGEuRWE9bnVsbCl9LE1hdGguZmxvb3IoMCkpfXZhciBiPXRoaXMuaGI7YiYmKHRoaXMuaGI9bnVsbCxiKCkpfTtcbmZ1bmN0aW9uIG5oKGEpe2lmKGEubGUmJmEuWGQmJmEuUGUuY291bnQoKTwoMDxhLmFkLmxlbmd0aD8yOjEpKXthLnRlKys7dmFyIGI9e307Yi5pZD1hLnVnO2IucHc9YS52ZztiLnNlcj1hLnRlO2Zvcih2YXIgYj1hLmpkKGIpLGM9XCJcIixkPTA7MDxhLmFkLmxlbmd0aDspaWYoMTg3MD49YS5hZFswXS5rZi5sZW5ndGgrMzArYy5sZW5ndGgpe3ZhciBlPWEuYWQuc2hpZnQoKSxjPWMrXCImc2VnXCIrZCtcIj1cIitlLk1nK1wiJnRzXCIrZCtcIj1cIitlLlVnK1wiJmRcIitkK1wiPVwiK2Uua2Y7ZCsrfWVsc2UgYnJlYWs7b2goYSxiK2MsYS50ZSk7cmV0dXJuITB9cmV0dXJuITF9ZnVuY3Rpb24gb2goYSxiLGMpe2Z1bmN0aW9uIGQoKXthLlBlLnJlbW92ZShjKTtuaChhKX1hLlBlLmFkZChjLDEpO3ZhciBlPXNldFRpbWVvdXQoZCxNYXRoLmZsb29yKDI1RTMpKTttaChhLGIsZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQoZSk7ZCgpfSl9XG5mdW5jdGlvbiBtaChhLGIsYyl7c2V0VGltZW91dChmdW5jdGlvbigpe3RyeXtpZihhLlhkKXt2YXIgZD1hLkVhLmViLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7ZC50eXBlPVwidGV4dC9qYXZhc2NyaXB0XCI7ZC5hc3luYz0hMDtkLnNyYz1iO2Qub25sb2FkPWQub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7dmFyIGE9ZC5yZWFkeVN0YXRlO2EmJlwibG9hZGVkXCIhPT1hJiZcImNvbXBsZXRlXCIhPT1hfHwoZC5vbmxvYWQ9ZC5vbnJlYWR5c3RhdGVjaGFuZ2U9bnVsbCxkLnBhcmVudE5vZGUmJmQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChkKSxjKCkpfTtkLm9uZXJyb3I9ZnVuY3Rpb24oKXtDYihcIkxvbmctcG9sbCBzY3JpcHQgZmFpbGVkIHRvIGxvYWQ6IFwiK2IpO2EuWGQ9ITE7YS5jbG9zZSgpfTthLkVhLmViLmJvZHkuYXBwZW5kQ2hpbGQoZCl9fWNhdGNoKGUpe319LE1hdGguZmxvb3IoMSkpfTt2YXIgcGg9bnVsbDtcInVuZGVmaW5lZFwiIT09dHlwZW9mIE1veldlYlNvY2tldD9waD1Nb3pXZWJTb2NrZXQ6XCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBXZWJTb2NrZXQmJihwaD1XZWJTb2NrZXQpO2Z1bmN0aW9uIHFoKGEsYixjLGQpe3RoaXMucmU9YTt0aGlzLmY9TWModGhpcy5yZSk7dGhpcy5mcmFtZXM9dGhpcy5LYz1udWxsO3RoaXMubmI9dGhpcy5vYj10aGlzLmJmPTA7dGhpcy5VYT1SYihiKTthPXt2OlwiNVwifTtcInVuZGVmaW5lZFwiIT09dHlwZW9mIGxvY2F0aW9uJiZsb2NhdGlvbi5ocmVmJiYtMSE9PWxvY2F0aW9uLmhyZWYuaW5kZXhPZihcImZpcmViYXNlaW8uY29tXCIpJiYoYS5yPVwiZlwiKTtjJiYoYS5zPWMpO2QmJihhLmxzPWQpO3RoaXMuZWY9QmMoYixDYyxhKX12YXIgcmg7XG5xaC5wcm90b3R5cGUub3Blbj1mdW5jdGlvbihhLGIpe3RoaXMuaGI9Yjt0aGlzLnpnPWE7dGhpcy5mKFwiV2Vic29ja2V0IGNvbm5lY3RpbmcgdG8gXCIrdGhpcy5lZik7dGhpcy5IYz0hMTt4Yy5zZXQoXCJwcmV2aW91c193ZWJzb2NrZXRfZmFpbHVyZVwiLCEwKTt0cnl7dGhpcy51YT1uZXcgcGgodGhpcy5lZil9Y2F0Y2goYyl7dGhpcy5mKFwiRXJyb3IgaW5zdGFudGlhdGluZyBXZWJTb2NrZXQuXCIpO3ZhciBkPWMubWVzc2FnZXx8Yy5kYXRhO2QmJnRoaXMuZihkKTt0aGlzLmdiKCk7cmV0dXJufXZhciBlPXRoaXM7dGhpcy51YS5vbm9wZW49ZnVuY3Rpb24oKXtlLmYoXCJXZWJzb2NrZXQgY29ubmVjdGVkLlwiKTtlLkhjPSEwfTt0aGlzLnVhLm9uY2xvc2U9ZnVuY3Rpb24oKXtlLmYoXCJXZWJzb2NrZXQgY29ubmVjdGlvbiB3YXMgZGlzY29ubmVjdGVkLlwiKTtlLnVhPW51bGw7ZS5nYigpfTt0aGlzLnVhLm9ubWVzc2FnZT1mdW5jdGlvbihhKXtpZihudWxsIT09ZS51YSlpZihhPWEuZGF0YSxlLm5iKz1cbmEubGVuZ3RoLE9iKGUuVWEsXCJieXRlc19yZWNlaXZlZFwiLGEubGVuZ3RoKSxzaChlKSxudWxsIT09ZS5mcmFtZXMpdGgoZSxhKTtlbHNle2E6e0sobnVsbD09PWUuZnJhbWVzLFwiV2UgYWxyZWFkeSBoYXZlIGEgZnJhbWUgYnVmZmVyXCIpO2lmKDY+PWEubGVuZ3RoKXt2YXIgYj1OdW1iZXIoYSk7aWYoIWlzTmFOKGIpKXtlLmJmPWI7ZS5mcmFtZXM9W107YT1udWxsO2JyZWFrIGF9fWUuYmY9MTtlLmZyYW1lcz1bXX1udWxsIT09YSYmdGgoZSxhKX19O3RoaXMudWEub25lcnJvcj1mdW5jdGlvbihhKXtlLmYoXCJXZWJTb2NrZXQgZXJyb3IuICBDbG9zaW5nIGNvbm5lY3Rpb24uXCIpOyhhPWEubWVzc2FnZXx8YS5kYXRhKSYmZS5mKGEpO2UuZ2IoKX19O3FoLnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbigpe307XG5xaC5pc0F2YWlsYWJsZT1mdW5jdGlvbigpe3ZhciBhPSExO2lmKFwidW5kZWZpbmVkXCIhPT10eXBlb2YgbmF2aWdhdG9yJiZuYXZpZ2F0b3IudXNlckFnZW50KXt2YXIgYj1uYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9BbmRyb2lkIChbMC05XXswLH1cXC5bMC05XXswLH0pLyk7YiYmMTxiLmxlbmd0aCYmNC40PnBhcnNlRmxvYXQoYlsxXSkmJihhPSEwKX1yZXR1cm4hYSYmbnVsbCE9PXBoJiYhcmh9O3FoLnJlc3BvbnNlc1JlcXVpcmVkVG9CZUhlYWx0aHk9MjtxaC5oZWFsdGh5VGltZW91dD0zRTQ7Zz1xaC5wcm90b3R5cGU7Zy5FZD1mdW5jdGlvbigpe3hjLnJlbW92ZShcInByZXZpb3VzX3dlYnNvY2tldF9mYWlsdXJlXCIpfTtmdW5jdGlvbiB0aChhLGIpe2EuZnJhbWVzLnB1c2goYik7aWYoYS5mcmFtZXMubGVuZ3RoPT1hLmJmKXt2YXIgYz1hLmZyYW1lcy5qb2luKFwiXCIpO2EuZnJhbWVzPW51bGw7Yz1uYihjKTthLnpnKGMpfX1cbmcuc2VuZD1mdW5jdGlvbihhKXtzaCh0aGlzKTthPUIoYSk7dGhpcy5vYis9YS5sZW5ndGg7T2IodGhpcy5VYSxcImJ5dGVzX3NlbnRcIixhLmxlbmd0aCk7YT1WYyhhLDE2Mzg0KTsxPGEubGVuZ3RoJiZ0aGlzLnVhLnNlbmQoU3RyaW5nKGEubGVuZ3RoKSk7Zm9yKHZhciBiPTA7YjxhLmxlbmd0aDtiKyspdGhpcy51YS5zZW5kKGFbYl0pfTtnLmRkPWZ1bmN0aW9uKCl7dGhpcy56Yj0hMDt0aGlzLktjJiYoY2xlYXJJbnRlcnZhbCh0aGlzLktjKSx0aGlzLktjPW51bGwpO3RoaXMudWEmJih0aGlzLnVhLmNsb3NlKCksdGhpcy51YT1udWxsKX07Zy5nYj1mdW5jdGlvbigpe3RoaXMuemJ8fCh0aGlzLmYoXCJXZWJTb2NrZXQgaXMgY2xvc2luZyBpdHNlbGZcIiksdGhpcy5kZCgpLHRoaXMuaGImJih0aGlzLmhiKHRoaXMuSGMpLHRoaXMuaGI9bnVsbCkpfTtnLmNsb3NlPWZ1bmN0aW9uKCl7dGhpcy56Ynx8KHRoaXMuZihcIldlYlNvY2tldCBpcyBiZWluZyBjbG9zZWRcIiksdGhpcy5kZCgpKX07XG5mdW5jdGlvbiBzaChhKXtjbGVhckludGVydmFsKGEuS2MpO2EuS2M9c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXthLnVhJiZhLnVhLnNlbmQoXCIwXCIpO3NoKGEpfSxNYXRoLmZsb29yKDQ1RTMpKX07ZnVuY3Rpb24gdWgoYSl7dmgodGhpcyxhKX12YXIgd2g9W2hoLHFoXTtmdW5jdGlvbiB2aChhLGIpe3ZhciBjPXFoJiZxaC5pc0F2YWlsYWJsZSgpLGQ9YyYmISh4Yy53Znx8ITA9PT14Yy5nZXQoXCJwcmV2aW91c193ZWJzb2NrZXRfZmFpbHVyZVwiKSk7Yi5XZyYmKGN8fE8oXCJ3c3M6Ly8gVVJMIHVzZWQsIGJ1dCBicm93c2VyIGlzbid0IGtub3duIHRvIHN1cHBvcnQgd2Vic29ja2V0cy4gIFRyeWluZyBhbnl3YXkuXCIpLGQ9ITApO2lmKGQpYS5nZD1bcWhdO2Vsc2V7dmFyIGU9YS5nZD1bXTtXYyh3aCxmdW5jdGlvbihhLGIpe2ImJmIuaXNBdmFpbGFibGUoKSYmZS5wdXNoKGIpfSl9fWZ1bmN0aW9uIHhoKGEpe2lmKDA8YS5nZC5sZW5ndGgpcmV0dXJuIGEuZ2RbMF07dGhyb3cgRXJyb3IoXCJObyB0cmFuc3BvcnRzIGF2YWlsYWJsZVwiKTt9O2Z1bmN0aW9uIHloKGEsYixjLGQsZSxmLGgpe3RoaXMuaWQ9YTt0aGlzLmY9TWMoXCJjOlwiK3RoaXMuaWQrXCI6XCIpO3RoaXMuamM9Yzt0aGlzLldjPWQ7dGhpcy5sYT1lO3RoaXMuTmU9Zjt0aGlzLkY9Yjt0aGlzLk1kPVtdO3RoaXMuZmY9MDt0aGlzLlBmPW5ldyB1aChiKTt0aGlzLlRhPTA7dGhpcy5CYj1oO3RoaXMuZihcIkNvbm5lY3Rpb24gY3JlYXRlZFwiKTt6aCh0aGlzKX1cbmZ1bmN0aW9uIHpoKGEpe3ZhciBiPXhoKGEuUGYpO2EuSj1uZXcgYihcImM6XCIrYS5pZCtcIjpcIithLmZmKyssYS5GLHZvaWQgMCxhLkJiKTthLlJlPWIucmVzcG9uc2VzUmVxdWlyZWRUb0JlSGVhbHRoeXx8MDt2YXIgYz1BaChhLGEuSiksZD1CaChhLGEuSik7YS5oZD1hLko7YS5jZD1hLko7YS5EPW51bGw7YS5BYj0hMTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YS5KJiZhLkoub3BlbihjLGQpfSxNYXRoLmZsb29yKDApKTtiPWIuaGVhbHRoeVRpbWVvdXR8fDA7MDxiJiYoYS55ZD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YS55ZD1udWxsO2EuQWJ8fChhLkomJjEwMjQwMDxhLkoubmI/KGEuZihcIkNvbm5lY3Rpb24gZXhjZWVkZWQgaGVhbHRoeSB0aW1lb3V0IGJ1dCBoYXMgcmVjZWl2ZWQgXCIrYS5KLm5iK1wiIGJ5dGVzLiAgTWFya2luZyBjb25uZWN0aW9uIGhlYWx0aHkuXCIpLGEuQWI9ITAsYS5KLkVkKCkpOmEuSiYmMTAyNDA8YS5KLm9iP2EuZihcIkNvbm5lY3Rpb24gZXhjZWVkZWQgaGVhbHRoeSB0aW1lb3V0IGJ1dCBoYXMgc2VudCBcIitcbmEuSi5vYitcIiBieXRlcy4gIExlYXZpbmcgY29ubmVjdGlvbiBhbGl2ZS5cIik6KGEuZihcIkNsb3NpbmcgdW5oZWFsdGh5IGNvbm5lY3Rpb24gYWZ0ZXIgdGltZW91dC5cIiksYS5jbG9zZSgpKSl9LE1hdGguZmxvb3IoYikpKX1mdW5jdGlvbiBCaChhLGIpe3JldHVybiBmdW5jdGlvbihjKXtiPT09YS5KPyhhLko9bnVsbCxjfHwwIT09YS5UYT8xPT09YS5UYSYmYS5mKFwiUmVhbHRpbWUgY29ubmVjdGlvbiBsb3N0LlwiKTooYS5mKFwiUmVhbHRpbWUgY29ubmVjdGlvbiBmYWlsZWQuXCIpLFwicy1cIj09PWEuRi5ZYS5zdWJzdHIoMCwyKSYmKHhjLnJlbW92ZShcImhvc3Q6XCIrYS5GLmhvc3QpLGEuRi5ZYT1hLkYuaG9zdCkpLGEuY2xvc2UoKSk6Yj09PWEuRD8oYS5mKFwiU2Vjb25kYXJ5IGNvbm5lY3Rpb24gbG9zdC5cIiksYz1hLkQsYS5EPW51bGwsYS5oZCE9PWMmJmEuY2QhPT1jfHxhLmNsb3NlKCkpOmEuZihcImNsb3NpbmcgYW4gb2xkIGNvbm5lY3Rpb25cIil9fVxuZnVuY3Rpb24gQWgoYSxiKXtyZXR1cm4gZnVuY3Rpb24oYyl7aWYoMiE9YS5UYSlpZihiPT09YS5jZCl7dmFyIGQ9VGMoXCJ0XCIsYyk7Yz1UYyhcImRcIixjKTtpZihcImNcIj09ZCl7aWYoZD1UYyhcInRcIixjKSxcImRcImluIGMpaWYoYz1jLmQsXCJoXCI9PT1kKXt2YXIgZD1jLnRzLGU9Yy52LGY9Yy5oO2EuTmY9Yy5zO0FjKGEuRixmKTswPT1hLlRhJiYoYS5KLnN0YXJ0KCksQ2goYSxhLkosZCksXCI1XCIhPT1lJiZPKFwiUHJvdG9jb2wgdmVyc2lvbiBtaXNtYXRjaCBkZXRlY3RlZFwiKSxjPWEuUGYsKGM9MTxjLmdkLmxlbmd0aD9jLmdkWzFdOm51bGwpJiZEaChhLGMpKX1lbHNlIGlmKFwiblwiPT09ZCl7YS5mKFwicmVjdmQgZW5kIHRyYW5zbWlzc2lvbiBvbiBwcmltYXJ5XCIpO2EuY2Q9YS5EO2ZvcihjPTA7YzxhLk1kLmxlbmd0aDsrK2MpYS5JZChhLk1kW2NdKTthLk1kPVtdO0VoKGEpfWVsc2VcInNcIj09PWQ/KGEuZihcIkNvbm5lY3Rpb24gc2h1dGRvd24gY29tbWFuZCByZWNlaXZlZC4gU2h1dHRpbmcgZG93bi4uLlwiKSxcbmEuTmUmJihhLk5lKGMpLGEuTmU9bnVsbCksYS5sYT1udWxsLGEuY2xvc2UoKSk6XCJyXCI9PT1kPyhhLmYoXCJSZXNldCBwYWNrZXQgcmVjZWl2ZWQuICBOZXcgaG9zdDogXCIrYyksQWMoYS5GLGMpLDE9PT1hLlRhP2EuY2xvc2UoKTooRmgoYSksemgoYSkpKTpcImVcIj09PWQ/TmMoXCJTZXJ2ZXIgRXJyb3I6IFwiK2MpOlwib1wiPT09ZD8oYS5mKFwiZ290IHBvbmcgb24gcHJpbWFyeS5cIiksR2goYSksSGgoYSkpOk5jKFwiVW5rbm93biBjb250cm9sIHBhY2tldCBjb21tYW5kOiBcIitkKX1lbHNlXCJkXCI9PWQmJmEuSWQoYyl9ZWxzZSBpZihiPT09YS5EKWlmKGQ9VGMoXCJ0XCIsYyksYz1UYyhcImRcIixjKSxcImNcIj09ZClcInRcImluIGMmJihjPWMudCxcImFcIj09PWM/SWgoYSk6XCJyXCI9PT1jPyhhLmYoXCJHb3QgYSByZXNldCBvbiBzZWNvbmRhcnksIGNsb3NpbmcgaXRcIiksYS5ELmNsb3NlKCksYS5oZCE9PWEuRCYmYS5jZCE9PWEuRHx8YS5jbG9zZSgpKTpcIm9cIj09PWMmJihhLmYoXCJnb3QgcG9uZyBvbiBzZWNvbmRhcnkuXCIpLFxuYS5NZi0tLEloKGEpKSk7ZWxzZSBpZihcImRcIj09ZClhLk1kLnB1c2goYyk7ZWxzZSB0aHJvdyBFcnJvcihcIlVua25vd24gcHJvdG9jb2wgbGF5ZXI6IFwiK2QpO2Vsc2UgYS5mKFwibWVzc2FnZSBvbiBvbGQgY29ubmVjdGlvblwiKX19eWgucHJvdG90eXBlLkZhPWZ1bmN0aW9uKGEpe0poKHRoaXMse3Q6XCJkXCIsZDphfSl9O2Z1bmN0aW9uIEVoKGEpe2EuaGQ9PT1hLkQmJmEuY2Q9PT1hLkQmJihhLmYoXCJjbGVhbmluZyB1cCBhbmQgcHJvbW90aW5nIGEgY29ubmVjdGlvbjogXCIrYS5ELnJlKSxhLko9YS5ELGEuRD1udWxsKX1cbmZ1bmN0aW9uIEloKGEpezA+PWEuTWY/KGEuZihcIlNlY29uZGFyeSBjb25uZWN0aW9uIGlzIGhlYWx0aHkuXCIpLGEuQWI9ITAsYS5ELkVkKCksYS5ELnN0YXJ0KCksYS5mKFwic2VuZGluZyBjbGllbnQgYWNrIG9uIHNlY29uZGFyeVwiKSxhLkQuc2VuZCh7dDpcImNcIixkOnt0OlwiYVwiLGQ6e319fSksYS5mKFwiRW5kaW5nIHRyYW5zbWlzc2lvbiBvbiBwcmltYXJ5XCIpLGEuSi5zZW5kKHt0OlwiY1wiLGQ6e3Q6XCJuXCIsZDp7fX19KSxhLmhkPWEuRCxFaChhKSk6KGEuZihcInNlbmRpbmcgcGluZyBvbiBzZWNvbmRhcnkuXCIpLGEuRC5zZW5kKHt0OlwiY1wiLGQ6e3Q6XCJwXCIsZDp7fX19KSl9eWgucHJvdG90eXBlLklkPWZ1bmN0aW9uKGEpe0doKHRoaXMpO3RoaXMuamMoYSl9O2Z1bmN0aW9uIEdoKGEpe2EuQWJ8fChhLlJlLS0sMD49YS5SZSYmKGEuZihcIlByaW1hcnkgY29ubmVjdGlvbiBpcyBoZWFsdGh5LlwiKSxhLkFiPSEwLGEuSi5FZCgpKSl9XG5mdW5jdGlvbiBEaChhLGIpe2EuRD1uZXcgYihcImM6XCIrYS5pZCtcIjpcIithLmZmKyssYS5GLGEuTmYpO2EuTWY9Yi5yZXNwb25zZXNSZXF1aXJlZFRvQmVIZWFsdGh5fHwwO2EuRC5vcGVuKEFoKGEsYS5EKSxCaChhLGEuRCkpO3NldFRpbWVvdXQoZnVuY3Rpb24oKXthLkQmJihhLmYoXCJUaW1lZCBvdXQgdHJ5aW5nIHRvIHVwZ3JhZGUuXCIpLGEuRC5jbG9zZSgpKX0sTWF0aC5mbG9vcig2RTQpKX1mdW5jdGlvbiBDaChhLGIsYyl7YS5mKFwiUmVhbHRpbWUgY29ubmVjdGlvbiBlc3RhYmxpc2hlZC5cIik7YS5KPWI7YS5UYT0xO2EuV2MmJihhLldjKGMsYS5OZiksYS5XYz1udWxsKTswPT09YS5SZT8oYS5mKFwiUHJpbWFyeSBjb25uZWN0aW9uIGlzIGhlYWx0aHkuXCIpLGEuQWI9ITApOnNldFRpbWVvdXQoZnVuY3Rpb24oKXtIaChhKX0sTWF0aC5mbG9vcig1RTMpKX1cbmZ1bmN0aW9uIEhoKGEpe2EuQWJ8fDEhPT1hLlRhfHwoYS5mKFwic2VuZGluZyBwaW5nIG9uIHByaW1hcnkuXCIpLEpoKGEse3Q6XCJjXCIsZDp7dDpcInBcIixkOnt9fX0pKX1mdW5jdGlvbiBKaChhLGIpe2lmKDEhPT1hLlRhKXRocm93XCJDb25uZWN0aW9uIGlzIG5vdCBjb25uZWN0ZWRcIjthLmhkLnNlbmQoYil9eWgucHJvdG90eXBlLmNsb3NlPWZ1bmN0aW9uKCl7MiE9PXRoaXMuVGEmJih0aGlzLmYoXCJDbG9zaW5nIHJlYWx0aW1lIGNvbm5lY3Rpb24uXCIpLHRoaXMuVGE9MixGaCh0aGlzKSx0aGlzLmxhJiYodGhpcy5sYSgpLHRoaXMubGE9bnVsbCkpfTtmdW5jdGlvbiBGaChhKXthLmYoXCJTaHV0dGluZyBkb3duIGFsbCBjb25uZWN0aW9uc1wiKTthLkomJihhLkouY2xvc2UoKSxhLko9bnVsbCk7YS5EJiYoYS5ELmNsb3NlKCksYS5EPW51bGwpO2EueWQmJihjbGVhclRpbWVvdXQoYS55ZCksYS55ZD1udWxsKX07ZnVuY3Rpb24gS2goYSxiLGMsZCl7dGhpcy5pZD1MaCsrO3RoaXMuZj1NYyhcInA6XCIrdGhpcy5pZCtcIjpcIik7dGhpcy54Zj10aGlzLkVlPSExO3RoaXMuJD17fTt0aGlzLnFhPVtdO3RoaXMuWWM9MDt0aGlzLlZjPVtdO3RoaXMub2E9ITE7dGhpcy5aYT0xRTM7dGhpcy5GZD0zRTU7dGhpcy5HYj1iO3RoaXMuVWM9Yzt0aGlzLk9lPWQ7dGhpcy5GPWE7dGhpcy5zYj10aGlzLkFhPXRoaXMuSWE9dGhpcy5CYj10aGlzLldlPW51bGw7dGhpcy5PYj0hMTt0aGlzLlRkPXt9O3RoaXMuTGc9MDt0aGlzLm5mPSEwO3RoaXMuTGM9dGhpcy5HZT1udWxsO01oKHRoaXMsMCk7SGUudWIoKS5FYihcInZpc2libGVcIix0aGlzLkNnLHRoaXMpOy0xPT09YS5ob3N0LmluZGV4T2YoXCJmYmxvY2FsXCIpJiZHZS51YigpLkViKFwib25saW5lXCIsdGhpcy5BZyx0aGlzKX12YXIgTGg9MCxOaD0wO2c9S2gucHJvdG90eXBlO1xuZy5GYT1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9Kyt0aGlzLkxnO2E9e3I6ZCxhOmEsYjpifTt0aGlzLmYoQihhKSk7Syh0aGlzLm9hLFwic2VuZFJlcXVlc3QgY2FsbCB3aGVuIHdlJ3JlIG5vdCBjb25uZWN0ZWQgbm90IGFsbG93ZWQuXCIpO3RoaXMuSWEuRmEoYSk7YyYmKHRoaXMuVGRbZF09Yyl9O2cueWY9ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9YS52YSgpLGY9YS5wYXRoLnRvU3RyaW5nKCk7dGhpcy5mKFwiTGlzdGVuIGNhbGxlZCBmb3IgXCIrZitcIiBcIitlKTt0aGlzLiRbZl09dGhpcy4kW2ZdfHx7fTtLKGZlKGEubil8fCFTKGEubiksXCJsaXN0ZW4oKSBjYWxsZWQgZm9yIG5vbi1kZWZhdWx0IGJ1dCBjb21wbGV0ZSBxdWVyeVwiKTtLKCF0aGlzLiRbZl1bZV0sXCJsaXN0ZW4oKSBjYWxsZWQgdHdpY2UgZm9yIHNhbWUgcGF0aC9xdWVyeUlkLlwiKTthPXtIOmQseGQ6YixJZzphLHRhZzpjfTt0aGlzLiRbZl1bZV09YTt0aGlzLm9hJiZPaCh0aGlzLGEpfTtcbmZ1bmN0aW9uIE9oKGEsYil7dmFyIGM9Yi5JZyxkPWMucGF0aC50b1N0cmluZygpLGU9Yy52YSgpO2EuZihcIkxpc3RlbiBvbiBcIitkK1wiIGZvciBcIitlKTt2YXIgZj17cDpkfTtiLnRhZyYmKGYucT1lZShjLm4pLGYudD1iLnRhZyk7Zi5oPWIueGQoKTthLkZhKFwicVwiLGYsZnVuY3Rpb24oZil7dmFyIGs9Zi5kLGw9Zi5zO2lmKGsmJlwib2JqZWN0XCI9PT10eXBlb2YgayYmdihrLFwid1wiKSl7dmFyIG09dyhrLFwid1wiKTtlYShtKSYmMDw9TmEobSxcIm5vX2luZGV4XCIpJiZPKFwiVXNpbmcgYW4gdW5zcGVjaWZpZWQgaW5kZXguIENvbnNpZGVyIGFkZGluZyBcIisoJ1wiLmluZGV4T25cIjogXCInK2Mubi5nLnRvU3RyaW5nKCkrJ1wiJykrXCIgYXQgXCIrYy5wYXRoLnRvU3RyaW5nKCkrXCIgdG8geW91ciBzZWN1cml0eSBydWxlcyBmb3IgYmV0dGVyIHBlcmZvcm1hbmNlXCIpfShhLiRbZF0mJmEuJFtkXVtlXSk9PT1iJiYoYS5mKFwibGlzdGVuIHJlc3BvbnNlXCIsZiksXCJva1wiIT09bCYmUGgoYSxkLGUpLGIuSCYmYi5IKGwsXG5rKSl9KX1nLk09ZnVuY3Rpb24oYSxiLGMpe3RoaXMuQWE9e2lnOmEsb2Y6ITEsemM6YixtZDpjfTt0aGlzLmYoXCJBdXRoZW50aWNhdGluZyB1c2luZyBjcmVkZW50aWFsOiBcIithKTtRaCh0aGlzKTsoYj00MD09YS5sZW5ndGgpfHwoYT0kYyhhKS5CYyxiPVwib2JqZWN0XCI9PT10eXBlb2YgYSYmITA9PT13KGEsXCJhZG1pblwiKSk7YiYmKHRoaXMuZihcIkFkbWluIGF1dGggY3JlZGVudGlhbCBkZXRlY3RlZC4gIFJlZHVjaW5nIG1heCByZWNvbm5lY3QgdGltZS5cIiksdGhpcy5GZD0zRTQpfTtnLmdlPWZ1bmN0aW9uKGEpe2RlbGV0ZSB0aGlzLkFhO3RoaXMub2EmJnRoaXMuRmEoXCJ1bmF1dGhcIix7fSxmdW5jdGlvbihiKXthKGIucyxiLmQpfSl9O1xuZnVuY3Rpb24gUWgoYSl7dmFyIGI9YS5BYTthLm9hJiZiJiZhLkZhKFwiYXV0aFwiLHtjcmVkOmIuaWd9LGZ1bmN0aW9uKGMpe3ZhciBkPWMucztjPWMuZHx8XCJlcnJvclwiO1wib2tcIiE9PWQmJmEuQWE9PT1iJiZkZWxldGUgYS5BYTtiLm9mP1wib2tcIiE9PWQmJmIubWQmJmIubWQoZCxjKTooYi5vZj0hMCxiLnpjJiZiLnpjKGQsYykpfSl9Zy5SZj1mdW5jdGlvbihhLGIpe3ZhciBjPWEucGF0aC50b1N0cmluZygpLGQ9YS52YSgpO3RoaXMuZihcIlVubGlzdGVuIGNhbGxlZCBmb3IgXCIrYytcIiBcIitkKTtLKGZlKGEubil8fCFTKGEubiksXCJ1bmxpc3RlbigpIGNhbGxlZCBmb3Igbm9uLWRlZmF1bHQgYnV0IGNvbXBsZXRlIHF1ZXJ5XCIpO2lmKFBoKHRoaXMsYyxkKSYmdGhpcy5vYSl7dmFyIGU9ZWUoYS5uKTt0aGlzLmYoXCJVbmxpc3RlbiBvbiBcIitjK1wiIGZvciBcIitkKTtjPXtwOmN9O2ImJihjLnE9ZSxjLnQ9Yik7dGhpcy5GYShcIm5cIixjKX19O1xuZy5NZT1mdW5jdGlvbihhLGIsYyl7dGhpcy5vYT9SaCh0aGlzLFwib1wiLGEsYixjKTp0aGlzLlZjLnB1c2goeyRjOmEsYWN0aW9uOlwib1wiLGRhdGE6YixIOmN9KX07Zy5DZj1mdW5jdGlvbihhLGIsYyl7dGhpcy5vYT9SaCh0aGlzLFwib21cIixhLGIsYyk6dGhpcy5WYy5wdXNoKHskYzphLGFjdGlvbjpcIm9tXCIsZGF0YTpiLEg6Y30pfTtnLkpkPWZ1bmN0aW9uKGEsYil7dGhpcy5vYT9SaCh0aGlzLFwib2NcIixhLG51bGwsYik6dGhpcy5WYy5wdXNoKHskYzphLGFjdGlvbjpcIm9jXCIsZGF0YTpudWxsLEg6Yn0pfTtmdW5jdGlvbiBSaChhLGIsYyxkLGUpe2M9e3A6YyxkOmR9O2EuZihcIm9uRGlzY29ubmVjdCBcIitiLGMpO2EuRmEoYixjLGZ1bmN0aW9uKGEpe2UmJnNldFRpbWVvdXQoZnVuY3Rpb24oKXtlKGEucyxhLmQpfSxNYXRoLmZsb29yKDApKX0pfWcucHV0PWZ1bmN0aW9uKGEsYixjLGQpe1NoKHRoaXMsXCJwXCIsYSxiLGMsZCl9O1xuZy56Zj1mdW5jdGlvbihhLGIsYyxkKXtTaCh0aGlzLFwibVwiLGEsYixjLGQpfTtmdW5jdGlvbiBTaChhLGIsYyxkLGUsZil7ZD17cDpjLGQ6ZH07bihmKSYmKGQuaD1mKTthLnFhLnB1c2goe2FjdGlvbjpiLEpmOmQsSDplfSk7YS5ZYysrO2I9YS5xYS5sZW5ndGgtMTthLm9hP1RoKGEsYik6YS5mKFwiQnVmZmVyaW5nIHB1dDogXCIrYyl9ZnVuY3Rpb24gVGgoYSxiKXt2YXIgYz1hLnFhW2JdLmFjdGlvbixkPWEucWFbYl0uSmYsZT1hLnFhW2JdLkg7YS5xYVtiXS5KZz1hLm9hO2EuRmEoYyxkLGZ1bmN0aW9uKGQpe2EuZihjK1wiIHJlc3BvbnNlXCIsZCk7ZGVsZXRlIGEucWFbYl07YS5ZYy0tOzA9PT1hLlljJiYoYS5xYT1bXSk7ZSYmZShkLnMsZC5kKX0pfVxuZy5VZT1mdW5jdGlvbihhKXt0aGlzLm9hJiYoYT17YzphfSx0aGlzLmYoXCJyZXBvcnRTdGF0c1wiLGEpLHRoaXMuRmEoXCJzXCIsYSxmdW5jdGlvbihhKXtcIm9rXCIhPT1hLnMmJnRoaXMuZihcInJlcG9ydFN0YXRzXCIsXCJFcnJvciBzZW5kaW5nIHN0YXRzOiBcIithLmQpfSkpfTtcbmcuSWQ9ZnVuY3Rpb24oYSl7aWYoXCJyXCJpbiBhKXt0aGlzLmYoXCJmcm9tIHNlcnZlcjogXCIrQihhKSk7dmFyIGI9YS5yLGM9dGhpcy5UZFtiXTtjJiYoZGVsZXRlIHRoaXMuVGRbYl0sYyhhLmIpKX1lbHNle2lmKFwiZXJyb3JcImluIGEpdGhyb3dcIkEgc2VydmVyLXNpZGUgZXJyb3IgaGFzIG9jY3VycmVkOiBcIithLmVycm9yO1wiYVwiaW4gYSYmKGI9YS5hLGM9YS5iLHRoaXMuZihcImhhbmRsZVNlcnZlck1lc3NhZ2VcIixiLGMpLFwiZFwiPT09Yj90aGlzLkdiKGMucCxjLmQsITEsYy50KTpcIm1cIj09PWI/dGhpcy5HYihjLnAsYy5kLCEwLGMudCk6XCJjXCI9PT1iP1VoKHRoaXMsYy5wLGMucSk6XCJhY1wiPT09Yj8oYT1jLnMsYj1jLmQsYz10aGlzLkFhLGRlbGV0ZSB0aGlzLkFhLGMmJmMubWQmJmMubWQoYSxiKSk6XCJzZFwiPT09Yj90aGlzLldlP3RoaXMuV2UoYyk6XCJtc2dcImluIGMmJlwidW5kZWZpbmVkXCIhPT10eXBlb2YgY29uc29sZSYmY29uc29sZS5sb2coXCJGSVJFQkFTRTogXCIrYy5tc2cucmVwbGFjZShcIlxcblwiLFxuXCJcXG5GSVJFQkFTRTogXCIpKTpOYyhcIlVucmVjb2duaXplZCBhY3Rpb24gcmVjZWl2ZWQgZnJvbSBzZXJ2ZXI6IFwiK0IoYikrXCJcXG5BcmUgeW91IHVzaW5nIHRoZSBsYXRlc3QgY2xpZW50P1wiKSl9fTtnLldjPWZ1bmN0aW9uKGEsYil7dGhpcy5mKFwiY29ubmVjdGlvbiByZWFkeVwiKTt0aGlzLm9hPSEwO3RoaXMuTGM9KG5ldyBEYXRlKS5nZXRUaW1lKCk7dGhpcy5PZSh7c2VydmVyVGltZU9mZnNldDphLShuZXcgRGF0ZSkuZ2V0VGltZSgpfSk7dGhpcy5CYj1iO2lmKHRoaXMubmYpe3ZhciBjPXt9O2NbXCJzZGsuanMuXCIraGIucmVwbGFjZSgvXFwuL2csXCItXCIpXT0xO3lnKCkmJihjW1wiZnJhbWV3b3JrLmNvcmRvdmFcIl09MSk7dGhpcy5VZShjKX1WaCh0aGlzKTt0aGlzLm5mPSExO3RoaXMuVWMoITApfTtcbmZ1bmN0aW9uIE1oKGEsYil7SyghYS5JYSxcIlNjaGVkdWxpbmcgYSBjb25uZWN0IHdoZW4gd2UncmUgYWxyZWFkeSBjb25uZWN0ZWQvaW5nP1wiKTthLnNiJiZjbGVhclRpbWVvdXQoYS5zYik7YS5zYj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YS5zYj1udWxsO1doKGEpfSxNYXRoLmZsb29yKGIpKX1nLkNnPWZ1bmN0aW9uKGEpe2EmJiF0aGlzLk9iJiZ0aGlzLlphPT09dGhpcy5GZCYmKHRoaXMuZihcIldpbmRvdyBiZWNhbWUgdmlzaWJsZS4gIFJlZHVjaW5nIGRlbGF5LlwiKSx0aGlzLlphPTFFMyx0aGlzLklhfHxNaCh0aGlzLDApKTt0aGlzLk9iPWF9O2cuQWc9ZnVuY3Rpb24oYSl7YT8odGhpcy5mKFwiQnJvd3NlciB3ZW50IG9ubGluZS5cIiksdGhpcy5aYT0xRTMsdGhpcy5JYXx8TWgodGhpcywwKSk6KHRoaXMuZihcIkJyb3dzZXIgd2VudCBvZmZsaW5lLiAgS2lsbGluZyBjb25uZWN0aW9uLlwiKSx0aGlzLklhJiZ0aGlzLklhLmNsb3NlKCkpfTtcbmcuRGY9ZnVuY3Rpb24oKXt0aGlzLmYoXCJkYXRhIGNsaWVudCBkaXNjb25uZWN0ZWRcIik7dGhpcy5vYT0hMTt0aGlzLklhPW51bGw7Zm9yKHZhciBhPTA7YTx0aGlzLnFhLmxlbmd0aDthKyspe3ZhciBiPXRoaXMucWFbYV07YiYmXCJoXCJpbiBiLkpmJiZiLkpnJiYoYi5IJiZiLkgoXCJkaXNjb25uZWN0XCIpLGRlbGV0ZSB0aGlzLnFhW2FdLHRoaXMuWWMtLSl9MD09PXRoaXMuWWMmJih0aGlzLnFhPVtdKTt0aGlzLlRkPXt9O1hoKHRoaXMpJiYodGhpcy5PYj90aGlzLkxjJiYoM0U0PChuZXcgRGF0ZSkuZ2V0VGltZSgpLXRoaXMuTGMmJih0aGlzLlphPTFFMyksdGhpcy5MYz1udWxsKToodGhpcy5mKFwiV2luZG93IGlzbid0IHZpc2libGUuICBEZWxheWluZyByZWNvbm5lY3QuXCIpLHRoaXMuWmE9dGhpcy5GZCx0aGlzLkdlPShuZXcgRGF0ZSkuZ2V0VGltZSgpKSxhPU1hdGgubWF4KDAsdGhpcy5aYS0oKG5ldyBEYXRlKS5nZXRUaW1lKCktdGhpcy5HZSkpLGEqPU1hdGgucmFuZG9tKCksdGhpcy5mKFwiVHJ5aW5nIHRvIHJlY29ubmVjdCBpbiBcIitcbmErXCJtc1wiKSxNaCh0aGlzLGEpLHRoaXMuWmE9TWF0aC5taW4odGhpcy5GZCwxLjMqdGhpcy5aYSkpO3RoaXMuVWMoITEpfTtmdW5jdGlvbiBXaChhKXtpZihYaChhKSl7YS5mKFwiTWFraW5nIGEgY29ubmVjdGlvbiBhdHRlbXB0XCIpO2EuR2U9KG5ldyBEYXRlKS5nZXRUaW1lKCk7YS5MYz1udWxsO3ZhciBiPXEoYS5JZCxhKSxjPXEoYS5XYyxhKSxkPXEoYS5EZixhKSxlPWEuaWQrXCI6XCIrTmgrKzthLklhPW5ldyB5aChlLGEuRixiLGMsZCxmdW5jdGlvbihiKXtPKGIrXCIgKFwiK2EuRi50b1N0cmluZygpK1wiKVwiKTthLnhmPSEwfSxhLkJiKX19Zy55Yj1mdW5jdGlvbigpe3RoaXMuRWU9ITA7dGhpcy5JYT90aGlzLklhLmNsb3NlKCk6KHRoaXMuc2ImJihjbGVhclRpbWVvdXQodGhpcy5zYiksdGhpcy5zYj1udWxsKSx0aGlzLm9hJiZ0aGlzLkRmKCkpfTtnLnJjPWZ1bmN0aW9uKCl7dGhpcy5FZT0hMTt0aGlzLlphPTFFMzt0aGlzLklhfHxNaCh0aGlzLDApfTtcbmZ1bmN0aW9uIFVoKGEsYixjKXtjPWM/UWEoYyxmdW5jdGlvbihhKXtyZXR1cm4gVWMoYSl9KS5qb2luKFwiJFwiKTpcImRlZmF1bHRcIjsoYT1QaChhLGIsYykpJiZhLkgmJmEuSChcInBlcm1pc3Npb25fZGVuaWVkXCIpfWZ1bmN0aW9uIFBoKGEsYixjKXtiPShuZXcgTChiKSkudG9TdHJpbmcoKTt2YXIgZDtuKGEuJFtiXSk/KGQ9YS4kW2JdW2NdLGRlbGV0ZSBhLiRbYl1bY10sMD09PXBhKGEuJFtiXSkmJmRlbGV0ZSBhLiRbYl0pOmQ9dm9pZCAwO3JldHVybiBkfWZ1bmN0aW9uIFZoKGEpe1FoKGEpO3IoYS4kLGZ1bmN0aW9uKGIpe3IoYixmdW5jdGlvbihiKXtPaChhLGIpfSl9KTtmb3IodmFyIGI9MDtiPGEucWEubGVuZ3RoO2IrKylhLnFhW2JdJiZUaChhLGIpO2Zvcig7YS5WYy5sZW5ndGg7KWI9YS5WYy5zaGlmdCgpLFJoKGEsYi5hY3Rpb24sYi4kYyxiLmRhdGEsYi5IKX1mdW5jdGlvbiBYaChhKXt2YXIgYjtiPUdlLnViKCkua2M7cmV0dXJuIWEueGYmJiFhLkVlJiZifTt2YXIgVj17b2c6ZnVuY3Rpb24oKXtpaD1yaD0hMH19O1YuZm9yY2VMb25nUG9sbGluZz1WLm9nO1YucGc9ZnVuY3Rpb24oKXtqaD0hMH07Vi5mb3JjZVdlYlNvY2tldHM9Vi5wZztWLlBnPWZ1bmN0aW9uKGEsYil7YS5rLlJhLldlPWJ9O1Yuc2V0U2VjdXJpdHlEZWJ1Z0NhbGxiYWNrPVYuUGc7Vi5ZZT1mdW5jdGlvbihhLGIpe2Euay5ZZShiKX07Vi5zdGF0cz1WLlllO1YuWmU9ZnVuY3Rpb24oYSxiKXthLmsuWmUoYil9O1Yuc3RhdHNJbmNyZW1lbnRDb3VudGVyPVYuWmU7Vi5zZD1mdW5jdGlvbihhKXtyZXR1cm4gYS5rLnNkfTtWLmRhdGFVcGRhdGVDb3VudD1WLnNkO1Yuc2c9ZnVuY3Rpb24oYSxiKXthLmsuRGU9Yn07Vi5pbnRlcmNlcHRTZXJ2ZXJEYXRhPVYuc2c7Vi55Zz1mdW5jdGlvbihhKXtuZXcgSWcoYSl9O1Yub25Qb3B1cE9wZW49Vi55ZztWLk5nPWZ1bmN0aW9uKGEpe3NnPWF9O1Yuc2V0QXV0aGVudGljYXRpb25TZXJ2ZXI9Vi5OZztmdW5jdGlvbiBRKGEsYixjKXt0aGlzLkE9YTt0aGlzLlc9Yjt0aGlzLmc9Y31RLnByb3RvdHlwZS5JPWZ1bmN0aW9uKCl7eChcIkZpcmViYXNlLkRhdGFTbmFwc2hvdC52YWxcIiwwLDAsYXJndW1lbnRzLmxlbmd0aCk7cmV0dXJuIHRoaXMuQS5JKCl9O1EucHJvdG90eXBlLnZhbD1RLnByb3RvdHlwZS5JO1EucHJvdG90eXBlLm1mPWZ1bmN0aW9uKCl7eChcIkZpcmViYXNlLkRhdGFTbmFwc2hvdC5leHBvcnRWYWxcIiwwLDAsYXJndW1lbnRzLmxlbmd0aCk7cmV0dXJuIHRoaXMuQS5JKCEwKX07US5wcm90b3R5cGUuZXhwb3J0VmFsPVEucHJvdG90eXBlLm1mO1EucHJvdG90eXBlLm5nPWZ1bmN0aW9uKCl7eChcIkZpcmViYXNlLkRhdGFTbmFwc2hvdC5leGlzdHNcIiwwLDAsYXJndW1lbnRzLmxlbmd0aCk7cmV0dXJuIXRoaXMuQS5lKCl9O1EucHJvdG90eXBlLmV4aXN0cz1RLnByb3RvdHlwZS5uZztcblEucHJvdG90eXBlLnU9ZnVuY3Rpb24oYSl7eChcIkZpcmViYXNlLkRhdGFTbmFwc2hvdC5jaGlsZFwiLDAsMSxhcmd1bWVudHMubGVuZ3RoKTtnYShhKSYmKGE9U3RyaW5nKGEpKTtpZyhcIkZpcmViYXNlLkRhdGFTbmFwc2hvdC5jaGlsZFwiLGEpO3ZhciBiPW5ldyBMKGEpLGM9dGhpcy5XLnUoYik7cmV0dXJuIG5ldyBRKHRoaXMuQS5RKGIpLGMsTil9O1EucHJvdG90eXBlLmNoaWxkPVEucHJvdG90eXBlLnU7US5wcm90b3R5cGUuRGE9ZnVuY3Rpb24oYSl7eChcIkZpcmViYXNlLkRhdGFTbmFwc2hvdC5oYXNDaGlsZFwiLDEsMSxhcmd1bWVudHMubGVuZ3RoKTtpZyhcIkZpcmViYXNlLkRhdGFTbmFwc2hvdC5oYXNDaGlsZFwiLGEpO3ZhciBiPW5ldyBMKGEpO3JldHVybiF0aGlzLkEuUShiKS5lKCl9O1EucHJvdG90eXBlLmhhc0NoaWxkPVEucHJvdG90eXBlLkRhO1xuUS5wcm90b3R5cGUuQz1mdW5jdGlvbigpe3goXCJGaXJlYmFzZS5EYXRhU25hcHNob3QuZ2V0UHJpb3JpdHlcIiwwLDAsYXJndW1lbnRzLmxlbmd0aCk7cmV0dXJuIHRoaXMuQS5DKCkuSSgpfTtRLnByb3RvdHlwZS5nZXRQcmlvcml0eT1RLnByb3RvdHlwZS5DO1EucHJvdG90eXBlLmZvckVhY2g9ZnVuY3Rpb24oYSl7eChcIkZpcmViYXNlLkRhdGFTbmFwc2hvdC5mb3JFYWNoXCIsMSwxLGFyZ3VtZW50cy5sZW5ndGgpO0EoXCJGaXJlYmFzZS5EYXRhU25hcHNob3QuZm9yRWFjaFwiLDEsYSwhMSk7aWYodGhpcy5BLksoKSlyZXR1cm4hMTt2YXIgYj10aGlzO3JldHVybiEhdGhpcy5BLlAodGhpcy5nLGZ1bmN0aW9uKGMsZCl7cmV0dXJuIGEobmV3IFEoZCxiLlcudShjKSxOKSl9KX07US5wcm90b3R5cGUuZm9yRWFjaD1RLnByb3RvdHlwZS5mb3JFYWNoO1xuUS5wcm90b3R5cGUud2Q9ZnVuY3Rpb24oKXt4KFwiRmlyZWJhc2UuRGF0YVNuYXBzaG90Lmhhc0NoaWxkcmVuXCIsMCwwLGFyZ3VtZW50cy5sZW5ndGgpO3JldHVybiB0aGlzLkEuSygpPyExOiF0aGlzLkEuZSgpfTtRLnByb3RvdHlwZS5oYXNDaGlsZHJlbj1RLnByb3RvdHlwZS53ZDtRLnByb3RvdHlwZS5uYW1lPWZ1bmN0aW9uKCl7TyhcIkZpcmViYXNlLkRhdGFTbmFwc2hvdC5uYW1lKCkgYmVpbmcgZGVwcmVjYXRlZC4gUGxlYXNlIHVzZSBGaXJlYmFzZS5EYXRhU25hcHNob3Qua2V5KCkgaW5zdGVhZC5cIik7eChcIkZpcmViYXNlLkRhdGFTbmFwc2hvdC5uYW1lXCIsMCwwLGFyZ3VtZW50cy5sZW5ndGgpO3JldHVybiB0aGlzLmtleSgpfTtRLnByb3RvdHlwZS5uYW1lPVEucHJvdG90eXBlLm5hbWU7US5wcm90b3R5cGUua2V5PWZ1bmN0aW9uKCl7eChcIkZpcmViYXNlLkRhdGFTbmFwc2hvdC5rZXlcIiwwLDAsYXJndW1lbnRzLmxlbmd0aCk7cmV0dXJuIHRoaXMuVy5rZXkoKX07XG5RLnByb3RvdHlwZS5rZXk9US5wcm90b3R5cGUua2V5O1EucHJvdG90eXBlLkRiPWZ1bmN0aW9uKCl7eChcIkZpcmViYXNlLkRhdGFTbmFwc2hvdC5udW1DaGlsZHJlblwiLDAsMCxhcmd1bWVudHMubGVuZ3RoKTtyZXR1cm4gdGhpcy5BLkRiKCl9O1EucHJvdG90eXBlLm51bUNoaWxkcmVuPVEucHJvdG90eXBlLkRiO1EucHJvdG90eXBlLkliPWZ1bmN0aW9uKCl7eChcIkZpcmViYXNlLkRhdGFTbmFwc2hvdC5yZWZcIiwwLDAsYXJndW1lbnRzLmxlbmd0aCk7cmV0dXJuIHRoaXMuV307US5wcm90b3R5cGUucmVmPVEucHJvdG90eXBlLkliO2Z1bmN0aW9uIFloKGEsYil7dGhpcy5GPWE7dGhpcy5VYT1SYihhKTt0aGlzLmZkPW51bGw7dGhpcy5kYT1uZXcgdmI7dGhpcy5IZD0xO3RoaXMuUmE9bnVsbDtifHwwPD0oXCJvYmplY3RcIj09PXR5cGVvZiB3aW5kb3cmJndpbmRvdy5uYXZpZ2F0b3ImJndpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50fHxcIlwiKS5zZWFyY2goL2dvb2dsZWJvdHxnb29nbGUgd2VibWFzdGVyIHRvb2xzfGJpbmdib3R8eWFob28hIHNsdXJwfGJhaWR1c3BpZGVyfHlhbmRleGJvdHxkdWNrZHVja2JvdC9pKT8odGhpcy5iYT1uZXcgQWUodGhpcy5GLHEodGhpcy5HYix0aGlzKSksc2V0VGltZW91dChxKHRoaXMuVWMsdGhpcywhMCksMCkpOnRoaXMuYmE9dGhpcy5SYT1uZXcgS2godGhpcy5GLHEodGhpcy5HYix0aGlzKSxxKHRoaXMuVWMsdGhpcykscSh0aGlzLk9lLHRoaXMpKTt0aGlzLlNnPVNiKGEscShmdW5jdGlvbigpe3JldHVybiBuZXcgTWIodGhpcy5VYSx0aGlzLmJhKX0sdGhpcykpO3RoaXMudWM9bmV3IFJmO1xudGhpcy5DZT1uZXcgb2I7dmFyIGM9dGhpczt0aGlzLkNkPW5ldyB2Zih7WGU6ZnVuY3Rpb24oYSxiLGYsaCl7Yj1bXTtmPWMuQ2UuaihhLnBhdGgpO2YuZSgpfHwoYj14ZihjLkNkLG5ldyBYYihiZixhLnBhdGgsZikpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtoKFwib2tcIil9LDApKTtyZXR1cm4gYn0sYWU6YmF9KTtaaCh0aGlzLFwiY29ubmVjdGVkXCIsITEpO3RoaXMubGE9bmV3IHFjO3RoaXMuTT1uZXcgU2coYSxxKHRoaXMuYmEuTSx0aGlzLmJhKSxxKHRoaXMuYmEuZ2UsdGhpcy5iYSkscSh0aGlzLkxlLHRoaXMpKTt0aGlzLnNkPTA7dGhpcy5EZT1udWxsO3RoaXMuTD1uZXcgdmYoe1hlOmZ1bmN0aW9uKGEsYixmLGgpe2MuYmEueWYoYSxmLGIsZnVuY3Rpb24oYixlKXt2YXIgZj1oKGIsZSk7QWIoYy5kYSxhLnBhdGgsZil9KTtyZXR1cm5bXX0sYWU6ZnVuY3Rpb24oYSxiKXtjLmJhLlJmKGEsYil9fSl9Zz1ZaC5wcm90b3R5cGU7XG5nLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMuRi5rYj9cImh0dHBzOi8vXCI6XCJodHRwOi8vXCIpK3RoaXMuRi5ob3N0fTtnLm5hbWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5GLmhjfTtmdW5jdGlvbiAkaChhKXthPWEuQ2UuaihuZXcgTChcIi5pbmZvL3NlcnZlclRpbWVPZmZzZXRcIikpLkkoKXx8MDtyZXR1cm4obmV3IERhdGUpLmdldFRpbWUoKSthfWZ1bmN0aW9uIGFpKGEpe2E9YT17dGltZXN0YW1wOiRoKGEpfTthLnRpbWVzdGFtcD1hLnRpbWVzdGFtcHx8KG5ldyBEYXRlKS5nZXRUaW1lKCk7cmV0dXJuIGF9XG5nLkdiPWZ1bmN0aW9uKGEsYixjLGQpe3RoaXMuc2QrKzt2YXIgZT1uZXcgTChhKTtiPXRoaXMuRGU/dGhpcy5EZShhLGIpOmI7YT1bXTtkP2M/KGI9bmEoYixmdW5jdGlvbihhKXtyZXR1cm4gTShhKX0pLGE9RmYodGhpcy5MLGUsYixkKSk6KGI9TShiKSxhPUJmKHRoaXMuTCxlLGIsZCkpOmM/KGQ9bmEoYixmdW5jdGlvbihhKXtyZXR1cm4gTShhKX0pLGE9QWYodGhpcy5MLGUsZCkpOihkPU0oYiksYT14Zih0aGlzLkwsbmV3IFhiKGJmLGUsZCkpKTtkPWU7MDxhLmxlbmd0aCYmKGQ9YmkodGhpcyxlKSk7QWIodGhpcy5kYSxkLGEpfTtnLlVjPWZ1bmN0aW9uKGEpe1poKHRoaXMsXCJjb25uZWN0ZWRcIixhKTshMT09PWEmJmNpKHRoaXMpfTtnLk9lPWZ1bmN0aW9uKGEpe3ZhciBiPXRoaXM7V2MoYSxmdW5jdGlvbihhLGQpe1poKGIsZCxhKX0pfTtnLkxlPWZ1bmN0aW9uKGEpe1poKHRoaXMsXCJhdXRoZW50aWNhdGVkXCIsYSl9O1xuZnVuY3Rpb24gWmgoYSxiLGMpe2I9bmV3IEwoXCIvLmluZm8vXCIrYik7Yz1NKGMpO3ZhciBkPWEuQ2U7ZC5XZD1kLldkLkcoYixjKTtjPXhmKGEuQ2QsbmV3IFhiKGJmLGIsYykpO0FiKGEuZGEsYixjKX1nLktiPWZ1bmN0aW9uKGEsYixjLGQpe3RoaXMuZihcInNldFwiLHtwYXRoOmEudG9TdHJpbmcoKSx2YWx1ZTpiLCRnOmN9KTt2YXIgZT1haSh0aGlzKTtiPU0oYixjKTt2YXIgZT1zYyhiLGUpLGY9dGhpcy5IZCsrLGU9d2YodGhpcy5MLGEsZSxmLCEwKTt3Yih0aGlzLmRhLGUpO3ZhciBoPXRoaXM7dGhpcy5iYS5wdXQoYS50b1N0cmluZygpLGIuSSghMCksZnVuY3Rpb24oYixjKXt2YXIgZT1cIm9rXCI9PT1iO2V8fE8oXCJzZXQgYXQgXCIrYStcIiBmYWlsZWQ6IFwiK2IpO2U9emYoaC5MLGYsIWUpO0FiKGguZGEsYSxlKTtkaShkLGIsYyl9KTtlPWVpKHRoaXMsYSk7YmkodGhpcyxlKTtBYih0aGlzLmRhLGUsW10pfTtcbmcudXBkYXRlPWZ1bmN0aW9uKGEsYixjKXt0aGlzLmYoXCJ1cGRhdGVcIix7cGF0aDphLnRvU3RyaW5nKCksdmFsdWU6Yn0pO3ZhciBkPSEwLGU9YWkodGhpcyksZj17fTtyKGIsZnVuY3Rpb24oYSxiKXtkPSExO3ZhciBjPU0oYSk7ZltiXT1zYyhjLGUpfSk7aWYoZClDYihcInVwZGF0ZSgpIGNhbGxlZCB3aXRoIGVtcHR5IGRhdGEuICBEb24ndCBkbyBhbnl0aGluZy5cIiksZGkoYyxcIm9rXCIpO2Vsc2V7dmFyIGg9dGhpcy5IZCsrLGs9eWYodGhpcy5MLGEsZixoKTt3Yih0aGlzLmRhLGspO3ZhciBsPXRoaXM7dGhpcy5iYS56ZihhLnRvU3RyaW5nKCksYixmdW5jdGlvbihiLGQpe3ZhciBlPVwib2tcIj09PWI7ZXx8TyhcInVwZGF0ZSBhdCBcIithK1wiIGZhaWxlZDogXCIrYik7dmFyIGU9emYobC5MLGgsIWUpLGY9YTswPGUubGVuZ3RoJiYoZj1iaShsLGEpKTtBYihsLmRhLGYsZSk7ZGkoYyxiLGQpfSk7Yj1laSh0aGlzLGEpO2JpKHRoaXMsYik7QWIodGhpcy5kYSxhLFtdKX19O1xuZnVuY3Rpb24gY2koYSl7YS5mKFwib25EaXNjb25uZWN0RXZlbnRzXCIpO3ZhciBiPWFpKGEpLGM9W107cmMocGMoYS5sYSxiKSxHLGZ1bmN0aW9uKGIsZSl7Yz1jLmNvbmNhdCh4ZihhLkwsbmV3IFhiKGJmLGIsZSkpKTt2YXIgZj1laShhLGIpO2JpKGEsZil9KTthLmxhPW5ldyBxYztBYihhLmRhLEcsYyl9Zy5KZD1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXM7dGhpcy5iYS5KZChhLnRvU3RyaW5nKCksZnVuY3Rpb24oZCxlKXtcIm9rXCI9PT1kJiZyZyhjLmxhLGEpO2RpKGIsZCxlKX0pfTtmdW5jdGlvbiBmaShhLGIsYyxkKXt2YXIgZT1NKGMpO2EuYmEuTWUoYi50b1N0cmluZygpLGUuSSghMCksZnVuY3Rpb24oYyxoKXtcIm9rXCI9PT1jJiZhLmxhLm5jKGIsZSk7ZGkoZCxjLGgpfSl9ZnVuY3Rpb24gZ2koYSxiLGMsZCxlKXt2YXIgZj1NKGMsZCk7YS5iYS5NZShiLnRvU3RyaW5nKCksZi5JKCEwKSxmdW5jdGlvbihjLGQpe1wib2tcIj09PWMmJmEubGEubmMoYixmKTtkaShlLGMsZCl9KX1cbmZ1bmN0aW9uIGhpKGEsYixjLGQpe3ZhciBlPSEwLGY7Zm9yKGYgaW4gYyllPSExO2U/KENiKFwib25EaXNjb25uZWN0KCkudXBkYXRlKCkgY2FsbGVkIHdpdGggZW1wdHkgZGF0YS4gIERvbid0IGRvIGFueXRoaW5nLlwiKSxkaShkLFwib2tcIikpOmEuYmEuQ2YoYi50b1N0cmluZygpLGMsZnVuY3Rpb24oZSxmKXtpZihcIm9rXCI9PT1lKWZvcih2YXIgbCBpbiBjKXt2YXIgbT1NKGNbbF0pO2EubGEubmMoYi51KGwpLG0pfWRpKGQsZSxmKX0pfWZ1bmN0aW9uIGlpKGEsYixjKXtjPVwiLmluZm9cIj09PUUoYi5wYXRoKT9hLkNkLlBiKGIsYyk6YS5MLlBiKGIsYyk7eWIoYS5kYSxiLnBhdGgsYyl9Zy55Yj1mdW5jdGlvbigpe3RoaXMuUmEmJnRoaXMuUmEueWIoKX07Zy5yYz1mdW5jdGlvbigpe3RoaXMuUmEmJnRoaXMuUmEucmMoKX07XG5nLlllPWZ1bmN0aW9uKGEpe2lmKFwidW5kZWZpbmVkXCIhPT10eXBlb2YgY29uc29sZSl7YT8odGhpcy5mZHx8KHRoaXMuZmQ9bmV3IExiKHRoaXMuVWEpKSxhPXRoaXMuZmQuZ2V0KCkpOmE9dGhpcy5VYS5nZXQoKTt2YXIgYj1SYShzYShhKSxmdW5jdGlvbihhLGIpe3JldHVybiBNYXRoLm1heChiLmxlbmd0aCxhKX0sMCksYztmb3IoYyBpbiBhKXtmb3IodmFyIGQ9YVtjXSxlPWMubGVuZ3RoO2U8YisyO2UrKyljKz1cIiBcIjtjb25zb2xlLmxvZyhjK2QpfX19O2cuWmU9ZnVuY3Rpb24oYSl7T2IodGhpcy5VYSxhKTt0aGlzLlNnLk9mW2FdPSEwfTtnLmY9ZnVuY3Rpb24oYSl7dmFyIGI9XCJcIjt0aGlzLlJhJiYoYj10aGlzLlJhLmlkK1wiOlwiKTtDYihiLGFyZ3VtZW50cyl9O1xuZnVuY3Rpb24gZGkoYSxiLGMpe2EmJkRiKGZ1bmN0aW9uKCl7aWYoXCJva1wiPT1iKWEobnVsbCk7ZWxzZXt2YXIgZD0oYnx8XCJlcnJvclwiKS50b1VwcGVyQ2FzZSgpLGU9ZDtjJiYoZSs9XCI6IFwiK2MpO2U9RXJyb3IoZSk7ZS5jb2RlPWQ7YShlKX19KX07ZnVuY3Rpb24gamkoYSxiLGMsZCxlKXtmdW5jdGlvbiBmKCl7fWEuZihcInRyYW5zYWN0aW9uIG9uIFwiK2IpO3ZhciBoPW5ldyBVKGEsYik7aC5FYihcInZhbHVlXCIsZik7Yz17cGF0aDpiLHVwZGF0ZTpjLEg6ZCxzdGF0dXM6bnVsbCxGZjpFYygpLGNmOmUsTGY6MCxpZTpmdW5jdGlvbigpe2guaWMoXCJ2YWx1ZVwiLGYpfSxrZTpudWxsLEJhOm51bGwscGQ6bnVsbCxxZDpudWxsLHJkOm51bGx9O2Q9YS5MLnphKGIsdm9pZCAwKXx8QztjLnBkPWQ7ZD1jLnVwZGF0ZShkLkkoKSk7aWYobihkKSl7Y2coXCJ0cmFuc2FjdGlvbiBmYWlsZWQ6IERhdGEgcmV0dXJuZWQgXCIsZCxjLnBhdGgpO2Muc3RhdHVzPTE7ZT1TZihhLnVjLGIpO3ZhciBrPWUuQ2EoKXx8W107ay5wdXNoKGMpO1RmKGUsayk7XCJvYmplY3RcIj09PXR5cGVvZiBkJiZudWxsIT09ZCYmdihkLFwiLnByaW9yaXR5XCIpPyhrPXcoZCxcIi5wcmlvcml0eVwiKSxLKGFnKGspLFwiSW52YWxpZCBwcmlvcml0eSByZXR1cm5lZCBieSB0cmFuc2FjdGlvbi4gUHJpb3JpdHkgbXVzdCBiZSBhIHZhbGlkIHN0cmluZywgZmluaXRlIG51bWJlciwgc2VydmVyIHZhbHVlLCBvciBudWxsLlwiKSk6XG5rPShhLkwuemEoYil8fEMpLkMoKS5JKCk7ZT1haShhKTtkPU0oZCxrKTtlPXNjKGQsZSk7Yy5xZD1kO2MucmQ9ZTtjLkJhPWEuSGQrKztjPXdmKGEuTCxiLGUsYy5CYSxjLmNmKTtBYihhLmRhLGIsYyk7a2koYSl9ZWxzZSBjLmllKCksYy5xZD1udWxsLGMucmQ9bnVsbCxjLkgmJihhPW5ldyBRKGMucGQsbmV3IFUoYSxjLnBhdGgpLE4pLGMuSChudWxsLCExLGEpKX1mdW5jdGlvbiBraShhLGIpe3ZhciBjPWJ8fGEudWM7Ynx8bGkoYSxjKTtpZihudWxsIT09Yy5DYSgpKXt2YXIgZD1taShhLGMpO0soMDxkLmxlbmd0aCxcIlNlbmRpbmcgemVybyBsZW5ndGggdHJhbnNhY3Rpb24gcXVldWVcIik7U2EoZCxmdW5jdGlvbihhKXtyZXR1cm4gMT09PWEuc3RhdHVzfSkmJm5pKGEsYy5wYXRoKCksZCl9ZWxzZSBjLndkKCkmJmMuUChmdW5jdGlvbihiKXtraShhLGIpfSl9XG5mdW5jdGlvbiBuaShhLGIsYyl7Zm9yKHZhciBkPVFhKGMsZnVuY3Rpb24oYSl7cmV0dXJuIGEuQmF9KSxlPWEuTC56YShiLGQpfHxDLGQ9ZSxlPWUuaGFzaCgpLGY9MDtmPGMubGVuZ3RoO2YrKyl7dmFyIGg9Y1tmXTtLKDE9PT1oLnN0YXR1cyxcInRyeVRvU2VuZFRyYW5zYWN0aW9uUXVldWVfOiBpdGVtcyBpbiBxdWV1ZSBzaG91bGQgYWxsIGJlIHJ1bi5cIik7aC5zdGF0dXM9MjtoLkxmKys7dmFyIGs9VChiLGgucGF0aCksZD1kLkcoayxoLnFkKX1kPWQuSSghMCk7YS5iYS5wdXQoYi50b1N0cmluZygpLGQsZnVuY3Rpb24oZCl7YS5mKFwidHJhbnNhY3Rpb24gcHV0IHJlc3BvbnNlXCIse3BhdGg6Yi50b1N0cmluZygpLHN0YXR1czpkfSk7dmFyIGU9W107aWYoXCJva1wiPT09ZCl7ZD1bXTtmb3IoZj0wO2Y8Yy5sZW5ndGg7ZisrKXtjW2ZdLnN0YXR1cz0zO2U9ZS5jb25jYXQoemYoYS5MLGNbZl0uQmEpKTtpZihjW2ZdLkgpe3ZhciBoPWNbZl0ucmQsaz1uZXcgVShhLGNbZl0ucGF0aCk7ZC5wdXNoKHEoY1tmXS5ILFxubnVsbCxudWxsLCEwLG5ldyBRKGgsayxOKSkpfWNbZl0uaWUoKX1saShhLFNmKGEudWMsYikpO2tpKGEpO0FiKGEuZGEsYixlKTtmb3IoZj0wO2Y8ZC5sZW5ndGg7ZisrKURiKGRbZl0pfWVsc2V7aWYoXCJkYXRhc3RhbGVcIj09PWQpZm9yKGY9MDtmPGMubGVuZ3RoO2YrKyljW2ZdLnN0YXR1cz00PT09Y1tmXS5zdGF0dXM/NToxO2Vsc2UgZm9yKE8oXCJ0cmFuc2FjdGlvbiBhdCBcIitiLnRvU3RyaW5nKCkrXCIgZmFpbGVkOiBcIitkKSxmPTA7ZjxjLmxlbmd0aDtmKyspY1tmXS5zdGF0dXM9NSxjW2ZdLmtlPWQ7YmkoYSxiKX19LGUpfWZ1bmN0aW9uIGJpKGEsYil7dmFyIGM9b2koYSxiKSxkPWMucGF0aCgpLGM9bWkoYSxjKTtwaShhLGMsZCk7cmV0dXJuIGR9XG5mdW5jdGlvbiBwaShhLGIsYyl7aWYoMCE9PWIubGVuZ3RoKXtmb3IodmFyIGQ9W10sZT1bXSxmPVFhKGIsZnVuY3Rpb24oYSl7cmV0dXJuIGEuQmF9KSxoPTA7aDxiLmxlbmd0aDtoKyspe3ZhciBrPWJbaF0sbD1UKGMsay5wYXRoKSxtPSExLHQ7SyhudWxsIT09bCxcInJlcnVuVHJhbnNhY3Rpb25zVW5kZXJOb2RlXzogcmVsYXRpdmVQYXRoIHNob3VsZCBub3QgYmUgbnVsbC5cIik7aWYoNT09PWsuc3RhdHVzKW09ITAsdD1rLmtlLGU9ZS5jb25jYXQoemYoYS5MLGsuQmEsITApKTtlbHNlIGlmKDE9PT1rLnN0YXR1cylpZigyNTw9ay5MZiltPSEwLHQ9XCJtYXhyZXRyeVwiLGU9ZS5jb25jYXQoemYoYS5MLGsuQmEsITApKTtlbHNle3ZhciB6PWEuTC56YShrLnBhdGgsZil8fEM7ay5wZD16O3ZhciBJPWJbaF0udXBkYXRlKHouSSgpKTtuKEkpPyhjZyhcInRyYW5zYWN0aW9uIGZhaWxlZDogRGF0YSByZXR1cm5lZCBcIixJLGsucGF0aCksbD1NKEkpLFwib2JqZWN0XCI9PT10eXBlb2YgSSYmbnVsbCE9XG5JJiZ2KEksXCIucHJpb3JpdHlcIil8fChsPWwuZ2Eoei5DKCkpKSx6PWsuQmEsST1haShhKSxJPXNjKGwsSSksay5xZD1sLGsucmQ9SSxrLkJhPWEuSGQrKyxWYShmLHopLGU9ZS5jb25jYXQod2YoYS5MLGsucGF0aCxJLGsuQmEsay5jZikpLGU9ZS5jb25jYXQoemYoYS5MLHosITApKSk6KG09ITAsdD1cIm5vZGF0YVwiLGU9ZS5jb25jYXQoemYoYS5MLGsuQmEsITApKSl9QWIoYS5kYSxjLGUpO2U9W107bSYmKGJbaF0uc3RhdHVzPTMsc2V0VGltZW91dChiW2hdLmllLE1hdGguZmxvb3IoMCkpLGJbaF0uSCYmKFwibm9kYXRhXCI9PT10PyhrPW5ldyBVKGEsYltoXS5wYXRoKSxkLnB1c2gocShiW2hdLkgsbnVsbCxudWxsLCExLG5ldyBRKGJbaF0ucGQsayxOKSkpKTpkLnB1c2gocShiW2hdLkgsbnVsbCxFcnJvcih0KSwhMSxudWxsKSkpKX1saShhLGEudWMpO2ZvcihoPTA7aDxkLmxlbmd0aDtoKyspRGIoZFtoXSk7a2koYSl9fVxuZnVuY3Rpb24gb2koYSxiKXtmb3IodmFyIGMsZD1hLnVjO251bGwhPT0oYz1FKGIpKSYmbnVsbD09PWQuQ2EoKTspZD1TZihkLGMpLGI9SChiKTtyZXR1cm4gZH1mdW5jdGlvbiBtaShhLGIpe3ZhciBjPVtdO3FpKGEsYixjKTtjLnNvcnQoZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS5GZi1iLkZmfSk7cmV0dXJuIGN9ZnVuY3Rpb24gcWkoYSxiLGMpe3ZhciBkPWIuQ2EoKTtpZihudWxsIT09ZClmb3IodmFyIGU9MDtlPGQubGVuZ3RoO2UrKyljLnB1c2goZFtlXSk7Yi5QKGZ1bmN0aW9uKGIpe3FpKGEsYixjKX0pfWZ1bmN0aW9uIGxpKGEsYil7dmFyIGM9Yi5DYSgpO2lmKGMpe2Zvcih2YXIgZD0wLGU9MDtlPGMubGVuZ3RoO2UrKykzIT09Y1tlXS5zdGF0dXMmJihjW2RdPWNbZV0sZCsrKTtjLmxlbmd0aD1kO1RmKGIsMDxjLmxlbmd0aD9jOm51bGwpfWIuUChmdW5jdGlvbihiKXtsaShhLGIpfSl9XG5mdW5jdGlvbiBlaShhLGIpe3ZhciBjPW9pKGEsYikucGF0aCgpLGQ9U2YoYS51YyxiKTtXZihkLGZ1bmN0aW9uKGIpe3JpKGEsYil9KTtyaShhLGQpO1ZmKGQsZnVuY3Rpb24oYil7cmkoYSxiKX0pO3JldHVybiBjfVxuZnVuY3Rpb24gcmkoYSxiKXt2YXIgYz1iLkNhKCk7aWYobnVsbCE9PWMpe2Zvcih2YXIgZD1bXSxlPVtdLGY9LTEsaD0wO2g8Yy5sZW5ndGg7aCsrKTQhPT1jW2hdLnN0YXR1cyYmKDI9PT1jW2hdLnN0YXR1cz8oSyhmPT09aC0xLFwiQWxsIFNFTlQgaXRlbXMgc2hvdWxkIGJlIGF0IGJlZ2lubmluZyBvZiBxdWV1ZS5cIiksZj1oLGNbaF0uc3RhdHVzPTQsY1toXS5rZT1cInNldFwiKTooSygxPT09Y1toXS5zdGF0dXMsXCJVbmV4cGVjdGVkIHRyYW5zYWN0aW9uIHN0YXR1cyBpbiBhYm9ydFwiKSxjW2hdLmllKCksZT1lLmNvbmNhdCh6ZihhLkwsY1toXS5CYSwhMCkpLGNbaF0uSCYmZC5wdXNoKHEoY1toXS5ILG51bGwsRXJyb3IoXCJzZXRcIiksITEsbnVsbCkpKSk7LTE9PT1mP1RmKGIsbnVsbCk6Yy5sZW5ndGg9ZisxO0FiKGEuZGEsYi5wYXRoKCksZSk7Zm9yKGg9MDtoPGQubGVuZ3RoO2grKylEYihkW2hdKX19O2Z1bmN0aW9uIFcoKXt0aGlzLm9jPXt9O3RoaXMuU2Y9ITF9Vy5wcm90b3R5cGUueWI9ZnVuY3Rpb24oKXtmb3IodmFyIGEgaW4gdGhpcy5vYyl0aGlzLm9jW2FdLnliKCl9O1cucHJvdG90eXBlLnJjPWZ1bmN0aW9uKCl7Zm9yKHZhciBhIGluIHRoaXMub2MpdGhpcy5vY1thXS5yYygpfTtXLnByb3RvdHlwZS52ZT1mdW5jdGlvbigpe3RoaXMuU2Y9ITB9O2NhKFcpO1cucHJvdG90eXBlLmludGVycnVwdD1XLnByb3RvdHlwZS55YjtXLnByb3RvdHlwZS5yZXN1bWU9Vy5wcm90b3R5cGUucmM7ZnVuY3Rpb24gWChhLGIpe3RoaXMuYmQ9YTt0aGlzLnJhPWJ9WC5wcm90b3R5cGUuY2FuY2VsPWZ1bmN0aW9uKGEpe3goXCJGaXJlYmFzZS5vbkRpc2Nvbm5lY3QoKS5jYW5jZWxcIiwwLDEsYXJndW1lbnRzLmxlbmd0aCk7QShcIkZpcmViYXNlLm9uRGlzY29ubmVjdCgpLmNhbmNlbFwiLDEsYSwhMCk7dGhpcy5iZC5KZCh0aGlzLnJhLGF8fG51bGwpfTtYLnByb3RvdHlwZS5jYW5jZWw9WC5wcm90b3R5cGUuY2FuY2VsO1gucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbihhKXt4KFwiRmlyZWJhc2Uub25EaXNjb25uZWN0KCkucmVtb3ZlXCIsMCwxLGFyZ3VtZW50cy5sZW5ndGgpO2pnKFwiRmlyZWJhc2Uub25EaXNjb25uZWN0KCkucmVtb3ZlXCIsdGhpcy5yYSk7QShcIkZpcmViYXNlLm9uRGlzY29ubmVjdCgpLnJlbW92ZVwiLDEsYSwhMCk7ZmkodGhpcy5iZCx0aGlzLnJhLG51bGwsYSl9O1gucHJvdG90eXBlLnJlbW92ZT1YLnByb3RvdHlwZS5yZW1vdmU7XG5YLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24oYSxiKXt4KFwiRmlyZWJhc2Uub25EaXNjb25uZWN0KCkuc2V0XCIsMSwyLGFyZ3VtZW50cy5sZW5ndGgpO2pnKFwiRmlyZWJhc2Uub25EaXNjb25uZWN0KCkuc2V0XCIsdGhpcy5yYSk7YmcoXCJGaXJlYmFzZS5vbkRpc2Nvbm5lY3QoKS5zZXRcIixhLHRoaXMucmEsITEpO0EoXCJGaXJlYmFzZS5vbkRpc2Nvbm5lY3QoKS5zZXRcIiwyLGIsITApO2ZpKHRoaXMuYmQsdGhpcy5yYSxhLGIpfTtYLnByb3RvdHlwZS5zZXQ9WC5wcm90b3R5cGUuc2V0O1xuWC5wcm90b3R5cGUuS2I9ZnVuY3Rpb24oYSxiLGMpe3goXCJGaXJlYmFzZS5vbkRpc2Nvbm5lY3QoKS5zZXRXaXRoUHJpb3JpdHlcIiwyLDMsYXJndW1lbnRzLmxlbmd0aCk7amcoXCJGaXJlYmFzZS5vbkRpc2Nvbm5lY3QoKS5zZXRXaXRoUHJpb3JpdHlcIix0aGlzLnJhKTtiZyhcIkZpcmViYXNlLm9uRGlzY29ubmVjdCgpLnNldFdpdGhQcmlvcml0eVwiLGEsdGhpcy5yYSwhMSk7ZmcoXCJGaXJlYmFzZS5vbkRpc2Nvbm5lY3QoKS5zZXRXaXRoUHJpb3JpdHlcIiwyLGIpO0EoXCJGaXJlYmFzZS5vbkRpc2Nvbm5lY3QoKS5zZXRXaXRoUHJpb3JpdHlcIiwzLGMsITApO2dpKHRoaXMuYmQsdGhpcy5yYSxhLGIsYyl9O1gucHJvdG90eXBlLnNldFdpdGhQcmlvcml0eT1YLnByb3RvdHlwZS5LYjtcblgucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbihhLGIpe3goXCJGaXJlYmFzZS5vbkRpc2Nvbm5lY3QoKS51cGRhdGVcIiwxLDIsYXJndW1lbnRzLmxlbmd0aCk7amcoXCJGaXJlYmFzZS5vbkRpc2Nvbm5lY3QoKS51cGRhdGVcIix0aGlzLnJhKTtpZihlYShhKSl7Zm9yKHZhciBjPXt9LGQ9MDtkPGEubGVuZ3RoOysrZCljW1wiXCIrZF09YVtkXTthPWM7TyhcIlBhc3NpbmcgYW4gQXJyYXkgdG8gRmlyZWJhc2Uub25EaXNjb25uZWN0KCkudXBkYXRlKCkgaXMgZGVwcmVjYXRlZC4gVXNlIHNldCgpIGlmIHlvdSB3YW50IHRvIG92ZXJ3cml0ZSB0aGUgZXhpc3RpbmcgZGF0YSwgb3IgYW4gT2JqZWN0IHdpdGggaW50ZWdlciBrZXlzIGlmIHlvdSByZWFsbHkgZG8gd2FudCB0byBvbmx5IHVwZGF0ZSBzb21lIG9mIHRoZSBjaGlsZHJlbi5cIil9ZWcoXCJGaXJlYmFzZS5vbkRpc2Nvbm5lY3QoKS51cGRhdGVcIixhLHRoaXMucmEpO0EoXCJGaXJlYmFzZS5vbkRpc2Nvbm5lY3QoKS51cGRhdGVcIiwyLGIsITApO1xuaGkodGhpcy5iZCx0aGlzLnJhLGEsYil9O1gucHJvdG90eXBlLnVwZGF0ZT1YLnByb3RvdHlwZS51cGRhdGU7ZnVuY3Rpb24gWShhLGIsYyxkKXt0aGlzLms9YTt0aGlzLnBhdGg9Yjt0aGlzLm49Yzt0aGlzLmxjPWR9XG5mdW5jdGlvbiBzaShhKXt2YXIgYj1udWxsLGM9bnVsbDthLm1hJiYoYj1uZChhKSk7YS5wYSYmKGM9cGQoYSkpO2lmKGEuZz09PVFkKXtpZihhLm1hKXtpZihcIltNSU5fTkFNRV1cIiE9bWQoYSkpdGhyb3cgRXJyb3IoXCJRdWVyeTogV2hlbiBvcmRlcmluZyBieSBrZXksIHlvdSBtYXkgb25seSBwYXNzIG9uZSBhcmd1bWVudCB0byBzdGFydEF0KCksIGVuZEF0KCksIG9yIGVxdWFsVG8oKS5cIik7aWYoXCJzdHJpbmdcIiE9PXR5cGVvZiBiKXRocm93IEVycm9yKFwiUXVlcnk6IFdoZW4gb3JkZXJpbmcgYnkga2V5LCB0aGUgYXJndW1lbnQgcGFzc2VkIHRvIHN0YXJ0QXQoKSwgZW5kQXQoKSxvciBlcXVhbFRvKCkgbXVzdCBiZSBhIHN0cmluZy5cIik7fWlmKGEucGEpe2lmKFwiW01BWF9OQU1FXVwiIT1vZChhKSl0aHJvdyBFcnJvcihcIlF1ZXJ5OiBXaGVuIG9yZGVyaW5nIGJ5IGtleSwgeW91IG1heSBvbmx5IHBhc3Mgb25lIGFyZ3VtZW50IHRvIHN0YXJ0QXQoKSwgZW5kQXQoKSwgb3IgZXF1YWxUbygpLlwiKTtpZihcInN0cmluZ1wiIT09XG50eXBlb2YgYyl0aHJvdyBFcnJvcihcIlF1ZXJ5OiBXaGVuIG9yZGVyaW5nIGJ5IGtleSwgdGhlIGFyZ3VtZW50IHBhc3NlZCB0byBzdGFydEF0KCksIGVuZEF0KCksb3IgZXF1YWxUbygpIG11c3QgYmUgYSBzdHJpbmcuXCIpO319ZWxzZSBpZihhLmc9PT1OKXtpZihudWxsIT1iJiYhYWcoYil8fG51bGwhPWMmJiFhZyhjKSl0aHJvdyBFcnJvcihcIlF1ZXJ5OiBXaGVuIG9yZGVyaW5nIGJ5IHByaW9yaXR5LCB0aGUgZmlyc3QgYXJndW1lbnQgcGFzc2VkIHRvIHN0YXJ0QXQoKSwgZW5kQXQoKSwgb3IgZXF1YWxUbygpIG11c3QgYmUgYSB2YWxpZCBwcmlvcml0eSB2YWx1ZSAobnVsbCwgYSBudW1iZXIsIG9yIGEgc3RyaW5nKS5cIik7fWVsc2UgaWYoSyhhLmcgaW5zdGFuY2VvZiBVZHx8YS5nPT09JGQsXCJ1bmtub3duIGluZGV4IHR5cGUuXCIpLG51bGwhPWImJlwib2JqZWN0XCI9PT10eXBlb2YgYnx8bnVsbCE9YyYmXCJvYmplY3RcIj09PXR5cGVvZiBjKXRocm93IEVycm9yKFwiUXVlcnk6IEZpcnN0IGFyZ3VtZW50IHBhc3NlZCB0byBzdGFydEF0KCksIGVuZEF0KCksIG9yIGVxdWFsVG8oKSBjYW5ub3QgYmUgYW4gb2JqZWN0LlwiKTtcbn1mdW5jdGlvbiB0aShhKXtpZihhLm1hJiZhLnBhJiZhLmphJiYoIWEuamF8fFwiXCI9PT1hLk5iKSl0aHJvdyBFcnJvcihcIlF1ZXJ5OiBDYW4ndCBjb21iaW5lIHN0YXJ0QXQoKSwgZW5kQXQoKSwgYW5kIGxpbWl0KCkuIFVzZSBsaW1pdFRvRmlyc3QoKSBvciBsaW1pdFRvTGFzdCgpIGluc3RlYWQuXCIpO31mdW5jdGlvbiB1aShhLGIpe2lmKCEwPT09YS5sYyl0aHJvdyBFcnJvcihiK1wiOiBZb3UgY2FuJ3QgY29tYmluZSBtdWx0aXBsZSBvcmRlckJ5IGNhbGxzLlwiKTt9Zz1ZLnByb3RvdHlwZTtnLkliPWZ1bmN0aW9uKCl7eChcIlF1ZXJ5LnJlZlwiLDAsMCxhcmd1bWVudHMubGVuZ3RoKTtyZXR1cm4gbmV3IFUodGhpcy5rLHRoaXMucGF0aCl9O1xuZy5FYj1mdW5jdGlvbihhLGIsYyxkKXt4KFwiUXVlcnkub25cIiwyLDQsYXJndW1lbnRzLmxlbmd0aCk7Z2coXCJRdWVyeS5vblwiLGEsITEpO0EoXCJRdWVyeS5vblwiLDIsYiwhMSk7dmFyIGU9dmkoXCJRdWVyeS5vblwiLGMsZCk7aWYoXCJ2YWx1ZVwiPT09YSlpaSh0aGlzLmssdGhpcyxuZXcgaWQoYixlLmNhbmNlbHx8bnVsbCxlLk1hfHxudWxsKSk7ZWxzZXt2YXIgZj17fTtmW2FdPWI7aWkodGhpcy5rLHRoaXMsbmV3IGpkKGYsZS5jYW5jZWwsZS5NYSkpfXJldHVybiBifTtcbmcuaWM9ZnVuY3Rpb24oYSxiLGMpe3goXCJRdWVyeS5vZmZcIiwwLDMsYXJndW1lbnRzLmxlbmd0aCk7Z2coXCJRdWVyeS5vZmZcIixhLCEwKTtBKFwiUXVlcnkub2ZmXCIsMixiLCEwKTttYihcIlF1ZXJ5Lm9mZlwiLDMsYyk7dmFyIGQ9bnVsbCxlPW51bGw7XCJ2YWx1ZVwiPT09YT9kPW5ldyBpZChifHxudWxsLG51bGwsY3x8bnVsbCk6YSYmKGImJihlPXt9LGVbYV09YiksZD1uZXcgamQoZSxudWxsLGN8fG51bGwpKTtlPXRoaXMuaztkPVwiLmluZm9cIj09PUUodGhpcy5wYXRoKT9lLkNkLmpiKHRoaXMsZCk6ZS5MLmpiKHRoaXMsZCk7eWIoZS5kYSx0aGlzLnBhdGgsZCl9O1xuZy5EZz1mdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoaCl7ZiYmKGY9ITEsZS5pYyhhLGMpLGIuY2FsbChkLk1hLGgpKX14KFwiUXVlcnkub25jZVwiLDIsNCxhcmd1bWVudHMubGVuZ3RoKTtnZyhcIlF1ZXJ5Lm9uY2VcIixhLCExKTtBKFwiUXVlcnkub25jZVwiLDIsYiwhMSk7dmFyIGQ9dmkoXCJRdWVyeS5vbmNlXCIsYXJndW1lbnRzWzJdLGFyZ3VtZW50c1szXSksZT10aGlzLGY9ITA7dGhpcy5FYihhLGMsZnVuY3Rpb24oYil7ZS5pYyhhLGMpO2QuY2FuY2VsJiZkLmNhbmNlbC5jYWxsKGQuTWEsYil9KX07XG5nLkhlPWZ1bmN0aW9uKGEpe08oXCJRdWVyeS5saW1pdCgpIGJlaW5nIGRlcHJlY2F0ZWQuIFBsZWFzZSB1c2UgUXVlcnkubGltaXRUb0ZpcnN0KCkgb3IgUXVlcnkubGltaXRUb0xhc3QoKSBpbnN0ZWFkLlwiKTt4KFwiUXVlcnkubGltaXRcIiwxLDEsYXJndW1lbnRzLmxlbmd0aCk7aWYoIWdhKGEpfHxNYXRoLmZsb29yKGEpIT09YXx8MD49YSl0aHJvdyBFcnJvcihcIlF1ZXJ5LmxpbWl0OiBGaXJzdCBhcmd1bWVudCBtdXN0IGJlIGEgcG9zaXRpdmUgaW50ZWdlci5cIik7aWYodGhpcy5uLmphKXRocm93IEVycm9yKFwiUXVlcnkubGltaXQ6IExpbWl0IHdhcyBhbHJlYWR5IHNldCAoYnkgYW5vdGhlciBjYWxsIHRvIGxpbWl0LCBsaW1pdFRvRmlyc3QsIG9ybGltaXRUb0xhc3QuXCIpO3ZhciBiPXRoaXMubi5IZShhKTt0aShiKTtyZXR1cm4gbmV3IFkodGhpcy5rLHRoaXMucGF0aCxiLHRoaXMubGMpfTtcbmcuSWU9ZnVuY3Rpb24oYSl7eChcIlF1ZXJ5LmxpbWl0VG9GaXJzdFwiLDEsMSxhcmd1bWVudHMubGVuZ3RoKTtpZighZ2EoYSl8fE1hdGguZmxvb3IoYSkhPT1hfHwwPj1hKXRocm93IEVycm9yKFwiUXVlcnkubGltaXRUb0ZpcnN0OiBGaXJzdCBhcmd1bWVudCBtdXN0IGJlIGEgcG9zaXRpdmUgaW50ZWdlci5cIik7aWYodGhpcy5uLmphKXRocm93IEVycm9yKFwiUXVlcnkubGltaXRUb0ZpcnN0OiBMaW1pdCB3YXMgYWxyZWFkeSBzZXQgKGJ5IGFub3RoZXIgY2FsbCB0byBsaW1pdCwgbGltaXRUb0ZpcnN0LCBvciBsaW1pdFRvTGFzdCkuXCIpO3JldHVybiBuZXcgWSh0aGlzLmssdGhpcy5wYXRoLHRoaXMubi5JZShhKSx0aGlzLmxjKX07XG5nLkplPWZ1bmN0aW9uKGEpe3goXCJRdWVyeS5saW1pdFRvTGFzdFwiLDEsMSxhcmd1bWVudHMubGVuZ3RoKTtpZighZ2EoYSl8fE1hdGguZmxvb3IoYSkhPT1hfHwwPj1hKXRocm93IEVycm9yKFwiUXVlcnkubGltaXRUb0xhc3Q6IEZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYSBwb3NpdGl2ZSBpbnRlZ2VyLlwiKTtpZih0aGlzLm4uamEpdGhyb3cgRXJyb3IoXCJRdWVyeS5saW1pdFRvTGFzdDogTGltaXQgd2FzIGFscmVhZHkgc2V0IChieSBhbm90aGVyIGNhbGwgdG8gbGltaXQsIGxpbWl0VG9GaXJzdCwgb3IgbGltaXRUb0xhc3QpLlwiKTtyZXR1cm4gbmV3IFkodGhpcy5rLHRoaXMucGF0aCx0aGlzLm4uSmUoYSksdGhpcy5sYyl9O1xuZy5FZz1mdW5jdGlvbihhKXt4KFwiUXVlcnkub3JkZXJCeUNoaWxkXCIsMSwxLGFyZ3VtZW50cy5sZW5ndGgpO2lmKFwiJGtleVwiPT09YSl0aHJvdyBFcnJvcignUXVlcnkub3JkZXJCeUNoaWxkOiBcIiRrZXlcIiBpcyBpbnZhbGlkLiAgVXNlIFF1ZXJ5Lm9yZGVyQnlLZXkoKSBpbnN0ZWFkLicpO2lmKFwiJHByaW9yaXR5XCI9PT1hKXRocm93IEVycm9yKCdRdWVyeS5vcmRlckJ5Q2hpbGQ6IFwiJHByaW9yaXR5XCIgaXMgaW52YWxpZC4gIFVzZSBRdWVyeS5vcmRlckJ5UHJpb3JpdHkoKSBpbnN0ZWFkLicpO2lmKFwiJHZhbHVlXCI9PT1hKXRocm93IEVycm9yKCdRdWVyeS5vcmRlckJ5Q2hpbGQ6IFwiJHZhbHVlXCIgaXMgaW52YWxpZC4gIFVzZSBRdWVyeS5vcmRlckJ5VmFsdWUoKSBpbnN0ZWFkLicpO2lnKFwiUXVlcnkub3JkZXJCeUNoaWxkXCIsYSk7dWkodGhpcyxcIlF1ZXJ5Lm9yZGVyQnlDaGlsZFwiKTt2YXIgYj1uZXcgTChhKTtpZihiLmUoKSl0aHJvdyBFcnJvcihcIlF1ZXJ5Lm9yZGVyQnlDaGlsZDogY2Fubm90IHBhc3MgaW4gZW1wdHkgcGF0aC4gIFVzZSBRdWVyeS5vcmRlckJ5VmFsdWUoKSBpbnN0ZWFkLlwiKTtcbmI9bmV3IFVkKGIpO2I9ZGUodGhpcy5uLGIpO3NpKGIpO3JldHVybiBuZXcgWSh0aGlzLmssdGhpcy5wYXRoLGIsITApfTtnLkZnPWZ1bmN0aW9uKCl7eChcIlF1ZXJ5Lm9yZGVyQnlLZXlcIiwwLDAsYXJndW1lbnRzLmxlbmd0aCk7dWkodGhpcyxcIlF1ZXJ5Lm9yZGVyQnlLZXlcIik7dmFyIGE9ZGUodGhpcy5uLFFkKTtzaShhKTtyZXR1cm4gbmV3IFkodGhpcy5rLHRoaXMucGF0aCxhLCEwKX07Zy5HZz1mdW5jdGlvbigpe3goXCJRdWVyeS5vcmRlckJ5UHJpb3JpdHlcIiwwLDAsYXJndW1lbnRzLmxlbmd0aCk7dWkodGhpcyxcIlF1ZXJ5Lm9yZGVyQnlQcmlvcml0eVwiKTt2YXIgYT1kZSh0aGlzLm4sTik7c2koYSk7cmV0dXJuIG5ldyBZKHRoaXMuayx0aGlzLnBhdGgsYSwhMCl9O1xuZy5IZz1mdW5jdGlvbigpe3goXCJRdWVyeS5vcmRlckJ5VmFsdWVcIiwwLDAsYXJndW1lbnRzLmxlbmd0aCk7dWkodGhpcyxcIlF1ZXJ5Lm9yZGVyQnlWYWx1ZVwiKTt2YXIgYT1kZSh0aGlzLm4sJGQpO3NpKGEpO3JldHVybiBuZXcgWSh0aGlzLmssdGhpcy5wYXRoLGEsITApfTtnLiRkPWZ1bmN0aW9uKGEsYil7eChcIlF1ZXJ5LnN0YXJ0QXRcIiwwLDIsYXJndW1lbnRzLmxlbmd0aCk7YmcoXCJRdWVyeS5zdGFydEF0XCIsYSx0aGlzLnBhdGgsITApO2hnKFwiUXVlcnkuc3RhcnRBdFwiLGIpO3ZhciBjPXRoaXMubi4kZChhLGIpO3RpKGMpO3NpKGMpO2lmKHRoaXMubi5tYSl0aHJvdyBFcnJvcihcIlF1ZXJ5LnN0YXJ0QXQ6IFN0YXJ0aW5nIHBvaW50IHdhcyBhbHJlYWR5IHNldCAoYnkgYW5vdGhlciBjYWxsIHRvIHN0YXJ0QXQgb3IgZXF1YWxUbykuXCIpO24oYSl8fChiPWE9bnVsbCk7cmV0dXJuIG5ldyBZKHRoaXMuayx0aGlzLnBhdGgsYyx0aGlzLmxjKX07XG5nLnRkPWZ1bmN0aW9uKGEsYil7eChcIlF1ZXJ5LmVuZEF0XCIsMCwyLGFyZ3VtZW50cy5sZW5ndGgpO2JnKFwiUXVlcnkuZW5kQXRcIixhLHRoaXMucGF0aCwhMCk7aGcoXCJRdWVyeS5lbmRBdFwiLGIpO3ZhciBjPXRoaXMubi50ZChhLGIpO3RpKGMpO3NpKGMpO2lmKHRoaXMubi5wYSl0aHJvdyBFcnJvcihcIlF1ZXJ5LmVuZEF0OiBFbmRpbmcgcG9pbnQgd2FzIGFscmVhZHkgc2V0IChieSBhbm90aGVyIGNhbGwgdG8gZW5kQXQgb3IgZXF1YWxUbykuXCIpO3JldHVybiBuZXcgWSh0aGlzLmssdGhpcy5wYXRoLGMsdGhpcy5sYyl9O1xuZy5rZz1mdW5jdGlvbihhLGIpe3goXCJRdWVyeS5lcXVhbFRvXCIsMSwyLGFyZ3VtZW50cy5sZW5ndGgpO2JnKFwiUXVlcnkuZXF1YWxUb1wiLGEsdGhpcy5wYXRoLCExKTtoZyhcIlF1ZXJ5LmVxdWFsVG9cIixiKTtpZih0aGlzLm4ubWEpdGhyb3cgRXJyb3IoXCJRdWVyeS5lcXVhbFRvOiBTdGFydGluZyBwb2ludCB3YXMgYWxyZWFkeSBzZXQgKGJ5IGFub3RoZXIgY2FsbCB0byBlbmRBdCBvciBlcXVhbFRvKS5cIik7aWYodGhpcy5uLnBhKXRocm93IEVycm9yKFwiUXVlcnkuZXF1YWxUbzogRW5kaW5nIHBvaW50IHdhcyBhbHJlYWR5IHNldCAoYnkgYW5vdGhlciBjYWxsIHRvIGVuZEF0IG9yIGVxdWFsVG8pLlwiKTtyZXR1cm4gdGhpcy4kZChhLGIpLnRkKGEsYil9O1xuZy50b1N0cmluZz1mdW5jdGlvbigpe3goXCJRdWVyeS50b1N0cmluZ1wiLDAsMCxhcmd1bWVudHMubGVuZ3RoKTtmb3IodmFyIGE9dGhpcy5wYXRoLGI9XCJcIixjPWEuWjtjPGEuby5sZW5ndGg7YysrKVwiXCIhPT1hLm9bY10mJihiKz1cIi9cIitlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGEub1tjXSkpKTtyZXR1cm4gdGhpcy5rLnRvU3RyaW5nKCkrKGJ8fFwiL1wiKX07Zy52YT1mdW5jdGlvbigpe3ZhciBhPVVjKGVlKHRoaXMubikpO3JldHVyblwie31cIj09PWE/XCJkZWZhdWx0XCI6YX07XG5mdW5jdGlvbiB2aShhLGIsYyl7dmFyIGQ9e2NhbmNlbDpudWxsLE1hOm51bGx9O2lmKGImJmMpZC5jYW5jZWw9YixBKGEsMyxkLmNhbmNlbCwhMCksZC5NYT1jLG1iKGEsNCxkLk1hKTtlbHNlIGlmKGIpaWYoXCJvYmplY3RcIj09PXR5cGVvZiBiJiZudWxsIT09YilkLk1hPWI7ZWxzZSBpZihcImZ1bmN0aW9uXCI9PT10eXBlb2YgYilkLmNhbmNlbD1iO2Vsc2UgdGhyb3cgRXJyb3IoeShhLDMsITApK1wiIG11c3QgZWl0aGVyIGJlIGEgY2FuY2VsIGNhbGxiYWNrIG9yIGEgY29udGV4dCBvYmplY3QuXCIpO3JldHVybiBkfVkucHJvdG90eXBlLnJlZj1ZLnByb3RvdHlwZS5JYjtZLnByb3RvdHlwZS5vbj1ZLnByb3RvdHlwZS5FYjtZLnByb3RvdHlwZS5vZmY9WS5wcm90b3R5cGUuaWM7WS5wcm90b3R5cGUub25jZT1ZLnByb3RvdHlwZS5EZztZLnByb3RvdHlwZS5saW1pdD1ZLnByb3RvdHlwZS5IZTtZLnByb3RvdHlwZS5saW1pdFRvRmlyc3Q9WS5wcm90b3R5cGUuSWU7XG5ZLnByb3RvdHlwZS5saW1pdFRvTGFzdD1ZLnByb3RvdHlwZS5KZTtZLnByb3RvdHlwZS5vcmRlckJ5Q2hpbGQ9WS5wcm90b3R5cGUuRWc7WS5wcm90b3R5cGUub3JkZXJCeUtleT1ZLnByb3RvdHlwZS5GZztZLnByb3RvdHlwZS5vcmRlckJ5UHJpb3JpdHk9WS5wcm90b3R5cGUuR2c7WS5wcm90b3R5cGUub3JkZXJCeVZhbHVlPVkucHJvdG90eXBlLkhnO1kucHJvdG90eXBlLnN0YXJ0QXQ9WS5wcm90b3R5cGUuJGQ7WS5wcm90b3R5cGUuZW5kQXQ9WS5wcm90b3R5cGUudGQ7WS5wcm90b3R5cGUuZXF1YWxUbz1ZLnByb3RvdHlwZS5rZztZLnByb3RvdHlwZS50b1N0cmluZz1ZLnByb3RvdHlwZS50b1N0cmluZzt2YXIgWj17fTtaLnZjPUtoO1ouRGF0YUNvbm5lY3Rpb249Wi52YztLaC5wcm90b3R5cGUuUmc9ZnVuY3Rpb24oYSxiKXt0aGlzLkZhKFwicVwiLHtwOmF9LGIpfTtaLnZjLnByb3RvdHlwZS5zaW1wbGVMaXN0ZW49Wi52Yy5wcm90b3R5cGUuUmc7S2gucHJvdG90eXBlLmpnPWZ1bmN0aW9uKGEsYil7dGhpcy5GYShcImVjaG9cIix7ZDphfSxiKX07Wi52Yy5wcm90b3R5cGUuZWNobz1aLnZjLnByb3RvdHlwZS5qZztLaC5wcm90b3R5cGUuaW50ZXJydXB0PUtoLnByb3RvdHlwZS55YjtaLlZmPXloO1ouUmVhbFRpbWVDb25uZWN0aW9uPVouVmY7eWgucHJvdG90eXBlLnNlbmRSZXF1ZXN0PXloLnByb3RvdHlwZS5GYTt5aC5wcm90b3R5cGUuY2xvc2U9eWgucHJvdG90eXBlLmNsb3NlO1xuWi5yZz1mdW5jdGlvbihhKXt2YXIgYj1LaC5wcm90b3R5cGUucHV0O0toLnByb3RvdHlwZS5wdXQ9ZnVuY3Rpb24oYyxkLGUsZil7bihmKSYmKGY9YSgpKTtiLmNhbGwodGhpcyxjLGQsZSxmKX07cmV0dXJuIGZ1bmN0aW9uKCl7S2gucHJvdG90eXBlLnB1dD1ifX07Wi5oaWphY2tIYXNoPVoucmc7Wi5VZj16YztaLkNvbm5lY3Rpb25UYXJnZXQ9Wi5VZjtaLnZhPWZ1bmN0aW9uKGEpe3JldHVybiBhLnZhKCl9O1oucXVlcnlJZGVudGlmaWVyPVoudmE7Wi50Zz1mdW5jdGlvbihhKXtyZXR1cm4gYS5rLlJhLiR9O1oubGlzdGVucz1aLnRnO1oudmU9ZnVuY3Rpb24oYSl7YS52ZSgpfTtaLmZvcmNlUmVzdENsaWVudD1aLnZlO2Z1bmN0aW9uIFUoYSxiKXt2YXIgYyxkLGU7aWYoYSBpbnN0YW5jZW9mIFloKWM9YSxkPWI7ZWxzZXt4KFwibmV3IEZpcmViYXNlXCIsMSwyLGFyZ3VtZW50cy5sZW5ndGgpO2Q9UGMoYXJndW1lbnRzWzBdKTtjPWQuVGc7XCJmaXJlYmFzZVwiPT09ZC5kb21haW4mJk9jKGQuaG9zdCtcIiBpcyBubyBsb25nZXIgc3VwcG9ydGVkLiBQbGVhc2UgdXNlIDxZT1VSIEZJUkVCQVNFPi5maXJlYmFzZWlvLmNvbSBpbnN0ZWFkXCIpO2MmJlwidW5kZWZpbmVkXCIhPWN8fE9jKFwiQ2Fubm90IHBhcnNlIEZpcmViYXNlIHVybC4gUGxlYXNlIHVzZSBodHRwczovLzxZT1VSIEZJUkVCQVNFPi5maXJlYmFzZWlvLmNvbVwiKTtkLmtifHxcInVuZGVmaW5lZFwiIT09dHlwZW9mIHdpbmRvdyYmd2luZG93LmxvY2F0aW9uJiZ3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wmJi0xIT09d2luZG93LmxvY2F0aW9uLnByb3RvY29sLmluZGV4T2YoXCJodHRwczpcIikmJk8oXCJJbnNlY3VyZSBGaXJlYmFzZSBhY2Nlc3MgZnJvbSBhIHNlY3VyZSBwYWdlLiBQbGVhc2UgdXNlIGh0dHBzIGluIGNhbGxzIHRvIG5ldyBGaXJlYmFzZSgpLlwiKTtcbmM9bmV3IHpjKGQuaG9zdCxkLmtiLGMsXCJ3c1wiPT09ZC5zY2hlbWV8fFwid3NzXCI9PT1kLnNjaGVtZSk7ZD1uZXcgTChkLiRjKTtlPWQudG9TdHJpbmcoKTt2YXIgZjshKGY9IXAoYy5ob3N0KXx8MD09PWMuaG9zdC5sZW5ndGh8fCEkZihjLmhjKSkmJihmPTAhPT1lLmxlbmd0aCkmJihlJiYoZT1lLnJlcGxhY2UoL15cXC8qXFwuaW5mbyhcXC98JCkvLFwiL1wiKSksZj0hKHAoZSkmJjAhPT1lLmxlbmd0aCYmIVlmLnRlc3QoZSkpKTtpZihmKXRocm93IEVycm9yKHkoXCJuZXcgRmlyZWJhc2VcIiwxLCExKSsnbXVzdCBiZSBhIHZhbGlkIGZpcmViYXNlIFVSTCBhbmQgdGhlIHBhdGggY2FuXFwndCBjb250YWluIFwiLlwiLCBcIiNcIiwgXCIkXCIsIFwiW1wiLCBvciBcIl1cIi4nKTtpZihiKWlmKGIgaW5zdGFuY2VvZiBXKWU9YjtlbHNlIGlmKHAoYikpZT1XLnViKCksYy5PZD1iO2Vsc2UgdGhyb3cgRXJyb3IoXCJFeHBlY3RlZCBhIHZhbGlkIEZpcmViYXNlLkNvbnRleHQgZm9yIHNlY29uZCBhcmd1bWVudCB0byBuZXcgRmlyZWJhc2UoKVwiKTtcbmVsc2UgZT1XLnViKCk7Zj1jLnRvU3RyaW5nKCk7dmFyIGg9dyhlLm9jLGYpO2h8fChoPW5ldyBZaChjLGUuU2YpLGUub2NbZl09aCk7Yz1ofVkuY2FsbCh0aGlzLGMsZCxiZSwhMSl9bWEoVSxZKTt2YXIgd2k9VSx4aT1bXCJGaXJlYmFzZVwiXSx5aT1hYTt4aVswXWluIHlpfHwheWkuZXhlY1NjcmlwdHx8eWkuZXhlY1NjcmlwdChcInZhciBcIit4aVswXSk7Zm9yKHZhciB6aTt4aS5sZW5ndGgmJih6aT14aS5zaGlmdCgpKTspIXhpLmxlbmd0aCYmbih3aSk/eWlbemldPXdpOnlpPXlpW3ppXT95aVt6aV06eWlbemldPXt9O1UuZ29PZmZsaW5lPWZ1bmN0aW9uKCl7eChcIkZpcmViYXNlLmdvT2ZmbGluZVwiLDAsMCxhcmd1bWVudHMubGVuZ3RoKTtXLnViKCkueWIoKX07VS5nb09ubGluZT1mdW5jdGlvbigpe3goXCJGaXJlYmFzZS5nb09ubGluZVwiLDAsMCxhcmd1bWVudHMubGVuZ3RoKTtXLnViKCkucmMoKX07XG5mdW5jdGlvbiBMYyhhLGIpe0soIWJ8fCEwPT09YXx8ITE9PT1hLFwiQ2FuJ3QgdHVybiBvbiBjdXN0b20gbG9nZ2VycyBwZXJzaXN0ZW50bHkuXCIpOyEwPT09YT8oXCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBjb25zb2xlJiYoXCJmdW5jdGlvblwiPT09dHlwZW9mIGNvbnNvbGUubG9nP0JiPXEoY29uc29sZS5sb2csY29uc29sZSk6XCJvYmplY3RcIj09PXR5cGVvZiBjb25zb2xlLmxvZyYmKEJiPWZ1bmN0aW9uKGEpe2NvbnNvbGUubG9nKGEpfSkpLGImJnljLnNldChcImxvZ2dpbmdfZW5hYmxlZFwiLCEwKSk6YT9CYj1hOihCYj1udWxsLHljLnJlbW92ZShcImxvZ2dpbmdfZW5hYmxlZFwiKSl9VS5lbmFibGVMb2dnaW5nPUxjO1UuU2VydmVyVmFsdWU9e1RJTUVTVEFNUDp7XCIuc3ZcIjpcInRpbWVzdGFtcFwifX07VS5TREtfVkVSU0lPTj1oYjtVLklOVEVSTkFMPVY7VS5Db250ZXh0PVc7VS5URVNUX0FDQ0VTUz1aO1xuVS5wcm90b3R5cGUubmFtZT1mdW5jdGlvbigpe08oXCJGaXJlYmFzZS5uYW1lKCkgYmVpbmcgZGVwcmVjYXRlZC4gUGxlYXNlIHVzZSBGaXJlYmFzZS5rZXkoKSBpbnN0ZWFkLlwiKTt4KFwiRmlyZWJhc2UubmFtZVwiLDAsMCxhcmd1bWVudHMubGVuZ3RoKTtyZXR1cm4gdGhpcy5rZXkoKX07VS5wcm90b3R5cGUubmFtZT1VLnByb3RvdHlwZS5uYW1lO1UucHJvdG90eXBlLmtleT1mdW5jdGlvbigpe3goXCJGaXJlYmFzZS5rZXlcIiwwLDAsYXJndW1lbnRzLmxlbmd0aCk7cmV0dXJuIHRoaXMucGF0aC5lKCk/bnVsbDpMZCh0aGlzLnBhdGgpfTtVLnByb3RvdHlwZS5rZXk9VS5wcm90b3R5cGUua2V5O1xuVS5wcm90b3R5cGUudT1mdW5jdGlvbihhKXt4KFwiRmlyZWJhc2UuY2hpbGRcIiwxLDEsYXJndW1lbnRzLmxlbmd0aCk7aWYoZ2EoYSkpYT1TdHJpbmcoYSk7ZWxzZSBpZighKGEgaW5zdGFuY2VvZiBMKSlpZihudWxsPT09RSh0aGlzLnBhdGgpKXt2YXIgYj1hO2ImJihiPWIucmVwbGFjZSgvXlxcLypcXC5pbmZvKFxcL3wkKS8sXCIvXCIpKTtpZyhcIkZpcmViYXNlLmNoaWxkXCIsYil9ZWxzZSBpZyhcIkZpcmViYXNlLmNoaWxkXCIsYSk7cmV0dXJuIG5ldyBVKHRoaXMuayx0aGlzLnBhdGgudShhKSl9O1UucHJvdG90eXBlLmNoaWxkPVUucHJvdG90eXBlLnU7VS5wcm90b3R5cGUucGFyZW50PWZ1bmN0aW9uKCl7eChcIkZpcmViYXNlLnBhcmVudFwiLDAsMCxhcmd1bWVudHMubGVuZ3RoKTt2YXIgYT10aGlzLnBhdGgucGFyZW50KCk7cmV0dXJuIG51bGw9PT1hP251bGw6bmV3IFUodGhpcy5rLGEpfTtVLnByb3RvdHlwZS5wYXJlbnQ9VS5wcm90b3R5cGUucGFyZW50O1xuVS5wcm90b3R5cGUucm9vdD1mdW5jdGlvbigpe3goXCJGaXJlYmFzZS5yZWZcIiwwLDAsYXJndW1lbnRzLmxlbmd0aCk7Zm9yKHZhciBhPXRoaXM7bnVsbCE9PWEucGFyZW50KCk7KWE9YS5wYXJlbnQoKTtyZXR1cm4gYX07VS5wcm90b3R5cGUucm9vdD1VLnByb3RvdHlwZS5yb290O1UucHJvdG90eXBlLnNldD1mdW5jdGlvbihhLGIpe3goXCJGaXJlYmFzZS5zZXRcIiwxLDIsYXJndW1lbnRzLmxlbmd0aCk7amcoXCJGaXJlYmFzZS5zZXRcIix0aGlzLnBhdGgpO2JnKFwiRmlyZWJhc2Uuc2V0XCIsYSx0aGlzLnBhdGgsITEpO0EoXCJGaXJlYmFzZS5zZXRcIiwyLGIsITApO3RoaXMuay5LYih0aGlzLnBhdGgsYSxudWxsLGJ8fG51bGwpfTtVLnByb3RvdHlwZS5zZXQ9VS5wcm90b3R5cGUuc2V0O1xuVS5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKGEsYil7eChcIkZpcmViYXNlLnVwZGF0ZVwiLDEsMixhcmd1bWVudHMubGVuZ3RoKTtqZyhcIkZpcmViYXNlLnVwZGF0ZVwiLHRoaXMucGF0aCk7aWYoZWEoYSkpe2Zvcih2YXIgYz17fSxkPTA7ZDxhLmxlbmd0aDsrK2QpY1tcIlwiK2RdPWFbZF07YT1jO08oXCJQYXNzaW5nIGFuIEFycmF5IHRvIEZpcmViYXNlLnVwZGF0ZSgpIGlzIGRlcHJlY2F0ZWQuIFVzZSBzZXQoKSBpZiB5b3Ugd2FudCB0byBvdmVyd3JpdGUgdGhlIGV4aXN0aW5nIGRhdGEsIG9yIGFuIE9iamVjdCB3aXRoIGludGVnZXIga2V5cyBpZiB5b3UgcmVhbGx5IGRvIHdhbnQgdG8gb25seSB1cGRhdGUgc29tZSBvZiB0aGUgY2hpbGRyZW4uXCIpfWVnKFwiRmlyZWJhc2UudXBkYXRlXCIsYSx0aGlzLnBhdGgpO0EoXCJGaXJlYmFzZS51cGRhdGVcIiwyLGIsITApO3RoaXMuay51cGRhdGUodGhpcy5wYXRoLGEsYnx8bnVsbCl9O1UucHJvdG90eXBlLnVwZGF0ZT1VLnByb3RvdHlwZS51cGRhdGU7XG5VLnByb3RvdHlwZS5LYj1mdW5jdGlvbihhLGIsYyl7eChcIkZpcmViYXNlLnNldFdpdGhQcmlvcml0eVwiLDIsMyxhcmd1bWVudHMubGVuZ3RoKTtqZyhcIkZpcmViYXNlLnNldFdpdGhQcmlvcml0eVwiLHRoaXMucGF0aCk7YmcoXCJGaXJlYmFzZS5zZXRXaXRoUHJpb3JpdHlcIixhLHRoaXMucGF0aCwhMSk7ZmcoXCJGaXJlYmFzZS5zZXRXaXRoUHJpb3JpdHlcIiwyLGIpO0EoXCJGaXJlYmFzZS5zZXRXaXRoUHJpb3JpdHlcIiwzLGMsITApO2lmKFwiLmxlbmd0aFwiPT09dGhpcy5rZXkoKXx8XCIua2V5c1wiPT09dGhpcy5rZXkoKSl0aHJvd1wiRmlyZWJhc2Uuc2V0V2l0aFByaW9yaXR5IGZhaWxlZDogXCIrdGhpcy5rZXkoKStcIiBpcyBhIHJlYWQtb25seSBvYmplY3QuXCI7dGhpcy5rLktiKHRoaXMucGF0aCxhLGIsY3x8bnVsbCl9O1UucHJvdG90eXBlLnNldFdpdGhQcmlvcml0eT1VLnByb3RvdHlwZS5LYjtcblUucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbihhKXt4KFwiRmlyZWJhc2UucmVtb3ZlXCIsMCwxLGFyZ3VtZW50cy5sZW5ndGgpO2pnKFwiRmlyZWJhc2UucmVtb3ZlXCIsdGhpcy5wYXRoKTtBKFwiRmlyZWJhc2UucmVtb3ZlXCIsMSxhLCEwKTt0aGlzLnNldChudWxsLGEpfTtVLnByb3RvdHlwZS5yZW1vdmU9VS5wcm90b3R5cGUucmVtb3ZlO1xuVS5wcm90b3R5cGUudHJhbnNhY3Rpb249ZnVuY3Rpb24oYSxiLGMpe3goXCJGaXJlYmFzZS50cmFuc2FjdGlvblwiLDEsMyxhcmd1bWVudHMubGVuZ3RoKTtqZyhcIkZpcmViYXNlLnRyYW5zYWN0aW9uXCIsdGhpcy5wYXRoKTtBKFwiRmlyZWJhc2UudHJhbnNhY3Rpb25cIiwxLGEsITEpO0EoXCJGaXJlYmFzZS50cmFuc2FjdGlvblwiLDIsYiwhMCk7aWYobihjKSYmXCJib29sZWFuXCIhPXR5cGVvZiBjKXRocm93IEVycm9yKHkoXCJGaXJlYmFzZS50cmFuc2FjdGlvblwiLDMsITApK1wibXVzdCBiZSBhIGJvb2xlYW4uXCIpO2lmKFwiLmxlbmd0aFwiPT09dGhpcy5rZXkoKXx8XCIua2V5c1wiPT09dGhpcy5rZXkoKSl0aHJvd1wiRmlyZWJhc2UudHJhbnNhY3Rpb24gZmFpbGVkOiBcIit0aGlzLmtleSgpK1wiIGlzIGEgcmVhZC1vbmx5IG9iamVjdC5cIjtcInVuZGVmaW5lZFwiPT09dHlwZW9mIGMmJihjPSEwKTtqaSh0aGlzLmssdGhpcy5wYXRoLGEsYnx8bnVsbCxjKX07VS5wcm90b3R5cGUudHJhbnNhY3Rpb249VS5wcm90b3R5cGUudHJhbnNhY3Rpb247XG5VLnByb3RvdHlwZS5PZz1mdW5jdGlvbihhLGIpe3goXCJGaXJlYmFzZS5zZXRQcmlvcml0eVwiLDEsMixhcmd1bWVudHMubGVuZ3RoKTtqZyhcIkZpcmViYXNlLnNldFByaW9yaXR5XCIsdGhpcy5wYXRoKTtmZyhcIkZpcmViYXNlLnNldFByaW9yaXR5XCIsMSxhKTtBKFwiRmlyZWJhc2Uuc2V0UHJpb3JpdHlcIiwyLGIsITApO3RoaXMuay5LYih0aGlzLnBhdGgudShcIi5wcmlvcml0eVwiKSxhLG51bGwsYil9O1UucHJvdG90eXBlLnNldFByaW9yaXR5PVUucHJvdG90eXBlLk9nO1xuVS5wcm90b3R5cGUucHVzaD1mdW5jdGlvbihhLGIpe3goXCJGaXJlYmFzZS5wdXNoXCIsMCwyLGFyZ3VtZW50cy5sZW5ndGgpO2pnKFwiRmlyZWJhc2UucHVzaFwiLHRoaXMucGF0aCk7YmcoXCJGaXJlYmFzZS5wdXNoXCIsYSx0aGlzLnBhdGgsITApO0EoXCJGaXJlYmFzZS5wdXNoXCIsMixiLCEwKTt2YXIgYz0kaCh0aGlzLmspLGM9RmUoYyksYz10aGlzLnUoYyk7XCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBhJiZudWxsIT09YSYmYy5zZXQoYSxiKTtyZXR1cm4gY307VS5wcm90b3R5cGUucHVzaD1VLnByb3RvdHlwZS5wdXNoO1UucHJvdG90eXBlLmhiPWZ1bmN0aW9uKCl7amcoXCJGaXJlYmFzZS5vbkRpc2Nvbm5lY3RcIix0aGlzLnBhdGgpO3JldHVybiBuZXcgWCh0aGlzLmssdGhpcy5wYXRoKX07VS5wcm90b3R5cGUub25EaXNjb25uZWN0PVUucHJvdG90eXBlLmhiO1xuVS5wcm90b3R5cGUuTT1mdW5jdGlvbihhLGIsYyl7TyhcIkZpcmViYXNlUmVmLmF1dGgoKSBiZWluZyBkZXByZWNhdGVkLiBQbGVhc2UgdXNlIEZpcmViYXNlUmVmLmF1dGhXaXRoQ3VzdG9tVG9rZW4oKSBpbnN0ZWFkLlwiKTt4KFwiRmlyZWJhc2UuYXV0aFwiLDEsMyxhcmd1bWVudHMubGVuZ3RoKTtrZyhcIkZpcmViYXNlLmF1dGhcIixhKTtBKFwiRmlyZWJhc2UuYXV0aFwiLDIsYiwhMCk7QShcIkZpcmViYXNlLmF1dGhcIiwzLGIsITApO1lnKHRoaXMuay5NLGEse30se3JlbWVtYmVyOlwibm9uZVwifSxiLGMpfTtVLnByb3RvdHlwZS5hdXRoPVUucHJvdG90eXBlLk07VS5wcm90b3R5cGUuZ2U9ZnVuY3Rpb24oYSl7eChcIkZpcmViYXNlLnVuYXV0aFwiLDAsMSxhcmd1bWVudHMubGVuZ3RoKTtBKFwiRmlyZWJhc2UudW5hdXRoXCIsMSxhLCEwKTtaZyh0aGlzLmsuTSxhKX07VS5wcm90b3R5cGUudW5hdXRoPVUucHJvdG90eXBlLmdlO1xuVS5wcm90b3R5cGUueGU9ZnVuY3Rpb24oKXt4KFwiRmlyZWJhc2UuZ2V0QXV0aFwiLDAsMCxhcmd1bWVudHMubGVuZ3RoKTtyZXR1cm4gdGhpcy5rLk0ueGUoKX07VS5wcm90b3R5cGUuZ2V0QXV0aD1VLnByb3RvdHlwZS54ZTtVLnByb3RvdHlwZS54Zz1mdW5jdGlvbihhLGIpe3goXCJGaXJlYmFzZS5vbkF1dGhcIiwxLDIsYXJndW1lbnRzLmxlbmd0aCk7QShcIkZpcmViYXNlLm9uQXV0aFwiLDEsYSwhMSk7bWIoXCJGaXJlYmFzZS5vbkF1dGhcIiwyLGIpO3RoaXMuay5NLkViKFwiYXV0aF9zdGF0dXNcIixhLGIpfTtVLnByb3RvdHlwZS5vbkF1dGg9VS5wcm90b3R5cGUueGc7VS5wcm90b3R5cGUud2c9ZnVuY3Rpb24oYSxiKXt4KFwiRmlyZWJhc2Uub2ZmQXV0aFwiLDEsMixhcmd1bWVudHMubGVuZ3RoKTtBKFwiRmlyZWJhc2Uub2ZmQXV0aFwiLDEsYSwhMSk7bWIoXCJGaXJlYmFzZS5vZmZBdXRoXCIsMixiKTt0aGlzLmsuTS5pYyhcImF1dGhfc3RhdHVzXCIsYSxiKX07VS5wcm90b3R5cGUub2ZmQXV0aD1VLnByb3RvdHlwZS53ZztcblUucHJvdG90eXBlLlpmPWZ1bmN0aW9uKGEsYixjKXt4KFwiRmlyZWJhc2UuYXV0aFdpdGhDdXN0b21Ub2tlblwiLDIsMyxhcmd1bWVudHMubGVuZ3RoKTtrZyhcIkZpcmViYXNlLmF1dGhXaXRoQ3VzdG9tVG9rZW5cIixhKTtBKFwiRmlyZWJhc2UuYXV0aFdpdGhDdXN0b21Ub2tlblwiLDIsYiwhMSk7bmcoXCJGaXJlYmFzZS5hdXRoV2l0aEN1c3RvbVRva2VuXCIsMyxjLCEwKTtZZyh0aGlzLmsuTSxhLHt9LGN8fHt9LGIpfTtVLnByb3RvdHlwZS5hdXRoV2l0aEN1c3RvbVRva2VuPVUucHJvdG90eXBlLlpmO1UucHJvdG90eXBlLiRmPWZ1bmN0aW9uKGEsYixjKXt4KFwiRmlyZWJhc2UuYXV0aFdpdGhPQXV0aFBvcHVwXCIsMiwzLGFyZ3VtZW50cy5sZW5ndGgpO21nKFwiRmlyZWJhc2UuYXV0aFdpdGhPQXV0aFBvcHVwXCIsYSk7QShcIkZpcmViYXNlLmF1dGhXaXRoT0F1dGhQb3B1cFwiLDIsYiwhMSk7bmcoXCJGaXJlYmFzZS5hdXRoV2l0aE9BdXRoUG9wdXBcIiwzLGMsITApO2NoKHRoaXMuay5NLGEsYyxiKX07XG5VLnByb3RvdHlwZS5hdXRoV2l0aE9BdXRoUG9wdXA9VS5wcm90b3R5cGUuJGY7VS5wcm90b3R5cGUuYWc9ZnVuY3Rpb24oYSxiLGMpe3goXCJGaXJlYmFzZS5hdXRoV2l0aE9BdXRoUmVkaXJlY3RcIiwyLDMsYXJndW1lbnRzLmxlbmd0aCk7bWcoXCJGaXJlYmFzZS5hdXRoV2l0aE9BdXRoUmVkaXJlY3RcIixhKTtBKFwiRmlyZWJhc2UuYXV0aFdpdGhPQXV0aFJlZGlyZWN0XCIsMixiLCExKTtuZyhcIkZpcmViYXNlLmF1dGhXaXRoT0F1dGhSZWRpcmVjdFwiLDMsYywhMCk7dmFyIGQ9dGhpcy5rLk07YWgoZCk7dmFyIGU9W0tnXSxmPXZnKGMpO1wiYW5vbnltb3VzXCI9PT1hfHxcImZpcmViYXNlXCI9PT1hP1AoYixNZyhcIlRSQU5TUE9SVF9VTkFWQUlMQUJMRVwiKSk6KHljLnNldChcInJlZGlyZWN0X2NsaWVudF9vcHRpb25zXCIsZi5vZCksYmgoZCxlLFwiL2F1dGgvXCIrYSxmLGIpKX07VS5wcm90b3R5cGUuYXV0aFdpdGhPQXV0aFJlZGlyZWN0PVUucHJvdG90eXBlLmFnO1xuVS5wcm90b3R5cGUuYmc9ZnVuY3Rpb24oYSxiLGMsZCl7eChcIkZpcmViYXNlLmF1dGhXaXRoT0F1dGhUb2tlblwiLDMsNCxhcmd1bWVudHMubGVuZ3RoKTttZyhcIkZpcmViYXNlLmF1dGhXaXRoT0F1dGhUb2tlblwiLGEpO0EoXCJGaXJlYmFzZS5hdXRoV2l0aE9BdXRoVG9rZW5cIiwzLGMsITEpO25nKFwiRmlyZWJhc2UuYXV0aFdpdGhPQXV0aFRva2VuXCIsNCxkLCEwKTtwKGIpPyhsZyhcIkZpcmViYXNlLmF1dGhXaXRoT0F1dGhUb2tlblwiLDIsYiksJGcodGhpcy5rLk0sYStcIi90b2tlblwiLHthY2Nlc3NfdG9rZW46Yn0sZCxjKSk6KG5nKFwiRmlyZWJhc2UuYXV0aFdpdGhPQXV0aFRva2VuXCIsMixiLCExKSwkZyh0aGlzLmsuTSxhK1wiL3Rva2VuXCIsYixkLGMpKX07VS5wcm90b3R5cGUuYXV0aFdpdGhPQXV0aFRva2VuPVUucHJvdG90eXBlLmJnO1xuVS5wcm90b3R5cGUuWWY9ZnVuY3Rpb24oYSxiKXt4KFwiRmlyZWJhc2UuYXV0aEFub255bW91c2x5XCIsMSwyLGFyZ3VtZW50cy5sZW5ndGgpO0EoXCJGaXJlYmFzZS5hdXRoQW5vbnltb3VzbHlcIiwxLGEsITEpO25nKFwiRmlyZWJhc2UuYXV0aEFub255bW91c2x5XCIsMixiLCEwKTskZyh0aGlzLmsuTSxcImFub255bW91c1wiLHt9LGIsYSl9O1UucHJvdG90eXBlLmF1dGhBbm9ueW1vdXNseT1VLnByb3RvdHlwZS5ZZjtcblUucHJvdG90eXBlLmNnPWZ1bmN0aW9uKGEsYixjKXt4KFwiRmlyZWJhc2UuYXV0aFdpdGhQYXNzd29yZFwiLDIsMyxhcmd1bWVudHMubGVuZ3RoKTtuZyhcIkZpcmViYXNlLmF1dGhXaXRoUGFzc3dvcmRcIiwxLGEsITEpO29nKFwiRmlyZWJhc2UuYXV0aFdpdGhQYXNzd29yZFwiLGEsXCJlbWFpbFwiKTtvZyhcIkZpcmViYXNlLmF1dGhXaXRoUGFzc3dvcmRcIixhLFwicGFzc3dvcmRcIik7QShcIkZpcmViYXNlLmF1dGhXaXRoUGFzc3dvcmRcIiwyLGIsITEpO25nKFwiRmlyZWJhc2UuYXV0aFdpdGhQYXNzd29yZFwiLDMsYywhMCk7JGcodGhpcy5rLk0sXCJwYXNzd29yZFwiLGEsYyxiKX07VS5wcm90b3R5cGUuYXV0aFdpdGhQYXNzd29yZD1VLnByb3RvdHlwZS5jZztcblUucHJvdG90eXBlLnNlPWZ1bmN0aW9uKGEsYil7eChcIkZpcmViYXNlLmNyZWF0ZVVzZXJcIiwyLDIsYXJndW1lbnRzLmxlbmd0aCk7bmcoXCJGaXJlYmFzZS5jcmVhdGVVc2VyXCIsMSxhLCExKTtvZyhcIkZpcmViYXNlLmNyZWF0ZVVzZXJcIixhLFwiZW1haWxcIik7b2coXCJGaXJlYmFzZS5jcmVhdGVVc2VyXCIsYSxcInBhc3N3b3JkXCIpO0EoXCJGaXJlYmFzZS5jcmVhdGVVc2VyXCIsMixiLCExKTt0aGlzLmsuTS5zZShhLGIpfTtVLnByb3RvdHlwZS5jcmVhdGVVc2VyPVUucHJvdG90eXBlLnNlO1UucHJvdG90eXBlLlRlPWZ1bmN0aW9uKGEsYil7eChcIkZpcmViYXNlLnJlbW92ZVVzZXJcIiwyLDIsYXJndW1lbnRzLmxlbmd0aCk7bmcoXCJGaXJlYmFzZS5yZW1vdmVVc2VyXCIsMSxhLCExKTtvZyhcIkZpcmViYXNlLnJlbW92ZVVzZXJcIixhLFwiZW1haWxcIik7b2coXCJGaXJlYmFzZS5yZW1vdmVVc2VyXCIsYSxcInBhc3N3b3JkXCIpO0EoXCJGaXJlYmFzZS5yZW1vdmVVc2VyXCIsMixiLCExKTt0aGlzLmsuTS5UZShhLGIpfTtcblUucHJvdG90eXBlLnJlbW92ZVVzZXI9VS5wcm90b3R5cGUuVGU7VS5wcm90b3R5cGUucGU9ZnVuY3Rpb24oYSxiKXt4KFwiRmlyZWJhc2UuY2hhbmdlUGFzc3dvcmRcIiwyLDIsYXJndW1lbnRzLmxlbmd0aCk7bmcoXCJGaXJlYmFzZS5jaGFuZ2VQYXNzd29yZFwiLDEsYSwhMSk7b2coXCJGaXJlYmFzZS5jaGFuZ2VQYXNzd29yZFwiLGEsXCJlbWFpbFwiKTtvZyhcIkZpcmViYXNlLmNoYW5nZVBhc3N3b3JkXCIsYSxcIm9sZFBhc3N3b3JkXCIpO29nKFwiRmlyZWJhc2UuY2hhbmdlUGFzc3dvcmRcIixhLFwibmV3UGFzc3dvcmRcIik7QShcIkZpcmViYXNlLmNoYW5nZVBhc3N3b3JkXCIsMixiLCExKTt0aGlzLmsuTS5wZShhLGIpfTtVLnByb3RvdHlwZS5jaGFuZ2VQYXNzd29yZD1VLnByb3RvdHlwZS5wZTtcblUucHJvdG90eXBlLm9lPWZ1bmN0aW9uKGEsYil7eChcIkZpcmViYXNlLmNoYW5nZUVtYWlsXCIsMiwyLGFyZ3VtZW50cy5sZW5ndGgpO25nKFwiRmlyZWJhc2UuY2hhbmdlRW1haWxcIiwxLGEsITEpO29nKFwiRmlyZWJhc2UuY2hhbmdlRW1haWxcIixhLFwib2xkRW1haWxcIik7b2coXCJGaXJlYmFzZS5jaGFuZ2VFbWFpbFwiLGEsXCJuZXdFbWFpbFwiKTtvZyhcIkZpcmViYXNlLmNoYW5nZUVtYWlsXCIsYSxcInBhc3N3b3JkXCIpO0EoXCJGaXJlYmFzZS5jaGFuZ2VFbWFpbFwiLDIsYiwhMSk7dGhpcy5rLk0ub2UoYSxiKX07VS5wcm90b3R5cGUuY2hhbmdlRW1haWw9VS5wcm90b3R5cGUub2U7XG5VLnByb3RvdHlwZS5WZT1mdW5jdGlvbihhLGIpe3goXCJGaXJlYmFzZS5yZXNldFBhc3N3b3JkXCIsMiwyLGFyZ3VtZW50cy5sZW5ndGgpO25nKFwiRmlyZWJhc2UucmVzZXRQYXNzd29yZFwiLDEsYSwhMSk7b2coXCJGaXJlYmFzZS5yZXNldFBhc3N3b3JkXCIsYSxcImVtYWlsXCIpO0EoXCJGaXJlYmFzZS5yZXNldFBhc3N3b3JkXCIsMixiLCExKTt0aGlzLmsuTS5WZShhLGIpfTtVLnByb3RvdHlwZS5yZXNldFBhc3N3b3JkPVUucHJvdG90eXBlLlZlO30pKCk7XG5cbm1vZHVsZS5leHBvcnRzID0gRmlyZWJhc2U7XG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9XCIuLi9pbnRlcmZhY2VzL2ludGVyZmFjZXMuZC50c1wiIC8+XG5cbmltcG9ydCAqIGFzIEFDVElPTlMgZnJvbSBcIi4uL2NvbnN0YW50cy9hY3Rpb25zXCI7XG5cbmZ1bmN0aW9uIGluaXRHYW1lKCkge1xuICByZXR1cm4ge1xuICAgIHR5cGUgOiBBQ1RJT05TLklOSVRfR0FNRVxuICB9O1xufVxuXG5mdW5jdGlvbiBzZWxlY3RGaWd1cmUoZ3VpZCA6IHN0cmluZykge1xuICByZXR1cm4ge1xuICAgIHR5cGUgOiBBQ1RJT05TLlNFTEVDVF9GSUdVUkUsXG4gICAgZ3VpZCA6IGd1aWRcbiAgfTtcbn1cblxuZnVuY3Rpb24gbW92ZUZpZ3VyZShndWlkIDogc3RyaW5nLCBwb3NpdGlvbiA6IElQb3NpdGlvbikge1xuICByZXR1cm4ge1xuICAgIHR5cGUgOiBBQ1RJT05TLk1PVkVfRklHVVJFLFxuICAgIGd1aWQgOiBndWlkLFxuICAgIHBvc2l0aW9uIDogcG9zaXRpb25cbiAgfTtcbn1cblxuZXhwb3J0IHsgaW5pdEdhbWUsIHNlbGVjdEZpZ3VyZSwgbW92ZUZpZ3VyZSB9O1xuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPVwiLi4vaW50ZXJmYWNlcy9pbnRlcmZhY2VzLmQudHNcIiAvPlxuXG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tIFwiLi4vY29yZS9jb21wb25lbnRcIjtcblxuY2xhc3MgRm9vdGVyIGV4dGVuZHMgQ29tcG9uZW50PGFueT4ge1xuXG4gIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcih7fSk7XG4gIH1cblxuICBwdWJsaWMgaW5pdEV2ZW50cygpIDogdm9pZCB7XG5cbiAgfVxuXG4gIHB1YmxpYyBraWxsRXZlbnRzKCkgOiB2b2lkIHtcblxuICB9XG5cbiAgcHVibGljIHJlbmRlcigpIDogc3RyaW5nIHtcbiAgICByZXR1cm4gYDxkaXYgY2xhc3M9XCJjb3B5cmlnaHRcIj5cbiAgICAgICAgICAgICAgPHA+IENyZWF0ZSB3aXRoICZoZWFydHM7IGJ5IDxhIGhyZWY9XCJodHRwOi8vd3d3LnJlbW9qYW5zZW4uY29tL1wiPlJlbW8gSC4gSmFuc2VuPC9hPjwvcD5cbiAgICAgICAgICAgIDwvZGl2PmA7XG4gIH1cbn1cblxuZXhwb3J0IHsgRm9vdGVyIH07XG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9XCIuLi9pbnRlcmZhY2VzL2ludGVyZmFjZXMuZC50c1wiIC8+XG5cbmltcG9ydCAqIGFzIENPTlNUIGZyb20gXCIuLi9jb25zdGFudHMvY2hlc3NcIjtcbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gXCIuLi9jb3JlL2NvbXBvbmVudFwiO1xuaW1wb3J0IHsgc3RvcmUgfSBmcm9tIFwiLi4vc3RvcmUvc3RvcmVcIjtcbmltcG9ydCAqIGFzIGFjdGlvbnMgZnJvbSBcIi4uL2FjdGlvbnMvY2hlc3NfZ2FtZV9hY3Rpb25zXCI7XG5cbmNsYXNzIENoZXNzR2FtZSBleHRlbmRzIENvbXBvbmVudDxJQ2hlc3NHYW1lUHJvcHM+IHtcblxuICBwdWJsaWMgY29uc3RydWN0b3IocHJvcHMgOiBJQ2hlc3NHYW1lUHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZVNlbGVjdCgkY2VsbCkge1xuICAgIHZhciBndWlkID0gJGNlbGwuZGF0YShcImd1aWRcIik7XG4gICAgdmFyIHNlbGVjdEFjdGlvbiA9IGFjdGlvbnMuc2VsZWN0RmlndXJlKGd1aWQpO1xuICAgIHN0b3JlLnB1Ymxpc2goc2VsZWN0QWN0aW9uKTtcbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlTW92ZShndWlkLCAkY2VsbCkge1xuICAgIHZhciBwb3NpdGlvbiA9IHtcbiAgICAgIHggOiAkY2VsbC5kYXRhKFwiaW5kZXhcIiksXG4gICAgICB5IDogJGNlbGwucGFyZW50KCkuZGF0YShcImluZGV4XCIpXG4gICAgfTtcbiAgICB2YXIgbW92ZUFjdGlvbiA9IGFjdGlvbnMubW92ZUZpZ3VyZShndWlkLCBwb3NpdGlvbik7XG4gICAgc3RvcmUucHVibGlzaChtb3ZlQWN0aW9uKTtcbiAgfVxuXG4gIHB1YmxpYyBpbml0RXZlbnRzKCkgOiB2b2lkIHtcbiAgICAkKFwiLmZpZ3VyZVwiKS5vbihcImNsaWNrXCIsIChlKSA9PiB7XG4gICAgICB2YXIgJGNlbGwgPSAkKGUuY3VycmVudFRhcmdldCk7XG4gICAgICB0aGlzLmhhbmRsZVNlbGVjdCgkY2VsbCk7XG4gICAgfSk7XG4gICAgJChcIi5hdmFpbGFibGVcIikub24oXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgdmFyICRjZWxsID0gJChlLmN1cnJlbnRUYXJnZXQpO1xuICAgICAgdmFyIGd1aWQgPSAkKFwiLnNlbGVjdGVkXCIpLmRhdGEoXCJndWlkXCIpO1xuICAgICAgdGhpcy5oYW5kbGVNb3ZlKGd1aWQsICRjZWxsKTtcbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBraWxsRXZlbnRzKCkgOiB2b2lkIHtcbiAgICAkKFwiLmZpZ3VyZVwiKS5vZmYoXCJjbGlja1wiKTtcbiAgfVxuXG4gIHB1YmxpYyByZW5kZXIoKSA6IHN0cmluZyB7XG5cbiAgICB2YXIgcmVuZGVyQ2VsbCA9IChwbGF5ZXJDb2xvciwgY2VsbCwgY2VsbEluZGV4KSA9PiB7XG4gICAgICB2YXIgY2xhc3NlcyA9IFwiXCI7XG4gICAgICB2YXIgZmlndXJlSWQgPSBcIlwiO1xuICAgICAgaWYoY2VsbC5maWd1cmUgIT09IG51bGwgJiYgY2VsbC5maWd1cmUuYWxpdmUgPT09IHRydWUpIHtcbiAgICAgICAgY2xhc3NlcyArPSBgJHtjZWxsLmZpZ3VyZS50eXBlfV8ke2NlbGwuZmlndXJlLmNvbG9yfWA7XG4gICAgICAgIGZpZ3VyZUlkID0gY2VsbC5maWd1cmUuaWQ7XG4gICAgICAgIGlmKGNlbGwuZmlndXJlLmNvbG9yID09PSBwbGF5ZXJDb2xvcikge1xuICAgICAgICAgIGNsYXNzZXMgKz0gXCIgZmlndXJlXCI7XG4gICAgICAgIH1cbiAgICAgICAgaWYoY2VsbC5maWd1cmUuc2VsZWN0ZWQgPT09IHRydWUpIHtcbiAgICAgICAgICBjbGFzc2VzICs9IFwiIHNlbGVjdGVkXCI7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmKGNlbGwuYXZhaWxhYmxlID09PSB0cnVlKSB7XG4gICAgICAgIGNsYXNzZXMgKz0gXCIgYXZhaWxhYmxlXCI7XG4gICAgICB9XG4gICAgICByZXR1cm4gYDxkaXYgY2xhc3M9XCJjZWxsICR7Y2VsbC5jb2xvcn0gJHtjbGFzc2VzfVwiXG4gICAgICAgICAgICAgICAgICAgZGF0YS1ndWlkPVwiJHtmaWd1cmVJZH1cIiBkYXRhLWluZGV4PVwiJHtjZWxsSW5kZXh9XCI+XG4gICAgICAgICAgICAgPC9kaXY+YDtcbiAgICB9O1xuXG4gICAgdmFyIHJlbmRlclJvdyA9IChwbGF5ZXJDb2xvciwgcm93LCByb3dJbmRleCkgPT4ge1xuICAgICAgdmFyIGNlbGxzSHRtbCA9IHJvdy5tYXAoZnVuY3Rpb24oY2VsbCwgY2VsbEluZGV4KSB7XG4gICAgICAgIHJldHVybiByZW5kZXJDZWxsKHBsYXllckNvbG9yLCBjZWxsLCBjZWxsSW5kZXgpO1xuICAgICAgfSkuam9pbihcIlxcblwiKTtcbiAgICAgIHJldHVybiBgPGRpdiBjbGFzcz1cImJvYXJkLXJvd1wiIGRhdGEtaW5kZXg9XCIke3Jvd0luZGV4fVwiPiR7Y2VsbHNIdG1sfTwvZGl2PmA7XG4gICAgfTtcblxuICAgIHZhciByZW5kZXJCb2FyZCA9IChwbGF5ZXJDb2xvciwgYm9hcmQpID0+IHtcbiAgICAgIHZhciByb3dzSHRtbCA9IGJvYXJkLm1hcChmdW5jdGlvbihyb3csIHJvd0luZGV4LCByb3dzKSB7XG4gICAgICAgIHJldHVybiByZW5kZXJSb3cocGxheWVyQ29sb3IsIHJvdywgcm93SW5kZXgpO1xuICAgICAgfSkuam9pbihcIlxcblwiKTtcbiAgICAgIHJldHVybiBgPGRpdiBjbGFzcz1cImJvYXJkLWJvcmRlciBzaGFkb3cyXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImJvYXJkIHNoYWRvd1wiPlxuICAgICAgICAgICAgICAgICAgJHtyb3dzSHRtbH1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+YDtcbiAgICB9O1xuXG4gICAgLy8gUGxheWVyIG9uZSBpcyBibGFja1xuICAgIHZhciBwbGF5ZXJDb2xvciA9IHRoaXMucHJvcHMuaXNQbGF5ZXJPbmUgPyBDT05TVC5XSElURSA6IENPTlNULkJMQUNLO1xuICAgIHJldHVybiByZW5kZXJCb2FyZChwbGF5ZXJDb2xvciwgdGhpcy5wcm9wcy5ib2FyZCk7XG4gIH1cbn1cblxuZXhwb3J0IHsgQ2hlc3NHYW1lIH07XG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9XCIuLi9pbnRlcmZhY2VzL2ludGVyZmFjZXMuZC50c1wiIC8+XG5cbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gXCIuLi9jb3JlL2NvbXBvbmVudFwiO1xuXG5jbGFzcyBIZWFkZXIgZXh0ZW5kcyBDb21wb25lbnQ8YW55PiB7XG5cbiAgcHVibGljIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKHt9KTtcbiAgfVxuXG4gIHB1YmxpYyBpbml0RXZlbnRzKCkgOiB2b2lkIHtcblxuICB9XG5cbiAgcHVibGljIGtpbGxFdmVudHMoKSA6IHZvaWQge1xuXG4gIH1cblxuICBwdWJsaWMgcmVuZGVyKCkgOiBzdHJpbmcge1xuICAgIHJldHVybiBgPG5hdiBjbGFzcz1cIm5hdmJhciBuYXZiYXItZGVmYXVsdCBuYXZiYXItc3RhdGljLXRvcFwiPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29udGFpbmVyXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm5hdmJhci1oZWFkZXJcIj5cbiAgICAgICAgICAgICAgICAgIDxhIGNsYXNzPVwibmF2YmFyLWJyYW5kXCIgaHJlZj1cIiNcIj5cbiAgICAgICAgICAgICAgICAgICAgPGltZyBhbHQ9XCJCcmFuZFwiIHNyYz1cIi4vYXNzZXRzL2tuaWdodF93LnBuZ1wiPiZuYnNwO1R5cGVTY3JpcHQgQ2hlc3NcbiAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L25hdj5gO1xuICB9XG59XG5cbmV4cG9ydCB7IEhlYWRlciB9O1xuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPVwiLi4vaW50ZXJmYWNlcy9pbnRlcmZhY2VzLmQudHNcIiAvPlxuXG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tIFwiLi4vY29yZS9jb21wb25lbnRcIjtcblxuY2xhc3MgTW9kYWwgZXh0ZW5kcyBDb21wb25lbnQ8YW55PiB7XG5cbiAgcHVibGljIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICB9XG5cbiAgcHVibGljIGluaXRFdmVudHMoKSA6IHZvaWQge1xuXG4gIH1cblxuICBwdWJsaWMga2lsbEV2ZW50cygpIDogdm9pZCB7XG5cbiAgfVxuXG4gIHB1YmxpYyByZW5kZXIoKSA6IHN0cmluZyB7XG4gICAgcmV0dXJuIGA8ZGl2IGNsYXNzPVwibW9kYWwgZmFkZSBpblwiIHRhYmluZGV4PVwiLTFcIiByb2xlPVwiZGlhbG9nXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJtb2RhbC1kaWFsb2dcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtY29udGVudFwiPlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWhlYWRlclwiPlxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImNsb3NlXCIgZGF0YS1kaXNtaXNzPVwibW9kYWxcIiBhcmlhLWxhYmVsPVwiQ2xvc2VcIj48c3BhbiBhcmlhLWhpZGRlbj1cInRydWVcIj4mdGltZXM7PC9zcGFuPjwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3M9XCJtb2RhbC10aXRsZVwiPlBsZWFzZSBub3RlPC9oND5cbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm1vZGFsLWJvZHlcIj5cbiAgICAgICAgICAgICAgICAgICAgPHA+JHt0aGlzLnByb3BzLnRleHR9PC9wPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibW9kYWwtZm9vdGVyXCI+XG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1kZWZhdWx0XCIgZGF0YS1kaXNtaXNzPVwibW9kYWxcIj5PSzwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+YDtcbiAgfVxufVxuXG5leHBvcnQgeyBNb2RhbCB9O1xuIiwiZXhwb3J0IGNvbnN0IElOSVRfR0FNRSA9IFwiSU5JVF9HQU1FXCI7XG5leHBvcnQgY29uc3QgSk9JTl9HQU1FID0gXCJKT0lOX0dBTUVcIjtcbmV4cG9ydCBjb25zdCBMRUFWRV9HQU1FID0gXCJMRUFWRV9HQU1FXCI7XG5leHBvcnQgY29uc3QgU0VMRUNUX0ZJR1VSRSA9IFwiU0VMRUNUX0ZJR1VSRVwiO1xuZXhwb3J0IGNvbnN0IE1PVkVfRklHVVJFID0gXCJNT1ZFX0ZJR1VSRVwiO1xuZXhwb3J0IGNvbnN0IFJFU1RPUkVfRklHVVJFID0gXCJSRVNUT1JFX0ZJR1VSRVwiO1xuIiwiZXhwb3J0IGNvbnN0IEJMQUNLID0gXCJiXCI7XG5leHBvcnQgY29uc3QgV0hJVEUgPSBcIndcIjtcbmV4cG9ydCBjb25zdCBGSUdVUkVfS0lORyA9IFwia2luZ1wiO1xuZXhwb3J0IGNvbnN0IEZJR1VSRV9RVUVFTiA9IFwicXVlZW5cIjtcbmV4cG9ydCBjb25zdCBGSUdVUkVfQklTSE9QID0gXCJiaXNob3BcIjtcbmV4cG9ydCBjb25zdCBGSUdVUkVfS05JR0hUID0gXCJrbmlnaHRcIjtcbmV4cG9ydCBjb25zdCBGSUdVUkVfVE9XRVIgPSBcInRvd2VyXCI7XG5leHBvcnQgY29uc3QgRklHVVJFX1BBV04gPSBcInBhd25cIjtcbmV4cG9ydCBjb25zdCBCT0FSRF9MRU5HVEggPSA4O1xuZXhwb3J0IGNvbnN0IFdISVRFX0ZJR1VSRVNfRklSU1RfUk9XID0gNztcbmV4cG9ydCBjb25zdCBXSElURV9GSUdVUkVTX1NFQ09ORF9ST1cgPSA2O1xuZXhwb3J0IGNvbnN0IEJMQUNLX0ZJR1VSRVNfRklSU1RfUk9XID0gMDtcbmV4cG9ydCBjb25zdCBCTEFDS19GSUdVUkVTX1NFQ09ORF9ST1cgPSAxO1xuZXhwb3J0IGNvbnN0IEtJTkdfRklHVVJFX0lOSVRJQUxfQ09MVU1OID0gNDtcbmV4cG9ydCBjb25zdCBRVUVFTl9GSUdVUkVfSU5JVElBTF9DT0xVTU4gPSAzO1xuZXhwb3J0IGNvbnN0IEJJU0hPUF9MRUZUX0ZJR1VSRV9JTklUSUFMX0NPTFVNTiA9IDI7XG5leHBvcnQgY29uc3QgQklTSE9QX1JJR0hUX0ZJR1VSRV9JTklUSUFMX0NPTFVNTiA9IDU7XG5leHBvcnQgY29uc3QgS05JR0hUX0xFRlRfRklHVVJFX0lOSVRJQUxfQ09MVU1OID0gMTtcbmV4cG9ydCBjb25zdCBLTklHSFRfUklHSFRfRklHVVJFX0lOSVRJQUxfQ09MVU1OID0gNjtcbmV4cG9ydCBjb25zdCBUT1dFUl9MRUZUX0ZJR1VSRV9JTklUSUFMX0NPTFVNTiA9IDA7XG5leHBvcnQgY29uc3QgVE9XRVJfUklHSFRfRklHVVJFX0lOSVRJQUxfQ09MVU1OID0gNztcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD1cIi4uL2ludGVyZmFjZXMvaW50ZXJmYWNlcy5kLnRzXCIgLz5cblxuYWJzdHJhY3QgY2xhc3MgQ29tcG9uZW50PFQ+IHtcblxuICBwdWJsaWMgcHJvcHMgOiBUO1xuXG4gIHB1YmxpYyBjb25zdHJ1Y3Rvcihwcm9wcyA6IFQpIHtcbiAgICB0aGlzLnByb3BzID0gcHJvcHM7XG4gIH1cblxuICBhYnN0cmFjdCBpbml0RXZlbnRzKCkgOiB2b2lkO1xuICBhYnN0cmFjdCBraWxsRXZlbnRzKCkgOiB2b2lkO1xuICBhYnN0cmFjdCByZW5kZXIoKSA6IHN0cmluZztcbn1cblxuZXhwb3J0IHsgQ29tcG9uZW50IH07XG4iLCJjbGFzcyBTdG9yZSB7XG5cbiAgcHJpdmF0ZSBfc3RhdGU7XG4gIHByaXZhdGUgX3Jvb3RSZWR1Y2VyO1xuICBwcml2YXRlIF9zdWJzY3JpYmVycztcblxuICBwdWJsaWMgY29uc3RydWN0b3Iocm9vdFJlZHVjZXIpIHtcbiAgICB0aGlzLl9yb290UmVkdWNlciA9IHJvb3RSZWR1Y2VyO1xuICAgIHRoaXMuX3N0YXRlID0ge307XG4gICAgdGhpcy5fc3Vic2NyaWJlcnMgPSBbXTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRTdGF0ZSgpIDogYW55IHtcbiAgICByZXR1cm4gdGhpcy5fc3RhdGU7XG4gIH1cblxuICBwdWJsaWMgc2V0U3RhdGUobmV3U3RhdGUpIHtcbiAgICB0aGlzLl9zdGF0ZSA9IG5ld1N0YXRlO1xuICB9XG5cbiAgcHVibGljIHB1Ymxpc2goYWN0aW9uKSB7XG5cbiAgICAvLyB1cGRhdGUgc3RhdGVcbiAgICB0aGlzLl9zdGF0ZSA9IHRoaXMuX3Jvb3RSZWR1Y2VyKHRoaXMuX3N0YXRlLCBhY3Rpb24pO1xuXG4gICAgLy8gY2FsbCBzdWJzY3JpYmVyc1xuICAgIHRoaXMuX3N1YnNjcmliZXJzLmZvckVhY2goKGhhbmRsZXIpID0+IHtcbiAgICAgICAgaGFuZGxlcigpO1xuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIHN1YnNjcmliZShoYW5kbGVyIDogRnVuY3Rpb24pIHtcbiAgICB0aGlzLl9zdWJzY3JpYmVycy5wdXNoKGhhbmRsZXIpO1xuICB9XG5cbn1cblxuZXhwb3J0IHsgU3RvcmUgfTtcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD1cIi4vaW50ZXJmYWNlcy9pbnRlcmZhY2VzLmQudHNcIiAvPlxuXG5pbXBvcnQgKiBhcyBDT05TVCBmcm9tIFwiLi9jb25zdGFudHMvY2hlc3NcIjtcbmltcG9ydCB7IEhlYWRlciB9IGZyb20gXCIuL2NvbXBvbmVudHMvaGVhZGVyXCI7XG5pbXBvcnQgeyBGb290ZXIgfSBmcm9tIFwiLi9jb21wb25lbnRzL2Zvb3RlclwiO1xuaW1wb3J0IHsgQ2hlc3NHYW1lIH0gZnJvbSBcIi4vY29tcG9uZW50cy9nYW1lXCI7XG5pbXBvcnQgKiBhcyBnYW1lVXRpbHMgZnJvbSBcIi4vdXRpbHMvZ2FtZV91dGlsc1wiO1xuaW1wb3J0ICogYXMgZmlyZWJhc2VSZWZlcmVuY2VzIGZyb20gXCIuL3V0aWxzL2ZpcmViYXNlX3JlZmVyZW5jZXNcIjtcbmltcG9ydCAqIGFzIGFjdGlvbnMgZnJvbSBcIi4vYWN0aW9ucy9jaGVzc19nYW1lX2FjdGlvbnNcIjtcbmltcG9ydCB7IHN0b3JlIH0gZnJvbSBcIi4vc3RvcmUvc3RvcmVcIjtcblxuLy8gUmVuZGVyIGxheW91dFxudmFyIGhlYWRlciA9IG5ldyBIZWFkZXIoKTtcbnZhciBmb290ZXIgPSBuZXcgRm9vdGVyKCk7XG5nYW1lVXRpbHMucmVuZGVyKGhlYWRlciwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJoZWFkZXJcIikpO1xuZ2FtZVV0aWxzLnJlbmRlcihmb290ZXIsIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZm9vdGVyXCIpKTtcblxuLy8gQ2hhbmdlIHN0YXRlIHdoZW4gdXBkYXRlcyBhcnJpdmUgZnJvbSBmaXJlYmFzZVxudmFyIHN0YXRlID0gc3RvcmUuZ2V0U3RhdGUoKTtcbnZhciBnYW1lUmVmID0gZmlyZWJhc2VSZWZlcmVuY2VzLnJlZi5jaGlsZChgZ2FtZS0ke3N0YXRlLmdhbWVJRH1gKTtcbmdhbWVSZWYub24oJ2NoaWxkX2FkZGVkJywgZnVuY3Rpb24oY2hpbGQpIHtcbiAgZGVidWdnZXI7XG4gIHZhciBndWlkID0gXCJcIjtcbiAgdmFyIHBvc2l0aW9uID0geyB4IDogMSwgeSA6IDEgfTtcbiAgdmFyIG1vdmVBY3Rpb24gPSBhY3Rpb25zLm1vdmVGaWd1cmUoZ3VpZCwgcG9zaXRpb24pO1xuICBzdG9yZS5wdWJsaXNoKG1vdmVBY3Rpb24pO1xufSk7XG5cbi8vIFJlbmRlciBnYW1lIGJvYXJkIHdoZW4gc3RhdGUgY2hhbmdlc1xuZnVuY3Rpb24gcmVmcmVzaCgpIHtcbiAgLy8gZ2V0IHN0YXRlXG4gIHZhciBzdGF0ZSA9IHN0b3JlLmdldFN0YXRlKCk7XG4gIC8vIGNyZWF0ZSBjb21wb25lbnRcbiAgdmFyIGNoZXNzR2FtZSA9IG5ldyBDaGVzc0dhbWUoc3RhdGUpO1xuICAvLyByZW5kZXIgY29tcG9uZW50XG4gIGdhbWVVdGlscy5yZW5kZXIoY2hlc3NHYW1lLCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFwcFwiKSk7XG59XG5zdG9yZS5zdWJzY3JpYmUocmVmcmVzaCk7XG5cbi8vIExhdW5jaCBnYW1lXG5zdG9yZS5wdWJsaXNoKGFjdGlvbnMuaW5pdEdhbWUoKSk7XG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9XCIuLi9pbnRlcmZhY2VzL2ludGVyZmFjZXMuZC50c1wiIC8+XG5cbmltcG9ydCAqIGFzIEFDVElPTlMgZnJvbSBcIi4uL2NvbnN0YW50cy9hY3Rpb25zXCI7XG5pbXBvcnQgKiBhcyBnYW1lVXRpbHMgZnJvbSBcIi4uL3V0aWxzL2dhbWVfdXRpbHNcIjtcbmltcG9ydCAqIGFzIGNoZXNzVXRpbHMgZnJvbSBcIi4uL3V0aWxzL2NoZXNzX3V0aWxzXCI7XG5pbXBvcnQgKiBhcyBmaXJlYmFzZVJlZmVyZW5jZXMgZnJvbSBcIi4uL3V0aWxzL2ZpcmViYXNlX3JlZmVyZW5jZXNcIjtcblxuLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbi8vIENSRUFURSBERUZBVUxUIFNUQVRFXG4vLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuXG4vLyBDcmVhdGUgbmV3IGJvYXJkXG52YXIgYm9hcmQgPSBjaGVzc1V0aWxzLm5ld0JvYXJkKCk7XG5cbi8vIEdldCBkZWZhdWx0IGZpZ3VyZXNcbnZhciBwbGF5ZXIxRmlndXJlcyA9IGNoZXNzVXRpbHMuZ2V0RGVmYXVsdFdoaXRlRmlndXJlcygpO1xudmFyIHBsYXllcjJGaWd1cmVzID0gY2hlc3NVdGlscy5nZXREZWZhdWx0QmxhY2tGaWd1cmVzKCk7XG5cbi8vIFBsYWNlIGZpZ3VyZXMgaW4gYm9hcmRcbmNoZXNzVXRpbHMucG9zaXRpb25GaWd1cmVzKGJvYXJkLCBwbGF5ZXIxRmlndXJlcyk7XG5jaGVzc1V0aWxzLnBvc2l0aW9uRmlndXJlcyhib2FyZCwgcGxheWVyMkZpZ3VyZXMpO1xuXG4vLyBpbml0IGdhbWVcbnZhciB7IGdhbWVJRCwgcGxheWVySUQsIGlzUGxheWVyT25lIH0gPSBnYW1lVXRpbHMuaW5pdEdhbWUoZmlyZWJhc2VSZWZlcmVuY2VzLmxvYmJ5UmVmKTtcblxuLy8gZGVjbGFyZSBkZWZhdWx0IHN0YXRlXG52YXIgZGVmYXVsdFN0YXRlIDogSUNoZXNzR2FtZVByb3BzID0ge1xuICBnYW1lSUQgOiBnYW1lSUQsXG4gIHBsYXllcklEIDogcGxheWVySUQsXG4gIGlzUGxheWVyT25lIDogaXNQbGF5ZXJPbmUsXG4gIGJvYXJkIDogYm9hcmQsXG4gIHBsYXllcjFGaWd1cmVzIDogcGxheWVyMUZpZ3VyZXMsXG4gIHBsYXllcjJGaWd1cmVzIDogcGxheWVyMkZpZ3VyZXNcbn07XG5cbi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4vLyBDUkVBVEUgU1RPUkVcbi8vICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG5mdW5jdGlvbiBjaGVzc1JlZHVjZXIoc3RhdGUsIGFjdGlvbikge1xuICBzd2l0Y2goYWN0aW9uLnR5cGUpIHtcbiAgICBjYXNlIEFDVElPTlMuSk9JTl9HQU1FOlxuICAgICAgcmV0dXJuIHN0YXRlO1xuICAgIGNhc2UgQUNUSU9OUy5MRUFWRV9HQU1FOlxuICAgICAgcmV0dXJuIHN0YXRlO1xuICAgIGNhc2UgQUNUSU9OUy5TRUxFQ1RfRklHVVJFOlxuICAgICAgcmV0dXJuIGNoZXNzVXRpbHMuc2VsZWN0RmlndXJlKHN0YXRlLCBhY3Rpb24pO1xuICAgIGNhc2UgQUNUSU9OUy5NT1ZFX0ZJR1VSRTpcbiAgICAgIHJldHVybiBjaGVzc1V0aWxzLm1vdmVGaWd1cmUoc3RhdGUsIGFjdGlvbik7XG4gICAgY2FzZSBBQ1RJT05TLlJFU1RPUkVfRklHVVJFOlxuICAgICAgcmV0dXJuIHN0YXRlO1xuICAgIGNhc2UgQUNUSU9OUy5JTklUX0dBTUU6XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBkZWZhdWx0U3RhdGU7XG4gIH1cbn1cblxuZXhwb3J0IHsgY2hlc3NSZWR1Y2VyIH07XG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9XCIuLi9pbnRlcmZhY2VzL2ludGVyZmFjZXMuZC50c1wiIC8+XG5cbmltcG9ydCB7IFN0b3JlIH0gZnJvbSBcIi4uL2NvcmUvc3RvcmVcIjtcbmltcG9ydCB7IGNoZXNzUmVkdWNlciB9IGZyb20gXCIuLi9yZWR1Y2Vycy9jaGVzc19yZWR1Y2VyXCI7XG5cbnZhciBzdG9yZSA9IG5ldyBTdG9yZShjaGVzc1JlZHVjZXIpO1xuXG5leHBvcnQgeyBzdG9yZSB9O1xuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPVwiLi4vaW50ZXJmYWNlcy9pbnRlcmZhY2VzLmQudHNcIiAvPlxuXG5pbXBvcnQgKiBhcyBDT05TVCBmcm9tIFwiLi4vY29uc3RhbnRzL2NoZXNzXCI7XG5pbXBvcnQgKiBhcyBnYW1lVXRpbHMgZnJvbSBcIi4vZ2FtZV91dGlsc1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gbmV3Qm9hcmQoKSA6IElDZWxsW11bXSB7XG4gIHZhciBib2FyZCA9IFtdO1xuICBmb3IodmFyIGkgPSAwOyBpIDwgQ09OU1QuQk9BUkRfTEVOR1RIOyBpKyspIHtcbiAgICB2YXIgcm93ID0gW107XG4gICAgZm9yKHZhciBqID0gMDsgaiA8IENPTlNULkJPQVJEX0xFTkdUSDsgaisrKSB7XG4gICAgICBpZihpICUgMiA9PT0gMCkge1xuICAgICAgICByb3cucHVzaCh7XG4gICAgICAgICAgZmlndXJlIDogbnVsbCxcbiAgICAgICAgICBjb2xvciA6IChqICUgMiA9PT0gMCkgPyBDT05TVC5XSElURSA6IENPTlNULkJMQUNLLFxuICAgICAgICAgIGF2YWlsYWJsZSA6IGZhbHNlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHJvdy5wdXNoKHtcbiAgICAgICAgICBmaWd1cmUgOiBudWxsLFxuICAgICAgICAgIGNvbG9yIDogKGogJSAyICE9PSAwKSA/IENPTlNULldISVRFIDogQ09OU1QuQkxBQ0ssXG4gICAgICAgICAgYXZhaWxhYmxlIDogZmFsc2VcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIGJvYXJkLnB1c2gocm93KTtcbiAgfVxuICByZXR1cm4gYm9hcmQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXREZWZhdWx0RmlndXJlcyhhcmVCbGFjaykgOiBJRmlndXJlW10ge1xuXG4gIHZhciBjb2xvciA9IGFyZUJsYWNrID8gQ09OU1QuQkxBQ0sgOiBDT05TVC5XSElURTtcbiAgdmFyIGZpcnN0Um93ID0gYXJlQmxhY2sgPyBDT05TVC5CTEFDS19GSUdVUkVTX0ZJUlNUX1JPVyA6IENPTlNULldISVRFX0ZJR1VSRVNfRklSU1RfUk9XO1xuICB2YXIgc2Vjb25kUm93ID0gYXJlQmxhY2sgPyBDT05TVC5CTEFDS19GSUdVUkVTX1NFQ09ORF9ST1cgOiBDT05TVC5XSElURV9GSUdVUkVTX1NFQ09ORF9ST1c7XG5cbiAgdmFyIGZpZ3VyZXMgOiBJRmlndXJlW10gPSBbXTtcblxuICBmb3IodmFyIGkgPSAwOyBpIDwgQ09OU1QuQk9BUkRfTEVOR1RIOyBpICsrKSB7XG4gICAgZmlndXJlcy5wdXNoKHtcbiAgICAgIGlkIDogZ2FtZVV0aWxzLmd1aWQoKSxcbiAgICAgIGNvbG9yOiBjb2xvcixcbiAgICAgIHR5cGUgOiBDT05TVC5GSUdVUkVfUEFXTixcbiAgICAgIHBvc2l0aW9uIDoge1xuICAgICAgICB5IDogc2Vjb25kUm93LFxuICAgICAgICB4IDogaVxuICAgICAgfSxcbiAgICAgIGFsaXZlIDogdHJ1ZSxcbiAgICAgIHNlbGVjdGVkIDogZmFsc2UsXG4gICAgICBoYXNNb3ZlZCA6IGZhbHNlXG4gICAgfSk7XG4gIH1cblxuICBmaWd1cmVzLnB1c2goeyBpZCA6IGdhbWVVdGlscy5ndWlkKCksIGNvbG9yOiBjb2xvciwgdHlwZSA6IENPTlNULkZJR1VSRV9LSU5HLFxuICAgIHBvc2l0aW9uIDogeyB5IDogZmlyc3RSb3csIHggOiBDT05TVC5LSU5HX0ZJR1VSRV9JTklUSUFMX0NPTFVNTiB9LFxuICAgIGFsaXZlIDogdHJ1ZSwgc2VsZWN0ZWQgOiBmYWxzZSwgaGFzTW92ZWQgOiBmYWxzZSB9KTtcblxuICBmaWd1cmVzLnB1c2goeyBpZCA6IGdhbWVVdGlscy5ndWlkKCksIGNvbG9yOiBjb2xvciwgdHlwZSA6IENPTlNULkZJR1VSRV9RVUVFTixcbiAgICBwb3NpdGlvbiA6IHsgeSA6IGZpcnN0Um93LCB4IDogQ09OU1QuUVVFRU5fRklHVVJFX0lOSVRJQUxfQ09MVU1OIH0sXG4gICAgYWxpdmUgOiB0cnVlLCBzZWxlY3RlZCA6IGZhbHNlLCBoYXNNb3ZlZCA6IGZhbHNlIH0pO1xuXG4gIGZpZ3VyZXMucHVzaCh7IGlkIDogZ2FtZVV0aWxzLmd1aWQoKSwgY29sb3I6IGNvbG9yLCB0eXBlIDogQ09OU1QuRklHVVJFX0JJU0hPUCxcbiAgICBwb3NpdGlvbiA6IHsgeSA6IGZpcnN0Um93LCB4IDogQ09OU1QuQklTSE9QX0xFRlRfRklHVVJFX0lOSVRJQUxfQ09MVU1OIH0sXG4gICAgYWxpdmUgOiB0cnVlLCBzZWxlY3RlZCA6IGZhbHNlLCBoYXNNb3ZlZCA6IGZhbHNlIH0pO1xuXG4gIGZpZ3VyZXMucHVzaCh7IGlkIDogZ2FtZVV0aWxzLmd1aWQoKSwgY29sb3I6IGNvbG9yLCB0eXBlIDogQ09OU1QuRklHVVJFX0JJU0hPUCxcbiAgICBwb3NpdGlvbiA6IHsgeSA6IGZpcnN0Um93LCB4IDogQ09OU1QuQklTSE9QX1JJR0hUX0ZJR1VSRV9JTklUSUFMX0NPTFVNTiB9LFxuICAgIGFsaXZlIDogdHJ1ZSwgc2VsZWN0ZWQgOiBmYWxzZSwgaGFzTW92ZWQgOiBmYWxzZSB9KTtcblxuICBmaWd1cmVzLnB1c2goeyBpZCA6IGdhbWVVdGlscy5ndWlkKCksIGNvbG9yOiBjb2xvciwgdHlwZSA6IENPTlNULkZJR1VSRV9LTklHSFQsXG4gICAgcG9zaXRpb24gOiB7IHkgOiBmaXJzdFJvdywgeCA6IENPTlNULktOSUdIVF9MRUZUX0ZJR1VSRV9JTklUSUFMX0NPTFVNTiB9LFxuICAgIGFsaXZlIDogdHJ1ZSwgc2VsZWN0ZWQgOiBmYWxzZSwgaGFzTW92ZWQgOiBmYWxzZSB9KTtcblxuICBmaWd1cmVzLnB1c2goeyBpZCA6IGdhbWVVdGlscy5ndWlkKCksIGNvbG9yOiBjb2xvciwgdHlwZSA6IENPTlNULkZJR1VSRV9LTklHSFQsXG4gICAgcG9zaXRpb24gOiB7IHkgOiBmaXJzdFJvdywgeCA6IENPTlNULktOSUdIVF9SSUdIVF9GSUdVUkVfSU5JVElBTF9DT0xVTU4gfSxcbiAgICBhbGl2ZSA6IHRydWUsIHNlbGVjdGVkIDogZmFsc2UsIGhhc01vdmVkIDogZmFsc2UgfSk7XG5cbiAgZmlndXJlcy5wdXNoKHsgaWQgOiBnYW1lVXRpbHMuZ3VpZCgpLCBjb2xvcjogY29sb3IsIHR5cGUgOiBDT05TVC5GSUdVUkVfVE9XRVIsXG4gICAgcG9zaXRpb24gOiB7IHkgOiBmaXJzdFJvdywgeCA6IENPTlNULlRPV0VSX0xFRlRfRklHVVJFX0lOSVRJQUxfQ09MVU1OIH0sXG4gICAgYWxpdmUgOiB0cnVlLCBzZWxlY3RlZCA6IGZhbHNlLCBoYXNNb3ZlZCA6IGZhbHNlIH0pO1xuXG4gIGZpZ3VyZXMucHVzaCh7IGlkIDogZ2FtZVV0aWxzLmd1aWQoKSwgY29sb3I6IGNvbG9yLCB0eXBlIDogQ09OU1QuRklHVVJFX1RPV0VSLFxuICAgIHBvc2l0aW9uIDogeyB5IDogZmlyc3RSb3csIHggOiBDT05TVC5UT1dFUl9SSUdIVF9GSUdVUkVfSU5JVElBTF9DT0xVTU4gfSxcbiAgICBhbGl2ZSA6IHRydWUsIHNlbGVjdGVkIDogZmFsc2UsIGhhc01vdmVkIDogZmFsc2UgfSk7XG5cbiAgcmV0dXJuIGZpZ3VyZXM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXREZWZhdWx0V2hpdGVGaWd1cmVzKCkgOiBJRmlndXJlW10ge1xuICByZXR1cm4gZ2V0RGVmYXVsdEZpZ3VyZXMoZmFsc2UpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGVmYXVsdEJsYWNrRmlndXJlcygpIDogSUZpZ3VyZVtdIHtcbiAgcmV0dXJuIGdldERlZmF1bHRGaWd1cmVzKHRydWUpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2VsZWN0RmlndXJlKHN0YXRlIDogSUNoZXNzR2FtZVByb3BzLCBhY3Rpb24pIHtcblxuICB2YXIgZmlndXJlcyA9IChzdGF0ZS5pc1BsYXllck9uZSkgPyBzdGF0ZS5wbGF5ZXIxRmlndXJlcyA6IHN0YXRlLnBsYXllcjJGaWd1cmVzO1xuICB2YXIgZmlndXJlID0gZmlndXJlcy5maWx0ZXIoKGYpID0+IHsgcmV0dXJuIGYuaWQgPT09IGFjdGlvbi5ndWlkIH0pWzBdO1xuICB2YXIgYWxyZWFkeVNlbGVjdGVkID0gZmlndXJlLnNlbGVjdGVkO1xuXG4gIC8vIHN0b3AgZGlzcGxheWluZyBhdmFpbGFibGUgbW92ZXMgaW4gYm9hcmRcbiAgdmFyIHBsYXllcjFGaWd1cmVzID0gc3RhdGUucGxheWVyMUZpZ3VyZXMubWFwKChmaWd1cmUpID0+IHtcbiAgICBmaWd1cmUuc2VsZWN0ZWQgPSBmYWxzZTsgcmV0dXJuIGZpZ3VyZTtcbiAgfSk7XG5cbiAgdmFyIHBsYXllcjJGaWd1cmVzID0gc3RhdGUucGxheWVyMkZpZ3VyZXMubWFwKChmaWd1cmUpID0+IHtcbiAgICBmaWd1cmUuc2VsZWN0ZWQgPSBmYWxzZTsgcmV0dXJuIGZpZ3VyZTtcbiAgfSk7XG5cbiAgLy8gY3JlYXRlIG5ldyBib2FyZFxuICB2YXIgYm9hcmQgPSBuZXdCb2FyZCgpO1xuXG4gIGlmKGFscmVhZHlTZWxlY3RlZCA9PT0gZmFsc2UpIHtcbiAgICBpZihzdGF0ZS5pc1BsYXllck9uZSkge1xuICAgICAgcGxheWVyMUZpZ3VyZXMgPSBwbGF5ZXIxRmlndXJlcy5tYXAoKGYpID0+IHtcbiAgICAgICAgaWYoZi5pZCA9PT0gYWN0aW9uLmd1aWQpIHtcbiAgICAgICAgICBmLnNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZjtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHBsYXllcjJGaWd1cmVzID0gcGxheWVyMkZpZ3VyZXMubWFwKChmKSA9PiB7XG4gICAgICAgIGlmKGYuaWQgPT09IGFjdGlvbi5ndWlkKSB7XG4gICAgICAgICAgZi5zZWxlY3RlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGY7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvLyBhZGRcbiAgYm9hcmQgPSBwb3NpdGlvbkZpZ3VyZXMoYm9hcmQsIHBsYXllcjFGaWd1cmVzKTtcbiAgYm9hcmQgPSBwb3NpdGlvbkZpZ3VyZXMoYm9hcmQsIHBsYXllcjJGaWd1cmVzKTtcbiAgYm9hcmQgPSBmbGFnQXZhaWxhYmxlQ2VsbHMoYm9hcmQsIHBsYXllcjFGaWd1cmVzLmNvbmNhdChwbGF5ZXIyRmlndXJlcykpO1xuXG4gIHJldHVybiB7XG4gICAgZ2FtZUlEIDogc3RhdGUuZ2FtZUlELFxuICAgIHBsYXllcklEIDogc3RhdGUucGxheWVySUQsXG4gICAgaXNQbGF5ZXJPbmUgOiBzdGF0ZS5pc1BsYXllck9uZSxcbiAgICBib2FyZCA6IGJvYXJkLFxuICAgIHBsYXllcjFGaWd1cmVzIDogcGxheWVyMUZpZ3VyZXMsXG4gICAgcGxheWVyMkZpZ3VyZXMgOiBwbGF5ZXIyRmlndXJlc1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcG9zaXRpb25GaWd1cmVzKGJvYXJkLCBmaWd1cmVzKSB7XG5cbiAgZm9yKHZhciB5ID0gMDsgeSA8IENPTlNULkJPQVJEX0xFTkdUSDsgeSsrKSB7XG4gICAgZm9yKHZhciB4ID0gMDsgeCA8IENPTlNULkJPQVJEX0xFTkdUSDsgeCsrKSB7XG4gICAgICB2YXIgbWF0Y2hlcyA9IGZpZ3VyZXMuZmlsdGVyKGZ1bmN0aW9uKGZpZ3VyZSkge1xuICAgICAgICByZXR1cm4gZmlndXJlLnBvc2l0aW9uLnggPT09IHggJiYgZmlndXJlLnBvc2l0aW9uLnkgPT09IHk7XG4gICAgICB9KTtcbiAgICAgIGlmKG1hdGNoZXMubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgIHZhciBmaWd1cmUgPSBtYXRjaGVzWzBdO1xuICAgICAgICBpZihmaWd1cmUuYWxpdmUgPT0gdHJ1ZSkgYm9hcmRbeV1beF0uZmlndXJlID0gZmlndXJlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gYm9hcmQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmbGFnQXZhaWxhYmxlQ2VsbHMoYm9hcmQsIGZpZ3VyZXMpIHtcblxuICB2YXIgc2VsZWN0ZWRGaWd1cmUgPSBmaWd1cmVzLmZpbHRlcihmdW5jdGlvbihmaWd1cmUpe1xuICAgIHJldHVybiBmaWd1cmUuc2VsZWN0ZWQgPT09IHRydWU7XG4gIH0pWzBdIHx8IG51bGw7XG5cbiAgdmFyIHNlbGVjdGVkRmlndXJlTW92ZXMgPSBnZXRGaWd1cmVBdmFpbGFibGVNb3ZlcyhzZWxlY3RlZEZpZ3VyZSwgYm9hcmQpO1xuXG4gIGZvcih2YXIgeSA9IDA7IHkgPCBDT05TVC5CT0FSRF9MRU5HVEg7IHkrKykge1xuICAgIGZvcih2YXIgeCA9IDA7IHggPCBDT05TVC5CT0FSRF9MRU5HVEg7IHgrKykge1xuICAgICAgaWYoc2VsZWN0ZWRGaWd1cmUgIT09IG51bGwpIHtcbiAgICAgICAgdmFyIG1hdGNoZWRNb3ZlcyA9IHNlbGVjdGVkRmlndXJlTW92ZXMuZmlsdGVyKChtb3ZlKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIG1vdmUueCA9PT0geCAmJiBtb3ZlLnkgPT09IHk7XG4gICAgICAgIH0pO1xuICAgICAgICBpZihtYXRjaGVkTW92ZXMubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgYm9hcmRbeV1beF0uYXZhaWxhYmxlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gYm9hcmQ7XG59XG5cbmZ1bmN0aW9uIGNlbGxDb250YWluc0ZpZ3VyZShwb3NpdGlvbiA6IElQb3NpdGlvbiwgYm9hcmQgOiBJQ2VsbFtdW10pIHtcbiAgaWYocG9zaXRpb24ueSA8IDAgfHwgcG9zaXRpb24ueSA+IDcgfHwgcG9zaXRpb24ueCA8IDAgfHwgcG9zaXRpb24ueSA+IDcpIHJldHVybiBmYWxzZTtcbiAgdmFyIGNlbGwgPSBib2FyZFtwb3NpdGlvbi55XVtwb3NpdGlvbi54XTtcbiAgcmV0dXJuIChjZWxsLmZpZ3VyZSAhPT0gbnVsbCAmJiBjZWxsLmZpZ3VyZS5hbGl2ZSAhPT0gZmFsc2UpO1xufVxuXG5mdW5jdGlvbiBjZWxsQ29udGFpbnNFbmVteUZpZ3VyZShjb2xvcjogc3RyaW5nLCBwb3NpdGlvbiA6IElQb3NpdGlvbiwgYm9hcmQgOiBJQ2VsbFtdW10pIHtcbiAgaWYocG9zaXRpb24ueSA8IDAgfHwgcG9zaXRpb24ueSA+IDcgfHwgcG9zaXRpb24ueCA8IDAgfHwgcG9zaXRpb24ueSA+IDcpIHJldHVybiBmYWxzZTtcbiAgaWYgKGNlbGxDb250YWluc0ZpZ3VyZShwb3NpdGlvbiwgYm9hcmQpID09PSBmYWxzZSkgcmV0dXJuIGZhbHNlO1xuICB2YXIgY2VsbCA9IGJvYXJkW3Bvc2l0aW9uLnldW3Bvc2l0aW9uLnhdO1xuICByZXR1cm4gKGNlbGwuZmlndXJlICE9PSBudWxsICYmIGNlbGwuZmlndXJlLmNvbG9yICE9PSBjb2xvciAmJiBjZWxsLmZpZ3VyZS5hbGl2ZSAhPT0gZmFsc2UpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RmlndXJlQXZhaWxhYmxlTW92ZXMoZmlndXJlIDogSUZpZ3VyZSwgYm9hcmQgOiBJQ2VsbFtdW10pIDogSVBvc2l0aW9uW10ge1xuXG4gIGlmKGZpZ3VyZSA9PT0gbnVsbCkgcmV0dXJuIFtdO1xuXG4gIHZhciBuZWdhdGl2ZSA9IC0xO1xuICB2YXIgcG9zaXRpdmUgPSAxO1xuICB2YXIgeU1vdmVtZW50ID0gKGZpZ3VyZS5jb2xvciA9PT0gQ09OU1QuV0hJVEUpID8gbmVnYXRpdmUgOiBwb3NpdGl2ZTtcbiAgdmFyIG1vdmVzIDogSVBvc2l0aW9uW10gPSBbXTtcblxuICBzd2l0Y2goZmlndXJlLnR5cGUpIHtcbiAgICBjYXNlIENPTlNULkZJR1VSRV9LSU5HOlxuICAgICAgYnJlYWs7XG4gICAgY2FzZSBDT05TVC5GSUdVUkVfUVVFRU46XG4gICAgICBicmVhaztcbiAgICBjYXNlIENPTlNULkZJR1VSRV9CSVNIT1A6XG4gICAgICBicmVhaztcbiAgICBjYXNlIENPTlNULkZJR1VSRV9LTklHSFQ6XG4gICAgICBicmVhaztcbiAgICBjYXNlIENPTlNULkZJR1VSRV9UT1dFUjpcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgQ09OU1QuRklHVVJFX1BBV046XG4gICAgICAvLyBwYXduIGNhbiBtb3ZlIHR3byBjZWxscyBmb3dhcmQgaWYgZmlyc3QgbW92ZVxuICAgICAgaWYoZmlndXJlLmhhc01vdmVkID09PSBmYWxzZSkge1xuICAgICAgICBtb3Zlcy5wdXNoKHsgeCA6IGZpZ3VyZS5wb3NpdGlvbi54LCB5IDogZmlndXJlLnBvc2l0aW9uLnkgKyAoeU1vdmVtZW50ICogMSkgfSk7XG4gICAgICAgIG1vdmVzLnB1c2goeyB4IDogZmlndXJlLnBvc2l0aW9uLngsIHkgOiBmaWd1cmUucG9zaXRpb24ueSArICh5TW92ZW1lbnQgKiAyKSB9KTtcbiAgICAgIH1cbiAgICAgIC8vIHBhd24gY2FuIG1vdmUgb25seSBvbmUgc3RlcCBmb3dhcmQgaWYgbm90IGFscmVhZHkgaW4gdXNlXG4gICAgICBlbHNlIHtcbiAgICAgICAgbGV0IHAgPSB7IHggOiBmaWd1cmUucG9zaXRpb24ueCwgeSA6IGZpZ3VyZS5wb3NpdGlvbi55ICsgKHlNb3ZlbWVudCAqIDEpIH07XG4gICAgICAgIGlmKGNlbGxDb250YWluc0ZpZ3VyZShwLCBib2FyZCkgPT09IGZhbHNlKSBtb3Zlcy5wdXNoKHApO1xuICAgICAgfVxuICAgICAgLy8gcGF3biBjYW4gbW92ZSBvbmUgc3RlcCBkaWFnb25hbGx5IHRvIGtpbGwgYW4gZW5lbXlcbiAgICAgIGxldCBwbCA9IHsgeCA6IChmaWd1cmUucG9zaXRpb24ueCAtIDEpLCB5IDogZmlndXJlLnBvc2l0aW9uLnkgKyAoeU1vdmVtZW50ICogMSkgfTtcbiAgICAgIGxldCBwciA9IHsgeCA6IChmaWd1cmUucG9zaXRpb24ueCArIDEpLCB5IDogZmlndXJlLnBvc2l0aW9uLnkgKyAoeU1vdmVtZW50ICogMSkgfTtcbiAgICAgIGlmKGNlbGxDb250YWluc0VuZW15RmlndXJlKGZpZ3VyZS5jb2xvciwgcGwsIGJvYXJkKSA9PT0gdHJ1ZSkgbW92ZXMucHVzaChwbCk7XG4gICAgICBpZihjZWxsQ29udGFpbnNFbmVteUZpZ3VyZShmaWd1cmUuY29sb3IsIHByLCBib2FyZCkgPT09IHRydWUpIG1vdmVzLnB1c2gocHIpO1xuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIG1vdmVzID0gW107XG4gIH1cbiAgcmV0dXJuIG1vdmVzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbW92ZUZpZ3VyZShzdGF0ZSA6IElDaGVzc0dhbWVQcm9wcywgYWN0aW9uKSB7XG5cbiAgICB2YXIgcGxheWVyRmlndXJlcyA9IChzdGF0ZS5pc1BsYXllck9uZSkgPyBzdGF0ZS5wbGF5ZXIxRmlndXJlcyA6IHN0YXRlLnBsYXllcjJGaWd1cmVzO1xuICAgIHZhciBzZWxlY3RlZEZpZ3VyZSA9IHBsYXllckZpZ3VyZXMuZmlsdGVyKChmKSA9PiB7IHJldHVybiBmLmlkID09PSBhY3Rpb24uZ3VpZCB9KVswXTtcblxuICAgIC8vIHN0b3AgZGlzcGxheWluZyBhdmFpbGFibGUgbW92ZXMgaW4gYm9hcmRcbiAgICB2YXIgcGxheWVyMUZpZ3VyZXMgPSBzdGF0ZS5wbGF5ZXIxRmlndXJlcy5tYXAoKGZpZ3VyZSkgPT4ge1xuICAgICAgZmlndXJlLnNlbGVjdGVkID0gZmFsc2U7IHJldHVybiBmaWd1cmU7XG4gICAgfSk7XG5cbiAgICB2YXIgcGxheWVyMkZpZ3VyZXMgPSBzdGF0ZS5wbGF5ZXIyRmlndXJlcy5tYXAoKGZpZ3VyZSkgPT4ge1xuICAgICAgZmlndXJlLnNlbGVjdGVkID0gZmFsc2U7IHJldHVybiBmaWd1cmU7XG4gICAgfSk7XG5cbiAgICAvLyBjcmVhdGUgbmV3IGJvYXJkXG4gICAgdmFyIGJvYXJkID0gbmV3Qm9hcmQoKTtcblxuICAgIC8vIG1vdmUgZmlndXJlXG4gICAgaWYoc3RhdGUuaXNQbGF5ZXJPbmUpIHtcbiAgICAgIHBsYXllcjFGaWd1cmVzID0gcGxheWVyMUZpZ3VyZXMubWFwKChmKSA9PiB7XG4gICAgICAgIGlmKGYuaWQgPT09IGFjdGlvbi5ndWlkKSB7XG4gICAgICAgICAgZi5wb3NpdGlvbiA9IGFjdGlvbi5wb3NpdGlvbjtcbiAgICAgICAgICBmLmhhc01vdmVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZjtcbiAgICAgIH0pO1xuICAgICAgLy8ga2lsbCBmaWd1cmVcbiAgICAgIHBsYXllcjJGaWd1cmVzID0gcGxheWVyMkZpZ3VyZXMubWFwKChmKSA9PiB7XG4gICAgICAgIGlmKGYucG9zaXRpb24ueCA9PT0gYWN0aW9uLnBvc2l0aW9uLnggJiYgZi5wb3NpdGlvbi55ID09PSBhY3Rpb24ucG9zaXRpb24ueSkge1xuICAgICAgICAgIGYuYWxpdmUgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZjtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHBsYXllcjJGaWd1cmVzID0gcGxheWVyMkZpZ3VyZXMubWFwKChmKSA9PiB7XG4gICAgICAgIGlmKGYuaWQgPT09IGFjdGlvbi5ndWlkKSB7XG4gICAgICAgICAgZi5wb3NpdGlvbiA9IGFjdGlvbi5wb3NpdGlvbjtcbiAgICAgICAgICBmLmhhc01vdmVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZjtcbiAgICAgIH0pO1xuICAgICAgLy8ga2lsbCBmaWd1cmVcbiAgICAgIHBsYXllcjFGaWd1cmVzID0gcGxheWVyMUZpZ3VyZXMubWFwKChmKSA9PiB7XG4gICAgICAgIGlmKGYucG9zaXRpb24ueCA9PT0gYWN0aW9uLnBvc2l0aW9uLnggJiYgZi5wb3NpdGlvbi55ID09PSBhY3Rpb24ucG9zaXRpb24ueSkge1xuICAgICAgICAgIGYuYWxpdmUgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZjtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIGFkZFxuICAgIGJvYXJkID0gcG9zaXRpb25GaWd1cmVzKGJvYXJkLCBwbGF5ZXIxRmlndXJlcyk7XG4gICAgYm9hcmQgPSBwb3NpdGlvbkZpZ3VyZXMoYm9hcmQsIHBsYXllcjJGaWd1cmVzKTtcblxuICAgIHJldHVybiB7XG4gICAgICBnYW1lSUQgOiBzdGF0ZS5nYW1lSUQsXG4gICAgICBwbGF5ZXJJRCA6IHN0YXRlLnBsYXllcklELFxuICAgICAgaXNQbGF5ZXJPbmUgOiBzdGF0ZS5pc1BsYXllck9uZSxcbiAgICAgIGJvYXJkIDogYm9hcmQsXG4gICAgICBwbGF5ZXIxRmlndXJlcyA6IHBsYXllcjFGaWd1cmVzLFxuICAgICAgcGxheWVyMkZpZ3VyZXMgOiBwbGF5ZXIyRmlndXJlc1xuICAgIH07XG59XG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9XCIuLi9pbnRlcmZhY2VzL2ludGVyZmFjZXMuZC50c1wiIC8+XG5cbmltcG9ydCAqIGFzIEZpcmViYXNlIGZyb20gXCJmaXJlYmFzZVwiO1xuXG52YXIgcmVmID0gbmV3IEZpcmViYXNlKCdodHRwczovL2JvaWxpbmctdG9yY2gtMjg3MS5maXJlYmFzZWlvLmNvbS8nKTtcbnZhciBsb2JieVJlZiA9IHJlZi5jaGlsZChcImxvYmJ5XCIpO1xuXG5leHBvcnQgeyByZWYsIGxvYmJ5UmVmIH07XG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9XCIuLi9pbnRlcmZhY2VzL2ludGVyZmFjZXMuZC50c1wiIC8+XG5cbmltcG9ydCB7IE1vZGFsIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvbW9kYWxcIjtcblxuZnVuY3Rpb24gZGlzcGxheU1vZGFsKHRleHQpIHtcbiAgdmFyIG1vZGFsID0gbmV3IE1vZGFsKHsgdGV4dCA6IHRleHQgfSk7XG4gIHJlbmRlcihtb2RhbCwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtb2RhbFwiKSk7XG4gICQoXCIubW9kYWxcIikubW9kYWwoKTtcbn1cblxuZnVuY3Rpb24gZ3VpZCgpIHtcbiAgZnVuY3Rpb24gczQoKSB7XG4gICAgcmV0dXJuIE1hdGguZmxvb3IoKDEgKyBNYXRoLnJhbmRvbSgpKSAqIDB4MTAwMDApXG4gICAgICAudG9TdHJpbmcoMTYpXG4gICAgICAuc3Vic3RyaW5nKDEpO1xuICB9XG4gIHJldHVybiBzNCgpICsgczQoKSArICctJyArIHM0KCkgKyAnLScgKyBzNCgpICsgJy0nICtcbiAgICBzNCgpICsgJy0nICsgczQoKSArIHM0KCkgKyBzNCgpO1xufVxuXG5mdW5jdGlvbiBpc1ZhbGlkR3VpZChndWlkIDogc3RyaW5nKSB7XG4gIHZhciBwYXR0ID0gL15bMC05YS1mQS1GXXs4fS1bMC05YS1mQS1GXXs0fS1bMC05YS1mQS1GXXs0fS1bMC05YS1mQS1GXXs0fS1bMC05YS1mQS1GXXsxMn0kLztcbiAgcmV0dXJuIHBhdHQudGVzdChndWlkKTtcbn1cblxuZnVuY3Rpb24gZ2V0R2FtZUlEKCkgOiBzdHJpbmcge1xuICB2YXIgaGFzaCA9IHdpbmRvdy5sb2NhdGlvbi5oYXNoLnJlcGxhY2UoXCIjXCIsXCJcIik7XG4gIGlmKGhhc2ggPT09IFwiXCIpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBlbHNlIGlmKGlzVmFsaWRHdWlkKGhhc2gpKSB7XG4gICAgcmV0dXJuIGhhc2g7XG4gIH1cbiAgdGhyb3cgbmV3IEVycm9yKFwiR2FtZSBpZCBtdXN0IGJlIGEgdmFsaWQgR1VJRFwiKTtcbn1cblxuZnVuY3Rpb24gaW5pdEdhbWUobG9iYnlSZWYpIHtcbiAgdmFyIGdhbWVJRCA9IGdldEdhbWVJRCgpO1xuICBpZihnYW1lSUQgPT09IG51bGwpIHtcblxuICAgIC8vIG5ldyBnYW1lXG4gICAgdmFyIGdhbWVJRCA9IGd1aWQoKTtcbiAgICB2YXIgcGxheWVyMUlEID0gZ3VpZCgpO1xuICAgIHdpbmRvdy5sb2NhdGlvbi5oYXNoID0gZ3VpZCgpO1xuICAgIGxvYmJ5UmVmLnB1c2goeyBpZCA6IGdhbWVJRCwgcGxheWVyMSA6IHBsYXllcjFJRCwgcGxheWVyMiA6IG51bGwgfSk7XG4gICAgZGlzcGxheU1vZGFsKGBJbnZpdGUgYSBmcmllbmQgdG8gam9pbiBieSBzaGFyaW5nIHRoZSBmb2xsb3dpbmcgbGluazogJHt3aW5kb3cubG9jYXRpb24uaHJlZn1gKTtcbiAgICByZXR1cm4geyBnYW1lSUQgOiBnYW1lSUQsIHBsYXllcklEIDogcGxheWVyMUlELCBpc1BsYXllck9uZSA6IHRydWUgfTtcbiAgfVxuICBlbHNlIHtcblxuICAgIC8vIEpvaW4gZ2FtZVxuICAgIHZhciBwbGF5ZXIySUQgPSBndWlkKCk7XG4gICAgbG9iYnlSZWYudXBkYXRlKHsgcGxheWVyMiA6IHBsYXllcjJJRCB9KTtcbiAgICBkaXNwbGF5TW9kYWwoYFlvdSBoYXZlIHN1Y2Nlc3NmdWxseSBqb2luZWQgYSBnYW1lIWApO1xuICAgIHJldHVybiB7IGdhbWVJRCA6IGdhbWVJRCwgcGxheWVySUQgOiBwbGF5ZXIySUQsIGlzUGxheWVyT25lIDogZmFsc2UgfTtcbiAgfVxufVxuXG5mdW5jdGlvbiByZW5kZXIoY29tcG9uZW50LCBzZWxlY3Rvcikge1xuICBzZWxlY3Rvci5pbm5lckhUTUwgPSBjb21wb25lbnQucmVuZGVyKCk7XG4gIGNvbXBvbmVudC5pbml0RXZlbnRzKCk7XG59XG5cbmV4cG9ydCB7IGd1aWQsIHJlbmRlciwgZ2V0R2FtZUlELCBpbml0R2FtZSB9O1xuIl19
